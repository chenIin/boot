window.jeeplus||(jeeplus={}),jeeplus.version="5.2.3",jeeplus.codebase="./",jeeplus.name="core",jeeplus.cdn="//cdn.jeeplus.com",jeeplus.clone=function(e){var t=jeeplus.clone.a;return t.prototype=e,new t},jeeplus.clone.a=function(){},jeeplus.extend=function(e,t,i){if(e.$protoWait)return jeeplus.PowerArray.insertAt.call(e.$protoWait,t,1),e;for(var s in t)s in e&&!i||(e[s]=t[s]);return t.defaults&&jeeplus.extend(e.defaults,t.defaults),t.$init&&t.$init.call(e),e},jeeplus.copy=function(e){var t;for(var i in 1<arguments.length?(t=e,e=arguments[1]):t=jeeplus.isArray(e)?[]:{},e){var s=e[i];!s||"object"!=typeof s||s instanceof RegExp?t[i]=s:jeeplus.isDate(s)?t[i]=new Date(s):jeeplus.env.esModern&&(s instanceof Map||s instanceof Set||s instanceof WeakMap||s instanceof WeakSet)?t[i]=s:(t[i]=jeeplus.isArray(s)?[]:{},jeeplus.copy(t[i],s))}return t},jeeplus.single=function(t){var i=null;return function(e){return i||(i=new t({})),i.c&&i.c.apply(i,arguments),i}},jeeplus.protoUI=function(){var n=arguments[0].name,l=function(e){if(!l)return jeeplus.ui[n].prototype;var t=l.$protoWait;if(t){for(var i=[t[0]],s=1;s<t.length;s++)i[s]=t[s],i[s].$protoWait&&(i[s]=i[s].call(jeeplus,i[s].name)),i[s].prototype&&i[s].prototype.name&&(jeeplus.ui[i[s].prototype.name]=i[s]);if(jeeplus.ui[n]=jeeplus.proto.apply(jeeplus,i),l.d)for(s=0;s<l.d.length;s++)jeeplus.type(jeeplus.ui[n],l.d[s]);l=t=null}return this!=jeeplus?new jeeplus.ui[n](e):jeeplus.ui[n]};return l.$protoWait=Array.prototype.slice.call(arguments,0),jeeplus.ui[n]=l},jeeplus.proto=function(){for(var e=arguments,t=e[0],i=!!t.$init,s=[],n=e.length-1;0<n;n--){if("function"==typeof e[n]&&(e[n]=e[n].prototype),e[n].$init&&s.push(e[n].$init),e[n].defaults){var l=e[n].defaults;for(var a in t.defaults||(t.defaults={}),l)jeeplus.isUndefined(t.defaults[a])&&(t.defaults[a]=l[a])}if(e[n].type&&t.type)for(var a in e[n].type)t.type[a]||(t.type[a]=e[n].type[a]);for(var r in e[n])t[r]||!1===t[r]||(t[r]=e[n][r])}i&&s.push(t.$init),t.$init=function(){for(var e=0;e<s.length;e++)s[e].apply(this,arguments)},t.$skin&&t.$skin();function o(e){this.$ready=[],this.$init(e),this.e&&this.e(e,this.defaults);for(var t=0;t<this.$ready.length;t++)this.$ready[t].call(this)}return o.prototype=t,t=e=null,o},jeeplus.bind=function(e,t){return function(){return e.apply(t,arguments)}},jeeplus.require=function(s,e,t){var i=jeeplus.promise.defer();if(e&&!0!==e&&(i=i.then(function(){e.call(t||this)})),jeeplus.require.disabled)return i.resolve(),i;if("string"==typeof s){if(!0!==jeeplus.f[s]){var n=s;if(s.toString().match(/^([a-z]+\:)*\/\//i)||(n=jeeplus.codebase+s),".css"==s.substr(s.length-4)){var l=jeeplus.html.create("LINK",{type:"text/css",rel:"stylesheet",href:n});return document.getElementsByTagName("head")[0].appendChild(l),i.resolve(),i}!0===e?(jeeplus.exec(jeeplus.ajax().sync().get(n).responseText),jeeplus.f[s]=!0):jeeplus.f[s]?jeeplus.f[s].push(i):(jeeplus.f[s]=[i],jeeplus.ajax(n,function(e){jeeplus.exec(e);var t=jeeplus.f[s];jeeplus.f[s]=!0;for(var i=0;i<t.length;i++)t[i].resolve()}))}else i.resolve();return i}var a=s.length||0;if(a){(o=function(){a?(a--,jeeplus.require(s[s.length-a-1],o,t)):i.resolve()})()}else{for(var r in s)a++;var o=function(){0===--a&&i.resolve()};for(var r in s)jeeplus.require(r,o,t)}},jeeplus.f={},jeeplus.exec=function(e){window.execScript?window.execScript(e):window.eval(e)},jeeplus.wrap=function(t,i){return t?function(){var e=t.apply(this,arguments);return i.apply(this,arguments),e}:i},jeeplus.isUndefined=function(e){return void 0===e},jeeplus.delay=function(t,i,s,e){return window.setTimeout(function(){if(!i||!i.$destructed){var e=t.apply(i,s||[]);return t=i=s=null,e}},e||1)},jeeplus.once=function(e){var t=!0;return function(){t&&(t=!1,e.apply(this,arguments))}},jeeplus.uid=function(){return this.g||(this.g=(new Date).valueOf()),this.g++,this.g},jeeplus.toNode=function(e){return"string"==typeof e?document.getElementById(e):e},jeeplus.toArray=function(e){return jeeplus.extend(e||[],jeeplus.PowerArray,!0)},jeeplus.toFunctor=function(str,scope){if("string"!=typeof str)return str;var method=str.replace("()","");return scope&&scope[method]?scope[method]:window[method]||eval(str)},jeeplus.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},jeeplus.isDate=function(e){return e instanceof Date},jeeplus.stringify=function(e){var t,i=Date.prototype.toJSON;return Date.prototype.toJSON=function(){return jeeplus.i18n.parseFormatStr(this)},t=e instanceof Date?e.toJSON():JSON.stringify(e),Date.prototype.toJSON=i,t},jeeplus.h={},jeeplus.UE=function(e,t,i,s){(s=s||{}).inner=!0,jeeplus.event(e,t,i,s)},jeeplus.event=function(e,t,i,s){s=s||{},e=jeeplus.toNode(e);var n=s.id||jeeplus.uid();s.bind&&(i=jeeplus.bind(i,s.bind));var l=[e,t,i,s.capture];return s.inner||(jeeplus.h[n]=l),e.addEventListener?e.addEventListener(t,i,!!s.capture):e.attachEvent&&e.attachEvent("on"+t,l[2]=function(){return i.apply(e,arguments)}),n},jeeplus.eventRemove=function(e){if(e){var t=jeeplus.h[e];t[0].removeEventListener?t[0].removeEventListener(t[1],t[2],!!t[3]):t[0].detachEvent&&t[0].detachEvent("on"+t[1],t[2]),delete this.h[e]}},jeeplus.EventSystem={$init:function(){this.i||(this.i={},this.j={},this.k={})},blockEvent:function(){this.i.l=!0},unblockEvent:function(){this.i.l=!1},mapEvent:function(e){jeeplus.extend(this.k,e,!0)},on_setter:function(e){if(e)for(var t in e){var i=jeeplus.toFunctor(e[t],this.$scope),s=t.indexOf("->");-1!==s?this[t.substr(0,s)].attachEvent(t.substr(s+2),jeeplus.bind(i,this)):this.attachEvent(t,i)}},callEvent:function(e,t){if(this.i.l)return!0;e=e.toLowerCase();var i=this.i[e.toLowerCase()],s=!0;if(i)for(var n=0;n<i.length;n++)!1===i[n].apply(this,t||[])&&(s=!1);if(this.k[e]){var l=this.k[e];l.$eventSource=this,l.callEvent(e,t)||(s=!1),l.$eventSource=null}return s},attachEvent:function(e,t,i){e=e.toLowerCase(),i=i||jeeplus.uid(),t=jeeplus.toFunctor(t,this.$scope);var s=this.i[e]||jeeplus.toArray();return arguments[3]?s.unshift(t):s.push(t),this.i[e]=s,this.j[i]={f:t,t:e},i},detachEvent:function(e){if(this.j[e]){var t=this.j[e].t,i=this.j[e].f;this.i[t].remove(i),delete this.j[e]}else{var s=(e+"").toLowerCase();this.i[s]&&(this.i[s]=jeeplus.toArray())}},hasEvent:function(e){e=e.toLowerCase();var t=this.i[e];if(t&&t.length)return!0;var i=this.k[e];return!!i&&i.hasEvent(e)}},jeeplus.extend(jeeplus,jeeplus.EventSystem,!0),jeeplus.PowerArray={removeAt:function(e,t){0<=e&&this.splice(e,t||1)},remove:function(e){this.removeAt(this.find(e))},insertAt:function(e,t){if(t||0===t){var i=this.splice(t,this.length-t);this[t]=e,this.push.apply(this,i)}else this.push(e)},find:function(e){for(var t=0;t<this.length;t++)if(e==this[t])return t;return-1},each:function(e,t){for(var i=0;i<this.length;i++)e.call(t||this,this[i])},map:function(e,t){for(var i=0;i<this.length;i++)this[i]=e.call(t||this,this[i]);return this},filter:function(e,t){for(var i=0;i<this.length;i++)e.call(t||this,this[i])||(this.splice(i,1),i--);return this}},jeeplus.env={},function(){jeeplus.env.strict=!!window.jeeplus_strict,jeeplus.env.https="https:"===document.location.protocol,jeeplus.env.esModern=!!Object.assign;var e=navigator.userAgent;if((-1!=e.indexOf("Mobile")||-1!=e.indexOf("Windows Phone"))&&(jeeplus.env.mobile=!0),(jeeplus.env.mobile||-1!=e.indexOf("iPad")||-1!=e.indexOf("Android"))&&(jeeplus.env.touch=!0),-1!=e.indexOf("Opera"))jeeplus.env.isOpera=!0;else{if(jeeplus.env.isIE=!!document.all||-1!==e.indexOf("Trident"),jeeplus.env.isIE)8==parseFloat(navigator.appVersion.split("MSIE")[1])&&(jeeplus.env.isIE8=!0);jeeplus.env.isEdge=-1!=e.indexOf("Edge"),jeeplus.env.isFF=-1!=e.indexOf("Firefox"),jeeplus.env.isWebKit=-1!=e.indexOf("KHTML"),jeeplus.env.isSafari=jeeplus.env.isWebKit&&-1!=e.indexOf("Mac")&&-1==e.indexOf("Chrome"),(jeeplus.env.isIE||jeeplus.env.isEdge||jeeplus.env.isFF)&&(jeeplus.env.maxHTMLElementSize=1e7),jeeplus.env.isSafari&&(jeeplus.env.maxHTMLElementSize=1e8)}-1!=e.toLowerCase().indexOf("android")&&(jeeplus.env.isAndroid=!0,-1!=e.toLowerCase().indexOf("trident")&&(jeeplus.env.isAndroid=!1,jeeplus.env.isIEMobile=!0)),jeeplus.env.transform=!1,jeeplus.env.transition=!1;for(var t=-1,i=["","webkit","Moz","O","ms"],s=document.createElement("DIV"),n=0;n<i.length;n++){var l=i[n]?i[n]+"Transform":"transform";if(void 0!==s.style[l]){t=n;break}}if(-1<t){jeeplus.env.cssPrefix=["","-webkit-","-Moz-","-o-","-ms-"][t];var a=jeeplus.env.jsPrefix=i[t];jeeplus.env.transform=a?a+"Transform":"transform",jeeplus.env.transition=a?a+"Transition":"transition",jeeplus.env.transitionDuration=a?a+"TransitionDuration":"transitionDuration",s.style[jeeplus.env.transform]="translate3d(0,0,0)",jeeplus.env.translate=s.style[jeeplus.env.transform]?"translate3d":"translate",jeeplus.env.transitionEnd="-Moz-"==jeeplus.env.cssPrefix?"transitionend":a?a+"TransitionEnd":"transitionend"}jeeplus.env.pointerevents=!jeeplus.env.isIE||null!==new RegExp("Trident/.*rv:11").exec(e)}(),jeeplus.env.svg=document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),jeeplus.env.svganimation=document.implementation.hasFeature("https://www.w3.org/TR/SVG11/feature#SVG-animation","1.1"),jeeplus.html={m:0,ky:{},denySelect:function(){jeeplus.m||(jeeplus.m=document.onselectstart),document.onselectstart=jeeplus.html.stopEvent},allowSelect:function(){0!==jeeplus.m&&(document.onselectstart=jeeplus.m||null),jeeplus.m=0},index:function(e){for(var t=0;e=e.previousSibling;)t++;return t},n:{},createCss:function(e,t){var i="";for(var s in t=t||"",e)i+=s+":"+e[s]+";";var n=this.n[i+t];return n||(n="s"+jeeplus.uid(),this.addStyle("."+n+(t||"")+"{"+i+"}"),this.n[i+t]=n),n},addStyle:function(e,t){var i=t?this.ky[t]:this.ky.default;i||((i=document.createElement("style")).setAttribute("type","text/css"),i.setAttribute("media","screen,print"),document.getElementsByTagName("head")[0].appendChild(i),t?this.ky[t]=i:this.ky.default=i),i.styleSheet?i.styleSheet.cssText+=e:i.appendChild(document.createTextNode(e))},removeStyle:function(e){var t=this.ky[e||"default"];t&&(t.innerHTML="")},create:function(e,t,i){t=t||{};var s=document.createElement(e);for(var n in t)s.setAttribute(n,t[n]);return t.style&&(s.style.cssText=t.style),t.class&&(s.className=t.class),i&&(s.innerHTML=i),s},getValue:function(e){return(e=jeeplus.toNode(e))?jeeplus.isUndefined(e.value)?e.innerHTML:e.value:""},remove:function(e){if(e instanceof Array)for(var t=0;t<e.length;t++)this.remove(e[t]);else e&&e.parentNode&&e.parentNode.removeChild(e)},insertBefore:function(e,t,i){e&&(t&&t.parentNode?t.parentNode.insertBefore(e,t):i.appendChild(e))},locate:function(e,t){var i;for(i=e.tagName?e:(e=e||event).target||e.srcElement;i;){if(i.getAttribute){var s=i.getAttribute(t);if(s)return s}i=i.parentNode}return null},offset:function(e){if(e.getBoundingClientRect){var t=e.getBoundingClientRect(),i=document.body,s=document.documentElement,n=window.pageYOffset||s.scrollTop||i.scrollTop,l=window.pageXOffset||s.scrollLeft||i.scrollLeft,a=s.clientTop||i.clientTop||0,r=s.clientLeft||i.clientLeft||0,o=t.top+n-a,h=t.left+l-r;return{y:Math.round(o),x:Math.round(h),width:e.offsetWidth,height:e.offsetHeight}}for(o=0,h=0;e;)o+=parseInt(e.offsetTop,10),h+=parseInt(e.offsetLeft,10),e=e.offsetParent;return{y:o,x:h,width:e.offsetHeight,height:e.offsetWidth}},posRelative:function(e){return e=e||event,jeeplus.isUndefined(e.offsetX)?{x:e.layerX,y:e.layerY}:{x:e.offsetX,y:e.offsetY}},pos:function(e){if((e=e||event).touches&&e.touches[0]&&(e=e.touches[0]),e.pageX||e.pageY)return{x:e.pageX,y:e.pageY};var t=jeeplus.env.isIE&&"BackCompat"!=document.compatMode?document.documentElement:document.body;return{x:e.clientX+t.scrollLeft-t.clientLeft,y:e.clientY+t.scrollTop-t.clientTop}},preventEvent:function(e){return e&&e.preventDefault&&e.preventDefault(),e&&(e.returnValue=!1),jeeplus.html.stopEvent(e)},stopEvent:function(e){return(e=e||event).stopPropagation&&e.stopPropagation(),!(e.cancelBubble=!0)},triggerEvent:function(e,t,i){if(document.createEventObject){var s=document.createEventObject();e.fireEvent&&e.fireEvent("on"+i,s)}else{(s=document.createEvent(t)).initEvent(i,!0,!0),e.dispatchEvent&&e.dispatchEvent(s)}},addCss:function(e,t,i){i&&-1!==e.className.indexOf(t)||(e.className+=" "+t)},removeCss:function(e,t){e.className=e.className.replace(RegExp(" "+t,"g"),"")},getTextSize:function(e,t,i){var s=jeeplus.html.create("DIV",{class:"jeeplus_view jeeplus_measure_size "+(t||"")},"");s.style.cssText="height:auto;visibility:hidden; position:absolute; top:0px; left:0px; overflow:hidden;"+(i?"width:"+i+"px;":"width:auto;white-space:nowrap;"),document.body.appendChild(s);for(var n="object"!=typeof e?[e]:e,l=(i=0,0),a=0;a<n.length;a++)s.innerHTML=n[a],i=Math.max(i,s.offsetWidth),l=Math.max(l,s.offsetHeight);return jeeplus.html.remove(s),{width:i,height:l}},download:function(e,t){var i=!1;if("object"==typeof e){if(window.navigator.msSaveBlob)return window.navigator.msSaveBlob(e,t);e=window.URL.createObjectURL(e),i=!0}var s=document.createElement("a");s.href=e,s.download=t,document.body.appendChild(s),s.click(),jeeplus.delay(function(){i&&window.URL.revokeObjectURL(e),document.body.removeChild(s),s.remove()})},TC:function(e){if(!e)return"";var t=e.className||"";return t.baseVal&&(t=t.baseVal),t.indexOf||(t=""),t},setSelectionRange:function(e,t,i){if(t=t||0,i=i||t,e.focus(),e.setSelectionRange)e.setSelectionRange(t,i);else{var s=e.createTextRange();s.collapse(!0),s.moveEnd("character",i),s.moveStart("character",t),s.select()}},getSelectionRange:function(e){if("selectionStart"in e)return{start:e.selectionStart||0,end:e.selectionEnd||0};e.focus();var t=document.selection.createRange().getBookmark(),i=e.createTextRange();i.moveToBookmark(t);var s=i.text.length;i.collapse(!0),i.moveStart("character",-e.value.length);var n=i.text.length;return{start:n,end:n+s}}},jeeplus.ready=function(e){this.o?e.call():this.p.push(e)},jeeplus.p=[],function(){var e=document.getElementsByTagName("SCRIPT");e.length&&((e=(e[e.length-1].getAttribute("src")||"").split("/")).splice(e.length-1,1),jeeplus.codebase=e.slice(0,e.length).join("/")+"/");function t(){jeeplus.env.isIE&&(document.body.className+=" jeeplus_ie"),jeeplus.callEvent("onReady",[])}function i(){jeeplus.o=!0,window.jeeplus_ready&&jeeplus.isArray(jeeplus_ready)&&(jeeplus.p=jeeplus_ready.concat(jeeplus.p));for(var e=0;e<jeeplus.p.length;e++)jeeplus.p[e].call();jeeplus.p=[]}jeeplus.attachEvent("onReady",function(e){e?i():jeeplus.delay(i)}),"complete"==document.readyState?t():jeeplus.event(window,"load",t)}(),jeeplus.locale=jeeplus.locale||{},jeeplus.ready(function(){jeeplus.event(document.body,"click",function(e){jeeplus.callEvent("onClick",[e||event])})}),jeeplus.editStop=function(){jeeplus.callEvent("onEditEnd",[])},function(e){function u(e){t.setImmediate?setImmediate(e):t.importScripts||!t.addEventListener?setTimeout(e):(s[++i]=e,t.postMessage(i,"*"))}function c(e){"use strict";function t(e,t,i,s){if(2==a)return s();if("object"!=typeof r&&"function"!=typeof r||"function"!=typeof e)s();else try{var n=0;e.call(r,function(e){n++||(r=e,t())},function(e){n++||(r=e,i())})}catch(e){r=e,i()}}function i(){var e;try{e=r&&r.then}catch(e){return r=e,a=2,i()}t(e,function(){a=1,i()},function(){a=2,i()},function(){try{1==a&&"function"==typeof s?r=s(r):2==a&&"function"==typeof n&&(r=n(r),a=1)}catch(e){return r=e,h()}r==l?(r=TypeError(),h()):t(e,function(){h(3)},h,function(){h(1==a&&3)})})}if("function"!=typeof e&&null!=e)throw TypeError();if("object"!=typeof this||this&&this.then)throw TypeError();var s,n,l=this,a=0,r=0,o=[];(l.promise=l).resolve=function(e){return s=l.fn,n=l.er,a||(r=e,a=1,u(i)),l},l.reject=function(e){return s=l.fn,n=l.er,a||(r=e,a=2,u(i)),l},l.fG=1,l.then=function(e,t){if(1!=this.fG)throw TypeError();var i=new c;return i.fn=e,i.er=t,3==a?i.resolve(r):4==a?i.reject(r):o.push(i),i},l.catch=function(e){return l.then(null,e)},l.fail=function(e){return l.then(null,e)};var h=function(e){a=e||4;for(var t=0;t<o.length;t++){var i=o[t];3==a&&i.resolve(r)||i.reject(r)}};try{"function"==typeof e&&e(l.resolve,l.reject)}catch(e){l.reject(e)}return l}var t=this,i=1,s={},n=!1;!t.setImmediate&&t.addEventListener&&t.addEventListener("message",function(e){if(e.source==t)if(n)u(s[e.data]);else{n=!0;try{s[e.data]()}catch(e){}delete s[e.data],n=!1}}),c.resolve=function(t){if(1!=this.fG)throw TypeError();return t instanceof c?t:new c(function(e){e(t)})},c.reject=function(i){if(1!=this.fG)throw TypeError();return new c(function(e,t){t(i)})},c.all=function(s){if(1!=this.fG)throw TypeError();if(!(s instanceof Array))return c.reject(TypeError());var n=new c;return function i(e,t){return t?n.resolve(t):e?n.reject(e):(0==s.reduce(function(e,t){return t&&t.then?e+1:e},0)&&n.resolve(s),void s.map(function(e,t){e&&e.then&&e.then(function(e){return s[t]=e,i(),e},i)}))}(),n},c.race=function(s){if(1!=this.fG)throw TypeError();if(!(s instanceof Array))return c.reject(TypeError());if(0==s.length)return new c;var n=new c;return function i(e,t){return t?n.resolve(t):e?n.reject(e):(0==s.reduce(function(e,t){return t&&t.then?e+1:e},0)&&n.resolve(s),void s.map(function(e,t){e&&e.then&&e.then(function(e){i(null,e)},i)}))}(),n},c.fG=1,c.defer=function(){return new c(null)},e.promise=c}(jeeplus),function(){function i(e,t){this.kD={},this.lD=[],this.mD=e,this.U="",t?this.nD(t):this.o=jeeplus.ajax(e).then(function(e){return e.text()}).then(jeeplus.bind(function(e){return e=e.split("/*api*/")[1],this.nD(JSON.parse(e)),this.kD},this))}function s(e,t){return new i(e,t).oD()}var r="__jeeplus_remote_error";i.prototype={nD:function(e){if(e.$key&&(this.U=e.$key),e.$vars)for(var t in e.$vars)this.kD[t]=e.$vars[t];this.df(e,this.kD,"")},df:function(e,t,i){for(var s in e)if("$key"!==s&&"$vars"!==s){var n=e[s];if("object"==typeof n){var l=t[s]={};this.df(n,l,i+s+".")}else t[s]=this.pD(this,i+s)}},qD:function(e,t){var i=this.rD(this,e,t);return this.lD.push(i),this.sD(),i},sD:function(){this.tD||(this.tD=setTimeout(jeeplus.bind(this.uD,this),1))},uD:function(){for(var e=[],n=this.lD,t=0;t<this.lD.length;t++){var i=this.lD[t];i.$sync?(n.splice(t,1),t--):e.push({name:i.$name,args:i.$args})}if(n.length){var s=jeeplus.ajax(),l=this.vD(e);jeeplus.callEvent("onBeforeRemoteCall",[s,l,{}]);var a=s.post(this.mD,l).then(function(e){for(var t=e.json().data,i=0;i<t.length;i++){e=t[i];var s=t[i]&&t[i][r];s?(jeeplus.callEvent("onRemoteError",[s]),n[i].reject(s)):n[i].resolve(e)}},function(e){for(var t=0;t<n.length;t++)n[t].reject(e);throw e});jeeplus.callEvent("onAfterRemoteCall",[a])}this.lD=[],this.tD=null},H:function(){var e=null;this.$sync=!0;var t=[{name:this.$name,args:this.$args}];try{var i=jeeplus.ajax(),s=this.$context.vD(t);jeeplus.callEvent("onBeforeRemoteCall",[i,s,{sync:!0}]);var n=i.sync().post(this.$context.mD,s);jeeplus.callEvent("onAfterRemoteCall",[null]),(e=JSON.parse(n.responseText).data[0])[r]&&(e=null)}catch(e){}return e},rD:function(e,t,i){var s=jeeplus.promise.defer();return s.sync=e.H,s.$name=t,s.$args=i,s.$context=this,s},pD:function(e,t){return function(){return e.qD(t,[].slice.call(arguments))}},oD:function(){return this.o||this.kD},vD:function(e){return{key:this.U,payload:e}}},jeeplus.remote=function(e,t){if("object"!=typeof e)return s(e,t);var i=document.getElementsByTagName("script");t=e,e=i[i.length-1].src,jeeplus.remote=s(e,t)}}(),jeeplus.skin={},jeeplus.skin.air={topLayout:"wide",barHeight:34,tabbarHeight:36,rowHeight:34,toolbarHeight:22,listItemHeight:28,inputHeight:34,inputPadding:2,menuHeight:34,menuMargin:0,labelTopHeight:16,inputSpacing:4,borderWidth:1,sliderHandleWidth:14,sliderPadding:10,sliderBorder:1,vSliderPadding:13,vSliderHeight:100,switchHeight:22,switchWidth:50,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:4,form:8},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:8},tabMargin:0,popupPadding:8,calendarHeight:70,padding:0,optionHeight:27},jeeplus.skin.aircompact={topLayout:"wide",barHeight:24,tabbarHeight:26,rowHeight:26,toolbarHeight:22,listItemHeight:28,inputHeight:29,inputPadding:2,menuHeight:25,menuMargin:0,labelTopHeight:16,inputSpacing:4,borderWidth:1,sliderHandleWidth:12,sliderPadding:10,sliderBorder:1,vSliderPadding:12.5,vSliderHeight:100,switchHeight:20,switchWidth:40,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:4,form:8},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:8},tabMargin:0,popupPadding:8,calendarHeight:70,padding:0,optionHeight:23},jeeplus.skin.web={name:"web",topLayout:"space",barHeight:28,tabbarHeight:30,rowHeight:30,toolbarHeight:22,listItemHeight:28,inputHeight:28,inputPadding:2,menuMargin:0,menuHeight:27,labelTopHeight:16,inputSpacing:4,borderWidth:1,sliderHandleWidth:11,sliderPadding:10,sliderBorder:1,vSliderPadding:10,vSliderHeight:100,switchHeight:19,switchWidth:40,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:9},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:8,accordion:0},tabMargin:3,tabTopOffset:3,popupPadding:8,calendarHeight:70,padding:0,optionHeight:22},jeeplus.skin.clouds={topLayout:"wide",barHeight:36,tabbarHeight:46,rowHeight:34,toolbarHeight:22,listItemHeight:32,inputHeight:30,inputPadding:2,menuHeight:34,labelTopHeight:16,inputSpacing:4,borderWidth:1,sliderHandleWidth:12,sliderPadding:10,sliderBorder:1,vSliderPadding:11,vSliderHeight:100,switchHeight:22,switchWidth:50,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:4,form:8},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:8},tabMargin:2,tabOffset:0,tabBottomOffset:10,popupPadding:8,calendarHeight:70,padding:0},jeeplus.skin.terrace={topLayout:"space",barHeight:37,tabbarHeight:39,rowHeight:38,toolbarHeight:22,listItemHeight:28,inputHeight:30,inputPadding:2,menuMargin:0,menuHeight:32,labelTopHeight:16,inputSpacing:4,borderWidth:1,sliderHandleWidth:14,sliderPadding:10,sliderBorder:1,vSliderPadding:14,vSliderHeight:100,switchHeight:20,switchWidth:50,layoutMargin:{space:20,wide:20,clean:0,head:4,line:-1,toolbar:4,form:8},layoutPadding:{space:20,wide:0,clean:0,head:0,line:0,toolbar:4,form:8},tabMargin:2,tabOffset:0,popupPadding:8,calendarHeight:70,padding:17,optionHeight:24},jeeplus.skin.metro={topLayout:"space",barHeight:36,tabbarHeight:46,rowHeight:34,toolbarHeight:36,listItemHeight:32,inputHeight:30,buttonHeight:45,inputPadding:2,menuHeight:36,labelTopHeight:16,inputSpacing:4,borderWidth:1,sliderHandleWidth:14,sliderPadding:10,sliderBorder:1,vSliderPadding:13,vSliderHeight:100,switchHeight:22,switchWidth:50,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:9},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:0,form:8,accordion:0},tabMargin:2,tabOffset:0,tabBottomOffset:10,popupPadding:8,calendarHeight:70,padding:0,optionHeight:23},jeeplus.skin.light={topLayout:"space",barHeight:36,tabbarHeight:46,rowHeight:32,toolbarHeight:36,listItemHeight:32,inputHeight:34,buttonHeight:45,inputPadding:3,menuHeight:36,labelTopHeight:16,inputSpacing:4,borderWidth:1,sliderHandleWidth:14,sliderPadding:10,sliderBorder:1,vSliderPadding:13,vSliderHeight:100,switchHeight:22,switchWidth:50,layoutMargin:{space:15,wide:15,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:10},layoutPadding:{space:15,wide:0,clean:0,head:0,line:0,toolbar:0,form:8,accordion:0},tabMargin:2,tabOffset:0,tabBottomOffset:10,popupPadding:8,calendarHeight:70,padding:0,optionHeight:27},jeeplus.skin.glamour={topLayout:"space",barHeight:39,tabbarHeight:39,rowHeight:32,toolbarHeight:39,listItemHeight:32,inputHeight:34,buttonHeight:34,inputPadding:3,menuHeight:36,labelTopHeight:16,inputSpacing:4,borderWidth:1,sliderHandleWidth:13,sliderPadding:10,sliderBorder:1,vSliderPadding:13,vSliderHeight:100,switchHeight:22,switchWidth:50,layoutMargin:{space:15,wide:15,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:10},layoutPadding:{space:15,wide:0,clean:0,head:0,line:0,toolbar:3,form:8,accordion:0},tabMargin:1,tabOffset:0,tabBottomOffset:1,popupPadding:8,calendarHeight:70,padding:0,optionHeight:27},jeeplus.skin.touch={topLayout:"space",barHeight:42,tabbarHeight:50,rowHeight:42,toolbarHeight:42,listItemHeight:42,inputHeight:42,inputPadding:4,menuHeight:42,labelTopHeight:24,unitHeaderHeight:34,inputSpacing:4,borderWidth:1,sliderHandleWidth:18,sliderPadding:10,sliderBorder:1,vSliderPadding:17,vSliderHeight:100,switchHeight:22,switchWidth:50,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:0,form:0,accordion:9},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:8,accordion:0},tabMargin:2,tabOffset:0,tabBottomOffset:10,calendar:{headerHeight:70,timepickerHeight:35,height:310,width:300},padding:0,customCheckbox:!0,customRadio:!0,popupPadding:8,optionHeight:32},jeeplus.skin.flat={topLayout:"space",barHeight:46,tabbarHeight:46,rowHeight:34,toolbarHeight:46,listItemHeight:34,inputHeight:38,buttonHeight:38,inputPadding:3,menuHeight:34,labelTopHeight:22,propertyItemHeight:28,inputSpacing:4,borderWidth:1,sliderHandleWidth:14,sliderPadding:10,sliderBorder:1,vSliderPadding:15,vSliderHeight:100,switchHeight:22,switchWidth:50,layoutMargin:{space:10,wide:10,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:10},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:17,accordion:0},tabMargin:4,tabOffset:0,tabBottomOffset:6,tabTopOffset:1,customCheckbox:!0,customRadio:!0,popupPadding:8,calendarHeight:70,padding:0,accordionType:"accordion",optionHeight:32},jeeplus.skin.compact={topLayout:"space",barHeight:34,tabbarHeight:34,rowHeight:24,toolbarHeight:34,listItemHeight:28,inputHeight:30,buttonHeight:30,inputPadding:3,menuHeight:28,labelTopHeight:16,inputSpacing:4,borderWidth:1,sliderHandleWidth:12,sliderPadding:10,sliderBorder:1,vSliderPadding:13,vSliderHeight:100,switchHeight:20,switchWidth:40,layoutMargin:{space:5,wide:5,clean:0,head:4,line:-1,toolbar:4,form:4,accordion:5},layoutPadding:{space:5,wide:0,clean:0,head:0,line:0,toolbar:2,form:12,accordion:0},tabMargin:3,tabOffset:0,tabBottomOffset:3,tabTopOffset:1,customCheckbox:!0,customRadio:!0,popupPadding:8,calendarHeight:70,padding:0,accordionType:"accordion",optionHeight:23},jeeplus.skin.material={topLayout:"space",barHeight:45,tabbarHeight:47,rowHeight:38,toolbarHeight:22,listItemHeight:34,inputHeight:38,buttonHeight:38,inputPadding:2,menuMargin:0,menuHeight:34,labelTopHeight:16,propertyItemHeight:34,inputSpacing:4,borderWidth:1,sliderHandleWidth:16,sliderPadding:10,sliderBorder:1,switchHeight:22,switchWidth:50,layoutMargin:{material:10,space:10,wide:10,clean:0,head:4,line:-1,toolbar:4,form:16,accordion:0},layoutPadding:{material:10,space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:16,accordion:0},tabMargin:0,tabOffset:0,tabBottomOffset:0,tabTopOffset:0,customCheckbox:!0,customRadio:!0,popupPadding:8,calendarHeight:70,padding:0,accordionType:"accordion"},jeeplus.skin.contrast={topLayout:"space",barHeight:46,tabbarHeight:46,rowHeight:34,toolbarHeight:46,listItemHeight:34,inputHeight:38,buttonHeight:38,inputPadding:3,menuHeight:34,labelTopHeight:22,propertyItemHeight:28,inputSpacing:4,borderWidth:1,sliderHandleWidth:14,sliderPadding:10,sliderBorder:1,vSliderPadding:15,vSliderHeight:100,switchHeight:22,switchWidth:50,layoutMargin:{space:10,wide:10,clean:0,head:4,line:-1,toolbar:8,form:8,accordion:10},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:17,accordion:0},tabMargin:4,tabOffset:0,tabBottomOffset:6,tabTopOffset:1,customCheckbox:!0,customRadio:!0,popupPadding:8,calendarHeight:70,padding:0,accordionType:"accordion",optionHeight:32},jeeplus.skin.set=function(e){if(jeeplus.skin.$active=jeeplus.skin[e],jeeplus.skin.$name=e,jeeplus.ui)for(var t in jeeplus.ui){var i=jeeplus.ui[t];i&&i.prototype&&i.prototype.$skin&&i.prototype.$skin(i.prototype)}},jeeplus.skin.set(window.jeeplus_skin||"flat"),jeeplus.Destruction={$init:function(){var e=this.VE={obj:this};jeeplus.destructors.push(e)},destructor:function(){var e=this.s;if(this.di&&this.editCancel(),this.callEvent&&this.callEvent("onDestruct",[]),this.destructor=function(){},this.VE.obj=null,this.getChildViews){var t=this.getChildViews();if(t)for(var i=0;i<t.length;i++)t[i].destructor();if(this.Ns)for(i=0;i<this.Ns.length;i++)this.Ns[i].destructor()}if(delete jeeplus.ui.views[e.id],e.$id){var s=this.getTopParentView();s&&s.oC&&s.oC(e.$id)}this.t=null,this.u=null,this.v=null,this.w&&(this.w.innerHTML="",this.w.t=null),this.x&&this.x.parentNode&&this.x.parentNode.removeChild(this.x),this.data&&this.data.destructor&&this.data.destructor(),this.unbind&&this.unbind(),this.data=null,this.x=this.$view=this.w=this.y=null,this.i=this.j={},jeeplus.UIManager.A==this&&(jeeplus.UIManager.A=null);var n=e.url;n&&n.$proxy&&n.release&&n.release(),this.$scope=null,this.$destructed=!0}},jeeplus.destructors=[],jeeplus.event(window,"unload",function(){jeeplus.callEvent("unload",[]),jeeplus.B=!0;for(var e=0;e<jeeplus.destructors.length;e++){var t=jeeplus.destructors[e].obj;t&&t.destructor()}for(var i in jeeplus.destructors=[],jeeplus.ui.et=jeeplus.toArray(),jeeplus.h)jeeplus.eventRemove(i)}),function(){function t(e){return i[e]||"&amp;"}var r={},o={},h=new RegExp("(\\r\\n|\\n)","g"),u=new RegExp('(\\")',"g"),c=new RegExp("(\\\\)","g"),i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},s=/[&<>"'`]/g;jeeplus.template=function(i){if("function"==typeof i)return i;if(r[i])return r[i];if(-1!=(i=(i||"").toString()).indexOf("->")){var e=i.split("->");switch(e[0]){case"html":i=jeeplus.html.getValue(e[1]);break;case"http":i=(new jeeplus.ajax).sync().get(e[1],{uid:jeeplus.uid()}).responseText}}if(i=(i||"").toString(),jeeplus.env.strict){if(!o[i]){o[i]=[];var l=[];if(i.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,function(e,i,s,n,t){l.push({pos:t,str:e,fn:function(e,t){return e[i]?s:n}})}),i.replace(/\{common\.([^}\(]*)\}/g,function(e,i,t){l.push({pos:t,str:e,fn:function(e,t){return t[i]||""}})}),i.replace(/\{common\.([^\}\(]*)\(\)\}/g,function(e,i,t){l.push({pos:t,str:e,fn:function(e,t){return t[i]?t[i].apply(this,arguments):""}})}),i.replace(/\{obj\.([^:}]*)\}/g,function(e,i,t){l.push({pos:t,str:e,fn:function(e,t){return e[i]}})}),i.replace("{obj}",function(e,t,i){l.push({pos:i,str:e,fn:function(e,t){return e}})}),i.replace(/#([^#'";, ]+)#/gi,function(e,i,t){"!"==i.charAt(0)?(i=i.substr(1),l.push({pos:t,str:e,fn:function(e,t){return-1!=i.indexOf(".")&&(e=jeeplus.CodeParser.collapseNames(e)),jeeplus.template.escape(e[i])}})):l.push({pos:t,str:e,fn:function(e,t){return-1!=i.indexOf(".")&&(e=jeeplus.CodeParser.collapseNames(e)),e[i]}})}),l.sort(function(e,t){return e.pos>t.pos?1:-1}),l.length){function t(e,t,i){o[e].push(function(){return e.slice(t,i)})}for(var s=0,n=0;n<l.length;n++){var a=l[n].pos;t(i,s,a),o[i].push(l[n].fn),s=a+l[n].str.length}t(i,s,i.length)}else o[i].push(function(){return i})}return function(){for(var e="",t=0;t<o[i].length;t++)e+=o[i][t].apply(this,arguments);return e}}i=(i=(i=(i=(i=(i=(i=(i=(i=i.replace(c,"\\\\")).replace(h,"\\n")).replace(u,'\\"')).replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"')).replace(/\{common\.([^}\(]*)\}/g,"\"+(common.$1||'')+\"")).replace(/\{common\.([^\}\(]*)\(\)\}/g,'"+(common.$1?common.$1.apply(this, arguments):"")+"')).replace(/\{obj\.([^}]*)\}/g,'"+(obj.$1)+"')).replace("{obj}",'"+obj+"')).replace(/#([^#'";, ]+)#/gi,function(e,t){return"!"==t.charAt(0)?'"+jeeplus.template.escape(obj.'+t.substr(1)+')+"':'"+(obj.'+t+')+"'});try{r[i]=Function("obj","common",'return "'+i+'";')}catch(e){}return r[i]},jeeplus.template.escape=function(e){return e===jeeplus.undefined||null===e?"":(e.toString()||"").replace(s,t)},jeeplus.template.empty=function(){return""},jeeplus.template.bind=function(e){return jeeplus.bind(jeeplus.template(e),this)},jeeplus.type=function(e,t){if(e.$protoWait)return e.d||(e.d=[]),void e.d.push(t);"function"==typeof e&&(e=e.prototype),e.types||(e.types={default:e.type},e.type.name="default");var i=t.name,s=e.type;for(var n in i&&(s=e.types[i]=jeeplus.clone(t.baseType?e.types[t.baseType]:e.type)),t)0===n.indexOf("template")?s[n]=jeeplus.template(t[n]):s[n]=t[n];return i}}(),jeeplus.Settings={$init:function(){this.s=this.config={}},define:function(e,t){return"object"==typeof e?this.C(e):this.D(e,t)},D:function(e,t){var i=this[e+"_setter"];return this.s[e]=i?i.call(this,t,e):t},C:function(e){if(e)for(var t in e)this.D(t,e[t])},e:function(e,t){var i={};t&&(i=jeeplus.extend(i,t)),"object"!=typeof e||e.tagName||jeeplus.extend(i,e,!0),this.C(i)},E:function(e,t){for(var i in t)switch(typeof e[i]){case"object":e[i]=this.E(e[i]||{},t[i]);break;case"undefined":e[i]=t[i]}return e}},jeeplus.proxy=function(e,t,i){var s=jeeplus.copy(jeeplus.proxy[e]);return s.source=t,i&&jeeplus.extend(s,i,!0),s.init&&s.init(),s},jeeplus.proxy.$parse=function(e){if("string"!=typeof e||-1==e.indexOf("->"))return e;var t=e.split("->");return jeeplus.proxy(t[0],t[1])},jeeplus.proxy.post={$proxy:!0,load:function(e,t,i){i=jeeplus.extend(i||{},this.params||{},!0),jeeplus.ajax().bind(e).post(this.source,i,t)}},jeeplus.proxy.sync={$proxy:!0,load:function(e,t){jeeplus.ajax().sync().bind(e).get(this.source,null,t)}},jeeplus.proxy.connector={$proxy:!0,connectorName:"!nativeeditor_status",load:function(e,t){jeeplus.ajax(this.source,t,e)},saveAll:function(e,t,i,s){for(var n=this.source,l={},a=[],r=0;r<t.length;r++){var o=t[r];for(var h in a.push(o.id),o.data)0!==h.indexOf("$")&&(l[o.id+"_"+h]=o.data[h]);l[o.id+"_"+this.connectorName]=o.operation}l.ids=a.join(","),l.jeeplus_security=jeeplus.securityKey,n+=-1==n.indexOf("?")?"?":"&",n+="editing=true",jeeplus.ajax().post(n,l,s)},result:function(e,t,i,s,n,l){if(!(n=n.xml()))return i.yr(null,s,n,l);var a=n.data.action;a.length||(a=[a]);for(var r=[],o=0;o<a.length;o++){var h=a[o];r.push(h),h.status=h.type,h.id=h.sid,h.newid=h.tid,i.processResult(h,h,{text:s,data:n,loader:l})}return r}},jeeplus.proxy.rest={$proxy:!0,load:function(e,t){jeeplus.ajax(this.source,t,e)},save:function(e,t,i,s){return jeeplus.proxy.rest.dC.call(this,e,t,i,s,jeeplus.ajax())},dC:function(e,t,i,s,n){var l=this.source,a="",r=l.indexOf("?");-1!==r&&(a=l.substr(r),l=l.substr(0,r)),l+="/"==l.charAt(l.length-1)?"":"/";var o=t.operation,h=t.data;"insert"==o&&delete h.id,"update"==o?n.put(l+h.id+a,h,s):"delete"==o?n.del(l+h.id+a,h,s):n.post(l+a,h,s)}},jeeplus.proxy.json={$proxy:!0,load:function(e,t){jeeplus.ajax(this.source,t,e)},save:function(e,t,i,s){var n=jeeplus.ajax().headers({"Content-Type":"application/json"});return jeeplus.proxy.rest.dC.call(this,e,t,i,s,n)}},jeeplus.proxy.faye={$proxy:!0,init:function(){this.clientId=this.clientId||jeeplus.uid()},load:function(i){var e=this.clientId;this.client.subscribe(this.source,function(t){t.clientId!=e&&jeeplus.dp(i).ignore(function(){if("delete"==t.operation)i.remove(t.data.id);else if("insert"==t.operation)i.add(t.data);else if("update"==t.operation){var e=i.getItem(t.data.id);e&&(jeeplus.extend(e,t.data,!0),i.refresh(e.id))}})})},save:function(e,t,i,s){t.clientId=this.clientId,this.client.publish(this.source,t)}},jeeplus.proxy.indexdb={$proxy:!0,create:function(e,a,t,i){this.source=e+"/",this.F(i,t,function(e){var t=e.target.result;for(var i in a)for(var s=a[i],n=t.createObjectStore(i,{keyPath:"id",autoIncrement:!0}),l=0;l<s.length;l++)n.put(s[l])})},F:function(t,e,i){if(-1!=this.source.indexOf("/")){var s=this.source.split("/");this.source=s[1],e=e||s[2];var n,l=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB;n=e?l.open(s[0],e):l.open(s[0]),i&&(n.onupgradeneeded=i),n.onerror=function(){},n.onblocked=function(){},n.onsuccess=jeeplus.bind(function(e){this.db=e.target.result,t&&t.call(this)},this)}else this.db?t.call(this):jeeplus.delay(this.F,this,[t],50)},load:function(s,n){this.F(function(){var e=this.db.transaction(this.source).objectStore(this.source),i=[];e.openCursor().onsuccess=function(e){var t=e.target.result;t?(i.push(t.value),t.continue()):(s.parse(i),jeeplus.ajax.$callback(s,n,"[]",i))}})},save:function(e,l,a,t){this.F(function(){var e,i=l.operation,t=l.data,s=l.id,n=this.db.transaction([this.source],"readwrite").objectStore(this.source);"delete"==i?e=n.delete(s):"update"==i?e=n.put(t):"insert"==i&&(delete t.id,e=n.add(t)),e.onsuccess=function(e){var t={status:i,id:l.id};"insert"==i&&(t.newid=e.target.result),a.processResult(t,t)}})}},jeeplus.proxy.binary={$proxy:!0,load:function(i,s){var n=this.source.split("@"),l=n[0].split(".").pop();return jeeplus.ajax().response("arraybuffer").get(n[0]).then(function(e){var t={ext:l,dataurl:n[1]};jeeplus.ajax.$callback(i,s,"",{data:e,options:t},-1)})}},jeeplus.ajax=function(e,t,i){return 0!==arguments.length?(new jeeplus.ajax).get(e,t,i):this.getXHR?this:new jeeplus.ajax},jeeplus.ajax.count=0,jeeplus.ajax.prototype={master:null,getXHR:function(){return new XMLHttpRequest},stringify:function(e){return jeeplus.stringify(e)},G:function(e,t,n,i){var l;t&&(jeeplus.isArray(t)||"function"==typeof(t.success||t.error||t))&&(l=n,n=t,t=null);var s=jeeplus.promise.defer(),a=this.getXHR();jeeplus.isArray(n)||(n=[n]),n.push({success:function(e,t){s.resolve(t)},error:function(e,t){s.reject(a)}});var r=this.I||{};if(jeeplus.callEvent("onBeforeAjax",[i,e,t,a,r,null,s])){var o=!1;if("GET"!==i){var h=!1;for(var u in r)"content-type"==u.toString().toLowerCase()&&(h=!0,"application/json"==r[u]&&(o=!0));h||(r["Content-Type"]="application/x-www-form-urlencoded")}if("object"==typeof t&&!(window.FormData&&t instanceof window.FormData))if(o)t=this.stringify(t);else{var c=[];for(var d in t){var p=t[d];(null===p||p===jeeplus.undefined)&&(p=""),"object"==typeof p&&(p=this.stringify(p)),c.push(d+"="+encodeURIComponent(p))}t=c.join("&")}t&&"GET"===i&&(e=e+(-1!=e.indexOf("?")?"&":"?")+t,t=null),a.open(i,e,!this.H);var f=this.Tw;for(var u in f&&(a.responseType=f),r)a.setRequestHeader(u,r[u]);var g=this;return this.master=this.master||l,a.onreadystatechange=function(){if(!a.readyState||4==a.readyState){if(jeeplus.ajax.count++,n&&g&&!a.aborted){if(-1!=jeeplus.ly.find(a))return jeeplus.ly.remove(a);var e,t,i=g.master||g,s=400<=a.status||0===a.status;t="blob"==a.responseType||"arraybuffer"==a.responseType?(e="",a.response):(e=a.responseText||"",g.J(a)),jeeplus.ajax.$callback(i,n,e,t,a,s)}g&&(g.master=null),n=g=l=null}},this.qh&&(a.timeout=this.qh),this.H?a.send(t||null):setTimeout(function(){a.aborted||(-1!=jeeplus.ly.find(a)?jeeplus.ly.remove(a):a.send(t||null))},1),this.master&&this.master.Ve&&this.master.Ve.push(a),this.H?a:s}},J:function(e){return{xml:function(){try{return jeeplus.DataDriver.xml.tagToObject(jeeplus.DataDriver.xml.toObject(e.responseText,this))}catch(e){}},rawxml:function(){return window.XPathResult?e.responseXML:jeeplus.DataDriver.xml.fromString(e.responseText)},text:function(){return e.responseText},json:function(){return jeeplus.DataDriver.json.toObject(e.responseText,!1)}}},get:function(e,t,i){return this.G(e,t,i,"GET")},post:function(e,t,i){return this.G(e,t,i,"POST")},put:function(e,t,i){return this.G(e,t,i,"PUT")},del:function(e,t,i){return this.G(e,t,i,"DELETE")},patch:function(e,t,i){return this.G(e,t,i,"PATCH")},sync:function(){return this.H=!0,this},timeout:function(e){return this.qh=e,this},response:function(e){return this.Tw=e,this},header:function(e){return this.I=e,this},headers:function(e){return this.I=jeeplus.extend(this.I||{},e),this},bind:function(e){return this.master=e,this}},jeeplus.ajax.$callback=function(e,t,i,s,n,l){if(!e.$destructed){if(-1===n&&s&&"function"==typeof s.json&&(s=s.json()),l&&jeeplus.callEvent("onAjaxError",[n]),jeeplus.isArray(t)||(t=[t]),!l)for(var a=0;a<t.length;a++)if(t[a]){var r=t[a].before;r&&r.call(e,i,s,n)}for(a=0;a<t.length;a++)if(t[a]){var o=t[a].success||t[a];l&&(o=t[a].error),o&&o.call&&o.call(e,i,s,n)}}},jeeplus.send=function(e,t,i,s){var n=jeeplus.html.create("FORM",{target:s||"_self",action:e,method:i||"POST"},"");for(var l in t){var a=jeeplus.html.create("INPUT",{type:"hidden",name:l,value:t[l]},"");n.appendChild(a)}n.style.display="none",document.body.appendChild(n),n.submit(),document.body.removeChild(n)},jeeplus.AtomDataLoader={$init:function(e){this.data={},this.waitData=jeeplus.promise.defer(),e&&(this.s.datatype=e.datatype||"json"),this.$ready.push(this.K)},K:function(){this.L=!0,this.s.url&&this.url_setter(this.s.url),this.s.data&&this.data_setter(this.s.data)},url_setter:function(e){return e=jeeplus.proxy.$parse(e),this.L&&this.load(e,this.s.datatype),e},data_setter:function(e){return this.L?(this.parse(e,this.s.datatype),!0):e},load:function(e,t){var i=arguments[2]||null;if(!this.callEvent("onBeforeLoad",[]))return jeeplus.promise.reject();"string"==typeof t?(this.data.driver=jeeplus.DataDriver[t],t=arguments[2]):this.data.driver||(this.data.driver=jeeplus.DataDriver.json);var s=[{success:this.M,error:this.N}];return t&&(jeeplus.isArray(t)?s.push.apply(s,t):s.push(t)),(e=jeeplus.proxy.$parse(e)).$proxy&&e.load?e.load(this,s,i):"function"==typeof e?e(i).then(jeeplus.bind(function(e){jeeplus.ajax.$callback(this,s,"",e,-1)},this),jeeplus.bind(function(e){jeeplus.ajax.$callback(this,s,"",null,e,!0)},this)):jeeplus.ajax(e,s,this)},parse:function(e,t){return e&&e.then&&"function"==typeof e.then?e.then(jeeplus.bind(function(e){e&&"function"==typeof e.json&&(e=e.json()),this.parse(e,t)},this)):e&&e.sync&&this.sync?this.UC(e):this.callEvent("onBeforeLoad",[])?(this.data.driver=jeeplus.DataDriver[t||"json"],void this.M(e,null)):jeeplus.promise.reject()},UC:function(e){this.data&&this.data.attachEvent("onSyncApply",jeeplus.bind(function(){this.ef&&this.ef()},this)),this.sync(e)},df:function(e){var t,i,s=this.data.driver;t=(i=s.getRecords(e)[0])?s.getDetails(i):{},this.setValues?this.setValues(t):this.data=t},tB:function(e,t,i,s){e?this.$onLoad&&this.$onLoad(e,this.data.driver)||(this.data&&this.data.df?this.data.df(e):this.df(e)):this.N(t,i,s),this.ef&&this.ef(),this.callEvent("onAfterLoad",[]),this.waitData.resolve()},M:function(e,t,i){var s,n=this.data.driver;(s=-1===i?n.toObject(t):(this.Ve&&this.Ve.remove(i),n.toObject(e,t)))&&s.then?s.then&&"function"==typeof s.then&&s.then(jeeplus.bind(this.tB,this)):this.tB(s)},N:function(e,t,i){this.callEvent("onAfterLoad",[]),this.callEvent("onLoadError",arguments),jeeplus.callEvent("onLoadError",[e,t,i,this])},O:function(e){if(!this.s.dataFeed||this.P||!e)return!0;var t=this.s.dataFeed;return"function"==typeof t?t.call(this,e.id||e,e):(t=t+(-1==t.indexOf("?")?"?":"&")+"action=get&id="+encodeURIComponent(e.id||e),this.callEvent("onBeforeLoad",[])&&jeeplus.ajax(t,function(e,t,i){this.P=!0;var s=jeeplus.DataDriver.json,n=s.toObject(e,t);n?this.setValues(s.getDetails(s.getRecords(n)[0])):this.N(e,t,i),this.P=!1,this.callEvent("onAfterLoad",[])},this),!1)}},jeeplus.DataDriver={},jeeplus.DataDriver.json={toObject:function(e){if(!e)return null;if("string"==typeof e)try{if(this.parseDates){var i=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(.\d{1-3})?Z/;e=JSON.parse(e,function(e,t){return"string"==typeof t&&i.test(t)?new Date(t):t})}else e=JSON.parse(e)}catch(e){return null}return e},getRecords:function(e){return e&&e.data&&(e=e.data),e&&!jeeplus.isArray(e)?[e]:e},getDetails:function(e){return"string"==typeof e?{id:e||jeeplus.uid(),value:e}:e},getOptions:function(e){return e.collections},getInfo:function(e){return{size:e.total_count||0,from:e.pos,parent:e.parent||0,config:e.config,key:e.jeeplus_security}},child:"data",parseDates:!1},jeeplus.DataDriver.html={toObject:function(e){if("string"!=typeof e)return e;var t=null;return-1==e.indexOf("<")&&(t=jeeplus.toNode(e)),t||((t=document.createElement("DIV")).innerHTML=e),t.firstChild},getRecords:function(e){return e.getElementsByTagName(this.tag)},getDetails:function(e){return jeeplus.DataDriver.xml.tagToObject(e)},getOptions:function(){return!1},getInfo:function(e){return{size:0}},tag:"LI"},jeeplus.DataDriver.jsarray={toObject:function(e){return"string"==typeof e?JSON.parse(e):e},getRecords:function(e){return e&&e.data&&(e=e.data),e},getDetails:function(e){for(var t={},i=0;i<e.length;i++)t["data"+i]=e[i];return null!==this.idColumn&&(t.id=e[this.idColumn]),t},getOptions:function(){return!1},getInfo:function(e){return{size:0}},idColumn:null},jeeplus.DataDriver.csv={toObject:function(e){return e},getRecords:function(e){return e.split(this.row)},getDetails:function(e){e=this.stringToArray(e);for(var t={},i=0;i<e.length;i++)t["data"+i]=e[i];return null!==this.idColumn&&(t.id=e[this.idColumn]),t},getOptions:function(){return!1},getInfo:function(e){return{size:0}},stringToArray:function(e){e=e.split(this.cell);for(var t=0;t<e.length;t++)e[t]=e[t].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"");return e},idColumn:null,row:"\n",cell:","},jeeplus.DataDriver.xml={V:function(e){return e&&e.documentElement?e.getElementsByTagName("parsererror").length?null:e:null},toObject:function(e,t){var i=t?t.rawxml?t.rawxml():t:null;return this.V(i)?i:(i="string"==typeof e?this.fromString(e.replace(/^[\s]+/,"")):e,this.V(i)?i:null)},getRecords:function(e){return this.xpath(e,this.records)},records:"/*/item",child:"item",config:"/*/config",getDetails:function(e){return this.tagToObject(e,{})},getOptions:function(){return!1},getInfo:function(e){var t=this.xpath(e,this.config);return t=t.length?this.assignTypes(this.tagToObject(t[0],{})):null,{size:e.documentElement.getAttribute("total_count")||0,from:e.documentElement.getAttribute("pos"),parent:e.documentElement.getAttribute("parent")||0,config:t,key:e.documentElement.getAttribute("jeeplus_security")||null}},xpath:function(e,t){if(window.XPathResult){var i=e;-1==e.nodeName.indexOf("document")&&(e=e.ownerDocument);for(var s=[],n=e.evaluate(t,i,null,XPathResult.ANY_TYPE,null),l=n.iterateNext();l;)s.push(l),l=n.iterateNext();return s}var a=!0;try{void 0===e.selectNodes&&(a=!1)}catch(e){}if(a)return e.selectNodes(t);var r=t.split("/").pop();return e.getElementsByTagName(r)},assignTypes:function(e){for(var t in e){var i=e[t];if("object"==typeof i)this.assignTypes(i);else if("string"==typeof i){if(""===i)continue;"true"==i?e[t]=!0:"false"==i?e[t]=!1:i==1*i&&(e[t]=1*e[t])}}return e},tagToObject:function(e,t){var i=0;if(1==e.nodeType&&e.getAttribute("stack")){t=[];for(var s=e.childNodes,n=0;n<s.length;n++)1==s[n].nodeType&&t.push(this.tagToObject(s[n],{}))}else{t=t||{};var l=e.attributes;if(l&&l.length)for(n=0;n<l.length;n++)t[l[n].name]=l[n].value,i=1;for(s=e.childNodes,n=0;n<s.length;n++)if(1==s[n].nodeType){var a=s[n].tagName;t[a]?("function"!=typeof t[a].push&&(t[a]=[t[a]]),t[a].push(this.tagToObject(s[n],{}))):t[a]=this.tagToObject(s[n],{}),i=2}if(!i)return this.nodeValue(e);i<2&&(t.value=t.value||this.nodeValue(e))}return t},nodeValue:function(e){return e.firstChild?e.firstChild.wholeText||e.firstChild.data:""},fromString:function(e){try{if(window.DOMParser)return(new DOMParser).parseFromString(e,"text/xml");if(window.ActiveXObject){var t=new ActiveXObject("Microsoft.xmlDOM");return t.loadXML(e),t}}catch(e){return null}}},jeeplus.BaseBind={bind:function(e,t,i){this.attachEvent||jeeplus.extend(this,jeeplus.EventSystem),"string"==typeof e&&(e=jeeplus.$$(e)),e.W&&e.W(),this.W&&this.W(),e.getBindData||jeeplus.extend(e,jeeplus.BindSource),this.X(),e.addBind(this.s.id,t,i),this.Os=e.s.id;var s=this.s.id;this.Ps=this.attachEvent(this.touchable?"onAfterRender":"onBindRequest",function(){return e.getBindData(s)}),this.refresh&&this.isVisible(this.s.id)&&this.refresh()},unbind:function(){if(this.Os){var e=jeeplus.$$(this.Os);e&&e.removeBind(this.s.id),this.detachEvent(this.Ps),this.Os=null}},X:function(){var e=this.s;if(this.filter){var t=e.id;this.data.Y=jeeplus.bind(function(){jeeplus.$$(this.Os).Z[t]=!1},this)}var i=this.render;this.render=function(){if(!this.$){this.$=!0;var e=this.callEvent("onBindRequest");return this.$=!1,i.apply(this,!1===e?arguments:[])}},(this.getValue||this.getValues)&&(this.save=function(e){var t=jeeplus.$$(this.Os);if(e)t.setBindData(e);else{if(this.validate&&!this.validate())return!1;var i=this.getValue?this.getValue:this.getValues();t.setBindData(i,this.s.id),this.setDirty&&this.setDirty(!1)}}),this.X=function(){}}},jeeplus.BindSource={$init:function(){this.bb={},this.Z={},this.cb={},this.db(this)},saveBatch:function(e){this.eb=!0,e.call(this),this.eb=!1,this.fb()},setBindData:function(e,t){if(t&&(this.cb[t]=!0),this.setValue)this.setValue(e);else if(this.setValues)this.setValues(e);else{var i=this.getCursor();i?this.updateItem(i,e):this.add(e)}this.callEvent("onBindUpdate",[e,t]),this.save&&this.save(),t&&(this.cb[t]=!1)},getBindData:function(e,t){if(this.Z[e])return!1;var i=jeeplus.$$(e);i.isVisible(i.s.id)&&(this.Z[e]=!0,this.gb(i,this.bb[e][0],this.bb[e][1]),t&&i.filter&&i.refresh())},addBind:function(e,t,i){this.bb[e]=[t,i]},removeBind:function(e){delete this.bb[e],delete this.Z[e],delete this.cb[e]},db:function(e){e.filter?jeeplus.extend(this,jeeplus.CollectionBind):e.setValue?jeeplus.extend(this,jeeplus.ValueBind):jeeplus.extend(this,jeeplus.RecordBind)},fb:function(){if(!this.eb)for(var e in this.bb)this.cb[e]||(this.Z[e]=!1,this.getBindData(e,!0))},hb:function(e,t,i){e.setValue?e.setValue(i&&t?i[t]:i):e.filter?e.data.silent(function(){this.filter(t,i)}):!i&&e.clear?e.clear():e.O(i)&&e.setValues(jeeplus.clone(i)),e.callEvent("onBindApply",[i,t,this])}},jeeplus.DataValue=jeeplus.proto({name:"DataValue",isVisible:function(){return!0},$init:function(e){(!e||jeeplus.isUndefined(e.value))&&(this.data=e||"");var t=e&&e.id?e.id:jeeplus.uid();this.s={id:t},jeeplus.ui.views[t]=this},setValue:function(e){this.data=e,this.callEvent("onChange",[e])},getValue:function(){return this.data},refresh:function(){this.callEvent("onBindRequest")}},jeeplus.EventSystem,jeeplus.BaseBind),jeeplus.DataRecord=jeeplus.proto({name:"DataRecord",isVisible:function(){return!0},$init:function(e){this.data=e||{};var t=e&&e.id?e.id:jeeplus.uid();this.s={id:t},jeeplus.ui.views[t]=this},getValues:function(){return this.data},setValues:function(e,t){this.data=t?jeeplus.extend(this.data,e,!0):e,this.callEvent("onChange",[e])},refresh:function(){this.callEvent("onBindRequest")}},jeeplus.EventSystem,jeeplus.BaseBind,jeeplus.AtomDataLoader,jeeplus.Settings),jeeplus.ValueBind={$init:function(){this.attachEvent("onChange",this.fb)},gb:function(e,t,i){t=t||"value";var s=this.getValue()||"";if(i&&(s=i(s)),e.setValue)e.setValue(s);else if(e.filter)e.data.silent(function(){this.filter(t,s)});else{var n={};n[t]=s,e.O(s)&&e.setValues(n)}e.callEvent("onBindApply",[s,t,this])}},jeeplus.RecordBind={$init:function(){this.attachEvent("onChange",this.fb)},gb:function(e,t,i){var s=this.getValues()||null;i&&(s=i(s)),this.hb(e,t,s)}},jeeplus.CollectionBind={$init:function(){this.ib=null,this.attachEvent("onSelectChange",function(e){var t=this.getSelectedId();this.setCursor(t?t.id||t:null)}),this.attachEvent("onAfterCursorChange",this.fb),this.attachEvent("onAfterDelete",function(e){e==this.getCursor()&&this.setCursor(null)}),this.data.attachEvent("onStoreUpdated",jeeplus.bind(function(e,t,i){e&&e==this.getCursor()&&"paint"!=i&&"delete"!=i&&this.fb()},this)),this.data.attachEvent("onClearAll",jeeplus.bind(function(){this.ib=null},this)),this.data.attachEvent("onIdChange",jeeplus.bind(function(e,t){this.ib==e&&(this.ib=t,this.fb())},this))},refreshCursor:function(){this.ib&&this.callEvent("onAfterCursorChange",[this.ib])},setCursor:function(e){e==this.ib||null!==e&&!this.getItem(e)||(this.callEvent("onBeforeCursorChange",[this.ib]),this.ib=e,this.callEvent("onAfterCursorChange",[e]))},getCursor:function(){return this.ib},gb:function(e,t,i){if("$level"==t&&this.data.getBranch)return(e.data||e).importData(this.data.getBranch(this.getCursor()));var s=this.getItem(this.getCursor())||this.s.defaultData||null;"$data"==t?("function"==typeof i?i.call(e,s,this):e.data.importData(s?s[i]:[]),e.callEvent("onBindApply",[s,t,this])):(i&&(s=i(s)),this.hb(e,t,s))}},jeeplus.AtomRender={jb:function(e){return e.$empty?"":this.s.template(e,this)},render:function(){var e=this.s;return!!this.isVisible(e.id)&&((!this.callEvent||this.callEvent("onBeforeRender",[this.data]))&&(this.data&&!e.content&&(this.y.innerHTML="",this.y.innerHTML=this.jb(this.data)),this.callEvent&&this.callEvent("onAfterRender",[])),!0)},sync:function(t){this.kb=!1,"DataStore"!=t.name&&(t.data&&"DataStore"==t.name?t=t.data:this.kb=!0),this.kb?t.bind("change",jeeplus.bind(function(e){e.id==this.data.id&&(this.data=e.attributes,this.refresh())},this)):t.attachEvent("onStoreUpdated",jeeplus.bind(function(e){e&&e!=this.data.id||(this.data=t.pull[e],this.refresh())},this))},template_setter:jeeplus.template},jeeplus.SingleRender=jeeplus.proto({template_setter:function(e){this.type.template=jeeplus.template(e)},jb:function(e){var t=this.type;return(t.templateStart?t.templateStart(e,t):"")+t.template(e,t)+(t.templateEnd?t.templateEnd(e,t):"")},customize:function(e){jeeplus.type(this,e)}},jeeplus.AtomRender),jeeplus.UIManager={A:null,lb:{},mb:0,XE:0,lH:0,nb:{enter:13,tab:9,esc:27,escape:27,up:38,down:40,left:37,right:39,pgdown:34,pagedown:34,pgup:33,pageup:33,end:35,home:36,insert:45,delete:46,backspace:8,space:32,meta:91,win:91,mac:91,multiply:106,add:107,subtract:109,decimal:110,divide:111,scrollock:145,pausebreak:19,numlock:144,"5numlocked":12,shift:16,capslock:20},wD:{input:1,button:1,textarea:1,select:1},ob:function(){jeeplus.event(document.body,"click",jeeplus.bind(this.pb,this)),jeeplus.event(document,"keydown",jeeplus.bind(this.qb,this)),jeeplus.UE(document.body,"mousedown",jeeplus.bind(function(){this.lH=new Date},this)),document.body.addEventListener&&jeeplus.event(document.body,"focus",this.rb,{capture:!0,bind:this}),jeeplus.destructors.push({obj:this})},destructor:function(){jeeplus.UIManager.A=null},getFocus:function(){return this.A},sb:function(e){this.tb=this.tb||e.s.id},setFocus:function(e,t){return(e=jeeplus.$$(e))&&!e.$view&&(e=null),this.mb=jeeplus.mb=new Date,this.A===e||(this.A&&this.A.callEvent&&this.A.callEvent("onBlur",[this.A]),e&&e.callEvent&&e.callEvent("onFocus",[e,this.A]),jeeplus.callEvent("onFocusChange",[e,this.A]),this.A&&this.A.blur&&!t&&this.A.blur(),(this.A=e)&&e.focus&&!t&&e.focus()),!0},applyChanges:function(e){var t=this.getFocus();t&&t!=e&&t.Xy&&t.Xy(e)},hasFocus:function(e){return e===this.A},ub:function(e,t){var i=jeeplus.html.locate(e,"view_id")||this.tb;return i=jeeplus.$$(i),this.tb=null,jeeplus.mb=new Date,i!=this.A?(t||(this.tb=null),i?(i=jeeplus.$$(i),this.canFocus(i)&&(i.getNode&&i.getNode(e),this.setFocus(i))):t||this.setFocus(null),!0):void 0},pb:function(e){return new Date-this.mb<100?(this.tb=null,!1):this.ub(e)},rb:function(e){return!!this.wD[e.target.nodeName.toLowerCase()]&&this.ub(e,!0)},canFocus:function(e){return e.isVisible()&&e.isEnabled()},vb:function(e){var t=this.getFocus();return!(e&&!this.wb(e,t))&&void(this.xb("getPrev",e)||(this.A=null))},Xz:{},wb:function(e,t){if(!e)return!1;if(!t)return!1;for(;t;){if(t===e)return!0;t=t.getParentView()}return!1},yb:function(){this&&this.callEvent&&this.callEvent("onTimedKeyPress",[])},BA:function(e){return e<112&&105<e},qb:function(e){var t=e.which||e.keyCode;95<t&&t<106&&(t-=48),t=this.Xz[t]||t;var i=e.ctrlKey,s=e.shiftKey,n=e.altKey,l=e.metaKey,a=this.zb(t,i,s,n,l),r=this.getFocus();r&&r.callEvent&&(!1===r.callEvent("onKeyPress",[t,e])&&jeeplus.html.preventEvent(e),r.hasEvent("onTimedKeyPress")&&(clearTimeout(r.Ab),r.Ab=jeeplus.delay(this.yb,r,[],r.s.keyPressTimeout||250))),this.BA(t)||(a=this.zb(String.fromCharCode(t),i,s,n,l));var o=!i&&!n&&!l&&9!=t&&27!=t&&13!=t;return!1===this.Bb(a,o,e)?(jeeplus.html.preventEvent(e),!1):void 0},xb:function(e){if(!this.getFocus())return null;e=e||"getNext";for(var t=this.getFocus(),i=t,s=jeeplus.uid();;){if((t=this[e](t))&&this.canFocus(t))return this.setFocus(t);if(t===i||t.$fmarker==s)return null;t.$fmarker=s}},WE:function(e,t){var i=!t.shiftKey;if(jeeplus.UIManager.XE=new Date,e&&e.Gb&&!e.Gb(i,t))return!1;if(e&&e.Eb){if(e.editNext)return e.editNext(i);if(e.editStop)return e.editStop(),!0}else jeeplus.delay(function(){jeeplus.UIManager.setFocus(jeeplus.$$(document.activeElement),!0)},1)},getTop:function(e){for(var t,i=jeeplus.$$(e);i&&(t=i.getParentView());)i=t;return i},getNext:function(e,t){var i=e.getChildViews();if(i.length&&!t)return i[0];var s=e.getParentView();if(!s)return e;var n=s.getChildViews();if(n.length)for(var l=jeeplus.PowerArray.find.call(n,e)+1;l<n.length;){if(this.canFocus(n[l]))return n[l];l++}return this.getNext(s,!0)},getPrev:function(e,t){var i=e.getChildViews();if(i.length&&t)return this.getPrev(i[i.length-1],!0);if(t)return e;var s=e.getParentView();if(!s)return this.getPrev(e,!0);var n=s.getChildViews();if(n)for(var l=jeeplus.PowerArray.find.call(n,e)-1;0<=l;){if(this.canFocus(n[l]))return this.getPrev(n[l],!0);l--}return s},addHotKey:function(e,t,i){var s=this.Cb(e);i||(i=null),s.handler=t,s.view=i;var n=this.zb(s.letter,s.ctrl,s.shift,s.alt,s.meta);return this.lb[n]||(this.lb[n]=[]),this.lb[n].push(s),e},removeHotKey:function(e,t,i){var s=this.Cb(e),n=this.zb(s.letter,s.ctrl,s.shift,s.alt,s.meta);if(t||i){var l=this.lb[n];if(l){for(var a=l.length-1;0<=a;a--)i&&l[a].view!==i||t&&l[a].handler!==t||l.splice(a,1);l.length||delete this.lb[n]}}else delete this.lb[n]},zb:function(e,t,i,s,n){return e+"_"+["",t?"1":"0",i?"1":"0",s?"1":"0",n?"1":"0"].join("")},Bb:function(e,t,i){var s=this.getFocus();return this.lb[e]?this.Db(this.lb[e],s,i):!t||!this.lb.ANY_0000||this.Db(this.lb.ANY_0000,s,i)},Db:function(e,t,i){for(var s=0;s<e.length;s++){var n=e[s];if(null===n.view||t===n.view||"string"==typeof n.view&&t&&t.name===n.view){var l=n.handler(t,i);if(!!l===l)return l}}return!0},Cb:function(e){var t,i,s,n,l=this.nb,a=e.toLowerCase().split(/[\+\-_]/);t=i=s=n=0;for(var r="",o=0;o<a.length;o++)if("ctrl"===a[o])t=1;else if("shift"===a[o])i=1;else if("alt"===a[o])s=1;else if("command"===a[o])n=1;else if(l[a[o]]){var h=l[a[o]];r=this.BA(h)?h.toString():String.fromCharCode(h)}else r=a[o];return{letter:r.toUpperCase(),ctrl:t,shift:i,alt:s,meta:n}}},jeeplus.ready(function(){jeeplus.UIManager.ob(),jeeplus.UIManager.addHotKey("enter",function(e,t){if(e&&e.callEvent&&e.callEvent("onEnter",[t]),e&&e.editStop&&e.Eb)return e.editStop(),!0;if(e&&e.touchable){var i=e.getFormView();i&&!e.Dt&&i.callEvent("onSubmit",[e,t])}}),jeeplus.UIManager.addHotKey("esc",function(e){if(e){if(e.editCancel&&e.Eb)return e.editCancel(),!0;var t=e.getTopParentView();t&&t.setPosition&&t.Fb()}}),jeeplus.UIManager.addHotKey("shift+tab",jeeplus.UIManager.WE),jeeplus.UIManager.addHotKey("tab",jeeplus.UIManager.WE)}),jeeplus.IdSpace={$init:function(){this.Hb={},this.Ib={},this.getTopParentView=this.CD=jeeplus.bind(function(){return this},this),this.Jb(),this.$ready.push(this.Kb)},$$:function(e){return this.Hb[e]},innerId:function(e){return this.Ib[e]},Jb:function(e){this.Lb=jeeplus.Mb,jeeplus.Mb=this},Kb:function(e){for(var t in this.Hb){var i=this.Hb[t];this.callEvent&&i.mapEvent&&!i.k.onitemclick&&i.mapEvent({onitemclick:this}),i.getTopParentView=this.CD}jeeplus.Mb=this.Lb,this.Lb=0},oC:function(e){delete this.Hb[e]},ui:function(){this.Jb();var e=jeeplus.ui.apply(jeeplus,arguments);return this.Kb(),e}},function(){var s=[],o=jeeplus.ui;if(!jeeplus.ui){o=jeeplus.ui=function(e,t,i){jeeplus.Nb=!0;var s=jeeplus.isArray(e),n=jeeplus.toNode(e.container||t||document.body);n.s&&(i=u(n,s,i));var l,a=n==document.body;if(l=e.s||n&&s?e:(n&&a&&(e.$topView=!0),e.Ob||(e.Ob={}),o.A(e)),!a||l.setPosition||l.$apiOnly||jeeplus.ui.Pb(),l.s&&l.s.ft&&!n.$view)l.s.gt=n;else if(!l.$apiOnly)if(n.appendChild)h(n,l,e);else if(n.destructor){var r=n;if(i||0===i||jeeplus.isArray(l)||(n=(i=n).getParentView()),n&&n.Qb)l.getParentView&&l.getParentView()&&l.getParentView().Rb(l),n.Qb(l,i);else{t=r.$view.parentNode;r.destructor(),h(t,l,e)}}return jeeplus.Nb=!1,l};var h=function(e,t,i){e.appendChild(t.x),((!t.setPosition||t.s.fullscreen)&&e==document.body||t.s.position)&&s.push(t.VE),i.skipResize||t.adjust()},u=function(e,t,i){var s=[e];if(t)s=e.getChildViews();else if(e.gd)s=[e.gd];else{if("number"==typeof i)return i;if(i)return s=[jeeplus.$$(i)],n(s),s[0].config.id}return n(s),i},n=function(e){for(var t=e.length-1;0<=t;t--)delete jeeplus.ui.views[e[t].config.id],e[t].config.id="x"+jeeplus.uid(),jeeplus.ui.views[e[t].config.id]=e[t],n(e[t].getChildViews())}}jeeplus.ui.animate=function(e,t,i){var s=jeeplus.$$(t);if(s){var n=i||{type:"slide",direction:"left"},l=s.x.cloneNode(!0),a=jeeplus.ui(e,t);a.x.parentNode.appendChild(l);var r=jeeplus.animate.formLine(a.x,l,n);return n.callback=function(){jeeplus.animate.breakLine(r)},jeeplus.animate(r,n),a}},jeeplus.ui.animateView=function(t,e,i){if(t=jeeplus.$$(t)){i=i||{type:"slide",direction:"left"};function s(e){var t=e.x,i=t.className,s=t.innerHTML;return"<div class='"+i+"' style='width:"+t.offsetWidth+"px;height:"+t.offsetHeight+"px;'>"+s+"</div>"}for(var n=[],l=0;l<t.x.childNodes.length;l++){var a=t.x.childNodes[l],r=a.currentStyle?a.currentStyle.display:getComputedStyle(a,null).display;n.push(r||"")}var o=s(t);"function"==typeof e&&e.call(this);var h=s(t),u=t.x.insertBefore(jeeplus.html.create("DIV",{class:"jeeplus_view_animate",style:"width:"+t.x.offsetWidth+"px;height:"+t.x.offsetHeight+"px;"},h+o),t.x.firstChild);for(l=1;l<t.x.childNodes.length;l++)t.x.childNodes[l].style.display="none";var c=jeeplus.animate.formLine(u.childNodes[0],u.childNodes[1],i);return i.callback=function(){if(u){t.x.removeChild(u),u=null;for(var e=0;e<t.x.childNodes.length;e++)t.x.childNodes[e].style.display=n[e]}},jeeplus.animate(c,i),t}},jeeplus.ui.Sb=function(){var e=jeeplus.html.create("div");e.className="jeeplus_skin_mark",e.style.cssText="position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;min-height:100px;overflow-y:scroll;",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth,i={110:"air",120:"aircompact",130:"clouds",140:"web",150:"terrace",160:"metro",170:"light",180:"glamour",190:"touch",200:"flat",210:"compact",220:"material",230:"contrast"}[10*Math.floor(e.offsetHeight/10)];if(document.body.removeChild(e),i){var s=jeeplus.skin[i];s&&s!=jeeplus.skin.$active&&jeeplus.skin.set(i)}return jeeplus.env.$customScroll?0:t},jeeplus.ui.scrollSize=jeeplus.env.touch||jeeplus.env.$customScroll?0:17,jeeplus.ready(function(){var e=jeeplus.ui.Sb();jeeplus.ui.scrollSize=jeeplus.env.touch?0:e}),jeeplus.ui.Tb=function(e){return"$"+e+(this.Ub[e]=(this.Ub[e]||0)+1)},jeeplus.ui.Ub={},jeeplus.ui.Pb=function(){jeeplus.html.addStyle("html, body{ height:100%; }"),document.body.className+=" jeeplus_full_screen",jeeplus.ui.Pb=function(){},jeeplus.Touch.limit(!1)},jeeplus.ui.freeze=function(e,t){jeeplus.ui.PG=!0;var i=e();i&&i.then?i.then(function(e){return(jeeplus.ui.PG=!1)!==t&&jeeplus.ui.resize(),e}):(jeeplus.ui.PG=!1)!==t&&jeeplus.ui.resize()},jeeplus.ui.resize=function(){if(jeeplus.UIManager.applyChanges(),jeeplus.callEvent("onClick",[]),jeeplus.ui.QG=!0,!jeeplus.ui.PG)for(var e=s.length-1;0<=e;e--)s[e].obj&&s[e].obj.resize();jeeplus.ui.QG=!1},jeeplus.ui.each=function(e,t,i,s){if(e)for(var n=s?[e]:e.getChildViews(),l=0;l<n.length;l++)!1!==t.call(i||jeeplus,n[l])&&jeeplus.ui.each(n[l],t,i)},jeeplus.event(window,"resize",function(){jeeplus.env.touch&&(jeeplus.edit_open_time&&new Date-jeeplus.edit_open_time<1e3||jeeplus.mb&&new Date-jeeplus.mb<1e3)||jeeplus.ui.resize()}),o.Wb={},o.delay=function(e){jeeplus.ui.Wb[e.id]=e},o.hasMethod=function(e,t){var i=jeeplus.ui[e];return!!i&&(i.$protoWait&&(i=i.call(jeeplus)),!!jeeplus.ui[e].prototype[t])},jeeplus.ui.zIndex=function(){return jeeplus.ui.zIndexBase++},jeeplus.ui.zIndexBase=100,o.A=function(e){if(e.view){var t=e.view;return new o[t](e)}if(e.rows||e.cols){for(var i=e.rows||e.cols,s=!1,n=0;n<i.length;n++)!i[n].body||i[n].view||i[n].align||(s=!0);return s?new o.headerlayout(e):new o.layout(e)}return e.cells?new o.multiview(e):e.template||e.content?new o.template(e):e.align&&e.body?new o.align(e):new o.spacer(e)},o.views={},jeeplus.$$=function(e){if(!e)return null;if(o.views[e])return o.views[e];if(o.Wb[e])return jeeplus.ui(o.Wb[e]);var t=e;if("object"==typeof e){if(e.s)return e;t=e.target||e.srcElement||e}return o.views[jeeplus.html.locate({target:jeeplus.toNode(t)},"view_id")]},jeeplus.isUndefined(window.$$)&&(window.$$=jeeplus.$$),jeeplus.UIExtension=window.jeeplus_view||{},jeeplus.protoUI({name:"baseview",$init:function(e){e.id||(e.id=jeeplus.ui.Tb(this.name)),this.Xb=jeeplus.Xb,jeeplus.Xb=null,this.$scope=e.$scope||(this.Xb?this.Xb.$scope:null),this.x||(this.w=this.x=jeeplus.html.create("DIV",{class:"jeeplus_view"}),this.$view=this.x)},$skin:!1,defaults:{width:0,height:0,gravity:1},getNode:function(){return this.x},getParentView:function(){return this.Xb||null},getTopParentView:function(){var e=this.getParentView();return e?e.getTopParentView():this},getFormView:function(){var e=this.getParentView();return!e||e.setValues?e:e.getFormView()},getChildViews:function(){return[]},queryView:function(e,t){if("object"==typeof e){for(var s=Object.keys(e),n=[],i=0;i<s.length;i++)n[i]=e[s[i]];var l=function(e){for(var t=e.config,i=0;i<s.length;i++)if(t[s[i]]!=n[i])return!1;return!0}}else l=e;if("self"===t&&l(this))return this;var a="all"===t&&[],r="parent"===t?this.gG:this.hG,o=this.iG(l,r,a);return"all"===t?a:o},hG:function(e){return e.getChildViews()},gG:function(e){var t=e.getParentView();return t?[t]:[]},iG:function(e,t,i){for(var s=t(this),n=0;n<s.length;n++)if(e(s[n])){if(!i)return s[n];i.push(s[n])}else{var l=s[n].iG(e,t,i);if(l)return l}return null},isVisible:function(e,t){if(this.s.hidden)return e&&(this.Yb||(this.Yb=[],this.Zb={}),this.Zb[e]||(this.Zb[e]=!0,this.Yb.push(e))),!1;var i=this.getParentView();return!i||i.isVisible(e,this.s.id)},isEnabled:function(){if(this.$b)return!1;var e=this.getParentView();return!e||e.isEnabled()},disable:function(){jeeplus.html.remove(this.$b),this.s.disabled=!0,this.$b=jeeplus.html.create("div",{class:"jeeplus_disabled"}),this.x.appendChild(this.$b),this.x.setAttribute("aria-disabled","true"),jeeplus.html.addCss(this.x,"jeeplus_disabled_view",!0),jeeplus.UIManager.vb(this)},enable:function(){this.s.disabled=!1,this.$b&&(jeeplus.html.remove(this.$b),jeeplus.html.removeCss(this.x,"jeeplus_disabled_view"),this.x.removeAttribute("aria-disabled"),this.$b=null)},disabled_setter:function(e){return e?this.disable():this.enable(),e},container_setter:function(e){return!0},css_setter:function(e){return"object"==typeof e&&(e=jeeplus.html.createCss(e)),this.x.className+=" "+e,e},id_setter:function(e){if(jeeplus.Mb&&(jeeplus.Mb!=this||this.Lb)){var t=this.config.$id=e;(this.Lb||jeeplus.Mb).Hb[e]=this,e=jeeplus.ui.Tb(this.name),(this.Lb||jeeplus.Mb).Ib[e]=t}return(jeeplus.ui.views[e]=this).x.setAttribute("view_id",e),e},$setSize:function(e,t){var i=this.ac;return(!i||i[0]!=e||i[1]!=t)&&(this.ac=[e,t],this.$width=this.bc=e-(this.cc?jeeplus.ui.scrollSize:0),this.$height=this.dc=t-(this.ec?jeeplus.ui.scrollSize:0),this.s.flex||(this.x.style.width=e+"px",this.x.style.height=t+"px"),!0)},$getSize:function(e,t){var i=this.s,s=[1*(i.width||i.minWidth||0),1*(i.width||i.maxWidth||1e5),1*(i.height||i.minHeight||0),1*(i.height||i.maxHeight||1e5),i.gravity];return s[0]+=e,s[1]+=e,s[2]+=t,s[3]+=t,s},show:function(e,t){var i=this.getParentView(),s=!arguments[2];if(i)!t&&!1!==t&&this.s.animate&&i.s.animate&&(t=jeeplus.extend(i.s.animate?jeeplus.extend({},i.s.animate):{},this.s.animate,!0)),(s?i.fc:i.Fb)&&(s?i.fc:i.Fb).call(i,this,t),s&&this.Qd(),e&&s&&i.show(!i.$$&&e);else if(this.s.hidden){if(s)jeeplus.toNode(this.s.gt||document.body).appendChild(this.x),this.s.hidden=!1,this.adjust(),this.Qd()}else s||(this.s.hidden=this.s.ft=!0,this.x&&(this.s.gt=this.x.parentNode,jeeplus.html.remove(this.x)))},Qd:function(){if(this.Yb){for(var e=0;e<this.Yb.length;e++){var t=jeeplus.$$(this.Yb[e]);t&&t.render()}this.Yb=[],this.Zb={}}},DD:function(e,t){var i=t.srcElement||t.target,s=i.getAttribute("role");13!==e&&32!==e||"button"!=s||this.s.disabled||(jeeplus.html.triggerEvent(i,"MouseEvents","click"),jeeplus.html.preventEvent(t))},hidden_setter:function(e){return e&&this.hide(),this.s.hidden},hide:function(){this.show(null,null,!0),jeeplus.UIManager.vb(this)},adjust:function(){if(!this.x.parentNode)return!1;var e=this.x.parentNode.clientWidth||0,t=this.x.parentNode.clientHeight||0,i=this.$getSize(0,0),s=this.x.parentNode==document.body&&!this.setPosition;i[0]>e&&(e=i[0]),i[2]>t&&(t=i[2]),(!s||this.s.width)&&e>i[1]&&(e=i[1]),(!s||this.s.height)&&t>i[3]&&(t=i[3]),this.$setSize(e,t),jeeplus.ED&&(jeeplus.ED=!1,this.adjust())},resize:function(){if(!(jeeplus.gc||jeeplus.ui.PG||jeeplus.ot)){var e=this.getParentView();e?e.resizeChildren?e.resizeChildren():e.resize():(this.adjust(),jeeplus.callEvent("onResize",[]))}}},jeeplus.Settings,jeeplus.Destruction,jeeplus.BaseBind,jeeplus.UIExtension),jeeplus.protoUI({name:"view",$init:function(e){this.hc(e)},hc:function(e){var t=jeeplus.isUndefined(e.borderless);t&&!this.setPosition&&e.$topView&&(t=!(e.borderless=!0)),t&&this.defaults.borderless||e.borderless?e.Ob={top:!0,left:!0,bottom:!0,right:!0}:(e.Ob||(e.Ob={}),this.w.style.borderWidth="1px")},$getSize:function(e,t){var i=this.s.Ob;return i&&(e+=(i.left?0:1)+(i.right?0:1),t+=(i.top?0:1)+(i.bottom?0:1)),jeeplus.ui.baseview.prototype.$getSize.call(this,e,t)},$setSize:function(e,t){var i=this.s.Ob;return i&&(e-=(i.left?0:1)+(i.right?0:1),t-=(i.top?0:1)+(i.bottom?0:1)),jeeplus.ui.baseview.prototype.$setSize.call(this,e,t)}},jeeplus.ui.baseview)}(),jeeplus.ui.view.call(jeeplus),jeeplus.protoUI({name:"spacer",defaults:{borderless:!0},$init:function(){this.x.className+=" jeeplus_spacer"}},jeeplus.ui.view),jeeplus.protoUI({name:"baselayout",restore:function(e,t,i){var s=this.mH(jeeplus.copy(e),t);return i?s:void jeeplus.ui(s.cols||s.rows,this)},mH:function(e,t){if(!e.$layout)return t.call(this,e);for(var i=e.cols||e.rows,s=0;s<i.length;s++)i[s]=this.mH(i[s],t);return e},serialize:function(e){for(var t=[],i=this.getChildViews(),s=0;s<i.length;s++){var n=i[s];if(n.movePortlet){var l=n.getChildViews();t.push(e.call(this,l[l.length-1]))}else n.serialize?t.push(n.serialize(e,!0)):t.push(e.call(this,n))}var a={$layout:!0,type:this.config.type};return this.config.rows?a.rows=t:a.cols=t,a},$init:function(e){this.$ready.push(this.kc),this.y=this.w,this.lc=[],this.ht=[],e.$topView&&(e.borderless=!0,e.Ob={top:!0,left:!0,bottom:!0,right:!0}),e.isolate&&jeeplus.extend(this,jeeplus.IdSpace)},rows_setter:function(e){return this.mc=1,this.nc=e,!0},cols_setter:function(e){return this.mc=0,this.$view.style.whiteSpace="nowrap",this.nc=e,!0},Rb:function(e){jeeplus.PowerArray.removeAt.call(this.q,jeeplus.PowerArray.find.call(this.q,e)),this.resizeChildren(!0)},Qb:function(e,t){if(jeeplus.isUndefined(t)){for(var i=0;i<this.q.length;i++)this.q[i].destructor();this.nc=e,this.kc()}else{var s;if("number"==typeof t){(t<0||t>this.q.length)&&(t=this.q.length);var n=(this.q[t]||{}).x;jeeplus.PowerArray.insertAt.call(this.q,e,t),e.s.hidden||jeeplus.html.insertBefore(e.x,n,this.y)}else{s=jeeplus.$$(t),t=jeeplus.PowerArray.find.call(this.q,s);var l=s.x.parentNode;l&&!e.s.hidden&&l.insertBefore(e.x,s.x),s.destructor(),this.q[t]=e}this.mc||this.oc(e),this.q[t].Xb=this}this.resizeChildren(!0);var a=this.elements?this:this.getFormView();a&&a.Qs(),jeeplus.callEvent("onReconstruct",[this])},oc:function(e){e.x.style.display="inline-block",e.x.style.verticalAlign="top"},addView:function(e,t){jeeplus.isUndefined(t)&&(t=this.q.length);var i=this.$$?this:this.getTopParentView();return(i=i&&i.ui?i:jeeplus).ui(e,this,t).s.id},removeView:function(e){var t;t="object"!=typeof e?jeeplus.$$(e)||(this.$$?this.$$(e):null):e;var i=jeeplus.PowerArray.find.call(this.q,t);if(0<=i){this.Vx&&this.Vx(i,t);var s=this.elements?this:this.getFormView();this.q.splice(i,1),s&&jeeplus.ui.each(t,function(e){e.name&&delete s.getCleanValues()[e.config.name]},s,!0),t.destructor(),this.resizeChildren(!0),s&&s.Qs()}jeeplus.callEvent("onReconstruct",[this])},reconstruct:function(){this.qc=0,this.Qb(this.nc)},Fb:function(e,t,i){e.s.hidden||(e.s.hidden=!0,jeeplus.html.remove(e.x),this.qc++,i||jeeplus.Nb||this.resizeChildren(!0))},Lw:function(e){e.callEvent&&e.callEvent("onViewShow",[])},resizeChildren:function(){if(!jeeplus.ui.PG&&this.lc){var e=this.getParentView();if(e)return e.resizeChildren?e.resizeChildren():e.resize();var t,i,s,n,l=this.$getSize(0,0);if(s=t=this.lc[0]||0,n=i=this.lc[1]||0,(1e5<=l[1]||1e5<=l[3])&&this.x.parentNode&&(s=t=Math.max(l[0],this.s.width||this.x.parentNode.offsetWidth||t||0),n=i=Math.max(l[2],this.s.height||this.x.parentNode.offsetHeight||i||0)),e)this.rc(t,i);else{l[0]>t&&(s=l[0]),l[2]>i&&(n=l[2]);var a=this.x.parentNode==document.body&&!this.setPosition;!a&&t>l[1]&&(s=l[1]),!a&&i>l[3]&&(n=l[3]),this.$setSize(s,n)}jeeplus.ED&&(jeeplus.ED=!1,this.resizeChildren()),jeeplus.callEvent("onResize",[])}},getChildViews:function(){return this.q},index:function(e){e.s&&(e=e.s.id);for(var t=0;t<this.q.length;t++)if(this.q[t].s.id==e)return t;return-1},fc:function(e,t,i){if(e.s.hidden){e.s.hidden=!1;for(var s=this.index(e)+1;this.q[s]&&this.q[s].s.hidden;)s++;var n=this.q[s]?this.q[s].x:null;jeeplus.html.insertBefore(e.x,n,this.y||this.x),this.qc--,i||(this.resizeChildren(!0),e.refresh&&e.refresh()),e.callEvent&&(e.callEvent("onViewShow",[]),jeeplus.ui.each(e,this.Lw))}},showBatch:function(e,t){var i=void 0!==t;if(t=!1!==t,i)this.s.visibleBatch="";else{if(this.s.visibleBatch==e)return;this.s.visibleBatch=e}for(var s=[],n=0;n<this.q.length;n++)this.q[n].s.batch?this.q[n].s.batch==e?t?s.push(this.q[n]):this.Fb(this.q[n],null,!0):i||this.Fb(this.q[n],null,!0):s.push(this.q[n]);for(n=0;n<s.length;n++)this.fc(s[n],null,!0),s[n].Qd();this.resizeChildren(!0)},kc:function(e){this.q=[];for(var t=0;t<e.length;t++)jeeplus.Xb=this,e[t].Ob||(e[t].borderless=!0),this.q[t]=jeeplus.ui.A(e[t],this),this.mc||this.oc(this.q[t]),this.s.visibleBatch&&this.s.visibleBatch!=this.q[t].s.batch&&this.q[t].s.batch&&(this.q[t].s.hidden=!0,this.qc++),this.q[t].s.hidden||((this.y||this.w).appendChild(this.q[t].x),this.q[t].$nospace&&this.qc++);this.sc&&this.sc(e)},tc:function(e,t,i){if(this.mc!=i)for(var s=0;s<this.q.length;s++)this.q[s].s[e]=t,this.q[s].tc&&this.q[s].tc(e,t,i)},$getSize:function(e,t){var i=0,s=1e5,n=1e5,l=0;this.mc?n=0:s=0;var a=0,r=0,o=0;this.uc=[];for(var h=0;h<this.q.length;h++)if(!this.q[h].s.hidden){var u=this.uc[h]=this.q[h].$getSize(0,0);this.q[h].$nospace?r++:this.mc?(u[0]>i&&(i=u[0]),u[1]<s&&(s=u[1]),l+=u[2],n+=u[3],u[2]==u[3]&&-1!=u[2]?(a+=u[2],r++):o+=u[4]):(u[2]>l&&(l=u[2]),u[3]<n&&(n=u[3]),i+=u[0],s+=u[1],u[0]==u[1]&&-1!=u[0]?(a+=u[0],r++):o+=u[4])}n<l&&(n=l),s<i&&(s=i),this.vc=[a,this.q.length-r,o],this.ng=[i+e,l+t];var c=jeeplus.ui.baseview.prototype.$getSize.call(this,0,0);return 1e5<=c[1]&&(c[1]=0),1e5<=c[3]&&(c[3]=0),c[0]=(c[0]||i)+e,c[1]=Math.max(c[0],(c[1]||s)+e),c[2]=(c[2]||l)+t,c[3]=Math.max(c[2],(c[3]||n)+t),!this.mc&&this.s.responsive&&(c[0]=0),c},$setSize:function(e,t){this.lc=[e,t],jeeplus.ui.baseview.prototype.$setSize.call(this,e,t),this.rc(e,t)},wc:function(e,t,i){var s=t=e[t];if(t!=(i=e[i])){var n=this.xc*e[4]/this.yc;if(n<t)s=t,this.yc-=e[4],this.xc-=s;else{if(!(i<n))return-1;s=i,this.yc-=e[4],this.xc-=s}}return s},it:function(e,t){var i=jeeplus.$$(t);"hide"!==i&&i?(i||(i=jeeplus.ui({view:"popup",body:[{}]})),e.jt=e.s.width,e.kt=e.s.height,e.lt=i.s.id,e.s.width=0,e.s.height||(e.s.autoheight=!0),jeeplus.ui(e,i,this.ht.length)):(e.hide(),e.lt="hide"),this.ht.push(e)},mt:function(e){var t=e.lt;if(e.lt=0,"hide"!==t&&t){e.s.width=e.jt,e.s.height=e.kt,delete e.s.autoheight;for(var i=0;this.q[i]&&!1===this.q[i].s.responsiveCell;)i++;jeeplus.ui(e,this,i)}else e.show();this.ht.pop()},nt:function(e,t){if(jeeplus.ot=!0,e+2*this.Dc+this.Cc*(this.q.length-1)<this.ng[0])for(var i=this.q.length-1,s=0;s<i;s++){if(!(n=this.q[s]).lt){if(!1!==n.s.responsiveCell){this.it(n,this.s.responsive),jeeplus.callEvent("onResponsiveHide",[n.s.id]),jeeplus.ED=!0;break}i=this.q.length}}else if(this.ht.length){var n,l="hide"==(n=this.ht[this.ht.length-1]).lt?0:n.jt;n.$getSize(l,0)[0]+this.ng[0]+this.Cc+20<=e&&(this.mt(n),jeeplus.callEvent("onResponsiveShow",[n.s.id]),jeeplus.ED=!0)}jeeplus.ot=!1},rc:function(e,t){jeeplus.gc=(jeeplus.gc||0)+1,!this.mc&&this.s.responsive&&this.nt(e,t),this.xc=(this.mc?t:e)-this.vc[0],this.yc=this.vc[2];for(var i=e,s=t,n=[],l=0;l<this.q.length;l++)if(!this.q[l].s.hidden&&this.uc[l]){var a=this.uc[l];if(this.mc){if((s=this.wc(a,2,3))<0){n.push(l);continue}}else if((i=this.wc(a,0,1))<0){n.push(l);continue}this.q[l].$setSize(i,s)}for(l=0;l<n.length;l++){var r=n[l],o=(a=this.uc[r],Math.round(this.xc*a[4]/this.yc));this.xc-=o,this.yc-=a[4],this.mc?s=o:i=o,this.q[r].$setSize(i,s)}jeeplus.gc-=1},zc:function(e,t){var i=this.index(e);return-1==i?null:this.q[i+t]},Ac:function(){return this.q[0]}},jeeplus.EventSystem,jeeplus.ui.baseview),jeeplus.protoUI({name:"layout",$init:function(e){this.qc=0},defaults:{type:"line"},kc:function(){this.Bc&&(e=this.Bc(e)),this.Uw||(this.x.className+=" jeeplus_layout_"+(this.s.type||""),this.Uw=1),this.s.margin!==jeeplus.undefined&&(this.Cc=this.s.margin),this.s.padding!=jeeplus.undefined&&(this.Dc=this.Ec=this.s.padding),this.s.paddingX!==jeeplus.undefined&&(this.Dc=this.s.paddingX),this.s.paddingY!==jeeplus.undefined&&(this.Ec=this.s.paddingY),(this.Ec||this.Dc)&&(this.Fc=!0),this.Wx()&&!this.s.borderless&&(this.w.style.borderWidth="1px",this.Gc=!0);var e=this.nc;this.s.borderless&&(this.s.Ob={top:!0,left:!0,right:!0,bottom:!0}),this.Hc(e),jeeplus.ui.baselayout.prototype.kc.call(this,e),this.Ic(e)},$getSize:function(e,t){e=e||0,t=t||0;var i=this.Cc*(this.q.length-this.qc-1);if(this.Gc||this.Wx()){var s=this.s.Ob;s&&(e+=(s.left?0:1)+(s.right?0:1),t+=(s.top?0:1)+(s.bottom?0:1))}return this.s.height||(t+=2*(this.Ec||0)+(this.mc?i:0)),this.s.width||(e+=2*(this.Dc||0)+(this.mc?0:i)),jeeplus.ui.baselayout.prototype.$getSize.call(this,e,t)},$setSize:function(e,t){this.lc=[e,t],this.Wx()||this.Gc?jeeplus.ui.view.prototype.$setSize.call(this,e,t):jeeplus.ui.baseview.prototype.$setSize.call(this,e,t),t=this.dc,e=this.bc,this.s.scroll&&(t=Math.max(t,this.ng[1]),e=Math.max(e,this.ng[0])),this.rc(e,t)},rc:function(e,t){var i=this.Cc*(this.q.length-this.qc-1);return this.mc?(t-=i+2*this.Ec,e-=2*this.Dc):(e-=i+2*this.Dc,t-=2*this.Ec),jeeplus.ui.baselayout.prototype.rc.call(this,e,t)},resizeChildren:function(e){if(e){this.ac=null;for(var t=[],i=0;i<this.q.length;i++){var s=this.q[i];t[i]=s.s;var n=s.lc&&!s.Gc||s.s.borderless?"0px":"1px";s.x.style.borderTopWidth=s.x.style.borderBottomWidth=s.x.style.borderLeftWidth=s.x.style.borderRightWidth=n}this.Hc(t);for(i=0;i<t.length;i++)t[i].borderless&&this.q[i].hc&&this.q[i].hc(t[i]);this.Ic(this.q)}jeeplus.ot||jeeplus.ui.baselayout.prototype.resizeChildren.call(this)},Wx:function(){return this.Fc&&0<this.Cc&&!this.Xx},Hc:function(e){if(!this.Wx()||this.s.borderless&&"space"!=this.s.type){for(var t=0;t<e.length;t++)e[t].Ob=jeeplus.clone(this.s.Ob);var i=!1;this.Xx&&(i=!0);var s=e.length;if(this.mc){for(t=1;t<s-1;t++)e[t].Ob.top=e[t].Ob.bottom=i;if(1<s){for("head"!=this.s.type&&(e[0].Ob.bottom=i);e[s-1].hidden&&1<s;)s--;0<s&&(e[s-1].Ob.top=i)}}else{for(t=1;t<s-1;t++)e[t].Ob.left=e[t].Ob.right=i;if(1<s){for("head"!=this.s.type&&(e[0].Ob.right=i),e[s-1].Ob.left=i;1<s&&e[s-1].hidden;)s--;0<s&&(e[s-1].Ob.left=i)}}}else for(t=0;t<e.length;t++)e[t].Ob&&e[t].borderless||(e[t].Ob={top:!1,left:!1,right:!1,bottom:!1})},Jc:function(e,t){t.top&&(e.borderTopWidth="0px"),t.left&&(e.borderLeftWidth="0px"),t.right&&(e.borderRightWidth="0px"),t.bottom&&(e.borderBottomWidth="0px")},Ic:function(e){for(var t=0,i=0;i<e.length;i++){var s=this.q[i],n=s.s.Ob;if(s.s.hidden&&this.q[i+1]){var l=this.q[i+1].s.Ob;n.top||(l.top=!1),n.left||(l.left=!1),i==t&&t++}this.Jc(s.x.style,s.s.Ob)}var a=this.mc?"marginLeft":"marginTop",r=this.mc?"marginTop":"marginLeft",o=this.mc?this.Dc:this.Ec,h=this.mc?this.Ec:this.Dc;for(i=0;i<e.length;i++)this.q[i].x.style[a]=(o||0)+"px";this.q.length&&(this.q[t].x.style[r]=(h||0)+"px");for(var u=t+1;u<e.length;u++)this.q[u].x.style[r]=this.Cc+"px"},type_setter:function(e){return this.Cc=void 0!==this.Kc[e]?this.Kc[e]:this.Kc.line,this.Dc=this.Ec=void 0!==this.Kc[e]?this.Lc[e]:this.Lc.line,this.Xx="material"==e||"clean"==e,"material"==e&&(this.s.borderless=!0),e},$skin:function(){var e=jeeplus.skin.$active;this.Kc=e.layoutMargin,this.Lc=e.layoutPadding}},jeeplus.ui.baselayout),jeeplus.ui.layout.call(jeeplus),jeeplus.FlexLayout={$init:function(){this.$view.className+=" jeeplus_flexlayout"},oc:function(){},Hc:function(){},Ic:function(){},$getSize:function(e,t){var i=0,s=0,n=this.s.gravity;this.uc=[];for(var l=0;l<this.q.length;l++){var a=this.q[l].$getSize(0,0);this.uc.push(a),i=Math.max(i,a[0]),s=Math.max(s,a[2])}return i+=2*(this.Dc||0),s+=2*(this.Ec||0),this.s.width&&(i=Math.max(i,this.s.width)),this.s.height&&(s=Math.max(s,this.s.height)),[i,1e5,s,1e5,n]},rc:function(e,t){var i=this.$view.style,s=Math.round(this.Cc/2);i.paddingTop=i.paddingBottom=this.Ec-s+"px",i.paddingLeft=i.paddingRight=this.Dc-s+"px";for(var n=0;n<this.q.length;n++)if(!this.q[n].s.hidden){var l=this.q[n].$view,a=this.uc[n],r=this.q[n].s;l&&(l.style.minWidth=a[0]+"px",a[1]<1e5&&a[1]!=a[0]&&(l.style.maxWidth=a[1]+"px"),l.style.flexBasis=r.flexBasis||a[0]+"px",l.style.flexGrow=r.flexGrow||(a[1]!=a[0]?a[4]:0),l.style.height=a[3]!=a[2]?"auto":a[2]+"px",l.style.minHeight=a[2]+"px",a[3]<1e5&&a[3]!=a[2]&&(l.style.maxHeight=a[3]+"px"),l.style.margin=s+"px")}var o=[];for(n=0;n<this.q.length;n++)if(!this.q[n].s.hidden){l=this.q[n].$view;o[n]=[l.offsetWidth,l.offsetHeight]}for(n=0;n<this.q.length;n++)if(!this.q[n].s.hidden){var h=this.q[n];if(l=h.$view){h.s.flex=!0;var u=(a=this.uc[n])[2]==a[3]?a[2]:o[n][1];h.$setSize(o[n][0],u),h.s.flex=!1}}this.$height=this.dc=this.$view.scrollHeight,this.$view.style.height=this.dc+"px"}},jeeplus.protoUI({$init:function(){jeeplus.extend(this,jeeplus.FlexLayout,!0)},name:"flexlayout"},jeeplus.ui.layout),jeeplus.protoUI({name:"align",defaults:{borderless:!0,left:0,top:0,right:0,bottom:0},$init:function(){this.x.className+=" jeeplus_view_align"},getChildViews:function(){return[this.gd]},body_setter:function(e){return e.Ob={top:!1,left:!1,right:!1,bottom:!1},this.gd=jeeplus.ui.A(e),(this.gd.Xb=this).x.appendChild(this.gd.x),e},align_setter:function(e){"string"==typeof e&&(e=e.split(",")),this.FD=this.GD=this.HD="";for(var t=0;t<e.length;t++){var i=e[t];("center"===i||"left"===i||"right"===i)&&(this.FD=i),("top"===i||"bottom"===i||"middle"===i)&&(this.GD=i),"absolute"===i&&(this.FD=this.GD=this.HD="precise")}return e},getBody:function(){return this.gd},$setSize:function(e,t){var i,s;jeeplus.ui.view.prototype.$setSize.call(this,e,t),s=this.HD?(i=e-this.s.left-this.s.right,t-this.s.top-this.s.bottom):(i=this.ng[0]||e,this.ng[2]||t),this.gd.$setSize(i,s);var n=this.gd.x;"center"==this.FD?n.style.marginLeft=Math.ceil((e-i)/2)+"px":"right"==this.FD?n.style.marginLeft=e-i+"px":n.style.marginLeft=(this.HD?this.s.left:0)+"px","middle"==this.GD?n.style.marginTop=Math.ceil((t-s)/2)+"px":"bottom"==this.GD?n.style.marginTop=t-s+"px":n.style.marginTop=(this.HD?this.s.top:0)+"px"},$getSize:function(e,t){var i=this.ng=this.gd.$getSize(0,0),s=jeeplus.ui.baseview.prototype.$getSize.call(this,0,0);return this.HD&&(e+=this.s.left+this.s.right,t+=this.s.top+this.s.bottom),!this.FD||this.HD?(s[0]=i[0]+e,s[1]=i[1]+e):(s[0]=(s[0]||i[0])+t,s[1]+=e),!this.GD||this.HD?(s[2]=i[2]+t,s[3]=i[3]+t):(s[2]=(s[2]||i[2])+t,s[3]+=t),s}},jeeplus.ui.view),jeeplus.animate=function(e,t){var i=t;if(jeeplus.isArray(e))for(var s=0;s<e.length;s++){if(jeeplus.isArray(t)&&(i=t[s]),"slide"==i.type){if("out"==i.subtype&&0===s)continue;if("in"==i.subtype&&1==s)continue}if("flip"!=i.type)jeeplus.animate(e[s],i);else{var n=jeeplus.clone(i);0===s&&(n.type="flipback"),1==s&&(n.callback=null),jeeplus.animate(e[s],n)}}else{var l=jeeplus.toNode(e);l.Mc?jeeplus.animate.end(l,i):jeeplus.animate.start(l,i)}},jeeplus.animate.end=function(e,t){e.style[jeeplus.env.transitionDuration]="1ms",e.Mc=null,jeeplus.Nc&&window.clearTimeout(jeeplus.Nc),jeeplus.Nc=jeeplus.delay(jeeplus.animate,jeeplus,[e,t],10)},jeeplus.animate.isSupported=function(){return!jeeplus.$testmode&&!jeeplus.noanimate&&jeeplus.env.transform&&jeeplus.env.transition&&!jeeplus.env.isOpera},jeeplus.animate.formLine=function(e,t,i){var s=i.direction;t.parentNode&&(t.parentNode.style.position="relative"),t.style.position="absolute",e.style.position="absolute";var n=jeeplus.env.isFF?"top"==s||"left"==s?-1:1:0;return"top"==s||"bottom"==s?(e.style.left="0px",e.style.top=(i.top||n)+("top"==s?1:-1)*t.offsetHeight+"px"):(e.style.top=(i.top||0)+"px",e.style.left=n+("left"==s?1:-1)*t.offsetWidth+"px"),t.parentNode==e.parentNode&&i.keepViews?e.style.display="":jeeplus.html.insertBefore(e,t.nextSibling,t.parentNode),"slide"==i.type&&"out"==i.subtype&&(e.style.left="0px",e.style.top=(i.top||0)+"px",t.parentNode.removeChild(t),jeeplus.html.insertBefore(t,e.nextSibling,e.parentNode)),[e,t]},jeeplus.animate.breakLine=function(e){arguments[1]?e[1].style.display="none":jeeplus.html.remove(e[1]),jeeplus.animate.clear(e[0]),jeeplus.animate.clear(e[1]),e[0].style.position=""},jeeplus.animate.clear=function(e){e.style[jeeplus.env.transform]="none",e.style[jeeplus.env.transition]="none",e.style.top=e.style.left=""},jeeplus.animate.defaults={type:"slide",delay:"0",duration:"500",timing:"ease-in-out",x:0,y:0},jeeplus.animate.start=function(s,e){"string"==typeof e&&(e={type:e}),e=jeeplus.Settings.E(e,jeeplus.animate.defaults);var t,i,n=jeeplus.env.cssPrefix,l=s.Mc=e;switch("slide"==l.type&&l.direction){case"right":l.x=s.offsetWidth;break;case"left":l.x=-s.offsetWidth;break;case"top":l.y=-s.offsetHeight;break;case"bottom":default:l.y=l.y||s.offsetHeight}("flip"==l.type||"flipback"==l.type)&&(t=[0,0],i="scaleX","vertical"==l.subtype?(t[0]=20,i="scaleY"):t[1]=20,("right"==l.direction||"bottom"==l.direction)&&(t[0]*=-1,t[1]*=-1));var a=l.duration+"ms "+l.timing+" "+l.delay+"ms",r=n+"TransformStyle: preserve-3d;",o="",h="";switch(l.type){case"fade":o="opacity "+a,r="opacity: 0;";break;case"show":o="opacity "+a,r="opacity: 1;";break;case"flip":a=l.duration/2+"ms "+l.timing+" "+l.delay+"ms",h="skew("+t[0]+"deg, "+t[1]+"deg) "+i+"(0.00001)",o="all "+a;break;case"flipback":l.delay+=l.duration/2,a=l.duration/2+"ms "+l.timing+" "+l.delay+"ms",s.style[jeeplus.env.transform]="skew("+-1*t[0]+"deg, "+-1*t[1]+"deg) "+i+"(0.00001)",s.style.left="0",h="skew(0deg, 0deg) "+i+"(1)",o="all "+a;break;case"slide":var u=l.x+"px",c=l.y+"px";h=jeeplus.env.translate+"("+u+", "+c+("translate3d"==jeeplus.env.translate?", 0":"")+")",o=n+"transform "+a}jeeplus.delay(function(){s.style[jeeplus.env.transition]=o,jeeplus.delay(function(){r&&(s.style.cssText+=r),h&&(s.style[jeeplus.env.transform]=h);var t=!1,i=jeeplus.event(s,jeeplus.env.transitionEnd,function(e){s.Mc=null,l.callback&&l.callback.call(l.master||window,s,l,e),t=!0,jeeplus.eventRemove(i)});window.setTimeout(function(){t||(s.Mc=null,l.callback&&l.callback.call(l.master||window,s,l),t=!0,jeeplus.eventRemove(i))},1.3*(1*l.duration+1*l.delay))})})},jeeplus.MouseEvents={$init:function(e){e=e||{},this.Oc=0,this.Pc=300,this.Qc=null,this.Rc(e.onClick,"on_click"),this.Rc(e.onContext,"on_context"),this.Rc(e.onDblClick,"on_dblclick"),this.Rc(e.onMouseMove,"on_mouse_move"),this.on_click&&(jeeplus.UE(this.w,"click",this.Sc,{bind:this}),jeeplus.env.isIE8&&this.on_dblclick&&jeeplus.UE(this.w,"dblclick",this.Tc,{bind:this})),this.on_context&&jeeplus.UE(this.w,"contextmenu",this.Uc,{bind:this}),this.on_mouse_move&&this.Vc()},Vc:function(){this.Wc||(this.on_mouse_move=this.on_mouse_move||{},jeeplus.UE(this.w,"mousemove",this.Xc,{bind:this}),jeeplus.UE(this.w,jeeplus.env.isIE?"mouseleave":"mouseout",this.Xc,{bind:this}),this.Wc=1,this.attachEvent("onDestruct",function(){this.Zc&&window.clearTimeout(this.Zc)}))},Rc:function(e,t){if(e){var i=this[t],s=i?jeeplus.extend({},i):{};this[t]=jeeplus.extend(s,e)}},Sc:function(e){if(!this.isEnabled())return!1;if(jeeplus.UIManager.sb(this),this.on_dblclick){var t=(new Date).valueOf();if(t-this.Oc<=this.Pc&&this.locate)if(""+this.locate(e)==""+this.Qc)return this.Oc=0,this.Tc(e);this.Oc=t}return this.Yc(e,this.on_click,"ItemClick")},Tc:function(e){return this.Yc(e,this.on_dblclick,"ItemDblClick")},Uc:function(e){this.Yc(e,this.on_context,"BeforeContextMenu","AfterContextMenu")},Xc:function(e){if(!this.$destructed){if(document.createEventObject)e=document.createEventObject(event);else if(!(jeeplus.$testmode||jeeplus.isUndefined(e.movementY)||e.movementY||e.movementX))return;this.Zc&&window.clearTimeout(this.Zc),this.callEvent("onMouseMoving",[e]),this.Zc=window.setTimeout(jeeplus.bind(function(){"mousemove"==e.type?this.$c(e):this._c(e)},this),this.s.mouseEventDelay||500)}},$c:function(e){this.Yc(e,this.on_mouse_move,"MouseMove")||this.callEvent("onMouseOut",[e||event])},_c:function(e){this.callEvent("onMouseOut",[e||event])},Yc:function(e,t,i,s){if(!(e=e||event).processed&&this.x){e.processed=!0;var n=e.target||e.srcElement;if(jeeplus.env.isIE8){var l=this.s.id,a=n.w_view;if(a){if(a!==l)return}else n.w_view=l}for(var r="",o=null,h=!1;n&&n.parentNode&&this.x&&n!=this.x.parentNode;){if(!h&&n.getAttribute&&(o=n.getAttribute(this.ad))){if(this.Qc=o,this.callEvent){if(!this.callEvent("on"+i,[o,e,n]))return;s&&this.callEvent("on"+s,[o,e,n])}h=!0}if(r=jeeplus.html.TC(n)){r=r.toString().split(" ");for(var u=0;u<r.length;u++)if(t[r[u]]){if(!1===jeeplus.toFunctor(t[r[u]],this.$scope).call(this,e,o||jeeplus.html.locate(e,this.ad),n))return h}}n=n.parentNode}return h}}},jeeplus.protoUI({name:"accordionitem",$init:function(e){this.x.innerHTML="<div jeeplus_ai_id='"+e.id+"'  class='jeeplus_accordionitem_header'><div tabindex='0' role='button' class='jeeplus_accordionitem_button' ></div><div class='jeeplus_accordionitem_label' ></div></div><div class='jeeplus_accordionitem_body'></div>",this.w=this.x,this.bd=this.w.childNodes[0],e.header||(this.bd.style.display="none"),this.cd=this.w.childNodes[0].childNodes[1],this.dd=this.w.childNodes[0].childNodes[0],this.ed=this.w.childNodes[1],this.x.className+=" jeeplus_accordionitem",this.fd=this.gd=null,this.q=!0,this.ed.setAttribute("role","tabpanel"),this.bd.setAttribute("role","tab"),this.attachEvent("onKeyPress",this.DD)},Rb:function(){this.gd={destructor:function(){}}},Qb:function(e){this.gd.destructor(),this.gd=e,(this.gd.Xb=this).ed.appendChild(this.gd.x),this.resize()},ad:"jeeplus_ai_id",getChildViews:function(){return[this.gd]},body_setter:function(e){return"object"!=typeof e&&(e={template:e}),e.Ob={top:!0,left:!0,right:!0,bottom:!0},(jeeplus.Xb=this).gd=jeeplus.ui.A(e),this.gd.$view.style.border="0px solid red",this.ed.appendChild(this.gd.x),e},header_setter:function(e){return e&&(e=jeeplus.template(e)),e},headerAlt_setter:function(e){return e&&(e=jeeplus.template(e)),e},$getSize:function(e,t){var i=this.gd.$getSize(0,0),s=this.s.Ob;s&&(e+=(s.left?0:1)+(s.right?0:1),t+=(s.top?0:1)+(s.bottom?0:1));var n=0,l=jeeplus.ui.baseview.prototype.$getSize.call(this,0,0);l[0]=(l[0]||i[0])+e,1e5<=l[1]&&(l[1]=i[1]),l[1]+=e,l[2]=(l[2]||i[2])+t;var a=l[3]<1e5;return a||(l[3]=i[3]),l[3]+=t,this.getParentView().mc?this.s.collapsed?l[2]=l[3]=this.hd():this.s.header&&(n=this.s.headerHeight):(this.s.collapsed&&(l[0]=l[1]=this.hd()),this.s.header&&(n=this.s.headerHeight)),a||(l[2]+=n,l[3]+=n),l},on_click:{jeeplus_accordionitem_header:function(e,t){return this.id(e),!1},jeeplus_accordionitem_header_v:function(e,t){return this.id(e),!1}},id:function(e){this.define("collapsed",!this.s.collapsed)},collapsed_setter:function(e){if(!1!==this.s.header){var t=this.getParentView();if(t){if(e)if(t.jd(this))this.kd();else{var i=0;if(1<t.q.length)for(var s=0;s<t.q.length;s++){var n=t.q[s];if(this!=n&&n.isVisible()&&n.expand){n.expand(),this.kd(),i=1;break}}if(!i)return}else this.ld();(this.s.collapsed=e)||t.md(this),this.refresh(),jeeplus.Nb||this.resize(),t.callEvent("onAfter"+(e?"Collapse":"Expand"),[this.s.id]),this.s.$noresize=e}return e}},collapse:function(){this.define("collapsed",!0),jeeplus.UIManager.vb(this)},expand:function(){this.define("collapsed",!1)},fc:function(){this.show()},Fb:function(){this.hide()},ld:function(){this.ed.style.display="",jeeplus.html.removeCss(this.$view,"collapsed"),jeeplus.html.removeCss(this.bd,"collapsed"),this.bd.setAttribute("aria-expanded","true")},kd:function(){this.getParentView().mc,this.s.headerAlt&&(this.cd.innerHTML=this.s.headerAlt()),this.ed.style.display="none",jeeplus.html.addCss(this.$view,"collapsed"),jeeplus.html.addCss(this.bd,"collapsed"),this.bd.setAttribute("aria-expanded","false")},refresh:function(){var e=this.s[this.s.collapsed?"headerAlt":"header"]||this.s.header;e&&(this.cd.innerHTML=e(),this.dd.setAttribute("aria-label",e()));var t=this.getParentView().mc?"vertical":"horizontal";this.x.className.indexOf(" "+t)<0&&jeeplus.html.addCss(this.x,t),jeeplus.env.transform||jeeplus.html.addCss(this.x,"jeeplus_ie",!0)},hd:function(){return this.s.collapsed?this.s.headerAltHeight:this.s.headerHeight},$setSize:function(e,t){if(jeeplus.ui.view.prototype.$setSize.call(this,e,t)||this.hd()!=this.CA){e=this.bc,t=this.dc;var i=this.CA=this.hd();if(this.s.header)if(this.bd.style.height=i+"px",this.bd.style.width="auto",this.bd.style[jeeplus.env.transform]="",this.bd.style.borderBottomWidth=(this.s.collapsed?0:1)+"px",this.getParentView().mc||!this.s.collapsed)t-=this.hd();else if(this.s.collapsed)if(jeeplus.animate.isSupported()){this.bd.style.width=t+"px",this.bd.style.height=e+3+"px";var s=Math.floor(t/2-e/2)+(e-this.s.headerAltHeight)/2;this.bd.style[jeeplus.env.transform]="rotate(90deg) translate("+s+"px, "+(s+1)+"px)"}else this.bd.style.width=e+"px",this.bd.style.height=t+3+"px";this.s.collapsed||(this.gd.$setSize(e,t),this.ct=t)}else if(!this.s.collapsed){var n=this.gd;this.ct&&n.$setSize(this.bc,this.ct)}},$skin:function(){var e=this.defaults;e.headerAltHeight=e.headerHeight=jeeplus.skin.$active.barHeight,jeeplus.skin.$active.borderlessAccordion&&(e.borderless=!0)},defaults:{header:!1,headerAlt:!1,body:""}},jeeplus.MouseEvents,jeeplus.EventSystem,jeeplus.ui.view),jeeplus.protoUI({name:"accordion",defaults:{panelClass:"accordionitem",multi:!1,collapsed:!1},$init:function(){this.x.setAttribute("role","tablist"),this.x.setAttribute("aria-multiselectable","true")},Qb:function(e,t){jeeplus.ui.layout.prototype.Qb.apply(this,arguments),e.collapsed_setter&&e.refresh&&e.refresh()},kc:function(){for(var e=this.s.panelClass,t=this.nc,i=0;i<t.length;i++)!t[i].body&&!t[i].header||t[i].view||t[i].align||(t[i].view=e),jeeplus.isUndefined(t[i].collapsed)&&(t[i].collapsed=this.s.collapsed);this.nd=!0,jeeplus.ui.layout.prototype.kc.call(this),this.nd=!1;for(i=0;i<this.q.length;i++)this.q[i].name==e&&this.q[i].refresh(),this.q[i].od=!1;var s=!1;for(i=this.q.length-1;0<=i&&!s;i--)this.q[i].s.hidden||(s=this.q[i].od=!0)},md:function(e){if(!1===this.s.multi&&!0!==this.nd)for(var t=0;t<this.q.length;t++)e!=this.q[t]&&!this.q[t].s.collapsed&&this.q[t].collapse&&this.q[t].collapse();e.callEvent&&(e.callEvent("onViewShow",[]),jeeplus.ui.each(e,this.Lw))},jd:function(e){if(!0===this.s.multi||this.nd)return!0;for(var t=0;t<this.q.length;t++)if(e!=this.q[t]&&!this.q[t].s.collapsed&&this.q[t].isVisible()&&!this.q[t].$nospace)return!0;return!1},$skin:function(){var e=this.defaults;jeeplus.skin.$active.accordionType&&(e.type=jeeplus.skin.$active.accordionType)}},jeeplus.ui.layout),jeeplus.protoUI({name:"headerlayout",defaults:{type:"accordion",multi:"mixed",collapsed:!1}},jeeplus.ui.accordion),jeeplus.DragControl={pd:jeeplus.toArray(["dummy"]),addDrop:function(e,t,i){(e=jeeplus.toNode(e)).jeeplus_drop=this.qd(t),i&&(e.jeeplus_master=!0)},qd:function(e){e=e||jeeplus.DragControl;var t=this.pd.find(e);return t<0&&(t=this.pd.length,this.pd.push(e)),t},UB:function(e){var t=jeeplus.DragControl,i=this.VB();if(i&&i.WB){t.v||t.createDrag(e);var s=t.Gd;t.v.style.left=e.x+t.left+(s.x_offset||0)+"px",t.v.style.top=e.y+t.top+(s.y_offset||0)+"px"}},addDrag:function(e,t){(e=jeeplus.toNode(e)).jeeplus_drag=this.qd(t),jeeplus.UE(e,jeeplus.env.mouse.down,this.rd,{bind:e}),jeeplus.UE(e,"dragstart",jeeplus.html.preventEvent)},rd:function(e){if(jeeplus.DragControl.sd){if(jeeplus.DragControl.td==e)return;jeeplus.DragControl.ud(),jeeplus.DragControl.destroyDrag(e)}jeeplus.DragControl.sd=this;var t=jeeplus.env.mouse.context(e);jeeplus.DragControl.vd=t,jeeplus.DragControl.td=e,jeeplus.DragControl.wd=jeeplus.event(document.body,jeeplus.env.mouse.move,jeeplus.DragControl.xd),jeeplus.DragControl.yd=jeeplus.event(document,jeeplus.env.mouse.up,jeeplus.DragControl.ud),jeeplus.html.addCss(document.body,"jeeplus_noselect",1)},ud:function(){jeeplus.DragControl.zd()},xd:function(e){var t=jeeplus.env.mouse.context(e),i=jeeplus.DragControl.VB();return i&&jeeplus.env.touch&&i.WB&&!jeeplus.Touch.qm||Math.abs(t.x-jeeplus.DragControl.vd.x)<5&&Math.abs(t.y-jeeplus.DragControl.vd.y)<5||(jeeplus.DragControl.zd(!0),!jeeplus.DragControl.v&&!jeeplus.DragControl.createDrag(jeeplus.DragControl.td))?void 0:(jeeplus.DragControl.sendSignal("start"),jeeplus.DragControl.wd=jeeplus.event(document.body,jeeplus.env.mouse.move,jeeplus.DragControl.Ad),jeeplus.DragControl.yd=jeeplus.event(document,jeeplus.env.mouse.up,jeeplus.DragControl.Bd),jeeplus.DragControl.Ad(e),jeeplus.env.touch?jeeplus.html.preventEvent(e):void 0)},Bd:function(e){jeeplus.DragControl.zd(),jeeplus.DragControl.td=null,jeeplus.DragControl.Cd&&(jeeplus.DragControl.$drop(jeeplus.DragControl.sd,jeeplus.DragControl.Cd,e),jeeplus.DragControl.$dragOut(jeeplus.DragControl.sd,jeeplus.DragControl.Cd,null,e)),jeeplus.DragControl.destroyDrag(e),jeeplus.DragControl.sendSignal("stop")},zd:function(e){this.wd=jeeplus.eventRemove(this.wd),this.yd=jeeplus.eventRemove(this.yd),e||jeeplus.html.removeCss(document.body,"jeeplus_noselect")},Ad:function(e){var t=jeeplus.DragControl,i=jeeplus.html.pos(e),s=jeeplus.env.mouse.context(e),n=t.$dragPos(i,e),l=t.Gd;if(t.v.style.top=i.y+t.top+(n||!l.y_offset?0:l.y_offset)+"px",t.v.style.left=i.x+t.left+(n||!l.x_offset?0:l.x_offset)+"px",t.Ed)t.Ed=!1;else{var a=s.target=jeeplus.env.touch?document.elementFromPoint(s.x,s.y):s.target,r=jeeplus.env.touch?s:e;t.Fd(a,r)}return jeeplus.html.preventEvent(e)},Fd:function(e,t){for(;e&&"BODY"!=e.tagName;){if(e.jeeplus_drop)return this.Cd&&(this.Cd!=e||e.jeeplus_master)&&this.$dragOut(this.sd,this.Cd,e,t),!this.Cd||this.Cd!=e||e.jeeplus_master?(this.Cd=null,this.Dd=this.$dragIn(jeeplus.DragControl.sd,e,t),void(this.Dd&&(this.Cd=e))):void 0;e=e.parentNode}this.Cd&&(this.Cd=this.Dd=this.$dragOut(this.sd,this.Cd,null,t))},sendSignal:function(e){jeeplus.DragControl.active="start"==e},getMaster:function(e){return this.pd[e.jeeplus_drag||e.jeeplus_drop]},getContext:function(){return this.Gd},getNode:function(){return this.v},createDrag:function(e){var t=jeeplus.DragControl,i=t.sd;t.Gd={};var s,n=this.pd[i.jeeplus_drag];if(n.$dragCreate){if(!(s=n.$dragCreate(i,e)))return!1;this.ZB(e),s.style.position="absolute"}else{var l=t.$drag(i,e);if(t.ZB(e),!l)return!1;(s=document.createElement("DIV")).innerHTML=l,s.className="jeeplus_drag_zone",document.body.appendChild(s);var a=t.Gd;a.html&&jeeplus.env.pointerevents&&(a.x_offset=-Math.round(.5*s.offsetWidth),a.y_offset=-Math.round(.75*s.offsetHeight))}return s.style.zIndex=Math.max(s.style.zIndex,jeeplus.ui.zIndex()),jeeplus.DragControl.Hd=jeeplus.event(s,jeeplus.env.mouse.move,jeeplus.DragControl.Id),jeeplus.DragControl.Gd.from||(jeeplus.DragControl.Gd={source:i,from:i}),jeeplus.DragControl.v=s,!0},Id:function(){jeeplus.DragControl.Ed=!0},destroyDrag:function(e){var t=jeeplus.DragControl.sd,i=this.pd[t.jeeplus_drag];i&&i.$dragDestroy?(jeeplus.DragControl.Hd=jeeplus.eventRemove(jeeplus.DragControl.Hd),jeeplus.DragControl.v&&i.$dragDestroy(t,jeeplus.DragControl.v,e)):jeeplus.html.remove(jeeplus.DragControl.v),jeeplus.DragControl.Dd=jeeplus.DragControl.sd=jeeplus.DragControl.Cd=jeeplus.DragControl.v=null},VB:function(){return jeeplus.DragControl.pd[jeeplus.DragControl.sd.jeeplus_drag]},top:5,left:5,ZB:function(e){var t=jeeplus.DragControl,i=t.vd,s=t.Gd;if(void 0!==s.x_offset&&void 0!==s.y_offset)return null;if(s.x_offset=s.y_offset=0,jeeplus.env.pointerevents){var n=jeeplus.DragControl.VB();if(n.WB&&n!==this){var l=n.WB(i,e);l&&(s.x_offset=l.x-i.x,s.y_offset=l.y-i.y)}}},$dragPos:function(e,t){var i=this.pd[jeeplus.DragControl.sd.jeeplus_drag];return i.$dragPos&&i!=this?(i.$dragPos(e,t,jeeplus.DragControl.v),!0):void 0},$dragIn:function(e,t,i){var s=this.pd[t.jeeplus_drop];return s.$dragIn&&s!=this?s.$dragIn(e,t,i):(t.className=t.className+" jeeplus_drop_zone",t)},$dragOut:function(e,t,i,s){var n=this.pd[t.jeeplus_drop];return n.$dragOut&&n!=this?n.$dragOut(e,t,i,s):(t.className=t.className.replace("jeeplus_drop_zone",""),null)},$drop:function(e,t,i){var s=this.pd[t.jeeplus_drop];return jeeplus.DragControl.Gd.from=jeeplus.DragControl.getMaster(e),s.$drop&&s!=this?s.$drop(e,t,i):void t.appendChild(e)},$drag:function(e,t){var i=this.pd[e.jeeplus_drag];return i.$drag&&i!=this?i.$drag(e,t):"<div style='"+e.style.cssText+"'>"+e.innerHTML+"</div>"}},jeeplus.attachEvent("onLongTouch",function(e){jeeplus.DragControl.sd&&jeeplus.DragControl.UB(e)}),jeeplus.DataMove={copy:function(e,t,i,s){var n=(s=s||{}).newId||e;i=i||this;var l=this.getItem(e);return i&&(l=i.Jd(l)),i.data.add(i.Jd(l,n),t,s.parent||0)},Kd:function(e,t,i){if(t&&e){var s=this.getIndexById(e);return s+(i==this&&i.getIndexById(t)<s?0:1)}},move:function(e,t,i,s){var n=(s=s||{}).newId||e;if((i=i||this).data){if(jeeplus.isArray(e)){3<e.length&&(this.$blockRender=i.$blockRender=!0);for(var l=0;l<e.length;l++){var a=this.move(e[l],t,i,s);t=i.Kd(a,e[l+1],this)}return this.$blockRender=i.$blockRender=!1,void(3<e.length&&(this.refresh(),i!=this&&i.refresh()))}a=e;var r=this.getItem(e);return i&&i!=this?(a=i.data.add(i.Jd(r,n),t,s.parent||0),this.data.remove(e)):(t<0&&(t=this.data.order.length-1),this.data.move(this.getIndexById(e),t),this.data.callEvent("onDataMove",[e,t,null,this.data.order[t+1]])),a}},moveUp:function(e,t){return this.move(e,this.getIndexById(e)-(t||1))},moveDown:function(e,t){return this.moveUp(e,-1*(t||1))},moveTop:function(e){return this.move(e,0)},moveBottom:function(e){return this.move(e,this.data.count()-1)},Jd:function(e,t){var i=jeeplus.extend({},e);return i.id=!t||this.data.pull[t]?jeeplus.uid():t,i.$template=null,this.s.externalData&&(i=this.s.externalData.call(this,i,t,e)),i}},jeeplus.Movable={move_setter:function(e){return e&&(this.Ld=jeeplus.clone(this.Ld),this.Ld.master=this,jeeplus.DragControl.addDrag(this.bd?this.bd:this.$view,this.Ld)),e},Ld:{$dragCreate:function(e,t){if(this.master.config.move){var i=jeeplus.html.offset(e),s=jeeplus.html.pos(t);return jeeplus.DragControl.top=i.y-s.y,jeeplus.DragControl.left=i.x-s.x,jeeplus.toNode(this.master.x)}},$dragDestroy:function(e,t){var i=this.master;i.s&&(i.s.top=parseInt(t.style.top,10),i.s.left=parseInt(t.style.left,10)),jeeplus.DragControl.top=jeeplus.DragControl.left=5,this.master.callEvent("onViewMoveEnd",[])},$dragPos:function(e,t){this.master.callEvent("onViewMove",[e,t])}}},jeeplus.Modality={Md:function(e){if(e){if(!this.Nd){this.Nd=jeeplus.html.create("div",{class:"jeeplus_modal"});var t=this.s.zIndex||jeeplus.ui.zIndex();this.Od=jeeplus.Pd,jeeplus.Pd=t,this.Nd.style.zIndex=t-1,this.x.style.zIndex=t,document.body.appendChild(this.Nd),document.body.style.overflow="hidden",jeeplus.UE(this.Nd,"click",jeeplus.bind(this.Vw,this))}}else if(this.Nd){jeeplus.html.remove(this.Nd),document.body.style.overflow="";var i=this.Od;setTimeout(function(){jeeplus.Pd=i},1),this.Nd=null}return e}},jeeplus.protoUI({name:"window",$init:function(e){this.x.innerHTML="<div class='jeeplus_win_content'><div class='jeeplus_win_head'></div><div class='jeeplus_win_body'></div></div>",this.w=this.x.firstChild,this.bd=this.w.childNodes[0],this.y=this.ed=this.w.childNodes[1],this.x.className+=" jeeplus_window",this.x.setAttribute("role","dialog"),this.x.setAttribute("tabindex","0"),this.fd=this.gd=null,this.s.Ob={top:!1,left:!1,right:!1,bottom:!1},e.id||(e.id=jeeplus.uid()),jeeplus.UE(this.w,"click",jeeplus.bind(this.Vw,this)),this.w.addEventListener&&jeeplus.UE(this.w,"click",function(){!this.s.zIndex&&this.s.toFront&&(this.x.style.zIndex=jeeplus.ui.zIndex())},{bind:this,capture:!0}),e.modal&&(this.my=!0),this.attachEvent("onViewMoveEnd",function(){this.s.position&&delete this.s.position})},Vw:function(e){var t=jeeplus.ui.et,i=t.find(this);-1==i&&(i=t.length-1),e.click_view=i,jeeplus.env.isIE8&&(e.srcElement.click_view=i)},getChildViews:function(){return this.fd?[this.fd,this.gd]:[this.gd]},zIndex_setter:function(e){return this.x.style.zIndex=e},Rb:function(){this.gd={destructor:function(){}}},Qb:function(e){this.gd.destructor(),this.gd=e,(this.gd.Xb=this).ed.appendChild(this.gd.x);var t=this.gd.x.style;t.borderTopWidth=t.borderBottomWidth=t.borderLeftWidth=t.borderRightWidth="1px",this.gd.s.Ob=jeeplus.clone(this.s.Ob),this.resize(!0)},show:function(e,t,i){if(!0===e){if(!this.s.hidden)return;e=null}if(!this.callEvent("onBeforeShow",arguments))return!1;var s,n,l;if(this.s.hidden=!1,this.x.style.zIndex=this.s.zIndex||jeeplus.ui.zIndex(),(this.s.modal||this.my)&&(this.Md(!0),this.my=null),(t=t||{}).pos||(t.pos=this.s.relative),e){"object"!=typeof e||e.tagName?(e=jeeplus.toNode(e),s=jeeplus.html.offset(e)):e.target||e.srcElement?(s=jeeplus.html.pos(e),n=20,l=5):s=e;var a=Math.max(window.innerWidth||0,document.body.offsetWidth),r=Math.max(window.innerHeight||0,document.body.offsetHeight);n=n||e.offsetWidth||0,l=l||e.offsetHeight||0;var o=this.ac,h=s.x,u=s.y,c=0,d=0,p=0,f=0,g=this.s.autofit;if(g){var v="node"===g,m=6;i="top",h=u=0,p=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,a-s.x-n<o[0]&&"right"==t.pos&&!v&&(t.pos="left"),d="right"==t.pos?(h=s.x+6+n,m=-l,i="left",c=Math.round(s.y+l/2),h-6):"left"==t.pos?(h=s.x-6-o[0]-1,m=-l,i="right",c=Math.round(s.y+l/2),h+o[0]+1):(h=s.x<p?p:a+p-s.x>o[0]?s.x:a+p-6-o[0],d=Math.round(s.x+n/2),Math.min(d,h+o[0]-18)),f=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,(!o[1]||r+f-l-s.y-m>o[1]||v)&&"top"!=t.pos?(u=l+s.y+m-4,c||(i="top",c=u-6)):(u=s.y-m-o[1])<0?(u=0,"top"==i&&(i=!1)):c||(i="bottom",c=--u+o[1]+1)}var j=t.x||0,y=t.y||0,b=this.jG();b&&(u-=f,c-=f),this.setPosition(h+j,u+y),this.Rd&&(i&&this.s.point?this.Rd(i,d+j,c+y,b):this.Sd())}else this.Td(this.s.left,this.s.top);this.x.style.display="block",this.Ww=1,jeeplus.delay(function(){this.Ww=0},this,[],jeeplus.env.touch?400:100),this.Qd(),this.config.autofocus&&(this.Vd=jeeplus.UIManager.getFocus(),jeeplus.UIManager.setFocus(this)),-1==jeeplus.ui.et.find(this)&&jeeplus.ui.et.push(this),this.callEvent("onShow",[])},Fb:function(e){if(!(this.s.hidden||this.s.modal||this.Ww||e&&e.showpopup||jeeplus.Pd&&this.s.zIndex<=jeeplus.Pd)){if(e){var t=jeeplus.env.isIE8?e.srcElement.click_view:e.click_view;if(t||0===t||(t=-1),jeeplus.ui.et.find(this)<=t)return}this.hide()}},hidden_setter:function(e){return e?this.hide():this.show(),!!e},hide:function(e){if(!this.$destructed&&(e||!this.s.hidden)){if(this.s.modal&&this.Md(!1),"top"==this.s.position?jeeplus.animate(this.x,{type:"slide",x:0,y:-(this.dc+20),duration:300,callback:this.Wd,master:this}):this.Wd(),this.s.autofocus){var t=document.activeElement;t&&this.x&&(this.x.contains(t)||t===document.body)&&(jeeplus.UIManager.setFocus(this.Vd),this.Vd=null)}this.ny()}},ny:function(){var e=jeeplus.ui.et,t=e.find(this),i=e.length-1;if(-1<t)for(var s=i;t<s;s--)e[s].Sd&&e[s].hide();e.removeAt(t)},destructor:function(){this.Md(!1),jeeplus.html.remove(this.x),this.s.autofocus&&(jeeplus.B||jeeplus.UIManager.setFocus(this.Vd),this.Vd=null),this.ny(),this.Sd&&this.Sd(),jeeplus.Destruction.destructor.apply(this,[])},Wd:function(){this.$destructed||(this.x.style.display="none",this.s.hidden=!0,this.callEvent("onHide",[]))},close:function(){this.destructor()},Xd:function(e){e.borderless=!0},body_setter:function(e){return"object"!=typeof e&&(e={template:e}),this.Xd(e),(jeeplus.Xb=this).gd=jeeplus.ui.A(e),(this.gd.Xb=this).ed.appendChild(this.gd.x),e},head_setter:function(e){return!1===e||("object"!=typeof e&&(this.x.setAttribute("aria-label",e),e={template:e,padding:0}),e.borderless=!0,(jeeplus.Xb=this).fd=jeeplus.ui.A(e),(this.fd.Xb=this).bd.appendChild(this.fd.x)),e},getBody:function(){return this.gd},getHead:function(){return this.fd},adjust:function(){return this.resize()},resizeChildren:function(){this.gd&&this.resize()},resize:function(){jeeplus.ui.baseview.prototype.adjust.call(this),this.isVisible()&&this.Td(this.s.left,this.s.top)},jG:function(){if(this.s.master){var e=jeeplus.$$(this.s.master).getTopParentView().$view;return e&&"fixed"===e.style.position}return!1},Td:function(e,t){if(this.s.position||this.jG()){this.$view.style.position="fixed";var i=this.bc,s=this.dc;if(i<=0||s<=0)return;var n=window.innerWidth||document.documentElement.offsetWidth,l=window.innerHeight||document.documentElement.offsetHeight,a=Math.round((n-i)/2),r=Math.round((l-s)/2);if("function"==typeof this.s.position){var o={left:a,top:r,width:i,height:s,maxWidth:n,maxHeight:l};this.s.position.call(this,o),(o.width!=i||o.height!=s)&&this.$setSize(o.width,o.height),this.setPosition(o.left,o.top)}else"top"==this.s.position&&(r=jeeplus.animate.isSupported()?-1*s:10),this.s.position||(a=this.s.left||a,r=this.s.top||r),this.setPosition(a,r);"top"==this.s.position&&jeeplus.animate(this.x,{type:"slide",x:0,y:s-2*(this.s.padding||0),duration:300,callback:this.Yd,master:this})}else this.setPosition(e,t)},Yd:function(e){jeeplus.animate.clear(e),this.s.top=-2*(this.s.padding||0),this.setPosition(this.s.left,this.s.top)},setPosition:function(e,t){this.x.style.top=t+"px",this.x.style.left=e+"px",this.s.left=e,this.s.top=t},$getSize:function(e,t){var i=this.s.Ob;i&&(e+=(i.left?0:1)+(i.right?0:1),t+=(i.top?0:1)+(i.bottom?0:1)),this.s.head&&(t+=1);var s=this.gd.$getSize(0,0),n=0;if(this.fd){var l=this.fd.$getSize(0,0);l[3]==l[2]&&(this.s.headHeight=l[3]),t+=this.s.headHeight,n=l[0]}if(this.s.fullscreen){var a=window.innerWidth||document.body.clientWidth,r=window.innerHeight||document.body.clientHeight;return[a,a,r,r]}var o=jeeplus.ui.view.prototype.$getSize.call(this,0,0);return n&&1e5<s[1]&&(s[0]=Math.max(n,s[0])),o[1]=Math.min(o[1],(1e5<=s[1]&&1e5<=o[1]?Math.max(s[0],o[0]):s[1])+e),o[3]=Math.min(o[3],(1e5<=s[3]&&1e5<=o[3]?Math.max(s[2],o[2]):s[3])+t),o[0]=Math.min(Math.max(o[0],s[0]+e),o[1]),o[2]=Math.min(Math.max(o[2],s[2]+t),o[3]),o},$setSize:function(e,t){jeeplus.ui.view.prototype.$setSize.call(this,e,t),e=this.bc,t=this.dc,!1===this.s.head?(this.bd.style.display="none",this.gd.$setSize(e,t)):(this.fd.$setSize(e,this.s.headHeight),this.gd.$setSize(e,t-this.s.headHeight))},$skin:function(){this.defaults.headHeight=jeeplus.skin.$active.barHeight},defaults:{top:0,left:0,autofit:!0,relative:"bottom",body:"",head:"",hidden:!0,autofocus:!0,minWidth:300,minHeight:200}},jeeplus.ui.view,jeeplus.Movable,jeeplus.Modality,jeeplus.EventSystem),jeeplus.protoUI({name:"popup",defaults:{point:!0},$init:function(){this.s.head=!1,this.$view.className+=" jeeplus_popup",jeeplus.attachEvent("onClick",jeeplus.bind(this.Fb,this)),this.attachEvent("onHide",this.Sd)},$skin:function(){this.defaults.headHeight=jeeplus.skin.$active.barHeight,this.defaults.padding=jeeplus.skin.$active.popupPadding},close:function(){jeeplus.html.remove(this.$d),jeeplus.ui.window.prototype.close.call(this)},$getSize:function(e,t){return jeeplus.ui.window.prototype.$getSize.call(this,e+2*this.s.padding,t+2*this.s.padding)},$setSize:function(e,t){jeeplus.ui.view.prototype.$setSize.call(this,e,t),e=this.bc-2*this.s.padding,t=this.dc-2*this.s.padding,this.w.style.padding=this.s.padding+"px",this.bd.style.display="none",this.gd.$setSize(e,t)},Xd:function(){},head_setter:function(){},Rd:function(e,t,i,s){this.Sd(),document.body.appendChild(this.$d=jeeplus.html.create("DIV",{class:"jeeplus_point_"+e},"")),this.$d.style.zIndex=jeeplus.ui.zIndex(),this.$d.style.position=s?"fixed":"absolute",this.$d.style.top=i+"px",this.$d.style.left=t+"px"},Sd:function(){this.$d=jeeplus.html.remove(this.$d)}},jeeplus.ui.window),jeeplus.ui.et=jeeplus.toArray(),jeeplus.ResizeArea={resize_setter:function(e){return e&&!this.Yz&&this.Zz(),e},Zz:function(){if(!this.$z){var e=this.x;e.firstChild&&((e=e.firstChild).style.position="relative"),this.$z=jeeplus.html.create("DIV",{class:"jeeplus_resize_handle",jeeplus_disable_drag:"true"}),e.appendChild(this.$z),jeeplus.UE(this.$z,jeeplus.env.mouse.down,this._z,{bind:this})}},aA:function(e,t){if(!this.bA){this.bA=jeeplus.html.create("div",{class:"jeeplus_resize_frame"},""),document.body.appendChild(this.bA);var i=jeeplus.html.offset(this.x);this.bA.style.left=i.x+"px",this.bA.style.top=i.y+"px",this.bA.style.zIndex=jeeplus.ui.zIndex()}this.bA.style.width=e+"px",this.bA.style.height=t+"px"},_z:function(e){this.config.resize&&(jeeplus.html.addCss(document.body,"jeeplus_noselect jeeplus_resize_cursor"),this.cA=jeeplus.html.offset(this.x),this.dA=jeeplus.event(document.body,jeeplus.env.mouse.move,this.eA,{bind:this}),this.fA=jeeplus.event(document.body,jeeplus.env.mouse.up,this.gA,{bind:this}))},eA:function(e){if(!1!==this.cA){var t=jeeplus.html.pos(e),i={x:t.x-this.cA.x+10,y:t.y-this.cA.y+10};if(this.$resizeMove)this.$resizeMove(i);else if(Math.abs(this.cA.x-t.x)<(this.config.minWidth||100)||Math.abs(this.cA.y-t.y)<(this.config.minHeight||100))return;this.hA=i,this.aA(i.x,i.y)}},gA:function(){this.bA&&(this.bA=jeeplus.html.remove(this.bA)),jeeplus.html.removeCss(document.body,"jeeplus_resize_cursor"),jeeplus.html.removeCss(document.body,"jeeplus_noselect"),jeeplus.eventRemove(this.dA),jeeplus.eventRemove(this.fA),this.hA&&(this.$resizeEnd?this.$resizeEnd(this.hA):(this.config.width=this.hA.x,this.config.height=this.hA.y,this.resize())),this.cA=this.hA=!1,this.callEvent("onViewResize",[])}},jeeplus.extend(jeeplus.ui.window,jeeplus.ResizeArea),jeeplus.protoUI({name:"suggest",defaults:{autofocus:!1,type:"list",keyPressTimeout:1,body:{yCount:10,autoheight:!0,body:!0,select:!0,borderless:!0,navigation:!0},filter:function(e,t){return 0===e.value.toString().toLowerCase().indexOf(t.toLowerCase())}},template_setter:jeeplus.template,filter_setter:function(e){return jeeplus.toFunctor(e,this.$scope)},$init:function(e){var t={};jeeplus.extend(t,jeeplus.copy(this.defaults.body)),t.view=e.type||this.defaults.type;var i=this.Jt(t);e.body&&jeeplus.extend(i,e.body,!0),e.data&&(i.data=e.data),e.url&&(i.url=e.url),e.datatype&&(i.datatype=e.datatype),e.id&&(t.id=t.id||e.id+"_"+t.view),e.body=t,this.$ready.push(this._d),this.attachEvent("onShow",function(){if(this.s.master){var e=jeeplus.$$(this.s.master);if(e)(e.JA?e.JA():e.getInputNode()).setAttribute("aria-expanded","true")}this.ke()}),this.attachEvent("onHide",function(){if(this.s.master){var e=jeeplus.$$(this.s.master);if(e)(e.JA?e.JA():e.getInputNode()).setAttribute("aria-expanded","false")}}),this.oy={}},Jt:function(e){return e},Rs:function(e){var t,i,s="";e&&this.s.master&&((i=(t=jeeplus.$$(this.s.master)).getInputNode())&&t.$setValueHere?t.$setValueHere(e.value):i&&(t.options_setter?s=this.getItemText(e.id):e.value&&(s=t.YE?t.YE(e.value):e.value.toString()),jeeplus.isUndefined(i.value)?i.innerHTML=s:i.value=s.replace(/<[^>]*>/g,""))),(i=i||this.ae)&&i.focus()},setMasterValue:function(e,t){var i=e.id?this.getItemText(e.id):e.text||e.value;if(this.s.master){var s=jeeplus.$$(this.s.master);t&&e.id?s.refresh():s.options_setter?s.setValue(e.$empty?"":e.id):s.setValueHere?s.setValueHere(i):s.setValue(i)}else this.ae&&(this.ae.value=i);t||(this.hide(!0),this.ae&&this.ae.focus()),this.callEvent("onValueSuggest",[e,i]),jeeplus.delay(function(){jeeplus.callEvent("onEditEnd",[])})},getMasterValue:function(){return this.s.master?jeeplus.$$(this.s.master).getValue():null},getItemId:function(e){var t=this.getList();for(var i in t.type,t.data.pull){var s=t.getItem(i);if(this.s.filter.call(this,s,e))return s.id}},getItemText:function(e){var t=this.getList().getItem(e);if(!t)return this.oy[e]||"";if(this.s.template)return this.s.template.call(this,t,this.type);if(this.s.textValue)return""+t[this.s.textValue];var i=this.getList().type,s=i.template.call(i,t,i);return this.oy[e]=s},getSuggestion:function(){var e,t=this.getList(),i=t.data.order;return t.getSelectedId&&(e=t.getSelectedId()),i.length&&(!e||i.find(e)<0)&&(e=i[0]),e&&"object"==typeof e&&(e+=""),e},getList:function(){return this.gd},_d:function(){var t=this.getList(),e=this.s.type;t.count?(t.attachEvent("onItemClick",jeeplus.bind(function(e){this.setMasterValue(t.getItem(e))},this)),t.data.attachEvent("onstoreupdated",jeeplus.bind(function(e,t,i){"delete"==i&&e==this.getMasterValue()?this.setMasterValue({id:"",text:""},1):"update"==i&&e==this.getMasterValue()&&this.setMasterValue(t,1)},this)),t.data.attachEvent("onAfterFilter",jeeplus.bind(this.be,this)),t.data.attachEvent("onStoreLoad",jeeplus.bind(this.be,this)),jeeplus.isUndefined(this.s.fitMaster)&&(this.s.fitMaster=!0)):"calendar"==e?(t.attachEvent("onDateSelect",function(e){this.getParentView().setMasterValue({value:t.getSelectedDate()},t.config.multiselect)}),t.attachEvent("onTodaySet",function(e){this.getParentView().setMasterValue({value:e})}),t.attachEvent("onDateClear",function(e){this.getParentView().setMasterValue({value:e})})):"colorboard"==e&&t.attachEvent("onItemClick",function(e){this.getParentView().setMasterValue({value:e})})},input_setter:function(e){return this.linkInput(e),0},linkInput:function(t){var i;t.getInputNode?(i=t.getInputNode()).jeeplus_master_id=t.s.id:i=jeeplus.toNode(t),jeeplus.UE(i,"keydown",function(e){i==document.body&&!this.isVisible()||(t.config?t.config.readonly:i.getAttribute("readonly"))||this.ce(e)},{bind:this}),t.JA&&(i=t.JA()),i.setAttribute("aria-autocomplete","list"),i.setAttribute("aria-expanded","false"),"DIV"===i.tagName&&(i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true")),this.pt=!0},ce:function(e){e=e||event;var i=this.getList(),s=e.target||e.srcElement;if(s!=document.body&&"jeeplus_clipbuffer"!=s.className){this.ae=s,this.s.master=s.jeeplus_master_id,window.clearTimeout(this.de);var t=e.keyCode;if(16!=t&&17!=t)return 9==t?this.ee(this,i):27==t?this.fe(this,i):13==t?this.$enterKey(this,i):this.he(e)?(jeeplus.html.preventEvent(e),!1):void(jeeplus.isUndefined(s.value)||(clearTimeout(this.dt),this.dt=jeeplus.delay(function(){if(this.pt||jeeplus.UIManager.getFocus()==jeeplus.$$(this.s.master)){this.ie=!0;var t=s.value;i.config.dataFeed?i.filter("value",t):i.filter&&i.filter(jeeplus.bind(function(e){return this.s.filter.call(this,e,t)},this))}},this,[],this.s.keyPressTimeout)))}},be:function(){if(!this.ie)return!0;this.ie=!1,0<this.getList().count()?(this.adjust(),this.isVisible()||(this.je=!0),this.show(this.ae,null,!0),this.je=!1):(this.hide(!0),this.ae=null)},show:function(e){if(!this.isVisible()){var t=this.getList();t.filter&&!this.je&&t.filter(""),this.$customWidth&&(this.s.fitMaster||!this.s.width||jeeplus.isUndefined(this.s.fitMaster))&&this.$customWidth(e),e.tagName&&this.s.fitMaster&&(this.s.width=e.offsetWidth-2),t.Np&&t.render(),this.adjust(),"INPUT"==e.tagName&&(this.ae=e)}jeeplus.ui.popup.prototype.show.apply(this,arguments)},ke:function(e){e=e||this.getList();var t=this.getMasterValue();e.select&&e.showItem?t&&e.exists&&e.exists(t)?(e.select(t),e.showItem(t)):(e.unselect(),e.showItem(e.getFirstId())):e.setValue&&(this.s.master&&(t=jeeplus.$$(this.s.master).$prepareValue(t)),e.setValue(t))},$enterKey:function(e,t){var i;e.isVisible()?(t.count&&t.count()?(i=t.getSelectedId(!1,!0),1==t.count()&&t.getFirstId()!=i&&(i=t.getFirstId()),i&&(i=t.getItem(i))):t.getSelectedDate&&t.getSelectedDate()?i={value:t.getSelectedDate()}:t.getValue&&t.getValue()&&(i={value:t.getValue()}),i&&this.setMasterValue(i),e.hide(!0)):e.show(this.ae)},fe:function(e,t){return e.hide(!0)},ee:function(e,t){return e.hide(!0)},he:function(e){var t,i=this.getList(),s=e.keyCode;if(!(i.moveSelection&&s<41&&32<s)||e.ctrlKey||e.metaKey||e.shiftKey||e.altKey)return!1;if(40===s){this.isVisible()||this.show(this.ae),i.moveSelection("down",!1,!1)}else{if(i.count&&38!==s||!i.count&&!i.isVisible())return!1;var n;33==s&&(n="pgup"),34==s&&(n="pgdown"),35==s&&(n="bottom"),36==s&&(n="top"),37==s&&(n="left"),38==s&&(n="up"),39==s&&(n="right"),i.moveSelection(n,!1,!1)}return i.count?t=i.getSelectedItem():i.getSelectedDate?t={value:i.getVisibleDate()}:i.getValue&&(t={value:i.getValue()}),this.Rs(t),!0},getValue:function(){var e=this.getList(),t=(e.getValue?e.getValue():e.getSelectedId())||"";if(t=t.id||t,e.getItem){var i=e.getItem(t);if(i&&i.$empty)return""}return t},setValue:function(e){var t=this.getList();e?t.exists(e)&&(t.select(e),t.showItem(e)):(t.unselect(),t.showItem(t.getFirstId()))}},jeeplus.ui.popup),jeeplus.HTMLOptions={$init:function(e){(jeeplus.skin.$active.customRadio||this.addOption)&&jeeplus.UE(this.$view,"keydown",this.ID,{bind:this})},ub:function(){var e=this.Ie();if(e)for(var t=0;t<e.length;t++)"0"==e[t].getAttribute("tabindex")&&e[t].focus()},JD:function(){var e=this.Ie();if(e)for(var t=0;t<e.length;t++)"0"==e[t].getAttribute("tabindex")&&e[t].blur()},ID:function(e){var t=e.which||e.keyCode;if((this.addOption?34:36)<t&&t<41){jeeplus.html.preventEvent(e);var i,s=this.Ie();if(35==t)i=s.length-1;else if(36===t)i=0;else for(var n=37===t||38===t?-1:1,l=0;l<s.length;l++)if("0"==s[l].getAttribute("tabindex")){(i=l+n)<0?i=s.length-1:i>=s.length&&(i=0);break}if(!jeeplus.isUndefined(i)){var a=this.addOption?s[i].getAttribute("button_id"):s[i].value;jeeplus.skin.$active.customRadio&&!this.addOption&&(s=this.$view.getElementsByTagName("BUTTON")),this.setValue(a),s[i].focus()}}}},jeeplus.attachEvent("onClick",function(e){var t=jeeplus.$$(e);if(t&&t.touchable){jeeplus.UIManager.applyChanges(t),t.getNode(e);var i=e.target||e.srcElement;if("jeeplus_disabled"==i.className)return;var s="";if(i.className&&0===i.className.toString().indexOf("jeeplus_view"))return;for(t&&jeeplus.UIManager.sb(t);i&&i.parentNode;){if(i.getAttribute){if(i.getAttribute("view_id"))break;if(s=i.className){s=s.toString().split(" ");for(var n=0;n<s.length;n++)if(t.on_click[s[n]]){if(!1===t.on_click[s[n]].call(t,e,t.s.id,i))return}}}i=i.parentNode}if(t.s.click){var l=jeeplus.toFunctor(t.s.click,t.$scope);l&&l.call&&l.call(t,t.s.id,e)}var a=t.s.popup;if(t.s.popup&&!t.s.readonly)"object"!=typeof a||a.name||(a=t.s.popup=jeeplus.ui(a).s.id),(a=jeeplus.$$(a)).isVisible()||(a.s.master=t.s.id,a.show(t.getInputNode()||t.getNode(),null,!0));t.callEvent("onItemClick",[t.s.id,e])}}),jeeplus.protoUI({name:"button",touchable:!0,$skin:function(){this.defaults.height=jeeplus.skin.$active.buttonHeight||jeeplus.skin.$active.inputHeight,this.le=jeeplus.skin.$active.labelTopHeight||15,this.ZE=jeeplus.skin.$active.borderWidth},defaults:{template:function(e,t){var i=t.$renderInput(e,t);return e.badge&&(i=i.replace("</button>","<span class='jeeplus_badge'>"+e.badge+"</span></button>")),"<div class='jeeplus_el_box' style='width:"+e.awidth+"px; height:"+e.aheight+"px'>"+i+"</div>"},label:"",borderless:!0},$renderInput:function(e){var t="class='jeeplustype_"+(e.type||"base")+"' ";return"<button type='button' "+(e.popup?"aria-haspopup='true'":"")+t+">"+jeeplus.template.escape(e.label||e.value)+"</button>"},$init:function(e){this.x.className+=" jeeplus_control jeeplus_el_"+(this.$cssName||this.name),this.data=this.s,this.y=this.x,this.$B(e)},hotkey_setter:function(e){var s=this;this.Bt(e,function(e,t){var i=s.$view.firstChild;jeeplus.html.triggerEvent(i,"MouseEvents","click"),jeeplus.html.preventEvent(t)})},Bt:function(e,t,i){var s=jeeplus.UIManager.addHotKey(e,t,i);this.attachEvent("onDestruct",function(){jeeplus.UIManager.removeHotKey(s,t,i)})},tooltip_setter:function(e){var t=this.re()||this.$view.firstChild;return t&&(t.title=e),e},type_setter:function(e){return this.ne[e]&&(this.$renderInput=jeeplus.template(this.ne[e])),this.oe=("prev"==e||"next"==e)&&this.pe,e},ne:{htmlbutton:"<button type='button' class='jeeplus_el_htmlbutton jeeplustype_base'>#label#</button>",prev:"<input type='button' class='jeeplustype_prev' value='#label#' /><div class='jeeplus_el_arrow jeeplustype_prev_arrow'></div>",next:"<input type='button' class='jeeplustype_next' value='#label#' /><div class='jeeplus_el_arrow jeeplustype_next_arrow'></div>",imageButton:"<button type='button' class='jeeplus_img_btn_abs jeeplustype_base' style='width:100%; line-height:#cheight#px'><div class='jeeplus_image' style='width:#dheight#px;height:#dheight#px;background-image:url(#image#);'> </div> #label#</button>",imageButtonTop:"<button type='button' class='jeeplus_img_btn_abs jeeplus_img_btn_abs_top jeeplustype_base'><div class='jeeplus_image' style='width:100%;height:100%;background-image:url(#image#);'> </div> <div class='jeeplus_img_btn_text'>#label#</div></button>",image:"<button type='button' class='jeeplus_img_btn' style='line-height:#cheight#px;'><div class='jeeplus_image' style='width:#cheight#px;height:#cheight#px;background-image:url(#image#);'> </div> #label#</button>",imageTop:"<button type='button' class='jeeplus_img_btn_top'><div class='jeeplus_image' style='width:100%;height:100%;background-image:url(#image#);'></div> <div class='jeeplus_img_btn_text'>#label#</div></button>",icon:"<button type='button' class='jeeplus_img_btn' style='line-height:#cheight#px;'><span class='jeeplus_icon_btn fa-#icon#' style='max-width:#cheight#px;'></span>#label#</button>",iconButton:"<button type='button' class='jeeplus_img_btn_abs jeeplustype_base' style='width:100%;'><span class='jeeplus_icon fa-#icon#'></span> #label#</button>",iconTop:"<button type='button' class='jeeplus_img_btn_top' style='width:100%;top:4px;text-align:center;'><span class='jeeplus_icon fa-#icon#'></span><div class='jeeplus_img_btn_text'>#label#</div></button>",iconButtonTop:"<button type='button' class='jeeplus_img_btn_abs jeeplus_img_btn_abs_top jeeplustype_base' style='width:100%;top:0px;text-align:center;'><span class='jeeplus_icon fa-#icon#'></span><div class='jeeplus_img_btn_text'>#label#</div></button>"},qe:function(){for(var e=[],t=["input","select","textarea","button"],i=0;i<t.length;i++)for(var s=this.$view.getElementsByTagName(t[i]),n=0;n<s.length;n++)e.push(s[n]);return e},disable:function(){var e,t,i=this.re();if(jeeplus.ui.baseview.prototype.disable.apply(this,arguments),i&&-1==i.className.indexOf(" jeeplus_disabled_box")){i.className+=" jeeplus_disabled_box";var s=this.qe();for(e=0;e<s.length;e++)s[e].setAttribute("disabled",!0);if((t=this.getInputNode())&&"div"==t.tagName.toLowerCase()&&(this.KD=t.getAttribute("tabIndex"),t.removeAttribute("tabIndex")),"top"==this.s.labelPosition){var n=this.y.firstChild;n&&(n.className+=" jeeplus_disabled_top_label")}}},enable:function(){jeeplus.ui.baseview.prototype.enable.apply(this,arguments);var e,t=this.re();if(t){t.className=t.className.replace(" jeeplus_disabled_box","");for(var i=this.qe(),s=0;s<i.length;s++)i[s].removeAttribute("disabled");if((e=this.getInputNode())&&!jeeplus.isUndefined(this.KD)&&e.setAttribute("tabIndex",this.KD),"top"==this.s.labelPosition){var n=this.y.firstChild;n&&(n.className=n.className.replace(" jeeplus_disabled_top_label",""))}}},$setSize:function(e,t){jeeplus.ui.view.prototype.$setSize.call(this,e,t)&&this.render()},setValue:function(e){e=this.$prepareValue(e);var t=this.s.value;return!this.$compareValue(t,e)&&(this.s.value=e,this.se&&this.$setValue(e),void this.callEvent("onChange",[e,t]))},$compareValue:function(e,t){return"number"==typeof t&&(t=t.toString()),"number"==typeof e&&(e=e.toString()),e==t},$prepareValue:function(e){return this.VC(e,!1)},VC:function(e){return e},$setValue:function(e){var t=this.getInputNode();t&&("BUTTON"==t.tagName?t.innerHTML=e:t.value=e)},getValue:function(){var e=this.se?this.$getValue():this.s.value;return void 0===e?"":e},$getValue:function(){return this.s.value||""},focus:function(){if(!this.s.disabled){var e=this.getInputNode();e&&e.focus&&e.focus()}},blur:function(){var e=this.getInputNode();e&&e.blur&&e.blur()},getInputNode:function(){return this.y.getElementsByTagName("input")[0]||this.y.getElementsByTagName("button")[0]},re:function(){for(var e=0;e<this.y.childNodes.length;e++)if(0<=this.y.childNodes[e].className.indexOf("jeeplus_el_box"))return this.y.childNodes[e];return null},ue:Math.sqrt(2),pe:function(){var e=this.s,t=this.re().childNodes[1],i=t.previousSibling,s="next"==e.type?"right":"left",n=e.aheight-2*jeeplus.skin.$active.inputPadding-2*this.ZE,l=n*this.ue/2;t.style.width=l+"px",t.style.height=l+"px",t.style.top=(n-l)/2+jeeplus.skin.$active.inputPadding+"px",t.style[s]=(n-l)/2+this.ue/2+"px",i.style.width=e.awidth-n/2-2+"px",i.style.height=2+n+"px",i.style[s]=n/2+2+"px",i.style.top=jeeplus.skin.$active.inputPadding+"px"},$B:function(e){(e=e||this.s).autowidth&&(e.width=jeeplus.html.getTextSize(e.value||e.label,"jeeplusbutton").width+(e.badge?15:0)+("iconButton"===e.type?30:0)+("icon"===e.type?20:0))},ve:function(){this.we=this.s.inputWidth||(2<this.bc-this.s.width?this.s.width:0)||this.bc,this.xe=this.s.inputHeight||this.zy||0},resize:function(){return this.$B(),jeeplus.ui.view.prototype.resize.apply(this,arguments)},render:function(){if(this.ve(),this.s.awidth=this.we||this.bc,this.s.aheight=this.xe||this.dc,this.s.bheight=this.s.aheight+2,this.s.cheight=this.s.aheight-2*jeeplus.skin.$active.inputPadding,this.s.dheight=this.s.cheight-2,jeeplus.AtomRender.render.call(this)){if(this.se=!0,this.oe&&this.oe(),this.s.align){var e=this.y.firstChild;switch("top"==this.s.labelPosition&&e.nextSibling&&(e=e.nextSibling),this.s.align){case"right":e.style.cssFloat="right";break;case"center":e.style.display="inline-block",e.parentNode.style.textAlign="center";break;case"middle":e.style.marginTop=Math.round((this.dc-this.xe)/2)+"px";break;case"bottom":e.style.marginTop=this.dc-this.xe+"px";break;case"left":e.style.cssFloat="left"}}this.$render&&this.$render(this.data),this.s.disabled&&this.disable(),this.s.tooltip&&this.define("tooltip",this.s.tooltip),this.ze&&(this.ze(this.data),this.ze=0)}},refresh:function(){this.render()},on_click:{Ae:function(e,t){var i=jeeplus.html.locate(e,"button_id");i&&this.callEvent("onBeforeTabClick",[i,e])&&(this.setValue(i),this.callEvent("onAfterTabClick",[i,e]))},jeeplus_all_segments:function(e,t){this.on_click.Ae.call(this,e,t)},jeeplus_all_tabs:function(e,t){this.on_click.Ae.call(this,e,t)},jeeplus_inp_counter_next:function(e,t,i){this.s.readonly||this.next()},jeeplus_inp_counter_prev:function(e,t,i){this.s.readonly||this.prev()},jeeplus_input_icon:function(e,t,i){this.getInputNode().focus()},jeeplus_inp_checkbox_border:function(e,t,i){this.s.disabled||"DIV"==(e.target||e.srcElement).tagName||this.s.readonly||this.toggle()},jeeplus_inp_checkbox_label:function(e,t,i){this.s.readonly||this.toggle()},jeeplus_inp_radio_border:function(e,t,i){var s=jeeplus.html.locate(e,"radio_id");this.setValue(s)},jeeplus_inp_radio_label:function(e,t,i){return i=i.parentNode.getElementsByTagName("input")[0],this.on_click.jeeplus_inp_radio_border.call(this,i,t,i)},jeeplus_tab_more_icon:function(e,t,i){this.getPopup().resize(),this.getPopup().show(i,null,!0)},jeeplus_tab_close:function(e,t,i){var s=jeeplus.html.locate(e,"button_id");s&&this.callEvent("onBeforeTabClose",[s,e])&&this.removeOption(s)}},Be:function(e){for(var t=0;t<e.length;t++)"string"==typeof e[t]?e[t]={id:e[t],value:e[t]}:(jeeplus.isUndefined(e[t].id)&&(e[t].id=e[t].value),jeeplus.isUndefined(e[t].value)&&(e[t].value=e[t].id));return e},Yx:function(e){var t=e?e.placeholder:this.s.placeholder;return t?"<span class='jeeplus_placeholder'>"+t+"</span>":""}},jeeplus.ui.view,jeeplus.AtomRender,jeeplus.Settings,jeeplus.EventSystem),jeeplus.protoUI({name:"label",defaults:{template:"<div style='height:100%;line-height:#cheight#px'>#label#</div>"},$skin:function(){this.defaults.height=jeeplus.skin.$active.inputHeight},focus:function(){return!1},re:function(){return this.y.firstChild},setHTML:function(e){this.s.template=function(){return e},this.refresh()},setValue:function(e){this.s.label=e,jeeplus.ui.button.prototype.setValue.apply(this,arguments)},$setValue:function(e){this.y.firstChild.innerHTML=e},oe:function(){},$B:function(e){(e=e||this.s).autowidth&&(e.width=jeeplus.html.getTextSize(e.value||e.label,"jeeplus_el_label").width)}},jeeplus.ui.button),jeeplus.protoUI({name:"icon",$skin:function(){this.defaults.height=jeeplus.skin.$active.inputHeight},defaults:{template:function(e){return"<button type='button'  style='height:100%;width:100%;' class='jeeplus_icon_button'><span class='jeeplus_icon fa-"+e.icon+" '></span>"+(e.badge?"<span class='jeeplus_badge'>"+e.badge+"</span>":"")+"</button>"},width:33},oe:function(){},$setValue:function(){}},jeeplus.ui.button),jeeplus.protoUI({name:"text",Ce:!0,De:function(){this.Ce&&(this._E||jeeplus.UE(this.getInputNode(),"change",this.Xy,{bind:this}),this.s.suggest&&jeeplus.$$(this.s.suggest).linkInput(this))},Xy:function(){var e=this.getValue();e!=this.s.value?this.setValue(e,!0):this.nH&&this.$setValue(e)},$skin:function(){this.defaults.height=jeeplus.skin.$active.inputHeight,this.defaults.inputPadding=jeeplus.skin.$active.inputPadding,this.$E=jeeplus.skin.$active.inputSpacing},$init:function(e){"top"==e.labelPosition&&jeeplus.isUndefined(e.height)&&this.defaults.height&&(e.height=this.defaults.height+this.le),this.Ns=[],this.attachEvent("onAfterRender",this.De),this.attachEvent("onBlur",function(){this._E&&this._E()})},$renderIcon:function(){var e=this.s;if(e.icon){var t=e.aheight-2*e.inputPadding,i=(t-18)/2-1,s=this.addSection?"role='button' tabindex='0' aria-label='"+jeeplus.i18n.aria["multitext"+(e.mode||"")+"Section"]+"'":"";return"<span style='height:"+(t-i)+"px;padding-top:"+i+"px;' class='jeeplus_input_icon fa-"+e.icon+"' "+s+"></span>"}return""},relatedView_setter:function(e){return this.attachEvent("onChange",function(){var e=this.getValue(),t=this.s.relatedAction,i=this.s.relatedView,s=jeeplus.$$(i);if(!s){var n=this.getTopParentView();n&&n.$$&&(s=n.$$(i))}"enable"==t?e?s.enable():s.disable():e?s.show():s.hide()}),e},validateEvent_setter:function(e){return"blur"==e&&this.attachEvent("onBlur",this.validate),"key"==e&&this.attachEvent("onTimedKeyPress",this.validate),e},validate:function(){var e=this.s.validate;!e&&this.s.required&&(e=jeeplus.rules.isNotEmpty);var t=this.getFormView(),i=this.s.name,s=this.getValue(),n={};return n[i]=s,!(e&&!t.Se(e,s,n,i))},bottomLabel_setter:function(e){return this.s.bottomPadding||(this.s.bottomPadding=18),e},py:function(){var e=this.s.invalidMessage;return"function"==typeof e&&e.call(this),e},setBottomText:function(e,t){var i=this.s;if(void 0!==e){if(i.bottomLabel==e)return;i.bottomLabel=e}var s=(i.invalid?i.invalidMessage:"")||i.bottomLabel;s||i.bottomPadding||(i.inputHeight=0),s&&!i.bottomPadding?(this.ry=1,i.bottomPadding=i.bottomPadding||t||18,this.render(),this.resize()):!s&&this.ry?(i.bottomPadding=this.ry=0,i.height||this.render(),this.resize()):this.render()},$getSize:function(){var e=jeeplus.ui.view.prototype.$getSize.apply(this,arguments),t=this.config.bottomPadding;return t&&(e[2]+=t,e[3]+=t),e},$setSize:function(e,t){var i=this.s;if(jeeplus.ui.view.prototype.$setSize.call(this,e,t)){if(!e||!t)return;"top"==i.labelPosition?(i.inputHeight||(this.zy=this.dc-this.le-(this.config.bottomPadding||0)),i.labelWidth=0):i.bottomPadding&&(i.inputHeight=this.dc-this.config.bottomPadding),this.render()}},Ee:function(e){var t=(this.we||0)-(e.label?this.s.labelWidth:0)-this.$E-(e.iconWidth||0);return t<0?0:t},Fe:function(e,t){var i="x"+jeeplus.uid(),s=t.Ee(e),n=e.inputAlign||"left",l=(this.$renderIcon&&this.$renderIcon(e),this.s.aheight-2*jeeplus.skin.$active.inputPadding-2*this.ZE),a=e.text||e.value||this.Yx(e),r="<div class='jeeplus_inp_static' role='combobox' aria-label='"+jeeplus.template.escape(e.label)+"' tabindex='0'"+(e.readonly?" aria-readonly='true'":"")+(e.invalid?"aria-invalid='true'":"")+" onclick='' style='line-height:"+l+"px;width: "+s+"px; text-align: "+n+";' >"+a+"</div>";return t.$renderInput(e,r,i)},qt:function(e){var t="<"+e+(this.s.placeholder?" placeholder='"+this.s.placeholder+"' ":" ");this.s.readonly&&(t+="readonly='true' aria-readonly=''"),this.s.required&&(t+="aria-required='true'"),this.s.invalid&&(t+="aria-invalid='true'");var i=this.s.attributes;if(i)for(var s in i)t+=s+"='"+i[s]+"' ";return t},$renderLabel:function(e,t){var i=e.labelAlign||"left",s="top"==this.s.labelPosition,n=s?"display:block;":"width: "+this.s.labelWidth+"px;",l="",a=s?this.le-2*this.ZE:this.s.aheight-2*this.s.inputPadding;return e.label&&(l="<label style='"+n+"text-align: "+i+";line-height:"+a+"px;' onclick='' for='"+t+"' class='jeeplus_inp_"+(s?"top_":"")+"label "+(e.required?"jeeplus_required":"")+"'>"+(e.label||"")+"</label>"),l},$renderInput:function(e,t,i){var s=e.inputAlign||"left",n="top"==e.labelPosition,l=this.Ee(e);i=i||jeeplus.uid();var a=this.$renderLabel(e,i),r="";if(t)r+=t;else{var o=jeeplus.template.escape(e.text||this.VC(e.value)||(0===e.value?"0":""));r+=this.qt("input")+"id='"+i+"' type='"+(e.type||this.name)+"'"+(e.editable?" role='combobox'":"")+" value='"+o+"' style='width: "+l+"px; text-align: "+s+";'";var h=e.attributes;if(h)for(var u in h)r+=" "+u+"='"+h[u]+"'";r+=" />"}r+=this.$renderIcon?this.$renderIcon(e):"";var c="";c=n?a+"<div class='jeeplus_el_box' style='width:"+e.awidth+"px; height:"+e.aheight+"px'>"+r+"</div>":"<div class='jeeplus_el_box' style='width:"+e.awidth+"px; height:"+e.aheight+"px'>"+a+r+"</div>";var d=e.awidth-l-2*jeeplus.skin.$active.inputPadding,p=(e.invalid?e.invalidMessage:"")||e.bottomLabel;return p&&(c+="<div class='jeeplus_inp_bottom_label'"+(e.invalid?"role='alert' aria-relevant='all'":"")+" style='width:"+(l||e.awidth)+"px;margin-left:"+Math.max(d,jeeplus.skin.$active.inputPadding)+"px;'>"+p+"</div>"),c},defaults:{template:function(e,t){return t.$renderInput(e)},label:"",labelWidth:80},type_setter:function(e){return e},oe:!1,$setValue:function(e){this.getInputNode().value=this.VC(e)},$getValue:function(){return this.VC(this.getInputNode().value,!1)},suggest_setter:function(e){if(e){if("string"==typeof e){if(jeeplus.$$(e))return jeeplus.$$(e).s.id;e={body:{url:e,dataFeed:e}}}else jeeplus.isArray(e)?e={body:{data:this.Be(e)}}:e.body||(e.body={});jeeplus.extend(e,{view:"suggest"});var t=jeeplus.ui(e);return this.Ns.push(t),t.s.id}return!1}},jeeplus.ui.button),jeeplus.protoUI({name:"segmented",Ce:!1,$init:function(){this.attachEvent("onChange",function(e){this.s.multiview&&this.aF(e)}),this.attachEvent("onAfterRender",jeeplus.once(function(){this.s.multiview&&this.s.value&&this.aF(this.s.value)}))},aF:function(e){var t=this.getTopParentView(),i=null;t&&t.$$&&(i=t.$$(e)),i||(i=jeeplus.$$(e)),i&&i.show&&i.show()},defaults:{template:function(e,t){e.options;var i=e.options;t.Be(i),i=t.yC(i);var s=t.Ee(e),n=jeeplus.uid(),l="<div style='width:"+s+"px' class='jeeplus_all_segments' role='tablist' aria-label='"+jeeplus.template.escape(e.label)+"'>",a=e.optionWidth||Math.floor(s/i.length);e.value||(e.value=i[0].id);for(var r=0;r<i.length;r++)l+="<button type='button' style='width:"+(i[r].width||a)+"px' role='tab' aria-selected='"+(e.value==i[r].id?"true":"false")+"' tabindex='"+(e.value==i[r].id?"0":"-1")+"'",l+="class='jeeplus_segment_"+(r==i.length-1?"N":0<r?1:0)+(e.value==i[r].id?" jeeplus_selected ":"")+"' button_id='"+i[r].id+"' "+(i[r].tooltip?"title='"+i[r].tooltip+"'":"")+">",l+=i[r].value+"</button>";return t.$renderInput(e,l+"</div>",n)}},Ie:function(){return this.$view.getElementsByTagName("BUTTON")},focus:function(){this.ub()},blur:function(){this.JD()},$setValue:function(e){for(var t=this.Ie(),i=0;i<t.length;i++){var s=t[i].getAttribute("button_id");t[i].setAttribute("aria-selected",e==s?"true":"false"),t[i].setAttribute("tabindex",e==s?"0":"-1"),e==s?jeeplus.html.addCss(t[i],"jeeplus_selected"):jeeplus.html.removeCss(t[i],"jeeplus_selected")}var n=this.config.tabbarPopup;n&&jeeplus.$$(n)&&jeeplus.$$(n).getBody().exists(e)&&this.refresh()},getValue:function(){return this.s.value},getInputNode:function(){return null},optionIndex:function(e){for(var t=this.s.options,i=0;i<t.length;i++)if(t[i].id==e)return i;return-1},addOption:function(e,t,i,s){var n=e;"object"!=typeof e?n={id:e,value:t=t||e}:(e=n.id,s=i,i=t),this.optionIndex(e)<0&&jeeplus.PowerArray.insertAt.call(this.s.options,n,s),this.refresh(),i&&this.setValue(e)},removeOption:function(e,t){var i=this.optionIndex(e),s=this.s.options;0<=i&&jeeplus.PowerArray.removeAt.call(s,i),this.s.value==e&&this.zC(s,i),this.refresh(),this.callEvent("onOptionRemove",[e,this.s.value])},zC:function(e,t){var i=e.length;if(i){for(var s=t=Math.min(t,i-1);s<i;s++)if(!e[s].hidden)return this.setValue(e[s].id);for(s=t;0<=s;s--)if(!e[s].hidden)return this.setValue(e[s].id)}this.setValue("")},yC:function(e){for(var t=[],i=0;i<e.length;i++)e[i].hidden||t.push(e[i]);return t},AC:function(e,t){var i=this.s.options,s=this.optionIndex(e),n=i[s];n&&t==!!n.hidden&&(n.hidden=!t,t||this.s.value!=e?this.refresh():this.zC(i,s))},hideOption:function(e){this.AC(e,!1)},showOption:function(e){this.AC(e,!0)},oe:!1},jeeplus.HTMLOptions,jeeplus.ui.text),jeeplus.protoUI({name:"search",on_click:{jeeplus_input_icon:function(e){this.getInputNode().focus(),this.callEvent("onSearchIconClick",[e])}},$skin:function(){this.defaults.inputPadding=jeeplus.skin.$active.inputPadding},defaults:{type:"text",icon:"search"}},jeeplus.ui.text),jeeplus.protoUI({name:"toggle",Ce:!0,$init:function(){this.attachEvent("onItemClick",function(){this.toggle()})},$setValue:function(e){var t=this.getInputNode(),i=this.s,s=e&&"0"!=e,n=(s?i.onLabel:i.offLabel)||i.label,l=t.lastChild;t.setAttribute("aria-pressed",!!s&&"true"),t.value=n,l&&((l.firstChild||l).nodeValue=" "+n),t.firstChild&&"SPAN"===t.firstChild.nodeName&&i.onIcon&&i.offIcon&&i.onIcon!==i.offIcon&&(t.firstChild.className=t.firstChild.className.replace(s?i.offIcon:i.onIcon,s?i.onIcon:i.offIcon));var a=t.parentNode;s?jeeplus.html.addCss(a,"jeeplus_pressed"):jeeplus.html.removeCss(a,"jeeplus_pressed")},toggle:function(){this.setValue(!this.getValue())},getValue:function(){var e=this.s.value;return e&&"0"!=e?1:0},defaults:{template:function(e,t){var i=e.value&&"0"!=e.value,s=i?" jeeplus_pressed":"";e.label=(i?e.onLabel:e.offLabel)||e.label,e.icon=(i?e.onIcon:e.offIcon)||e.icon;var n="<div class='jeeplus_el_box"+s+"' style='width:"+e.awidth+"px; height:"+e.aheight+"px'>"+t.$renderInput(e,t)+"</div>";return n.replace(/(button)\s*(?=\w)/,"$1 aria-pressed='"+(i?"true":"false")+"' ")}},oe:!1},jeeplus.ui.button),jeeplus.protoUI({name:"select",defaults:{template:function(t,e){var i=e.Be(t.options),s="x"+jeeplus.uid(),n=e.qt("select")+"id='"+s+"' style='width:"+e.Ee(t)+"px;'>",l=jeeplus.$$(i);if(l&&l.data&&l.data.each)l.data.each(function(e){n+="<option"+(e.id==t.value?" selected='true'":"")+" value='"+e.id+"'>"+e.value+"</option>"});else for(var a=0;a<i.length;a++)n+="<option"+(i[a].id==t.value?" selected='true'":"")+" value='"+i[a].id+"'>"+i[a].value+"</option>";return n+="</select>",e.$renderInput(t,n,s)}},options_setter:function(e){if(e){if("string"!=typeof e)return e;var t=new jeeplus.DataCollection({url:e});return t.data.attachEvent("onStoreLoad",jeeplus.bind(this.refresh,this)),t}},getInputNode:function(){return this.y.getElementsByTagName("select")[0]}},jeeplus.ui.text),jeeplus.protoUI({name:"textarea",defaults:{template:function(e,t){var i=e.name||e.id,s="x"+jeeplus.uid(),n=t.qt("textarea")+"style='width:"+t.Ee(e)+"px;'";return n+=" id='"+s+"' name='"+i+"' class='jeeplus_inp_textarea'>"+t.VC(e.value||(0===e.value?"0":""))+"</textarea>",t.$renderInput(e,n,s)},height:0,minHeight:60},$skin:function(){this.defaults.inputPadding=jeeplus.skin.$active.inputPadding,this.$E=jeeplus.skin.$active.inputSpacing},Dt:!0,$renderLabel:function(e,t){var i=e.labelAlign||"left",s="top"==this.s.labelPosition,n=s?"display:block;":"width: "+this.s.labelWidth+"px;",l="";return s?(this.le,this.ZE):(jeeplus.skin.$active.inputHeight||this.s.aheight,this.s.inputPadding),e.label&&(l="<label style='"+n+"text-align: "+i+";' onclick='' for='"+t+"' class='jeeplus_inp_"+(s?"top_":"")+"label "+(e.required?"jeeplus_required":"")+"'>"+(e.label||"")+"</label>"),l},getInputNode:function(){return this.y.getElementsByTagName("textarea")[0]}},jeeplus.ui.text),jeeplus.protoUI({name:"counter",defaults:{template:function(e,t){var i=e.value||0,s="x"+jeeplus.uid(),n="<div role='spinbutton' aria-label='"+jeeplus.template.escape(e.label)+"' aria-valuemin='"+e.min+"' aria-valuemax='"+e.max+"' aria-valuenow='"+e.value+"' class='jeeplus_el_group' style='width:"+t.Ee(e)+"px'>";return n+="<button type='button' class='jeeplus_inp_counter_prev' tabindex='-1' aria-label='"+jeeplus.i18n.aria.decreaseValue+"'>-</button>",n+=t.qt("input")+" id='"+s+"' type='text' class='jeeplus_inp_counter_value' aria-live='assertive' value='"+i+"'></input>",n+="<button type='button' class='jeeplus_inp_counter_next' tabindex='-1' aria-label='"+jeeplus.i18n.aria.increaseValue+"'>+</button></div>",t.$renderInput(e,n,s)},min:0,max:1/0,step:1},$init:function(){jeeplus.UE(this.$view,"keydown",this.LD,{bind:this})},LD:function(e){var t=e.which||e.keyCode,i=this.s,s=i.value||i.min;32<t&&t<41&&(35===t?s=i.min:36===t?s=i.max===1/0?1e6:i.max:33===t?this.next():34===t?this.prev():s+=37===t||40===t?-1:1,34<t&&s>=i.min&&s<=i.max&&this.setValue(s))},$setValue:function(e){this.getInputNode().value=e},getInputNode:function(){return this.y.getElementsByTagName("input")[0]},getValue:function(e){return 1*jeeplus.ui.button.prototype.getValue.apply(this,arguments)},next:function(e){e=this.s.step,this.shift(e)},prev:function(e){e=-1*this.s.step,this.shift(e)},shift:function(e){var t=this.s.min,i=this.s.max,s=this.getValue()+e;t<=s&&s<=i&&this.setValue(s)}},jeeplus.ui.text),jeeplus.protoUI({name:"checkbox",defaults:{checkValue:1,uncheckValue:0,template:function(e,t){var i="x"+jeeplus.uid(),s="";e.labelRight&&(s="<label class='jeeplus_label_right'>"+e.labelRight+"</label>",e.labelWidth&&(e.label=e.label||"&nbsp;"));var n=e.checkValue==e.value,l=Math.floor((t.s.aheight-16)/2),a=t.qt("input")+"style='margin-top:"+l+"px;"+(e.customCheckbox?"display:none":"")+"' id='"+i+"' type='checkbox' "+(n?"checked='1'":"")+(e.labelRight?" aria-label='"+jeeplus.template.escape(e.labelRight)+"'":"")+"/>",r="jeeplus_inp_checkbox_border jeeplus_el_group jeeplus_checkbox_"+(n?"1":"0"),o=e.customCheckbox||"";o&&(o=(o=(o=o.replace(/(aria-checked=')\w*(?=')/,"$1"+(e.value==e.checkValue?"true":"false"))).replace(/(aria-label=')\w*(?=')/,"$1"+jeeplus.template.escape(e.labelRight||e.label))).replace(/(aria-invalid=')\w*(?=')/,"$1"+(e.invalid?"true":"false")));var h="<div style='line-height:"+t.s.cheight+"px' class='"+r+"'>"+a+o+s+"</div>";return t.$renderInput(e,h,i)}},customCheckbox_setter:function(e){return!0===e&&jeeplus.skin.$active.customCheckbox&&(e="<a role='presentation' onclick='javascript:void(0)'><button role='checkbox' aria-checked='false' aria-label='' type='button' aria-invalid='' class='jeeplus_custom_checkbox'></button></a>"),e},focus:function(){var e=this.getInputNode();e&&e.focus()},blur:function(){var e=this.getInputNode();e&&e.blur()},De:function(){},$setValue:function(e){var t=e==this.s.checkValue,i=this.$view.getElementsByTagName("input")[0],s=i?i.parentNode:null;if(s&&this.s.customCheckbox){var n=s.getElementsByTagName("BUTTON");n[0]&&n[0].setAttribute("aria-checked",t?"true":"false")}s&&(s.className=s.className.replace(/(jeeplus_checkbox_)\d/,"$1"+(t?1:0))),i.checked=t},toggle:function(){var e=this.getValue()!=this.s.checkValue?this.s.checkValue:this.s.uncheckValue;this.setValue(e)},getValue:function(){return this.s.value==this.s.checkValue?this.s.checkValue:this.s.uncheckValue},getInputNode:function(){return this.$view.getElementsByTagName(this.s.customCheckbox?"button":"input")[0]},$skin:function(){this.defaults.customCheckbox=!!jeeplus.skin.$active.customCheckbox}},jeeplus.ui.text),jeeplus.protoUI({name:"radio",defaults:{template:function(e,t){for(var i,s=t.Be(e.options),n=[],l=0;l<s.length;l++){var a="x"+jeeplus.uid();i=i||a,l&&(s[l].newline||e.vertical)&&n.push("<div class='jeeplus_line_break'></div>");var r=s[l].id==e.value,o=s[l].value||"",h=e.customRadio||"";if(h){var u=(0===l?e.label+" ":"")+o;h=(h=(h=(h=h.replace(/(aria-label=')\w*(?=')/,"$1"+jeeplus.template.escape(u))).replace(/(aria-checked=')\w*(?=')/,"$1"+(r?"true":"false"))).replace(/(tabindex=')\w*(?=')/,"$1"+(r||0===l&&!e.value?"0":"-1"))).replace(/(aria-invalid=')\w*(?=')/,"$1"+(e.invalid?"true":"false"))}var c=t.qt("input")+" name='"+(e.name||e.id)+"' type='radio' "+(r?"checked='1'":"")+"tabindex="+(r||0===l&&!e.value?"0":"-1")+" value='"+s[l].id+"' id='"+a+"' style='"+(h?"display:none":"")+"' />",d="<div radio_id='"+s[l].id+"' class='jeeplus_inp_radio_border jeeplus_radio_"+(r?"1":"0")+"' role='presentation'>"+c+h+"</div>";o&&(o="<label for='"+a+"' class='jeeplus_label_right'>"+o+"</label>"),n.push("<div class='jeeplus_radio_option' role='presentation'>"+d+o+"</div>")}return n="<div class='jeeplus_el_group' role='radiogroup' style='margin-left:"+(e.label?e.labelWidth:0)+"px;'>"+n.join("")+"</div>",t.$renderInput(e,n,i)}},refresh:function(){this.render(),this.ac&&this.$getSize(0,0)[2]!=this.ac[1]&&this.resize()},$getSize:function(e,t){var i=jeeplus.ui.button.prototype.$getSize.call(this,e,t);if(this.s.options){for(var s=this.s.vertical?0:1,n=0;n<this.s.options.length;n++)(this.s.vertical||this.s.options[n].newline)&&s++;i[3]=i[2]=Math.max(i[2],(this.s.optionHeight||25)*s+2*this.s.inputPadding+("top"==this.s.labelPosition?this.le:0))}var l=this.config.bottomPadding;return l&&(i[2]+=l,i[3]+=l),i},Ie:function(){return this.y.getElementsByTagName("input")},$setValue:function(e){for(var t=this.Ie(),i=0;i<t.length;i++){t[i].parentNode.getAttribute("radio_id")==e?(t[i].className="jeeplus_inp_radio_on",t[i].checked=!0,t[i].setAttribute("tabindex","0")):(t[i].className="jeeplus_inp_radio_on jeeplus_hidden",t[i].checked=!1,t[i].setAttribute("tabindex","-1"));var s=t[i]?t[i].parentNode:null;if(s&&(s.className=s.className.replace(/(jeeplus_radio_)\d/,"$1"+(t[i].checked?1:0)),this.s.customRadio)){var n=s.getElementsByTagName("BUTTON");n[0]&&(n[0].setAttribute("aria-checked",t[i].checked?"true":"false"),n[0].setAttribute("tabindex",t[i].checked?"0":"-1"))}}},getValue:function(e){return this.s.value},focus:function(){this.ub()},blur:function(){this.JD()},customRadio_setter:function(e){return!0===e&&jeeplus.skin.$active.customRadio&&(e="<a role='presentation' onclick='javascript:void(0)'><button type='button' class='jeeplus_custom_radio' role='radio' aria-checked='false' aria-label='' aria-invalid='' tabindex=''></button></a>"),e},$skin:function(){this.defaults.customRadio=!!jeeplus.skin.$active.customRadio,jeeplus.skin.$active.optionHeight&&(this.defaults.optionHeight=jeeplus.skin.$active.optionHeight)}},jeeplus.HTMLOptions,jeeplus.ui.text),jeeplus.protoUI({name:"richselect",defaults:{template:function(e,t){return t.Fe(e,t)},popupWidth:200,icon:"angle-down"},_E:function(){if(this.s.text!=this.getText()&&(!jeeplus.isUndefined(this.s.text)||this.getText())){var e=this.getPopup(),t=e.getSuggestion(),i=this.getValue(),s=this.getInputNode().value,n=e.getList().getItem(t);t&&t!=i&&(""!==s||""===e.getItemText(t))&&e.config.filter(n,s)?this.setValue(t):""===s?this.setValue(""):this.bF&&this.bF()}},suggest_setter:function(e){return this.options_setter(e)},options_setter:function(e){e=this.Kt?this.Kt(e):e;var t=this.s.popup=this.s.suggest=jeeplus.ui.text.prototype.suggest_setter.call(this,e),i=jeeplus.$$(t).getList();return i&&i.attachEvent("onAfterLoad",jeeplus.bind(this.Ss,this)),t},getList:function(){return jeeplus.$$(this.s.suggest).getList()},Ss:function(){var e=this.s.value;jeeplus.isUndefined(e)||this.getPopup().isVisible()||this.s.text||!this.y.firstChild||this.$setValue(e)},$skin:function(){this.defaults.inputPadding=jeeplus.skin.$active.inputPadding},$render:function(e){jeeplus.isUndefined(e.value)||this.$setValue(e.value)},getInputNode:function(){return this.y.getElementsByTagName("DIV")[1]},getPopup:function(){return jeeplus.$$(this.s.popup)},getText:function(){var e=this.s.value,t=this.getInputNode();return t?void 0===t.value?t.firstChild&&"jeeplus_placeholder"===t.firstChild.className?"":t.innerHTML:t.value:e?this.getPopup().getItemText(e):""},$setValue:function(e){if(this.se){var t=e;if(this.getPopup())t=this.getPopup().getItemText(e);!t&&e&&e.id&&(this.getPopup().getList().add(e),t=this.getPopup().getItemText(e.id),this.s.value=e.id);var i=this.getInputNode();jeeplus.isUndefined(i.value)?i.innerHTML=t||this.Yx():i.value=t=t.replace(/<[^>]*>/g,""),this.s.text=t}},getValue:function(){return this.s.value||""}},jeeplus.ui.text),jeeplus.protoUI({name:"combo",getInputNode:function(){return this.y.getElementsByTagName("input")[0]},$render:function(e){jeeplus.isUndefined(e.value)||this.$setValue(e.value)},bF:function(){if(!this.s.editable){var e=this.getValue();this.$setValue(jeeplus.isUndefined(e)?"":e)}},Xy:function(){var e=this.getInputNode(),t="",i=this.getPopup();e.value&&(t=this.s.value,i.getItemText(t)!=this.getText()&&(t=i.getSuggestion()||t)),t!=this.s.value?this.setValue(t,!0):this.$setValue(t)},defaults:{template:function(e,t){return t.$renderInput(e).replace(/(<input)\s*(?=\w)/,"$1 role='combobox'")},icon:"angle-down"}},jeeplus.ui.richselect),jeeplus.protoUI({name:"datepicker",$init:function(){this.$ready.push(this.Je)},defaults:{template:function(e,t){"time"==t.s.type&&(t.s.icon=t.s.timeIcon);var i=e.type;e.type="";var s=e.editable?t.$renderInput(e):t.Fe(e,t);return e.type=i,s},stringResult:!1,timepicker:!1,icon:"calendar",icons:!0,timeIcon:"clock-o",separator:", "},_E:function(){if(this.s.text!=this.getText()&&(!jeeplus.isUndefined(this.s.text)||this.getText())){var e=this.getPopup().getValue();e&&this.setValue(e)}},$skin:function(){this.defaults.inputPadding=jeeplus.skin.$active.inputPadding},getPopup:function(){return jeeplus.$$(this.s.popup)},Je:function(){var e=this.s;if(e.suggest)e.popup=e.suggest;else if(!e.popup){var t=this.s.timepicker;e.popup=e.suggest=this.suggest_setter({type:"calendar",point:!1!==this.s.point,height:240+(t?30:0),width:250,padding:0,body:{multiselect:this.s.multiselect,timepicker:t,type:this.s.type,icons:this.s.icons}})}this.ze=function(){}},$render:function(e){jeeplus.isUndefined(e.value)||(e.value=this.$prepareValue(e.value),this.$setValue(e.value))},$prepareValue:function(e){if(this.s.multiselect){"string"==typeof e?e=e.split(this.s.separator):e instanceof Date?e=[e]:e||(e=[]);for(var t=0;t<e.length;t++)e[t]=this.RG(e[t]);return e}return this.RG(e)},RG:function(e){var t=this.s.type,i="time"==t;if(isNaN(parseFloat(e))||(e=""+e),"string"==typeof e&&e){e=("month"!=t&&"year"!=t||!this.Gx?i?jeeplus.i18n.parseTimeFormatDate:jeeplus.i18n.parseFormatDate:this.Gx)(e)}if(e){if(i&&jeeplus.isArray(e)){var s=new Date;s.setHours(e[0]),s.setMinutes(e[1]),e=s}isNaN(e.getTime())&&(e="")}return e},YE:function(e){return this.s.multiselect?[].concat(e).map(function(e){return this.SG(e)}.bind(this)).join(this.config.separator):this.SG(e)},SG:function(e){var t="time"==this.s.type,i=this.config.timepicker;return(this.Hx||(t?jeeplus.i18n.timeFormatStr:i?jeeplus.i18n.fullDateFormatStr:jeeplus.i18n.dateFormatStr))(e)},ND:function(){var e=this.getInputNode();e.value==jeeplus.undefined?e.innerHTML=this.s.text||this.Yx():e.value=this.s.text||""},$compareValue:function(e,t){return!e&&!t||jeeplus.Date.equal(e,t)},$setValue:function(e){this.s.text=e?this.YE(e):"",this.ND()},format_setter:function(e){return e?"function"==typeof e?this.Hx=e:(this.Hx=jeeplus.Date.dateToStr(e),this.Gx=jeeplus.Date.strToDate(e)):this.Hx=this.Gx=null,e},getInputNode:function(){return this.s.editable?this.y.getElementsByTagName("input")[0]:this.y.getElementsByTagName("DIV")[1]},getValue:function(){if(this.s.multiselect){var e=[].concat(this.s.value).map(function(e){return this.TG(e)}.bind(this));return this.s.stringResult?e.join(this.s.separator):e}return this.TG(this.s.value)},TG:function(e){var t=this.s.type,i="time"==t,s=this.config.timepicker;this.se?this.s.editable&&(e=(this.Gx||(i?jeeplus.i18n.timeFormatDate:s?jeeplus.i18n.fullDateFormatDate:jeeplus.i18n.dateFormatDate))(this.getInputNode().value)):e=this.$prepareValue(e)||null;if(this.s.stringResult){var n=jeeplus.i18n.parseFormatStr;return i&&(n=jeeplus.i18n.parseTimeFormatStr),!this.Hx||"month"!=t&&"year"!=t||(n=this.Hx),this.s.multiselect?[].concat(e).map(function(e){return e?n(e):""}):e?n(e):""}return e||null},getText:function(){var e=this.getInputNode();return e?void 0===e.value?this.getValue()?e.innerHTML:"":e.value:""}},jeeplus.ui.text),jeeplus.protoUI({name:"colorpicker",$init:function(){this.$ready.push(this.Je)},defaults:{icon:!0},Je:function(){var e=this.s;e.suggest?e.popup=e.suggest:e.popup||(e.popup=e.suggest=this.suggest_setter({type:"colorboard",height:200})),this.ze=function(){}},$render:function(e){jeeplus.isUndefined(e.value)||(e.value=this.$prepareValue(e.value),this.$setValue(e.value))},getValue:function(){return this.se&&this.s.editable?this.getInputNode().value:this.s.value},$prepareValue:function(e){return e&&e.charAt&&"#"!=e.charAt(0)&&(e="#"+e),e||""},pz:function(){return this.$view.getElementsByTagName("DIV")[this.s.editable?1:2]},YE:function(e){return e},$setValue:function(e){this.pz().style.backgroundColor=e,this.s.text=e;var t=this.getInputNode();t.value==jeeplus.undefined?t.innerHTML=e:t.value=e},$renderIcon:function(){return'<div class="jeeplus_input_icon" style="background-color:'+this.config.value+';"> </div>'}},jeeplus.ui.datepicker),jeeplus.RenderStack={$init:function(){this.v=document.createElement("DIV"),this.data.attachEvent("onIdChange",jeeplus.bind(this.Ke,this)),this.attachEvent("onItemClick",this.Le),this.types||(this.types={default:this.type},this.type.name="default"),this.type=jeeplus.clone(this.type)},customize:function(e){jeeplus.type(this,e)},item_setter:function(e){return this.type_setter(e)},type_setter:function(e){return this.types[e]?(this.type=jeeplus.clone(this.types[e]),this.type.css&&(this.w.className+=" "+this.type.css)):this.customize(e),this.type.on_click&&jeeplus.extend(this.on_click,this.type.on_click),e},template_setter:function(e){this.type.template=jeeplus.template(e)},jb:function(e){var t=this.data.Me[e.id];return this.callEvent("onItemRender",[e]),this.type.templateStart(e,this.type,t)+(e.$template?this.type["template"+e.$template]:this.type.template)(e,this.type,t)+this.type.templateEnd(e,this.type,t)},Ne:function(e){return this.v.innerHTML=this.jb(e),this.v.firstChild},Ke:function(e,t){var i=this.getItemNode(e);i&&(i.setAttribute(this.ad,t),this.t[t]=this.t[e],delete this.t[e])},Le:function(){if(this.s.click){var e=jeeplus.toFunctor(this.s.click,this.$scope);e&&e.call&&e.apply(this,arguments)}},getItemNode:function(e){if(this.t)return this.t[e];this.t={};for(var t=this.y.childNodes,i=0;i<t.length;i++){var s=t[i].getAttribute(this.ad);s&&(this.t[s]=t[i])}return this.getItemNode(e)},locate:function(e){return jeeplus.html.locate(e,this.ad)},showItem:function(e){var t=this.getItemNode(e);if(t&&this.scrollTo){var i=Math.abs(this.w.offsetLeft-t.offsetLeft),s=i+t.offsetWidth,n=Math.abs(this.w.offsetTop-t.offsetTop),l=n+t.offsetHeight,a=this.getScrollState(),r=a.x;(i<r||r+this.bc<s)&&(r=i);var o=a.y;(n<o||o+this.dc<l)&&(o=n-5),this.scrollTo(r,o),this.Oe&&this.Oe(e)}},render:function(e,t,i){if(this.isVisible(this.s.id)&&!this.$blockRender)if(e){var s=this.getItemNode(e);switch(i){case"paint":case"update":if(!s)return;var n=this.t[e]=this.Ne(t);jeeplus.html.insertBefore(n,s),jeeplus.html.remove(s);break;case"delete":if(!s)return;jeeplus.html.remove(s),delete this.t[e];break;case"add":n=this.t[e]=this.Ne(t);jeeplus.html.insertBefore(n,this.getItemNode(this.data.getNextId(e)),this.y);break;case"move":jeeplus.html.insertBefore(this.getItemNode(e),this.getItemNode(this.data.getNextId(e)),this.y)}}else if(this.callEvent("onBeforeRender",[this.data])){(this.Pe||this.y).innerHTML=this.data.getRange().map(this.jb,this).join(""),this.t=null,this.callEvent("onAfterRender",[]);n=this.y.offsetHeight}}},jeeplus.ValidateData={$init:function(){this.h&&this.attachEvent("onChange",this.clearValidation)},clearValidation:function(){if(this.elements)for(var e in this.elements)this.Qe(e)},validate:function(e,t){this.callEvent("onBeforeValidate",[]);var i=this.Re={},s=!0,n=this.s.rules,l=this.isVisible&&!this.isVisible(),a=e&&e.hidden,r=e&&e.disabled,o={},h={};for(var u in this.elements){var c=this.elements[u].config.name;(l||this.elements[u].isVisible()||a)&&(this.elements[u].isEnabled()||r)?o[c]=this.elements[u]:h[c]=!0}if((n||o)&&!t&&this.getValues&&(t=this.getValues()),n){n.$obj&&(s=this.Se(n.$obj,t,t,"")&&s);var d=n.$all,p=t;if(this.s.complexData&&(p=jeeplus.CodeParser.collapseNames(t)),d)for(var f in t)if(!h[f]){(m=this.Se(d,p[f],t,f))||(i[f]=!0),s=m&&s}for(var f in n)if(!h[f]&&0!==f.indexOf("$")&&!i[f]){(m=this.Se(n[f],p[f],t,f))||(i[f]=!0),s=m&&s}}if(o)for(var f in o)if(!i[f]){var g=o[f];if(g.validate){s=(m=g.validate())&&s,m||(i[f]=!0)}else{var v=g.s;if(v){var m,j=v.validate;if(!j&&v.required&&(j=jeeplus.rules.isNotEmpty),j)(m=this.Se(j,t[f],t,f))||(i[f]=!0),s=m&&s}}}return this.callEvent("onAfterValidation",[s,this.Re]),s},Se:function(e,t,i,s){return"string"==typeof e&&(e=jeeplus.rules[e]),e.call(this,t,i,s)?(this.callEvent("onValidationSuccess",[s,i])&&this.Qe&&this.Qe(s),!0):(this.callEvent("onValidationError",[s,i])&&this.Te&&this.Te(s),!1)}},jeeplus.ValidateCollection={Ue:function(){this.data.attachEvent("onStoreUpdated",jeeplus.bind(function(e,t,i){!e||"add"!=i&&"update"!=i||this.validate(e)},this)),this.data.attachEvent("onClearAll",jeeplus.bind(this.clearValidation,this)),this.Ue=function(){}},rules_setter:function(e){return e&&this.Ue(),e},clearValidation:function(){this.data.clearMark("jeeplus_invalid",!0)},validate:function(e){var t=!0;if(e){this.Re={};var i=this.getItem(e);(t=jeeplus.ValidateData.validate.call(this,null,i))?this.callEvent("onValidationSuccess",[e,i])&&this.Qe(e):this.callEvent("onValidationError",[e,i,this.Re])&&this.Te(e,this.Re)}else for(var s in this.data.pull)t=this.validate(s)&&t;return t},Se:function(e,t,i,s){"string"==typeof e&&(e=jeeplus.rules[e]);var n=e.call(this,t,i,s);return n||(this.Re[s]=!0),n},Qe:function(e){this.data.removeMark(e,"jeeplus_invalid",!0)},Te:function(e,t){this.data.addMark(e,"jeeplus_invalid",!0)}},jeeplus.rules={isEmail:function(e){return/\S+@[^@\s]+\.[^@\s]+$/.test((e||"").toString())},isNumber:function(e){return parseFloat(e)==e},isChecked:function(e){return!!e||"0"===e},isNotEmpty:function(e){return 0===e||e}},jeeplus.MapCollection={$init:function(){this.$ready.push(this.cz),this.attachEvent("onStructureUpdate",this.cz),this.attachEvent("onStructureLoad",function(){this.dz.length||this.cz()})},cz:function(e){e=this.dz=[];var t=this.s;if(t.columns&&this.zj(t.columns),this.s.map&&this.ez(t.map),this.dz.length)try{this.data.qf=Function("obj",e.join("\n"))}catch(e){}},ez:function(e){for(var t in e)this.dz.push(this.fz(t,e[t]))},fz:function(e,t,i){var s="",n="";return 0===t.indexOf("(date)")?(s="jeeplus.i18n.parseFormatDate(",n=")",i&&!i.format&&(i.format=jeeplus.i18n.dateFormatStr),t=t.replace("(date)","")):0===t.indexOf("(number)")&&(s="(",n=")*1",t=t.replace("(number)","")),"obj."+e+" = "+s+'"'+(t=""!==t?(t=t.replace(/\{obj\.([^}]*)\}/g,"\"+(obj.$1||'')+\"")).replace(/#([^#'";, ]+)#/gi,"\"+(obj.$1||'')+\""):'"+(obj.'+e+"||'')+\"")+'"'+n+";"},zj:function(e){for(var t=0;t<e.length;t++){var i=e[t].map,s=e[t].id;s||(s=e[t].id="i"+jeeplus.uid(),e[t].header||(e[t].header="")),i&&this.dz.push(this.fz(s,i,e[t])),this.Et(e[t])}},Et:function(e){var t=e.options||e.collection;if(t)if("string"==typeof t){var i=jeeplus.$$(t);i||(i=new jeeplus.DataCollection({url:t}),this.Ns.push(i)),i.getBody&&(i=i.getBody()),this.Bj(i,e)}else if(t.loadNext)this.Bj(t,e);else if(t[0]&&"object"==typeof t[0])t=new jeeplus.DataCollection({data:t}),this.Bj(t,e),this.Ns.push(t);else{if(jeeplus.isArray(t)){for(var s={},n=0;n<t.length;n++)s[t[n]]=t[n];e.options=t=s}e.template=e.template||this.Ej(t,e.id,e.optionslist)}},Bj:function(e,t){if(t){delete t.options,t.collection=e,t.template=t.template||this.Dj(e,t.id,t.optionslist);var i=e.data.attachEvent("onStoreUpdated",jeeplus.bind(function(){this.refresh(),this.refreshFilter&&this.refreshFilter(t.id)},this));this.attachEvent("onDestruct",function(){e.$destructed||e.data.detachEvent(i)})}},Ej:function(l,a,e){if(e){var r="string"==typeof e?e:",";return function(e,t){var i=e[a]||e.value;if(!i)return"";for(var s=i.split(r),n=0;n<s.length;n++)s[n]=l[s[n]]||"";return s.join(", ")}}return function(e,t){return l[e[a]]||e.value||""}},Dj:function(a,r,e){if(e){var o="string"==typeof e?e:",";return function(e,t){var i=e[r]||e.value;if(!i)return"";for(var s=i.split(o),n=0;n<s.length;n++){var l=a.data.pull[s[n]];s[n]=l&&l.value||""}return s.join(", ")}}return function(e,t){var i=e[r]||e.value,s=a.data.pull[i];return s&&(s.value||0===s.value)?s.value:""}}},jeeplus.Undo={$init:function(){this.VA=jeeplus.extend([],jeeplus.PowerArray,!0),this.WA=-1},undo_setter:function(e){return e&&(this.XA(),this.XA=function(){}),e},XA:function(){var n=this;this.attachEvent("onBeforeDrop",function(e){if(e.from==e.to){var t=n.YA=jeeplus.copy(this.getItem(e.start));this.data.branch?t.$index=this.getBranchIndex(t.id):t.$index=this.getIndexById(t.id)}}),this.data.attachEvent("onDataMove",function(e){if(n.YA&&n.YA.id==e){var t=n.YA;n.YA=null,n.ZA(e,t,"move")}}),this.data.attachEvent("onBeforeDelete",function(e){if(this.getItem(e)){var t=n._A=jeeplus.copy(this.getItem(e));this.branch?(t.$index=this.getBranchIndex(e),this.branch[e]&&(t.$branch=jeeplus.copy(this.serialize(e)))):t.$index=this.getIndexById(e)}}),this.data.attachEvent("onDataUpdate",function(e,t,i){n.ZA(e+"",i,"update")}),this.data.attachEvent("onStoreUpdated",function(e,t,i){var s=null;e&&("add"==i?s=jeeplus.copy(t):"delete"==i&&(s=n._A),s&&n.ZA(e,s,i))}),this.data.attachEvent("onIdChange",function(e,t){"object"==typeof e&&(e=e.row);for(var i=0;i<n.VA.length;i++)n.VA[i].id==e&&(n.VA[i].id=t)})},ZA:function(e,t,i){!this.aB&&this.s.undo&&(this.VA.push({id:e,action:i,data:t}),20==this.VA.length&&this.VA.splice(0,1),this.bB||(this.WA=this.VA.length-1))},ignoreUndo:function(e,t){this.aB=!0,e.call(t||this),this.aB=!1},removeUndo:function(e){for(var t=this.VA.length-1;0<=t;t--)this.VA[t].id==e&&("id"==this.VA[t].action&&(e=this.VA[t].data),this.VA.removeAt(t));this.WA=this.VA.length-1},undo:function(i){if(i)this.ignoreUndo(function(){var e,t;for(t=this.VA.length-1;!e&&0<=t;t--)this.VA[t].id==i&&(e=this.VA[t]);e&&(this.cB(e),this.VA.removeAt(t+1),this.WA=this.VA.length-1)});else{var e=this.VA[this.WA];e&&(this.ignoreUndo(function(){this.cB(e),this.VA.removeAt(this.WA)}),this.WA--)}},cB:function(e){if("delete"==e.action){var t=null,i=e.data.$parent;e.data.$branch&&(t={parent:e.id,data:jeeplus.copy(e.data.$branch)},delete e.data.$branch,i&&!this.data.branch[i]&&(i=0)),this.add(e.data,e.data.$index,i),t&&this.parse(t)}else"add"==e.action?this.remove(e.id):"update"==e.action?this.updateItem(e.id,e.data):"move"==e.action&&(e.data.$parent?this.getItem(e.data.$parent)&&this.move(e.id,e.data.$index,null,{parent:e.data.$parent}):this.move(e.id,e.data.$index))}},jeeplus.DataLoader=jeeplus.proto({$init:function(e){e=e||"",this.Ve=jeeplus.toArray(),this.$e={},this.data=new jeeplus.DataStore,this.data.attachEvent("onClearAll",jeeplus.bind(this.We,this)),this.data.attachEvent("onServerConfig",jeeplus.bind(this.Xe,this)),this.attachEvent("onDestruct",this.We),this.data.feed=this.Ye,this.data.owner=e.id},Ye:function(e,t,i){return this.Ze?this.Ze=[e,t,i]:(this.Ze=!0,this.$e.from=e,this.$e.count=t,void this._e.call(this,e,t,i))},_e:function(e,t,i,s,n){var l=null,a=(s=s||this.data.url,[{success:this.af,error:this.af},i]);if(e<0&&(e=0),n||(n={start:e,count:t}),this.count()&&(n.continue="true"),this.getState&&(l=this.getState()),s&&"string"!=typeof s)l&&(l.sort&&(n.sort=l.sort),l.filter&&(n.filter=l.filter)),this.load(s,a,n);else{s+=-1==s.indexOf("?")?"?":"&";var r=[];for(var o in n)r.push(o+"="+n[o]);if(l&&(l.sort&&r.push("sort["+l.sort.id+"]="+encodeURIComponent(l.sort.dir)),l.filter))for(var h in l.filter){var u=l.filter[h];"object"==typeof u&&(u=jeeplus.ajax().stringify(u)),r.push("filter["+h+"]="+encodeURIComponent(u))}s+=r.join("&"),this.$e.url!==s?(this.$e.url=s,this.load(s,a)):this.Ze=!1}},af:function(){var e=this.Ze;this.Ze=!1,"object"==typeof e&&this.data.feed.apply(this,e)},load:function(e,t){e=jeeplus.proxy.$parse(e);var i=jeeplus.AtomDataLoader.load.apply(this,arguments);return this.data.url||(this.data.url=e),i},loadNext:function(e,t,i,s,n){var l=this.s;return l.datathrottle&&!n?(this.bf&&window.clearTimeout(this.bf),void(this.bf=jeeplus.delay(function(){this.loadNext(e,t,i,s,!0)},this,0,l.datathrottle))):(t||0===t||(t=this.count()),e||(e=l.datafetch||this.count()),this.data.url=this.data.url||s,void(this.callEvent("onDataRequest",[t,e,i,s])&&this.data.url&&this.data.feed.call(this,t,e,i)))},cf:function(e,t){var i=this.$e;return!!(this.Ze&&i.url&&i.from<=t&&i.count+i.from>=e+t)},removeMissed_setter:function(e){return this.data.ff=e},gf:function(){var e=this.s.save;!0===e&&(e=this.s.save=this.s.url);var t={master:this};e&&e.url?jeeplus.extend(t,e):t.url=e,jeeplus.dp(t)},save_setter:function(e){return e&&this.$ready.push(this.gf),e},scheme_setter:function(e){this.data.scheme(e)},dataFeed_setter:function(e){return e=jeeplus.proxy.$parse(e),this.data.attachEvent("onBeforeFilter",jeeplus.bind(function(e,t){if("function"==typeof e)return!0;if(this.s.dataFeed&&(e||t)){e=e||"id",t&&"object"==typeof t&&(t=t.id),this.clearAll();var i=this.s.dataFeed;if("function"==typeof i){var s={};s[e]=t,i.call(this,t,s)}else if(i.$proxy){if(i.load){var n={};n[e]=t,i.load(this,{success:this.M,error:this.N},{filter:n})}}else{var l="filter["+e+"]="+encodeURIComponent(t);this.load(i+(i.indexOf("?")<0?"?":"&")+l,this.s.datatype)}return!1}},this)),e},ef:function(){if(this.s.ready&&!this.hf){var e=jeeplus.toFunctor(this.s.ready,this.$scope);e&&jeeplus.delay(e,this,arguments),this.callEvent&&jeeplus.delay(this.callEvent,this,["onReady",[]]),this.hf=!0}},We:function(e){for(var t=0;t<this.Ve.length;t++){var i=this.Ve[t];try{i.aborted=!0}catch(e){jeeplus.ly.push(i)}i.abort()}e||(this.Ze=!1,this.$e={},this.Ve=jeeplus.toArray(),this.waitData=jeeplus.promise.defer())},Xe:function(e){this.C(e)}},jeeplus.AtomDataLoader),jeeplus.ly=jeeplus.toArray(),jeeplus.DataMarks={addCss:function(e,t,i){if(!this.addRowCss&&!i&&!this.hasCss(e,t)){var s=this.getItemNode(e);s&&(s.className+=" "+t,i=!0)}return this.data.addMark(e,t,1,1,i)},removeCss:function(e,t,i){if(!this.addRowCss&&!i&&this.hasCss(e,t)){var s=this.getItemNode(e);s&&(s.className=s.className.replace(t,"").replace("  "," "),i=!0)}return this.data.removeMark(e,t,1,i)},hasCss:function(e,t){return this.data.getMark(e,t)},clearCss:function(e,t){return this.data.clearMark(e,1,t)}},jeeplus.DataStore=function(){this.name="DataStore",jeeplus.extend(this,jeeplus.EventSystem),this.setDriver("json"),this.pull={},this.order=jeeplus.toArray(),this.Me={}},jeeplus.DataStore.prototype={setDriver:function(e){this.driver=jeeplus.DataDriver[e]},df:function(e,t){this.callEvent("onParse",[this.driver,e]),this.jf&&this.filter();var i=this.driver.getInfo(e);i.key&&(jeeplus.securityKey=i.key),i.config&&this.callEvent("onServerConfig",[i.config]);var s=this.driver.getOptions(e);s&&this.callEvent("onServerOptions",[s]);var n=this.driver.getRecords(e);this.kf(i,n),this.lf&&this.mf&&!this.nf&&this.mf(this.lf),this.of&&(this.blockEvent(),this.sort(this.of),this.unblockEvent()),this.callEvent("onStoreLoad",[this.driver,e]),this.refresh()},kf:function(e,t){var i=e.from,s=!0,n=!1;if(!i&&0!==i&&this.order[0]){if(this.ff){n={};for(var l=0;l<this.order.length;l++)n[this.order[l]]=!0}s=!1,i=this.order.length}else i=1*(i||0);var a=0;for(l=0;l<t.length;l++){var r=this.driver.getDetails(t[l]),o=this.id(r);this.pull[o]?s&&this.order[a+i]&&a++:(this.order[a+i]=o,a++),this.pull[o]?(jeeplus.extend(this.pull[o],r,!0),this.pf&&this.pf(this.pull[o]),n&&delete n[o]):(this.pull[o]=r,this.qf&&this.qf(r))}if(n){for(var h in this.blockEvent(),n)this.remove(h);this.unblockEvent()}this.order[e.size-1]||(this.order[e.size-1]=jeeplus.undefined)},id:function(e){return e.id||(e.id=jeeplus.uid())},changeId:function(e,t){e!=t&&(this.pull[e]&&(this.pull[t]=this.pull[e]),this.pull[t].id=t,this.order[this.order.find(e)]=t,this.jf&&(this.jf[this.jf.find(e)]=t),this.Me[e]&&(this.Me[t]=this.Me[e],delete this.Me[e]),this.callEvent("onIdChange",[e,t]),this.Ke&&this.Ke(e,t),delete this.pull[e])},getItem:function(e){return this.pull[e]},updateItem:function(e,t,i){"object"==typeof e&&(e=e.toString());var s=this.getItem(e),n=null,l=this.hasEvent("onDataUpdate");jeeplus.isUndefined(t)||s===t||(l&&(n=jeeplus.copy(s)),e=s.id,jeeplus.extend(s,t,!0),s.id=e),this.pf&&this.pf(s),this.callEvent("onStoreUpdated",[e,s,i||"update"]),l&&this.callEvent("onDataUpdate",[e,s,n])},refresh:function(e){this.rf||(e?this.exists(e)&&this.callEvent("onStoreUpdated",[e,this.pull[e],"paint"]):this.callEvent("onStoreUpdated",[null,null,null]))},silent:function(e,t){this.rf=!0,e.call(t||this),this.rf=!1},getRange:function(e,t){if(e=e?this.getIndexById(e):this.$min||this.startOffset||0,t?t=this.getIndexById(t):(t=0===this.$max?0:Math.min(this.$max?this.$max-1:this.endOffset||1/0,this.count()-1))<0&&(t=0),t<e){var i=t;t=e,e=i}return this.getIndexRange(e,t)},getIndexRange:function(e,t){t=Math.min(0===t?0:t||1/0,this.count()-1);for(var i=jeeplus.toArray(),s=e||0;s<=t;s++)i.push(this.getItem(this.order[s]));return i},count:function(){return this.order.length},exists:function(e){return!!this.pull[e]},move:function(e,t){if(e!=t){var i=this.getIdByIndex(e),s=this.getItem(i);this.jf&&this.sf(this.jf,0,0,this.getIdByIndex(e),this.getIdByIndex(t)),this.sf(this.order,e,t),this.callEvent("onStoreUpdated",[i,s,"move"])}},sf:function(e,t,i,s,n){if(s||n){t=i=-1;for(var l=0;l<e.length;l++)e[l]==s&&t<0&&(t=l),e[l]==n&&i<0&&(i=l)}var a=e[t];e.removeAt(t),e.insertAt(a,Math.min(e.length,i))},scheme:function(e){for(var t in this.tf={},this.uf=e.$save,this.qf=e.$init||e.$change,this.pf=e.$update||e.$change,this.vf=e.$serialize,this.lf=e.$group,this.of=e.$sort,e)"$"!=t.substr(0,1)&&(this.tf[t]=e[t])},importData:function(e,t){var i=e?e.data||e:[];if(this.jf=null,"function"==typeof i.serialize){if(this.order=jeeplus.toArray([].concat(i.order)),this.OF){this.OF=!1;var s=this.pull;for(var n in this.pull={},i.pull){var l=s[n];this.pull[n]=jeeplus.copy(i.pull[n]),l&&l.open&&(this.pull[n].open=!0)}}else this.pull=i.pull;i.branch&&this.branch&&(this.branch=jeeplus.copy(i.branch),this.Mg=null)}else{var a,r;if(this.order=jeeplus.toArray(),this.pull={},jeeplus.isArray(e))for(n=0;n<e.length;n++)"object"==typeof(r=a=e[n])?r.id=r.id||jeeplus.uid():r={id:a,value:a},this.order.push(r.id),this.qf&&this.qf(r),this.pull[r.id]=r;else for(var n in i)this.order.push(n),this.pull[n]={id:n,value:i[n]}}if(this.Pg&&!i.branch){this.branch={0:[]},this.Og||this.Lg("data");for(var o=0;o<this.order.length;o++){n=this.order[o];this.Pg(this.pull[n],0,0,!1)}}this.callEvent("onStoreLoad",[]),t||this.callEvent("onStoreUpdated",[])},sync:function(s,n,l){this.unsync();var e=typeof s;if("string"==e&&(s=jeeplus.$$(s)),"function"!=e&&"object"!=e&&(l=n,n=null),"DataStore"!=s.name){if(!s.data||"DataStore"!==s.data.name&&"TreeStore"!==s.data.name)return this.Ts=s,jeeplus.callEvent("onSyncUnknown",[this,s,n]);s=s.data}var t=jeeplus.bind(function(e,t,i){this.wf||(n&&this.branch&&(this.OF=!0),this.importData(s,!0),n&&this.silent(n),this.Y&&this.Y(),this.OF,e&&t&&i||(this.Me={}),"delete"==i&&this.Me[e]&&delete this.Me[e],this.callEvent("onSyncApply",[]),l?l=!1:this.refresh())},this);this.ab=[s.attachEvent("onStoreUpdated",t),s.attachEvent("onIdChange",jeeplus.bind(function(e,t){this.changeId(e,t),this.refresh(t)},this))],this.Ts=s,this.Us=this.attachEvent("onStoreUpdated",function(e,t,i){("update"==i||"save"==i)&&(this.wf=1,s.updateItem(e,t),this.wf=0)}),t()},unsync:function(){if(this.Ts){var e=this.Ts;if("DataStore"==e.name||e.data&&"DataStore"==e.data.name){for(var t=0;t<this.ab.length;t++)e.detachEvent(this.ab[t]);this.detachEvent(this.Us)}else jeeplus.callEvent("onUnSyncUnknown",[this,e]);this.Ts=null}},destructor:function(){this.unsync(),this.pull=this.order=this.Me=null,this.i=this.j={}},add:function(e,t){if(this.tf)for(var i in this.tf)jeeplus.isUndefined(e[i])&&(e[i]=this.tf[i]);this.qf&&this.qf(e);var s=this.id(e),n=arguments[2]||this.order,l=n.length;if((jeeplus.isUndefined(t)||t<0)&&(t=l),l<t&&(t=Math.min(n.length,t)),!1===this.callEvent("onBeforeAdd",[s,e,t]))return!1;if(this.pull[s]=e,n.insertAt(s,t),this.jf){var a=this.jf.length;this.order.length&&(a=Math.min(t||0,a)),this.jf.insertAt(s,a)}return this.callEvent("onStoreUpdated",[s,e,"add"]),this.callEvent("onAfterAdd",[s,t]),e.id},remove:function(e){if(jeeplus.isArray(e))for(var t=0;t<e.length;t++)this.remove(e[t]);else{if(!1===this.callEvent("onBeforeDelete",[e]))return!1;var i=this.getItem(e);this.order.remove(e),this.jf&&this.jf.remove(e),delete this.pull[e],this.Me[e]&&delete this.Me[e],this.callEvent("onStoreUpdated",[e,i,"delete"]),this.callEvent("onAfterDelete",[e])}},clearAll:function(e){this.pull={},this.Me={},this.order=jeeplus.toArray(),this.jf=null,e||(this.url=null),this.callEvent("onClearAll",[e]),this.refresh()},getIdByIndex:function(e){return this.order[e]},getIndexById:function(e){var t=this.order.find(e);return this.pull[e]?t:-1},getNextId:function(e,t){return this.order[this.getIndexById(e)+(t||1)]},getFirstId:function(){return this.order[0]},getLastId:function(){return this.order[this.order.length-1]},getPrevId:function(e,t){return this.order[this.getIndexById(e)-(t||1)]},sort:function(e,t,i){var s=e;"function"==typeof e?s={as:e,dir:t}:"string"==typeof e&&(s={by:e.replace(/#/g,""),dir:t,as:i});var n=[s.by,s.dir,s.as,s];this.callEvent("onBeforeSort",n)&&(this.order=this.xf(s,this.order),this.jf&&this.jf.length!=this.order.length&&(this.jf=this.xf(s,this.jf)),this.refresh(),this.callEvent("onAfterSort",n))},xf:function(e,t){var i=this.sorting.create(e);if(this.order.length){for(var s=t.splice(0,this.$freeze),n=jeeplus.toArray(),l=t.length-1;0<=l;l--)n[l]=this.pull[t[l]];return n.sort(i),jeeplus.toArray(s.concat(n.map(function(e){return this.id(e)},this)))}return t},Af:function(e){this.jf&&!e&&(this.order=this.jf,delete this.jf)},Bf:function(e,t,i){for(var s=jeeplus.toArray(),n=this.$freeze||0,l=0;l<this.order.length;l++){var a=this.order[l];(l<n||e(this.getItem(a),t))&&s.push(a)}i&&this.jf||(this.jf=this.order),this.order=s},find:function(e,t){var i=[];for(var s in this.pull){var n=this.pull[s],l=!0;if("object"==typeof e){for(var a in e)if(n[a]!=e[a]){l=!1;break}}else e(n)||(l=!1);if(l&&i.push(n),t&&i.length)return i[0]}return i},filter:function(i,t,e){if((i||this.jf||this.Mg)&&this.callEvent("onBeforeFilter",[i,t])&&(this.Af(e),this.order.length)){if(i){var s=i;t=t||"","string"==typeof i&&(i=i.replace(/#/g,""),s="function"==typeof t?function(e){return t(e[i])}:(t=t.toString().toLowerCase(),function(e,t){return-1!=(e[i]||"").toString().toLowerCase().indexOf(t)})),this.Bf(s,t,e,this.Cf)}this.refresh(),this.callEvent("onAfterFilter",[])}},Df:function(){for(var e=[],t=this.order.length-1;0<=t;t--)e[t]=this.pull[this.order[t]];return e},each:function(e,t,i){var s=this.order;i&&(s=this.jf||s);for(var n=0;n<s.length;n++)s[n]&&e.call(t||this,this.getItem(s[n]),n)},Ef:function(e,t){return function(){return e[t].apply(e,arguments)}},provideApi:function(e,t){t&&this.mapEvent({onbeforesort:e,onaftersort:e,onbeforeadd:e,onafteradd:e,onbeforedelete:e,onafterdelete:e,ondataupdate:e});for(var i=["sort","add","remove","exists","getIdByIndex","getIndexById","getItem","updateItem","refresh","count","filter","find","getNextId","getPrevId","clearAll","getFirstId","getLastId","serialize","sync"],s=0;s<i.length;s++)e[i[s]]=this.Ef(this,i[s])},addMark:function(e,t,i,s,n){var l=this.Me[e]||{};if(!(this.Me[e]=l)[t]){if(l[t]=s||!0,i){var a=l.$css||"";l.$css=a+" "+t}n||this.refresh(e)}return l[t]},removeMark:function(e,t,i,s){var n=this.Me[e];if(n){if(n[t]&&delete n[t],i){var l=n.$css;l&&(n.$css=l.replace(t,"").replace("  "," "))}s||this.refresh(e)}},getMark:function(e,t){var i=this.Me[e];return!!i&&i[t]},clearMark:function(e,t,i){for(var s in this.Me){var n=this.Me[s];n[e]&&(delete n[e],t&&n.$css&&(n.$css=n.$css.replace(e,"").replace("  "," ")),i||this.refresh(s))}},serialize:function(e){var t=this.order;e&&this.jf&&(t=this.jf);for(var i=[],s=0;s<t.length;s++){var n=this.pull[t[s]];this.vf&&!1===(n=this.vf(n))||i.push(n)}return i},sorting:{create:function(e){return this.Ff(e.dir,this.Gf(e.by,e.as))},as:{server:function(){return!1},date:function(e,t){return(t-=0)<(e-=0)?1:e<t?-1:0},int:function(e,t){return(t*=1)<(e*=1)?1:e<t?-1:0},string_strict:function(e,t){return e=e.toString(),(t=t.toString())<e?1:e<t?-1:0},string:function(e,t){return t?e?(e=e.toString().toLowerCase(),(t=t.toString().toLowerCase())<e?1:e<t?-1:0):-1:1},raw:function(e,t){return t<e?1:e<t?-1:0}},Gf:function(i,s){return i?("function"!=typeof s&&(s=this.as[s||"string"]),function(e,t){return s(e[i],t[i])}):s},Ff:function(e,i){return"asc"!=e&&e?function(e,t){return-1*i(e,t)}:i}}},jeeplus.DataCollection=jeeplus.proto({name:"DataCollection",isVisible:function(){return!!(this.data.order.length||this.data.jf||this.s.dataFeed)},$init:function(e){this.data.provideApi(this,!0);var t=e&&e.id?e.id:jeeplus.uid();this.s.id=t,(jeeplus.ui.views[t]=this).data.attachEvent("onStoreLoad",jeeplus.bind(function(){this.callEvent("onBindRequest",[])},this))},refresh:function(){this.callEvent("onBindRequest",[])}},jeeplus.DataMove,jeeplus.CollectionBind,jeeplus.BindSource,jeeplus.ValidateCollection,jeeplus.DataLoader,jeeplus.MapCollection,jeeplus.EventSystem,jeeplus.BaseBind,jeeplus.Destruction,jeeplus.Settings),jeeplus.Scrollable={$init:function(e){return e&&!e.scroll&&this.If?this.y=this.y||this.w:((this.y||this.w).appendChild(jeeplus.html.create("DIV",{class:"jeeplus_scroll_cont"},"")),this.y=(this.y||this.w).firstChild,void(jeeplus.env.touch&&"native"!==jeeplus.env.touch||jeeplus.UE(this.x,"scroll",jeeplus.bind(function(e){this.callEvent&&jeeplus.delay(function(){this.callEvent("onAfterScroll",[])},this)},this))))},scroll_setter:function(e){if(!e)return!1;var t="x"==e?"x":"xy"==e?"xy":"a"==e?"xy":"y";if(jeeplus.Touch&&jeeplus.Touch.$active&&"native"!=jeeplus.env.touch)this.y.setAttribute("touch_scroll",t),this.attachEvent&&this.attachEvent("onAfterRender",jeeplus.bind(this.Jf,this)),this.Kf=!0;else if(jeeplus.env.$customScroll)jeeplus.CustomScroll.enable(this,t);else{var i=this.y.parentNode.style;-1!=e.toString().indexOf("a")?i.overflowX=i.overflowY="auto":(-1!=t.indexOf("x")&&(this.ec=!0,i.overflowX="scroll"),-1!=t.indexOf("y")&&(this.cc=!0,i.overflowY="scroll"))}return t},Lf:function(e){if(!!this.s.scroll!=!!e){if(!jeeplus.env.$customScroll){var t=this.y.parentNode.style;t.overflowX=t.overflowY=e?"auto":"hidden"}this.ec=this.cc=!!e,this.s.scroll=!!e}},getScrollState:function(){if(jeeplus.Touch&&jeeplus.Touch.$active){var e=jeeplus.Touch.Mf(this.y);return{x:-e.e,y:-e.f}}return{x:this.y.parentNode.scrollLeft,y:this.y.parentNode.scrollTop}},scrollTo:function(e,t){jeeplus.Touch&&jeeplus.Touch.$active&&"native"!=jeeplus.env.touch?(t=Math.max(0,Math.min(t,this.y.offsetHeight-this.dc)),e=Math.max(0,Math.min(e,this.y.offsetWidth-this.bc)),jeeplus.Touch.Nf(this.y,-e,-t,this.s.scrollSpeed||"100ms")):(this.y.parentNode.scrollLeft=e,this.y.parentNode.scrollTop=t)},Jf:function(){-1!=this.s.scroll.toString().indexOf("x")&&((s=this.y.scrollWidth)&&(this.y.style.width="100%",this.y.style.width=this.y.scrollWidth+"px"));if(jeeplus.Touch&&jeeplus.Touch.$active&&this.Kf){jeeplus.Touch.Of(),jeeplus.Touch.Pf();var e=this.getScrollState(),t=this.y.offsetWidth-this.$width-e.x,i=this.y.offsetHeight-this.$height-e.y;if(t<0||i<0){var s=t<0?Math.min(-t-e.x,0):-e.x,n=i<0?Math.min(-i-e.y,0):-e.y;jeeplus.Touch.Nf(this.y,s,n,0)}}}},jeeplus.protoUI({defaults:{size:10,page:0,group:5,template:"{common.pages()}",maxWidth:1e5,height:30,borderless:!0},name:"pager",on_click:{jeeplus_pager_item:function(e,t){this.select(t)}},$init:function(e){this.data=this.s,this.y=this.x,this.x.className+=" jeeplus_pager"+(e.autowidth?" jeeplus_pager_auto":""),(!1===e.master||0===e.master)&&this.$ready.push(this.wt)},wt:function(){this.refresh(),this.$master={refresh:function(){},select:function(){}}},select:function(e){if(this.$master&&"pager"==this.$master.name)return this.$master.select(e);switch(e){case"next":e=this.s.page+1;break;case"prev":e=this.s.page-1;break;case"first":e=0;break;case"last":e=this.s.limit-1}e<0&&(e=0),e>=this.data.limit&&(e=this.data.limit-1);var t=this.data.page;this.callEvent("onBeforePageChange",[e,t])&&(this.data.page=1*e,this.refresh()&&(this.s.animate&&this.Qf(t,1*e,this.s.animate)||this.$master.refresh()),this.callEvent("onAfterPageChange",[e]))},ad:"jeeplus_p_id",template_setter:jeeplus.template,type:{template:function(e,t){return e.template.call(this,e,t)},pages:function(e){var t="";if(-1==e.page)return"";e.$min=e.page-Math.round((e.group-1)/2),e.$max=e.$min+1*e.group-1,e.$min<0&&(e.$max+=-1*e.$min,e.$min=0),e.$max>=e.limit&&(e.$min-=Math.min(e.$min,e.$max-e.limit+1),e.$max=e.limit-1);for(var i=e.$min||0;i<=e.$max;i++)t+=this.button({id:i,index:i+1,selected:i==e.page?"_selected":"",label:jeeplus.i18n.aria.page+" "+(i+1)});return t},page:function(e){return e.page+1},first:function(){return this.button({id:"first",index:jeeplus.locale.pager.first,selected:"",label:jeeplus.i18n.aria.pages[0]})},last:function(){return this.button({id:"last",index:jeeplus.locale.pager.last,selected:"",label:jeeplus.i18n.aria.pages[3]})},prev:function(){return this.button({id:"prev",index:jeeplus.locale.pager.prev,selected:"",label:jeeplus.i18n.aria.pages[1]})},next:function(){return this.button({id:"next",index:jeeplus.locale.pager.next,selected:"",label:jeeplus.i18n.aria.pages[2]})},button:jeeplus.template("<button type='button' jeeplus_p_id='{obj.id}' class='jeeplus_pager_item{obj.selected}' aria-label='{obj.label}'>{obj.index}</button>")},clone:function(e){e.$view||(e.view="pager",e=jeeplus.ui(e)),((this.Rf=e).$master=this).Sf()},refresh:function(){var e=this.s;if(e.count){e.limit=Math.ceil(e.count/e.size);var t=Math.min(e.limit-1,e.page);return t!=e.page?this.$master.setPage(t):0<=(e.page=t)&&t!=e.old_page||e.limit!=e.old_limit||e.old_count!=e.count?(this.render(),this.Sf(),e.old_limit=e.limit,e.old_page=e.page,e.old_count=e.count,!0):void 0}},apiOnly_setter:function(e){return this.$apiOnly=e},Sf:function(){this.Rf&&(this.Rf.s.count=this.s.count,this.Rf.s.page=this.s.page,this.Rf.refresh())},Qf:function(e,t,i){if(e==t)return!1;if(this.Tf)return this.Uf&&window.clearTimeout(this.Uf),this.Uf=jeeplus.delay(this.Qf,this,[e,t,i],100);var s=e<t?"left":"right";("top"==i.direction||"bottom"==i.direction)&&(s=e<t?"top":"bottom"),i.flip&&(s="");var n=0,l=this.$master.y,a=!!this.$master.Vf;a&&(n=(l=this.$master.Vf).offsetTop,jeeplus.html.addCss(this.$master.$view,"jeeplus_animation"));var r=l.cloneNode(!0);r.style.width=l.style.width="100%",this.$master.refresh(),jeeplus.html.insertBefore(r,l.nextSibling,l.parentNode),a&&(r.childNodes[1].scrollLeft=l.childNodes[1].scrollLeft);var o,h=!0!==i?i:{},u=jeeplus.extend({direction:s,callback:jeeplus.bind(function(){u.callback=null,jeeplus.animate.breakLine(o),this.Tf=!1,this.$master.Vf&&jeeplus.html.removeCss(this.$master.$view,"jeeplus_animation")},this),top:n,keepViews:a},h);o=jeeplus.animate.formLine(l,r,u),jeeplus.animate([l,r],u),this.Tf=!0}},jeeplus.MouseEvents,jeeplus.SingleRender,jeeplus.ui.view,jeeplus.EventSystem),jeeplus.locale.pager={first:" &lt;&lt; ",last:" &gt;&gt; ",next:" &gt; ",prev:" &lt; "},jeeplus.PagingAbility={pager_setter:function(n){if("string"==typeof n){var e=jeeplus.$$(n);if(!e)return this.$blockRender=!0,jeeplus.delay(function(){var e=jeeplus.$$(n);this.s.pager=this.pager_setter(e);var t=e.s;t.count=this.data.ty(t.level),e.refresh(),this.$blockRender=!1,this.render()},this),null;n=e}return this.attachEvent("onBeforeRender",function e(t){if(n.config.autosize&&this.getVisibleCount){var i=this.getVisibleCount();isNaN(i)?(n.config.size=1,jeeplus.delay(e,this,[!0])):i!=n.config.size&&(n.config.size=i,n.refresh(),!0===t&&this.refresh())}var s=this.s.pager;return-1!=s.page&&(this.data.$min=this.sy(0,s.page*s.size),this.data.$max=this.sy(this.data.$min,s.size),this.data.$pagesize=this.data.$max-this.data.$min,!0)}),n.$view||(n.view="pager",n=jeeplus.ui(n)),((this.Wf=n).$master=this).data.attachEvent("onStoreUpdated",function(){var e=n.s;e.count=this.ty(e.level),n.refresh()}),this.data.ty=this.ty,n.s},ty:function(t){if(t&&0!==t){var i=0;return this.each(function(e){e.$level==t&&i++}),i}return this.count()},sy:function(e,t){var i=this.s.pager;if(i.level&&0!==i.level){var s=e,n=this.data.order.length;if(t)for(;s<n;){if(this.data.order[s]&&this.data.getItem(this.data.order[s]).$level==i.level){if(0===t)break;t--}s++}return s}return e+t},setPage:function(e){this.Wf&&this.Wf.select(e)},getPage:function(){return this.Wf.s.page},getPager:function(){return this.Wf}},jeeplus.protoUI({name:"tooltip",defaults:{dy:0,dx:20},$init:function(e){"string"==typeof e&&(e={template:e}),this.type=jeeplus.extend({},this.type),this.$view=this.x=this.w=this.y=jeeplus.html.create("DIV",{role:"alert","aria-atomic":"true"}),this.w.className="jeeplus_tooltip",jeeplus.html.insertBefore(this.w,document.body.firstChild,document.body),this.PF=jeeplus.attachEvent("onClick",jeeplus.bind(function(e){this.gz&&jeeplus.$$(e)!=this&&this.hide()},this)),this.attachEvent("onDestruct",function(){jeeplus.detachEvent(this.PF)})},adjust:function(){},isVisible:function(){return!0},show:function(e,t){if(!this.Xf){if(this.data!=e&&(this.data=jeeplus.extend({},e),this.render(e)),this.y.firstChild){var i=Math.max(document.documentElement.clientWidth,window.innerWidth||0),s=Math.max(document.documentElement.clientHeight,window.innerHeight||0),n=i-t.x,l=s-t.y;this.w.style.display="block",n-this.s.dx>this.w.offsetWidth?n=t.x:(n=t.x-2*this.s.dx-this.w.offsetWidth)<=0&&(n=0),l=l-this.s.dy>this.w.offsetHeight?t.y:t.y-this.s.dy-this.w.offsetHeight,this.w.style.left=n+this.s.dx+"px",this.w.style.top=l+this.s.dy+"px"}this.gz=!0}},hide:function(){this.data=null,this.w.style.display="none",this.gz=!1},disable:function(){this.Xf=!0},enable:function(){this.Xf=!1},type:{template:jeeplus.template("{obj.id}"),templateStart:jeeplus.template.empty,templateEnd:jeeplus.template.empty}},jeeplus.SingleRender,jeeplus.Settings,jeeplus.EventSystem,jeeplus.ui.view),jeeplus.AutoTooltip={tooltip_setter:function(e){if(e){"function"==typeof e&&(e={template:e});var a=!e.template,r=new jeeplus.ui.tooltip(e);this.Vc();var t=this.attachEvent("onMouseMove",function(e,t){if(this.DA=t.clientX,this.EA=t.clientY,this.getColumnConfig){var s=r.type.column=this.getColumnConfig(e.column);if(a){if(!s.tooltip&&s.tooltip!=jeeplus.undefined)return;var i=t.target||t.srcElements;if(i.getAttribute("jeeplus_area")&&s.tooltip){var n=i.getAttribute("jeeplus_area");r.type.template=function(e,t){var i=e[t.column.id];return jeeplus.template(s.tooltip).call(this,e,t,i[n],n)}}else if(s.tooltip)r.type.template=s.tooltip=jeeplus.template(s.tooltip);else{var l=this.getText(e.row,e.column);r.type.template=function(){return l}}}}jeeplus.DragControl.active||r.show(this.getItem(e.row||e),jeeplus.html.pos(t))}),i=jeeplus.event(document.body,"mousemove",jeeplus.bind(function(e){e=e||event,(this.DA!=e.clientX||this.EA!=e.clientY)&&r.hide()},this));return this.attachEvent("onDestruct",function(){this.config.tooltip&&this.config.tooltip.destructor()}),this.attachEvent("onAfterScroll",function(){r.hide()}),r.attachEvent("onDestruct",jeeplus.bind(function(){this.detachEvent(t),jeeplus.eventRemove(i)},this)),r}}},jeeplus.protoUI({name:"proto",$init:function(){this.data.provideApi(this,!0),this.y=this.y||this.w,this.data.attachEvent("onStoreUpdated",jeeplus.bind(function(){this.render.apply(this,arguments)},this))},$setSize:function(){jeeplus.ui.view.prototype.$setSize.apply(this,arguments)&&this.render()},ad:"jeeplus_item",on_mouse_move:{},type:{}},jeeplus.PagingAbility,jeeplus.DataMarks,jeeplus.AutoTooltip,jeeplus.ValidateCollection,jeeplus.RenderStack,jeeplus.DataLoader,jeeplus.ui.view,jeeplus.EventSystem,jeeplus.Settings),jeeplus.CodeParser={collapseNames:function(e,t,i){if(i=i||{},t=t||"",!e||"object"!=typeof e)return null;for(var s in e)!e[s]||"object"!=typeof e[s]||jeeplus.isDate(e[s])||jeeplus.isArray(e[s])?i[t+s]=e[s]:jeeplus.CodeParser.collapseNames(e[s],t+s+".",i);return i},expandNames:function(e){var t,i,s,n,l,a={};for(l in e){for(i=(s=l.split(".")).length-1,n=a,t=0;t<i;t++)n[s[t]]||(n[s[t]]={}),n=n[s[t]];n[s[i]]=e[l]}return a}},jeeplus.Values={$init:function(){this.elements={}},focus:function(e){if(e)this.ub(this.elements[e]);else for(var t in this.elements)if(this.ub(this.elements[t]))return!0},ub:function(e){return e&&e.focus?(e.focus(),!0):void 0},setValues:function(e,t){this.s.complexData&&(e=jeeplus.CodeParser.collapseNames(e)),this.Zf(e,t)},Zf:function(e,t){for(var i in this.Yf=t,this.blockEvent(),t&&this.$f||(this.$f={}),e)this.elements[i]||(this.$f[i]=e[i]);for(var i in this.elements){var s=this.elements[i];s&&(jeeplus.isUndefined(e[i])?!t&&s.Ce&&s.setValue(""):s.setValue(e[i]),this.$f[i]=s.getValue())}this.unblockEvent(),this.callEvent("onValues",[])},isDirty:function(){return!!this.Yf||1===this.getDirtyValues(1)},setDirty:function(e){(this.Yf=e)||(this.$f=this.hz())},getDirtyValues:function(){var e={};if(this.$f)for(var t in this.elements){var i=this.elements[t].getValue();if(this.$f[t]!=i&&(e[t]=i,arguments[0]))return 1}return e},getCleanValues:function(){return this.$f},getValues:function(e){var t=this.hz(e);return this.s.complexData&&(t=jeeplus.CodeParser.expandNames(t)),t},hz:function(e){var t,i=null,s=this.$f?jeeplus.copy(this.$f):{};for(var n in this.elements)i=this.elements[n],t=!0,e&&("object"==typeof e?(!1===e.hidden&&(t=i.isVisible()),t&&!1===e.disabled&&(t=i.isEnabled())):t=e.call(this,i)),t?s[n]=i.getValue():delete s[n];return s},clear:function(){this.Yf=!1;var e={};for(var t in this.elements)this.elements[t].Ce&&(e[t]=this.elements[t].s.defaultValue||"");this.Zf(e)},markInvalid:function(e,t){if(!1===t)this.Qe(e);else{if("string"==typeof t){var i=this.elements[e];i&&(i.s.invalidMessage=t)}this.Te(e)}},Te:function(e){var t=this.elements[e];e&&t&&(this.Qe(e,!0),jeeplus.html.addCss(t.x,"jeeplus_invalid"),t.s.invalid=!0,"string"==typeof t.s.invalidMessage&&t.setBottomText&&t.setBottomText())},Qe:function(e,t){var i=this.elements[e];e&&i&&i.$view&&i.s.invalid&&(jeeplus.html.removeCss(i.x,"jeeplus_invalid"),i.s.invalid=!1,"string"==typeof i.s.invalidMessage&&!t&&i.setBottomText&&i.setBottomText())}},jeeplus.protoUI({name:"toolbar",defaults:{type:"toolbar"},Gc:!0,_f:"jeeplus_toolbar",ag:!1,$init:function(e){e.borderless||(this.w.style.borderWidth="1px"),this.w.className+=" "+this._f,this.x.setAttribute("role","toolbar")},Qs:function(){var t=this;t.elements={},jeeplus.ui.each(this,function(e){return e.s.name&&e.getValue&&e.setValue&&((t.elements[e.s.name]=e).mapEvent&&e.mapEvent({onbeforetabclick:t,onaftertabclick:t,onitemclick:t,onchange:t})),!e.setValues&&void 0});var e=this.$f;if(this.setDirty(!1),e){var i=this.$f;for(var s in t.elements)e[s]&&i[s]!=e[s]&&(i[s]=e[s],this.setDirty(!0))}},sc:function(){this.Qs()},Bc:function(e){var t=this.s;return t.elements&&!e&&(this.nc=e=t.elements,this.mc=this.ag,delete t.elements),this.s.elementsConfig&&this.eg(this.nc,t.elementsConfig),e},eg:function(e,t){for(var i=0;i<e.length;i++){var s=e[i];jeeplus.extend(s,t);var n,l=t;s.elementsConfig&&(l=jeeplus.extend(jeeplus.extend({},s.elementsConfig),t)),(n=s.body?[s.body]:s.rows||s.cols||s.cells||s.body)&&this.eg(n,l)}},$getSize:function(e,t){var i=jeeplus.ui.layout.prototype.$getSize.call(this,e,t),s=this.getParentView(),n=this.mc?3:1;return s&&this.mc!=s.mc&&(i[n]+=1e5),i},render:function(){},refresh:function(){this.render()}},jeeplus.Scrollable,jeeplus.AtomDataLoader,jeeplus.Values,jeeplus.ui.layout,jeeplus.ValidateData),jeeplus.protoUI({name:"template",$init:function(e){var t=this.fg[e.type];t&&(jeeplus.extend(e,t),e.borderless&&(delete e.Ob,this.hc(e))),this.y==this.x?(this.y=jeeplus.html.create("DIV"),this.y.className=" jeeplus_template",this.x.appendChild(this.y)):this.y.className+=" jeeplus_template",this.attachEvent("onAfterRender",this.hg)},setValues:function(e,t){this.data=t?jeeplus.extend(this.data,e,!0):e,this.render()},getValues:function(){return this.data},$skin:function(){this.fg.header.height=this.fg.section.height=jeeplus.skin.$active.barHeight},fg:{header:{css:"jeeplus_header"},section:{css:"jeeplus_section",borderless:!0},clean:{css:"jeeplus_clean",borderless:!0}},onClick_setter:function(e){return this.on_click=jeeplus.extend(this.on_click||{},e,!0),this.Sc||jeeplus.extend(this,jeeplus.MouseEvents),e},defaults:{template:jeeplus.template.empty},gg:function(){this.ig=!1,this.jg(),this.resize()},jg:function(){this.ig||(this.ig=!0,this.render())},src_setter:function(e){return this.ig=!0,this.callEvent("onBeforeLoad",[])?(jeeplus.ajax(e,jeeplus.bind(function(e){this.s.template=jeeplus.template(e),this.gg(),this.callEvent("onAfterLoad",[])},this)),e):""},hg:function(){this.s.autoheight&&(this.ac=null,this.resize()),this.s.scroll&&-1!=this.s.scroll.indexOf("x")&&(this.y.style.width=this.y.scrollWidth+"px")},content_setter:function(e){e&&(this.ig=!0,this.render=function(){},this.y.appendChild(jeeplus.toNode(e)))},refresh:function(){this.render()},setHTML:function(e){this.s.template=function(){return e},this.refresh()},setContent:function(e){this.y.innerHTML="",this.content_setter(e)},$setSize:function(e,t){if(jeeplus.ui.view.prototype.$setSize.call(this,e,t)){if(this.jg(),this.s.autoheight){var i=this.getTopParentView();clearTimeout(i.kg),i.kg=jeeplus.delay(this.resize,this)}return!0}},$getSize:function(e,t){return this.s.autoheight&&!this.s.type&&(this.s.height=this.lg()),jeeplus.ui.view.prototype.$getSize.call(this,e,t)},lg:function(){var e,t=jeeplus.skin.$active.layoutPadding.space;return this.jg(),this.isVisible()?(this.y.style.height="auto",e=this.y.scrollHeight,this.y.style.height=""):e=jeeplus.html.getTextSize(this.jb(this.data)||this.y.innerHTML,"jeeplus_template",(this.$width||(this.getParentView()?this.getParentView().$width:0))-t).height,e},If:!0},jeeplus.Scrollable,jeeplus.AtomDataLoader,jeeplus.AtomRender,jeeplus.EventSystem,jeeplus.ui.view),jeeplus.protoUI({name:"iframe",$init:function(e){this.y=this.w,this.w.innerHTML="<iframe style='width:100%; height:100%' frameborder='0' onload='var t = $$(this.parentNode.getAttribute(\"view_id\")); if (t) t.callEvent(\"onAfterLoad\",[]);' src='about:blank'></iframe>"},load:function(e){this.src_setter(e)},src_setter:function(e){return this.callEvent("onBeforeLoad",[])?this.getIframe().src=e:""},getIframe:function(){return this.w.getElementsByTagName("iframe")[0]},getWindow:function(){return this.getIframe().contentWindow}},jeeplus.ui.view,jeeplus.EventSystem),jeeplus.OverlayBox={showOverlay:function(e){this.mg?this.mg.innerHTML=e:(this.mg=jeeplus.html.create("DIV",{class:"jeeplus_overlay"},e||""),jeeplus.html.insertBefore(this.mg,this.x.firstChild,this.x),this.x.style.position="relative")},hideOverlay:function(){this.mg&&(jeeplus.html.remove(this.mg),this.mg=null)}},jeeplus.protoUI({name:"scrollview",defaults:{scroll:"y",scrollSpeed:"0ms"},$init:function(){this.x.className+=" jeeplus_scrollview"},body_setter:function(e){e.borderless=!0,this.gd=jeeplus.ui.A(e),(this.gd.Xb=this).y.appendChild(this.gd.x)},getChildViews:function(){return[this.gd]},getBody:function(){return this.gd},resizeChildren:function(){this.ng=this.gd.$getSize(0,0),this.og(),jeeplus.callEvent("onResize",[])},og:function(){var e=(this.Mw||jeeplus.ui.scrollSize,Math.max(this.bc,this.ng[0])),t=Math.max(this.dc,this.ng[2]);if(this.gd.$setSize(e,t),this.y.style.width=this.gd.bc+"px",this.y.style.height=this.gd.dc+"px",jeeplus.env.touch){var i=this.getScrollState(),s=this.gd.dc-this.dc;s<i.y&&this.scrollTo(null,s)}jeeplus.ED&&(jeeplus.ED=!1,this.ng=this.gd.$getSize(0,0),this.og())},$getSize:function(e,t){var i=this.ng=this.gd.$getSize(0,0),s=jeeplus.ui.view.prototype.$getSize.call(this,e,t),n=this.Mw||jeeplus.ui.scrollSize;return"x"==this.s.scroll?(s[2]=Math.max(s[2],i[2])+n,s[3]=Math.min(s[3],i[3])+n):"y"==this.s.scroll&&(s[0]=Math.max(s[0],i[0])+n,s[1]=Math.min(s[1],i[1])+n),s},$setSize:function(e,t){var i=jeeplus.ui.scrollSize;jeeplus.ui.scrollSize=this.Mw||i,(jeeplus.ui.view.prototype.$setSize.call(this,e,t)||jeeplus.ui.QG)&&this.og(),jeeplus.ui.scrollSize=i},scroll_setter:function(e){var t=jeeplus.env.$customScroll;return"string"==typeof e&&0===e.indexOf("native-")&&(this.Mw=17,e=e.replace("native-"),jeeplus.env.$customScroll=!1),e=jeeplus.Scrollable.scroll_setter.call(this,e),jeeplus.env.$customScroll=t,e},Qb:function(e){this.gd.destructor(),this.gd=e,(this.gd.Xb=this).ed.appendChild(this.gd.x),this.resize()},showView:function(e){var t=jeeplus.$$(e).$view.offsetTop-jeeplus.$$(e).$view.parentNode.offsetTop;this.scrollTo(0,t)}},jeeplus.Scrollable,jeeplus.EventSystem,jeeplus.ui.view),jeeplus.TreeRenderStack={$init:function(){},pg:function(e){var t=this.data.Me[e.id];return this.callEvent("onItemRender",[e]),this.type.templateStart(e,this.type,t)+(e.$template?this.type["template"+e.$template](e,this.type,t):this.type.template(e,this.type,t))+this.type.templateEnd()},qg:function(e){return this.v.innerHTML=this.pg(e),this.v.firstChild},jb:function(e){var t="<div role='presentation' class='jeeplus_tree_branch_"+e.$level+"'>"+this.pg(e);return e.open&&(t+=this.rg(e.id)),t+"</div>"},rg:function(e){var t="",i=this.data.branch[e];if(i){t+="<div role='presentation' class='jeeplus_tree_leaves'>";for(var s=i.length-1,n=0;n<=s;n++){var l=this.getItem(i[n]);this.type.sg[l.$level]=n==s,t+=this.jb(l)}t+="</div>"}return t},render:function(e,t,i){if((jeeplus.TreeRenderStack.tg=this).isVisible(this.s.id)&&!this.$blockRender){if(e){var s,n=this.getItem(e);if("add"!=i&&!(s=this.getItemNode(e)))return;switch(i){case"branch":var l=s.parentNode,a=this.Ne(n);jeeplus.html.insertBefore(a,l),jeeplus.html.remove(l),this.t=null;break;case"paint":case"update":a=this.t[e]=this.qg(n);jeeplus.html.insertBefore(a,s),jeeplus.html.remove(s);break;case"delete":jeeplus.html.remove(s.parentNode);break;case"add":var r;if(0==n.$parent)r=this.y.firstChild;else if(this.getItem(n.$parent).open&&(r=this.getItemNode(n.$parent))){if(!r.nextSibling){var o=jeeplus.html.create("DIV",{class:"jeeplus_tree_leaves"},"");r.parentNode.appendChild(o)}r=r.nextSibling}if(r){var h=this.data.getNextSiblingId(e);(h=this.getItemNode(h))&&(h=h.parentNode);a=this.Ne(n);this.t[e]=a.firstChild,jeeplus.html.insertBefore(a,h,r)}break;default:return!1}this.callEvent("onPartialRender",[e,t,i])}else this.callEvent("onBeforeRender",[this.data])&&(this.type.sg=[],this.y.innerHTML=this.rg(0),this.t=null,this.callEvent("onAfterRender",[]));return this.type.sg=0,!(jeeplus.TreeRenderStack.tg=null)}},getItemNode:function(e){if(this.t)return this.t[e];this.t={};for(var t=this.y.getElementsByTagName("DIV"),i=0;i<t.length;i++){var s=t[i].getAttribute(this.ad);s&&(this.t[s]=t[i])}return this.getItemNode(e)},vg:1},jeeplus.SelectionModel={$init:function(){this.wg=jeeplus.toArray(),this.data.attachEvent("onStoreUpdated",jeeplus.bind(this.xg,this)),this.data.attachEvent("onStoreLoad",jeeplus.bind(this.yg,this)),this.data.attachEvent("onAfterFilter",jeeplus.bind(this.zg,this)),this.data.attachEvent("onSyncApply",jeeplus.bind(this.qF,this)),this.data.attachEvent("onIdChange",jeeplus.bind(this.Ag,this)),this.$ready.push(this.uy)},uy:function(){("multiselect"==this.s.select||this.s.multiselect)&&jeeplus.UE(this.$view,"mousedown",function(e){(e||event).shiftKey&&(jeeplus.vy=this,jeeplus.html.addCss(this,"jeeplus_noselect",1))})},Ag:function(e,t){for(var i=this.wg.length-1;0<=i;i--)this.wg[i]==e&&(this.wg[i]=t)},zg:function(){for(var e=this.wg.length-1;0<=e;e--)if(this.data.getIndexById(this.wg[e])<0){var t=this.wg[e];this.removeCss(t,"jeeplus_selected",!0),this.wg.splice(e,1),this.callEvent("onSelectChange",[t])}},xg:function(e,t,i){"delete"==i?this.loadBranch?this.qF():this.wg.remove(e):e||this.data.count()||this.data.jf||(this.wg=jeeplus.toArray())},yg:function(){this.s.select&&this.data.each(function(e){e&&e.$selected&&this.select(e.id)},this)},qF:function(){for(var e=this.wg.length-1;0<=e;e--)this.exists(this.wg[e])||this.wg.splice(e,1)},Bg:function(e,t,i,s){var n=t?"onBeforeSelect":"onBeforeUnSelect";if(!this.callEvent(n,[e,t]))return!1;s&&(this.Dg=!0,this.unselectAll(),this.Dg=!1),t?this.addCss(e,"jeeplus_selected",!0):this.removeCss(e,"jeeplus_selected",!0),i?i.push(e):(t?this.wg.push(e):this.wg.remove(e),this.Cg(e));n=t?"onAfterSelect":"onAfterUnSelect";return this.callEvent(n,[e]),!0},select:function(e,t){var i=arguments[2],s=arguments[3];if(!e)return this.selectAll();if(!jeeplus.isArray(e)){if(s&&this.wg.length)return this.selectAll(this.wg[this.wg.length-1],e);var n=!1;return i||t||1==this.wg.length&&this.wg[0]==e||(n=!0),!n&&this.isSelected(e)?void(i&&this.unselect(e)):void this.Bg(e,!0,null,n)}for(var l=0;l<e.length;l++)this.select(e[l],l?1:t,i,s)},unselect:function(e){return e?void(this.isSelected(e)&&this.Bg(e,!1)):this.unselectAll()},selectAll:function(e,t){var i=[];(e||t?this.data.getRange(e||null,t||null):this.data.getRange()).each(function(e){this.data.getMark(e.id,"jeeplus_selected")||(this.wg.push(e.id),this.Bg(e.id,!0,i))},this),this.Cg(i)},unselectAll:function(){var t=[];this.wg.each(function(e){this.Bg(e,!1,t)},this),this.wg=jeeplus.toArray(),this.Cg(t)},isSelected:function(e){return-1!=this.wg.find(e)},getSelectedId:function(e){switch(this.wg.length){case 0:return e?[]:"";case 1:return e?[this.wg[0]]:this.wg[0];default:return[].concat(this.wg)}},getSelectedItem:function(e){var t=this.getSelectedId(!0);if(1<t.length||e){for(var i=t.length-1;0<=i;i--)t[i]=this.getItem(t[i]);return t}return t.length?this.getItem(t[0]):void 0},Eg:function(e){return 100<e.length||e.length>this.data.count/2},Cg:function(e){if("object"!=typeof e&&(e=[e]),e.length){if(this.Eg(e))this.data.refresh();else for(var t=0;t<e.length;t++)this.render(e[t],this.data.getItem(e[t]),"update");this.Dg||this.callEvent("onSelectChange",[e])}}},jeeplus.ready(function(){jeeplus.event(document.body,"mouseup",function(e){jeeplus.vy&&(jeeplus.html.removeCss(jeeplus.vy,"jeeplus_noselect"),jeeplus.vy=null)})}),jeeplus.TreeDataMove={$init:function(){},copy:function(e,t,i,s){return(s=s||{}).copy=!0,this.move(e,t,i,s)},Kd:function(e,t,i){if(t&&e){var s=this.getBranchIndex(e);return s+(i==this&&i.getBranchIndex(t)<s?0:1)}},Lt:function(e,t){var i=this.data.branch[e];if(i&&i.length)for(var s=0;s<i.length;s++){if(i[s]==t)return!0;if(this.Lt(i[s],t))return!0}return!1},move:function(e,t,i,s){t=t||0;var n=(s=s||{}).newId||e,l=s.parent||0;if((i=i||this).data){if(!jeeplus.isArray(e)){if(this!=i||s.copy){if(n=i.data.add(i.Jd(this.getItem(e),n),t,l||0),this.data.branch[e]&&i.getBranchIndex){var a=this.data.vf;this.data.vf=function(e){var t=jeeplus.copy(e);return delete t.$parent,delete t.$level,delete t.$child,i.data.pull[t.id]&&(t.id=jeeplus.uid()),t};var r={data:this.serialize(e,!0),parent:n};this.data.vf=a,i.parse(r)}s.copy||this.data.remove(e)}else{if(e==l||this.Lt(e,l))return;var o=this.getItem(e),h=this.data.branch[l];h||(h=this.data.branch[l]=[]);var u=this.data.branch[o.$parent],c=jeeplus.PowerArray.find.call(u,e);if(t<0&&(t=h.length),u===h&&t===c)return;if(jeeplus.PowerArray.removeAt.call(u,c),jeeplus.PowerArray.insertAt.call(h,e,Math.min(h.length,t)),u.length||delete this.data.branch[o.$parent],o.$parent&&"0"!=o.$parent&&this.getItem(o.$parent).$count--,l&&"0"!=l){var d=i.getItem(l);d.$count++,this.Fg(o,d.$level+1)}else this.Fg(o,1);o.$parent=l,i.data.callEvent("onDataMove",[e,t,l,h[t+1]])}return this.refresh(),n}for(var p=0;p<e.length;p++){var f=this.move(e[p],t,i,s);t=i.Kd(f,e[p+1],this)}}},Fg:function(e,t){e.$level=t;var i=this.data.branch[e.id];if(i)for(var s=0;s<i.length;s++)this.Fg(this.getItem(i[s]),t+1)},Gg:function(e){e&&!e.header&&this.open(e)},$dropAllow:function(e){if(e.from!=e.to)return!0;for(var t=0;t<e.source.length;t++)if(e.source==e.target||this.Lt(e.source,e.target))return!1;return!0},Jd:function(e,t){var i=jeeplus.DataMove.Jd.call(this,e,t);return delete i.open,i}},jeeplus.TreeDataLoader={$init:function(){this.data.attachEvent("onStoreUpdated",jeeplus.bind(this.Hg,this),null,!0),this._e=this.Ig},Ig:function(e,t,i,s){var n=0===t?{parent:encodeURIComponent(e)}:null;jeeplus.DataLoader.prototype._e.call(this,e,t,i,s,n)},loadBranch:function(e,t,i){e=e||0,this.data.url=i||this.data.url,this.callEvent("onDataRequest",[e,t,this.data.url])&&this.data.url&&this.data.feed.call(this,e,0,t,i)},Hg:function(e,t,i){i&&"add"!=i&&"delete"!=i&&"branch"!=i||this.data.Kg(this)}},jeeplus.TreeStore={name:"TreeStore",$init:function(){this.Cf={showSubItems:!0},this.branch={0:[]},this.attachEvent("onParse",function(e,t){this.Lg(e.child),e.getInfo(t).parent}),this.attachEvent("onClearAll",jeeplus.bind(function(){this.Mg=null},this))},filterMode_setter:function(e){return jeeplus.extend(this.Cf,e,!0)},Af:function(e){if(this.Mg&&!e){for(var t in this.branch=this.Mg,this.order=jeeplus.toArray(jeeplus.copy(this.branch[0])),this.branch)"0"!=t&&(this.getItem(t).$count=this.branch[t].length);delete this.Mg}},Bf:function(e,t,i,s){i&&this.Mg||(this.Mg=this.branch,this.branch=jeeplus.clone(this.branch)),this.branch[0]=this.Ng(e,t,this.branch[0],1,s||{})},Ng:function(e,t,i,s,n){for(var l=[],a=n.level&&n.level!=s,r=0;r<i.length;r++){var o=i[r],h=this.getItem(o),u=!1,c=this.branch[o];if(a)u=!0;else if(e(this.getItem(o),t)){if(l.push(o),!1!==n.openParents)for(var d=this.getParentId(o);d&&"0"!=d;)this.getItem(d).open=1,d=this.getParentId(d);if(n.level||n.showSubItems)continue}else u=!0;if((a||!n.level)&&c){var p=this.branch[o]=this.Ng(e,t,c,s+1,n);h.$count=p.length,u&&p.length&&l.push(o)}}return l},count:function(){if(this.order.length)return this.order.length;var e=0;return this.eachOpen(function(){e++}),e},kG:function(e,t,i,s){if(e[i]){for(var n=e[s]=e[i],l=0;l<n.length;l++)this.getItem(n[l]).$parent=s;delete e[i]}if(e[t]){var a=jeeplus.PowerArray.find.call(e[t],i);0<=a&&(e[t][a]=s)}},changeId:function(e,t){if(e!=t){var i=this.getItem(e).$parent;return this.kG(this.branch,i,e,t),this.Mg&&this.kG(this.Mg,i,e,t),jeeplus.DataStore.prototype.changeId.call(this,e,t)}},clearAll:function(e){this.branch={0:[]},jeeplus.DataStore.prototype.clearAll.call(this,e)},getPrevSiblingId:function(e){var t=this.branch[this.getItem(e).$parent],i=jeeplus.PowerArray.find.call(t,e)-1;return 0<=i?t[i]:null},getNextSiblingId:function(e){var t=this.branch[this.getItem(e).$parent],i=jeeplus.PowerArray.find.call(t,e)+1;return i<t.length?t[i]:null},getParentId:function(e){return this.getItem(e).$parent},getFirstChildId:function(e){var t=this.branch[e];return t&&t.length?t[0]:null},isBranch:function(e){return!!this.branch[e]},getBranchIndex:function(e){var t=this.branch[this.pull[e].$parent];return jeeplus.PowerArray.find.call(t,e)},Lg:function(i){this.Og="string"==typeof i?function(e){var t=e[i];return t&&delete e[i],t}:i},kf:function(e,t){for(var i=e.parent||0,s=0;s<t.length;s++){var n=this.driver.getDetails(t[s]),l=this.id(n),a=!!this.pull[l];a?(n=jeeplus.extend(this.pull[l],n,!0),this.pf&&this.pf(n)):(this.qf&&this.qf(n),this.pull[l]=n),this.Pg(n,i,0,a,e.from?1*e.from+s:0)}var r=this.pull[i]||{},o=this.branch[i]||[];r.$count=o.length,delete r.jeeplus_kids,e.size&&e.size!=o.length&&(o[e.size-1]=jeeplus.undefined)},Pg:function(e,t,i,s,n){e.$count=0,e.$parent="0"!=t?t:0,e.$level=i||("0"!=t?this.pull[t].$level+1:1);var l=this.branch[e.$parent];(l||(l=this.branch[e.$parent]=[]),this.Mg&&(this.Mg[e.$parent]=l),s)||(l[n||l.length]=e.id);var a=this.Og(e);if(e.jeeplus_kids)return e.$count=-1;if(!a)return e.$count=0;jeeplus.isArray(a)||(a=[a]);for(var r=0;r<a.length;r++){var o=jeeplus.DataDriver.json.getDetails(a[r]),h=this.id(o);(s=!!this.pull[h])?(o=jeeplus.extend(this.pull[h],o,!0),this.pf&&this.pf(o)):(this.qf&&this.qf(o),this.pull[h]=o),this.Pg(o,e.id,e.$level+1,s)}var u=this.branch[e.id];u&&(e.$count=u.length)},Kg:function(e){this.order=jeeplus.toArray(),this.Qg(0,e)},Qg:function(e,t){for(var i=this.branch[e],s=0;s<i.length;s++){var n=i[s];this.order.push(n);var l=this.pull[n];l&&l.open&&(-1==l.$count?t.loadBranch(n):l.$count&&this.Qg(n,t))}},provideApi:function(e,t){for(var i=["getPrevSiblingId","getNextSiblingId","getParentId","getFirstChildId","isBranch","getBranchIndex","filterMode_setter"],s=0;s<i.length;s++)e[i[s]]=this.Ef(this,i[s]);e.getIndexById||jeeplus.DataStore.prototype.provideApi.call(this,e,t)},getTopRange:function(){return jeeplus.toArray([].concat(this.branch[0])).map(function(e){return this.getItem(e)},this)},eachChild:function(e,t,i,s){var n=this.branch;s&&this.Mg&&(n=this.Mg);var l=n[e];if(l)for(var a=0;a<l.length;a++)l[a]&&t.call(i||this,this.getItem(l[a]))},each:function(i,s,n,e){this.eachChild(e||0,function(e){var t=this.branch;i.call(s||this,e),n&&this.Mg&&(t=this.Mg),e&&t[e.id]&&this.each(i,s,n,e.id)},this,n)},eachOpen:function(t,i,e){this.eachChild(e||0,function(e){t.call(i||this,e),this.branch[e.id]&&e.open&&this.eachOpen(t,i,e.id)})},eachSubItem:function(e,t){var i=this.branch[e||0];if(i)for(var s=0;s<i.length;s++){var n=i[s];this.branch[n]?(t.call(this,this.getItem(n),!0),this.eachSubItem(n,t)):t.call(this,this.getItem(n),!1)}},eachLeaf:function(e,t){var i=this.branch[e||0];if(i)for(var s=0;s<i.length;s++){var n=i[s];this.branch[n]?this.eachLeaf(n,t):t.call(this,this.getItem(n),!1)}},xf:function(e,t){var i=this.sorting.create(e);for(var s in this.branch){for(var n=this.branch[s],l=[],a=0;a<n.length;a++)l.push(this.pull[n[a]]);l.sort(i);for(a=0;a<n.length;a++)l[a]=l[a].id;this.branch[s]=l}return t},add:function(e,t,i){var s=!1,n=this.getItem(i||0);if(n&&(this.branch[n.id]||(s=!0),n.$count++,n.$count||(n.$count=1)),this.branch[i||0]=this.order=jeeplus.toArray(this.branch[i||0]),e.$count=0,e.$level=n?n.$level+1:1,e.$parent=n?n.id:0,this.Mg){var l=this.Mg[i||0];if(l||(l=this.Mg[i]=this.order),this.order!==l){var a=l.length;!t&&this.branch[i||0].length&&(a=0),l=jeeplus.toArray(l),e.id=e.id||jeeplus.uid(),l.insertAt(e.id,a)}}var r=jeeplus.DataStore.prototype.add.call(this,e,t);return s&&this.refresh(i),r},Rg:function(e,t){var i=this.pull[e];if(this.branch[i.id]&&0<this.branch[i.id].length)for(var s=this.branch[e],n=0;n<s.length;n++)this.Rg(s[n],!0);delete this.branch[e],this.Mg&&delete this.Mg[e],delete this.pull[e],this.Me[e]&&delete this.Me[e]},Wy:function(e,t,i){var s=e[t];1==s.length&&s[0]==i&&t?delete e[t]:jeeplus.toArray(s).remove(i)},remove:function(e){if(jeeplus.isArray(e))for(var t=0;t<e.length;t++)this.remove(e[t]);else{var i=this.pull[e],s=i.$parent||0;if(!1===this.callEvent("onBeforeDelete",[e]))return!1;this.Rg(e),this.callEvent("onAfterDelete",[e]);var n=this.pull[s];this.Wy(this.branch,s,e),this.Mg&&this.Wy(this.Mg,s,e);var l=0;n&&(n.$count--,n.$count<=0&&(n.$count=0,n.open=0,l=1)),this.callEvent("onStoreUpdated",[e,i,"delete"]),l&&this.refresh(n.id)}},getBranch:function(e){var t=[],i=(this.Mg||this.branch)[e];if(i)for(var s=0;s<i.length;s++)t[s]=this.pull[i[s]];return t},serialize:function(e,t){this.branch;t&&this.Mg&&this.Mg;for(var i=this.branch[e||0],s=[],n=0;n<i.length;n++){var l,a=this.pull[i[n]];if(this.vf){if(!1===(l=this.vf(a)))continue}else l=jeeplus.copy(a);this.branch[a.id]&&(l.data=this.serialize(a.id,t)),s.push(l)}return s}},jeeplus.TreeType={space:function(e,t){for(var i="",s=1;s<e.$level;s++)i+="<div class='jeeplus_tree_none'></div>";return i},icon:function(e,t){return e.$count?e.open?"<div class='jeeplus_tree_open'></div>":"<div class='jeeplus_tree_close'></div>":"<div class='jeeplus_tree_none'></div>"},checkbox:function(e,t){return e.nocheckbox?"":"<input type='checkbox' class='jeeplus_tree_checkbox' "+(e.checked?"checked":"")+(e.disabled?" disabled":"")+">"},folder:function(e,t){return e.icon?"<div class='jeeplus_tree_file jeeplus_tree_"+e.icon+"'></div>":e.$count?e.open?"<div class='jeeplus_tree_folder_open'></div>":"<div class='jeeplus_tree_folder'></div>":"<div class='jeeplus_tree_file'></div>"}},jeeplus.TreeAPI={open:function(e,t){if(e){var i=this.getItem(e);i.$count&&!i.open&&(this.callEvent("onBeforeOpen",[e])&&(i.open=!0,this.data.callEvent("onStoreUpdated",[e,0,"branch"]),this.callEvent("onAfterOpen",[e])),t&&"0"!=e&&this.open(this.getParentId(e),t))}},close:function(e){if(e){var t=this.getItem(e);t.open&&this.callEvent("onBeforeClose",[e])&&(t.open=!1,this.data.callEvent("onStoreUpdated",[e,0,"branch"]),this.callEvent("onAfterClose",[e]))}},openAll:function(e){this.data.eachSubItem(e||0,function(e,t){t&&(e.open=!0)}),this.data.refresh()},closeAll:function(e){this.data.eachSubItem(e||0,function(e,t){t&&(e.open=!1)}),this.data.refresh()},Sg:function(e,t,i){if(this.s.threeState)return this.Tg(e,null!==t?t:"");var s,n=this.getItem(e),l=i?i.target||i.srcElement:null;s=l&&"checkbox"==l.type?!!l.checked:null!==t?t:!n.checked,n.checked=s,this.callEvent("onItemCheck",[e,n.checked,i])},isBranchOpen:function(e){if("0"==e)return!0;var t=this.getItem(e);return!!t.open&&this.isBranchOpen(t.$parent)},getOpenItems:function(){var e=[];for(var t in this.data.branch)this.exists(t)&&this.getItem(t).open&&e.push(t);return e},getState:function(){return{open:this.getOpenItems(),select:this.getSelectedId(!0)}},Ug:function(e,t){var i=this.data.attachEvent("onStoreLoad",function(){e.setState.call(e,t),e.data.detachEvent(i),e=null})},setState:function(e){if(e.open){this.closeAll();for(var t=e.open,i=0;i<t.length;i++){var s=this.getItem(t[i]);if(s&&s.$count&&(s.open=!0,-1==s.$count))return this.Ug(this,e),this.refresh(),0}this.refresh()}if(e.select&&this.select){var n=e.select;this.unselect();for(i=0;i<n.length;i++)this.exists(n[i])&&this.select(n[i],!0)}return 1}},jeeplus.TreeClick={jeeplus_tree_open:function(e,t){return this.close(t),!1},jeeplus_tree_close:function(e,t){return this.open(t),!1},jeeplus_tree_checkbox:function(e,t){return this.Sg(t,null,e),!1}},jeeplus.TreeCollection=jeeplus.proto({name:"TreeCollection",$init:function(){jeeplus.extend(this.data,jeeplus.TreeStore,!0),this.data.provideApi(this,!0),jeeplus.extend(this,jeeplus.TreeDataMove,!0)}},jeeplus.TreeDataLoader,jeeplus.DataCollection),jeeplus.AutoScroll={ch:function(e,t){var i=1,s=0;"string"==typeof(u=this.s.dragscroll)&&(s=-1!=u.indexOf("x"),i=-1!=u.indexOf("y"));var n=this.Vf||this.$view,l=jeeplus.html.offset(n),a=l.y,r=a+n.offsetHeight,o=l.x,h=o+n.offsetWidth,u=this.getScrollState(),c=!1,d=Math.max(this.type&&!isNaN(parseFloat(this.type.height))?this.type.height+5:0,40);if(i){var p=this.s;if(p.topSplit){var f=this.ug(this.getIdByIndex(p.topSplit-1),this.columnId(0));a+=f.top+f.height}e.y<a+d?(this.WC(u.x,u.y-2*d,e),c=!0):e.y>r-d&&(this.WC(u.x,u.y+2*d,e),c=!0)}s&&(e.x<o+d?(this.WC(u.x-2*d,u.y,e),c=!0):e.x>h-d&&(this.WC(u.x+2*d,u.y,e),c=!0)),c&&(this.bh=jeeplus.delay(this.ch,this,[e],100))},WC:function(e,t,i){this.callEvent("onBeforeAutoScroll",[i])&&this.scrollTo(e,t)}},jeeplus.DragOrder={Vg:!0,$drag:function(e,t){var i=jeeplus.DragItem.$drag.call(this,e,t);if(i){var s=jeeplus.DragControl.getContext();this.getBranchIndex&&(this.Wg=this.Xg?16*this.getItem(s.start).$level:0),s.fragile||this.addCss(s.start,"jeeplus_transparent")}return i},WB:function(e,t){return jeeplus.DragItem.WB(e,t)},$dragPos:function(e,t,i){var s=jeeplus.html.offset(this.$view),n=s.x+(this.Xg?1+this.Wg:1),l=e.y,a="x"==this.s.layout;a&&(l=s.y+(this.Xg?+s.height-jeeplus.ui.scrollSize-1:1),n=e.x),i.style.display="none";var r=document.elementFromPoint(n,l);if(r!=this.Yg){var o=jeeplus.$$(r);if(o&&o==this){var h=this.locate(r,!0);!h&&jeeplus.DragControl.td&&(h=this.locate(jeeplus.DragControl.td,!0));var u=jeeplus.DragControl.getContext().start;if(this.XC=!0,h){if(h!=this.Yg){var c,d;if(h!=u)d=this.getBranchIndex?(c={parent:this.getParentId(h)},this.getBranchIndex(h)):(c={},this.getIndexById(h)),this.callEvent("onBeforeDropOrder",[u,d,t,c])&&(this.move(u,d,this,c),this.Yg=h);jeeplus.DragControl.Cd=this.w}}else if(h="$jeeplus-last",this.Yg!=h){if(!this.callEvent("onBeforeDropOrder",[u,-1,t,{parent:0}]))return;this.Yg=h}}}if(i.style.display="block",a)if(e.y=s.y,e.x=e.x-18,e.x<s.x)e.x=s.x;else{var p=s.x+this.$view.offsetWidth-60;e.x>p&&(e.x=p)}else if(s.y+=this.$g,e.x=this.Wg||s.x,e.y=e.y-18,e.y<s.y)e.y=s.y;else{p=s.y+this.$view.offsetHeight-60;e.y>p&&(e.y=p)}this.bh&&(this.bh=window.clearTimeout(this.bh)),this.bh=jeeplus.delay(this.ch,this,[jeeplus.html.pos(t),this.locate(t)||null],250),jeeplus.DragControl.Ed=!0},$dragIn:function(){return!1},$drop:function(e,t,i){this.bh&&(this.XC=null,this.bh=window.clearTimeout(this.bh));var s=jeeplus.DragControl.getContext(),n=s.start;this.removeCss(n,"jeeplus_transparent");var l=this.getIndexById(n);this.callEvent("onAfterDropOrder",[n,l,i]),s.fragile&&this.refresh()}},jeeplus.DragItem={_g:function(e,t,i){t||jeeplus.DragControl.addDrop(e.w,e,!0),i||jeeplus.DragControl.addDrag(e.w,e),this.attachEvent("onDragOut",function(e,t){this.$dragMark(e,t)}),this.attachEvent("onBeforeAutoScroll",function(){var e=jeeplus.DragControl.getContext();return!(!jeeplus.DragControl.sd||!e||e.to!==this&&!this.XC)})},drag_setter:function(e){return e&&(jeeplus.extend(this,jeeplus.AutoScroll,!0),"order"==e&&jeeplus.extend(this,jeeplus.DragOrder,!0),"inner"==e&&(this.ah=!0),this._g(this,"source"==e,"target"==e),delete this.drag_setter),e},$dragIn:function(e,t,i){var s=this.locate(i)||null,n=jeeplus.DragControl.Gd;if((this.ah||n.from.ah)&&n.from!==this)return!1;var l=jeeplus.DragControl.getMaster(t),a=this.getItemNode(s,i)||this.y;return a==jeeplus.DragControl.Dd?a:(n.target=s,n.to=l,this.bh&&(this.bh=window.clearTimeout(this.bh)),this.bh=jeeplus.delay(function(e,t){this.Gg(t),this.ch(e,t)},this,[jeeplus.html.pos(i),s],250),this.$dropAllow(n,i)&&this.callEvent("onBeforeDragIn",[n,i])?(this.$dragMark(n,i),a):(n.to=n.target=null,this.bh&&(this.bh=window.clearTimeout(this.bh)),null))},$dropAllow:function(){return!0},Gg:function(e){},_B:function(e){return e&&"object"==typeof e?e.toString():e},$dragOut:function(e,t,i,s){var n=(this.x.contains(i)?this.locate(s):null)||null,l=jeeplus.DragControl.Gd;return(l.target||"").toString()==(n||"").toString()||(this.bh&&(this.XC=null,this.bh=window.clearTimeout(this.bh)),l.target=l.to=null,this.callEvent("onDragOut",[l,s])),null},$drop:function(e,t,i){this.bh&&(this.bh=window.clearTimeout(this.bh));var s=jeeplus.DragControl.Gd,n=(s.to=this)._B(s.target);this.getBranchIndex?n&&(s.parent=this.getParentId(n),s.index=this.getBranchIndex(n)):s.index=n?this.getIndexById(n):this.count(),this.$dragMark({},i),s.from&&s.from!=s.to&&s.from.callEvent&&s.from.callEvent("onBeforeDropOut",[s,i]),this.callEvent("onBeforeDrop",[s,i])&&(this.dh(s,i),this.callEvent("onAfterDrop",[s,i]))},dh:function(e,t){if(e.from&&e.from.move){var i={parent:e.parent,mode:e.pos};e.from.move(e.source,e.index,e.to,i)}},WB:function(e,t){if(this.getItemNode){var i=this.locate(t,!0),s=i?this.getItemNode(i):null;return s?jeeplus.html.offset(s):s}},$drag:function(e,t){var i=this.locate(t,!0);if(i){var s=[i];if(this.getSelectedId&&!this.Vg){var n=this.getSelectedId(!0,!0);if(n&&1<n.length&&-1!=jeeplus.PowerArray.find.call(n,i)){for(var l={},a=(s=[],0);a<n.length;a++)l[n[a]]=!0;for(a=0;a<this.data.order.length;a++){var r=this.data.order[a];l[r]&&s.push(r)}}}var o=jeeplus.DragControl.Gd={source:s,start:i};if(o.fragile=this.addRowCss&&jeeplus.env.touch&&(jeeplus.env.isWebKit||jeeplus.env.isFF),(o.from=this).callEvent("onBeforeDrag",[o,t]))return jeeplus.Touch&&(jeeplus.Touch.km=null),o.html||this.$dragHTML(this.getItem(i),t)}return null},$dragHTML:function(e,t){return this.jb(e)},$dragMark:function(e,t){var i=null;return e.target&&(i=this._B(e.target)),this.eh&&this.eh!=i&&(e.fragile||this.removeCss(this.eh,"jeeplus_drag_over"),this.eh=null),!this.eh&&i?(this.eh=i,e.fragile||this.addCss(i,"jeeplus_drag_over"),i):!!e.to}},jeeplus.Group={$init:function(){jeeplus.extend(this.data,jeeplus.GroupStore),this.data.attachEvent("onClearAll",jeeplus.bind(function(){this.data.nf=this.data.fh=null,this.gh=0},this))},group:function(e){this.data.ungroup(!0),this.data.group(e)},ungroup:function(e){this.data.ungroup(e)}},jeeplus.GroupMethods={sum:function(e,t){t=t||this;for(var i=0,s=0;s<t.length;s++)i+=1*e(t[s]);return i},min:function(e,t){t=t||this;for(var i=1/0,s=0;s<t.length;s++)1*e(t[s])<i&&(i=1*e(t[s]));return 1*i},max:function(e,t){t=t||this;for(var i=-1/0,s=0;s<t.length;s++)1*e(t[s])>i&&(i=1*e(t[s]));return 1*i},count:function(e,t){for(var i=0,s=0;s<t.length;s++){var n=e(t[s]);null!=n&&i++}return i},any:function(e,t){return e(t[0])},string:function(e,t){return e.$name}},jeeplus.GroupStore={$init:function(){this.attachEvent("onClearAll",this.oz)},oz:function(){this.nf=this.fh=null,this.gh=0},ungroup:function(e){return this.getBranchIndex?this.hh.apply(this,arguments):void(this.nf&&(this.order=this.nf,this.pull=this.fh,this.fh=this.nf=null,e||this.callEvent("onStoreUpdated",[])))},mf:function(e){this.blockEvent(),this.group(e),this.unblockEvent()},ih:function(t){if("function"==typeof t)return t;function e(e){return e[t]}return e.$name=t,e},group:function(i){if(this.getBranchIndex)return this.jh.apply(this,arguments);"string"==typeof i&&(i={by:i,map:{}});var e="function"==typeof i.by?"value":i.by,s=this.ih(i.by);i.map[e]||(i.map[e]=[e,this.kh]);var n={},l=[];for(var t in this.each(function(e){var t=s(e);n[t]||(l.push({id:t,$group:!0,$row:i.row}),n[t]=jeeplus.toArray()),n[t].push(e)}),i.map){var a=i.map[t][1]||"any",r=this.ih(i.map[t][0]);"function"!=typeof a&&(a=jeeplus.GroupMethods[a]);for(var o=0;o<l.length;o++)l[o][t]=a.call(this,r,n[l[o].id])}this.nf=this.order,this.fh=this.pull,this.order=jeeplus.toArray(),this.pull={};for(o=0;o<l.length;o++){var h=this.id(l[o]);this.pull[h]=l[o],this.order.push(h),this.qf&&this.qf(l[o])}this.callEvent("onStoreUpdated",[])},jh:function(e,t){var i,s;this.gh=(this.gh||0)+1,"string"==typeof e?(i={by:this.ih(e),map:{}}).map[e]=[e]:i="function"==typeof e?{by:e,map:{}}:e,s=t?this.getItem(t).$level:t=0;for(var n=this.branch[t],l=this.ih(i.by),a=[],r=[],o=0;o<n.length;o++){var h=this.getItem(n[o]),u=l(h),c=s+"$"+u,d=this.branch[c];if(!d){var p=this.pull[c]={id:c,value:u,$group:!0,$row:i.row};this.qf&&this.qf(p),r.push(p),(d=this.branch[c]=[]).lh=[],a.push(c)}d.push(h.id),d.lh.push(h)}for(var f in this.branch[t]=a,i.map){var g=i.map[f][1]||"any",v=this.ih(i.map[f][0]);"function"!=typeof g&&(g=jeeplus.GroupMethods[g]);for(o=0;o<r.length;o++)r[o][f]=g.call(this,v,this.branch[r[o].id].lh)}for(o=0;o<r.length;o++){var m=r[o];if(this.hasEvent("onGroupCreated")&&this.callEvent("onGroupCreated",[m.id,m.value,this.branch[m.id].lh]),i.footer){var j="footer$"+m.id,y=this.pull[j]={id:j,$footer:!0,value:m.value,$level:s,$count:0,$parent:m.id,$row:i.footer.row};for(var f in i.footer){g=i.footer[f][1]||"any",v=this.ih(i.footer[f][0]);"function"!=typeof g&&(g=jeeplus.GroupMethods[g]),y[f]=g.call(this,v,this.branch[r[o].id].lh)}this.branch[m.id].push(y.id),this.callEvent("onGroupFooter",[y.id,y.value,this.branch[m.id].lh])}delete this.branch[m.id].lh}this.mh(a,t,s+1),this.callEvent("onStoreUpdated",[])},hh:function(e,t,i){if(i||this.gh){this.gh=Math.max(0,this.gh-1),t=t||0;for(var s=[],n=this.branch[t],l=0;l<n.length;l++){var a=n[l],r=this.branch[a];r&&(s=s.concat(r)),delete this.pull[a],delete this.branch[a]}for(l=(this.branch[t]=s).length-1;0<=l;l--)this.pull[s[l]].$footer&&s.splice(l,1);this.mh(s,0,1),e||this.callEvent("onStoreUpdated",[])}},mh:function(e,t,i){t&&(this.getItem(t).$count=e.length);for(var s=0;s<e.length;s++){var n=this.pull[e[s]];n.$level=i,n.$parent=t;var l=this.branch[n.id];l&&this.mh(l,n.id,i+1)}}},jeeplus.clipbuffer={nh:null,oh:null,ph:0,init:function(){return null!==this.nh||(jeeplus.destructors.push({obj:this}),this.nh=document.createElement("textarea"),this.nh.className="jeeplus_clipbuffer",this.nh.setAttribute("jeeplusignore",1),this.nh.setAttribute("spellcheck","false"),this.nh.setAttribute("autocapitalize","off"),this.nh.setAttribute("autocorrect","off"),this.nh.setAttribute("autocomplete","off"),document.body.appendChild(this.nh),jeeplus.event(document.body,"keydown",jeeplus.bind(function(e){var t=e.keyCode,i=!(!e.ctrlKey&&!e.metaKey);86===t&&i&&jeeplus.delay(this.rh,this,[e],100)},this))),this.nh},destructor:function(){this.nh=null},set:function(e){this.init(),this.nh.value=e,this.focus()},focus:function(){this.UA()||(this.init(),this.nh.focus(),this.nh.select())},UA:function(){var e="";return void 0!==window.getSelection?e=window.getSelection().toString():void 0!==document.selection&&"Text"==document.selection.type&&(e=document.selection.createRange().text),!!e},rh:function(e){if((e.target||e.srcElement)===this.nh){var t=this.nh.value,i=jeeplus.UIManager.getFocus();!i||i.getEditor&&i.getEditor()||(i.callEvent("onPaste",[t]),this.nh.select())}}},jeeplus.CopyPaste={clipboard_setter:function(e){return(!0===e||1===e)&&(e="modify"),this.attachEvent("onAfterSelect",function(e){if(!this.getEditor||!this.getEditor()){var t=this.getItem(e),i=this.type.templateCopy(t);jeeplus.clipbuffer.set(i,this),jeeplus.clipbuffer.focus(),jeeplus.UIManager.setFocus(this)}}),this.attachEvent("onPaste",function(e){jeeplus.isUndefined(this.rh[this.s.clipboard])||this.rh[this.s.clipboard].call(this,e)}),this.attachEvent("onFocus",function(){jeeplus.clipbuffer.focus()}),this.attachEvent("onItemClick",function(e){this.wg&&-1===this.wg.find(e)||(jeeplus.clipbuffer.focus(),jeeplus.UIManager.setFocus(this))}),e},rh:{insert:function(e){this.add({value:e})},modify:function(e){for(var t=this.getSelectedId(!0),i=0;i<t.length;i++)this.getItem(t[i]).value=e,this.refresh(t[i])},custom:function(e){}},templateCopy_setter:function(e){this.type.templateCopy=jeeplus.template(e)},type:{templateCopy:function(e){return this.template(e)}}},jeeplus.KeysNavigation={$init:function(){this.getSelectedId&&(this.attachEvent("onAfterRender",this.cF),this.attachEvent("onAfterSelect",jeeplus.once(function(){if(1<this.count()&&this.y){var e=this.y.querySelector("["+this.ad+"]");e&&e.setAttribute("tabindex","-1")}})))},cF:function(){var e=this.getSelectedId(!0);if(!e.length||!this.getItemNode(e[0])){var t=this.y.querySelector("["+this.ad+"]");t&&t.setAttribute("tabindex","0")}},sh:function(n){return function(e,t){var i=t.srcElement||t.target;if(!i.getAttribute("jeeplusignore")){var s=i.tagName;if("INPUT"==s||"TEXTAREA"==s||"SELECT"==s)return!0}return!(e&&e.moveSelection&&e.config.navigation&&!e.Eb)||(jeeplus.html.preventEvent(t),e.moveSelection(n,{shift:t.shiftKey,ctrl:t.ctrlKey}))}},moveSelection:function(e,t,i){var s=this.s;if(!s.disabled){var n=this.getSelectedId(!0),l=this.count&&("x"==s.layout||1<s.xCount);if(("right"==e||"left"==e)&&this.ar){var a=jeeplus.$$(this.ar);return a.Uq(!0),void("x"===a.config.layout?a.moveSelection(e):jeeplus.UIManager.setFocus(a))}if(!n.length&&this.count()){if("down"==e||"right"==e&&l)e="top";else{if(!("up"==e||"left"==e&&l))return;e="bottom"}n=[this.getFirstId()]}if(1==n.length){var r=n=n[0];if("left"==e&&this.close)return this.close(n);if("right"==e&&this.open)return this.open(n);if("top"==e)n=this.getFirstId();else if("bottom"==e)n=this.getLastId();else if("up"==e||"left"==e||"pgup"==e){var o=this.getIndexById(n),h="pgup"==e?10:1;n=this.getIdByIndex(Math.max(0,o-h))}else{if("down"!=e&&"right"!=e&&"pgdown"!=e)return;o=this.getIndexById(n),h="pgdown"==e?10:1;n=this.getIdByIndex(Math.min(this.count()-1,o+h))}if(this.OD&&(n=this.OD(n,r,e)),this.showItem(n),this.select(n),this.getSubMenu&&this.getSubMenu(n)&&this.Yq(n,this.getItemNode(n)),!this.config.clipboard&&!1!==i){var u=this.getItemNode(n);u&&u.focus()}}return!1}},navigation_setter:function(e){return e&&!jeeplus.UIManager.th&&(jeeplus.UIManager.th=!0,jeeplus.UIManager.addHotKey("up",this.sh("up")),jeeplus.UIManager.addHotKey("down",this.sh("down")),jeeplus.UIManager.addHotKey("right",this.sh("right")),jeeplus.UIManager.addHotKey("left",this.sh("left")),jeeplus.UIManager.addHotKey("shift+up",this.sh("up")),jeeplus.UIManager.addHotKey("shift+down",this.sh("down")),jeeplus.UIManager.addHotKey("shift+right",this.sh("right")),jeeplus.UIManager.addHotKey("shift+left",this.sh("left")),jeeplus.UIManager.addHotKey("ctrl+shift+up",this.sh("up")),jeeplus.UIManager.addHotKey("ctrl+shift+down",this.sh("down")),jeeplus.UIManager.addHotKey("ctrl+shift+right",this.sh("right")),jeeplus.UIManager.addHotKey("ctrl+shift+left",this.sh("left")),jeeplus.UIManager.addHotKey("pageup",this.sh("pgup")),jeeplus.UIManager.addHotKey("pagedown",this.sh("pgdown")),jeeplus.UIManager.addHotKey("home",this.sh("top")),jeeplus.UIManager.addHotKey("end",this.sh("bottom"))),e}},jeeplus.protoUI({name:"tree",defaults:{scroll:"a",navigation:!0},$init:function(){this.x.className+=" jeeplus_tree",jeeplus.extend(this.data,jeeplus.TreeStore,!0),jeeplus.extend(this.on_click,jeeplus.TreeClick),this.attachEvent("onAfterRender",this.Jf),this.attachEvent("onPartialRender",this.Jf),this.data.provideApi(this,!0),this.x.setAttribute("role","tree")},ad:"jeeplus_tm_id",on_context:{},on_dblclick:{jeeplus_tree_checkbox:function(){return this.on_click.jeeplus_tree_checkbox?this.on_click.jeeplus_tree_checkbox.apply(this,arguments):void 0}},$fixEditor:function(e){var t=this.getItemNode(e.id).querySelector("span");if(t){""===t.innerHTML&&(t.innerHTML="&nbsp;");var i=t.offsetLeft;e.node.style.width=this.$view.scrollWidth-i-10+"px",e.node.style.marginLeft=i+"px",e.node.style.left="0px"}},on_click:{jeeplus_tree_item:function(e,t,i){this.s.activeTitle&&(this.getItem(t).open?this.close(t):this.open(t));if(this.s.select)if("multiselect"==this.s.select||this.s.multiselect){var s=e.ctrlKey||e.metaKey||"touch"==this.s.multiselect;if("level"==this.s.multiselect&&(s||e.shiftKey)){var n=this.getSelectedId(!0)[0];if(n&&this.getParentId(t)!=this.getParentId(n))return}this.select(t,!1,s,e.shiftKey)}else this.select(t)}},rh:{insert:function(e){var t=this.getSelectedId()||"0";this.add({value:e},null,t)},modify:function(e){for(var t=this.getSelectedId(!0),i=0;i<t.length;i++)this.getItem(t[i]).value=e,this.refresh(t[i])},custom:function(e){}},Xg:!0,$dragHTML:function(e){return"<div class='borderless'>"+this.type.template(e,this.type)+"</div>"},type:jeeplus.extend({template:function(e,t){return(t["template"+e.level]||t.templateCommon).apply(this,arguments)},classname:function(e,t,i){var s="jeeplus_tree_item";return e.$css&&("object"==typeof e.$css&&(e.$css=jeeplus.html.createCss(e.$css)),s+=" "+e.$css),i&&i.$css&&(s+=" "+i.$css),s},aria:function(e,t,i){return'role="treeitem"'+(i&&i.jeeplus_selected?' aria-selected="true" tabindex="0"':' tabindex="-1"')+(e.$count?'aria-expanded="'+(e.open?"true":"false")+'"':"")+'aria-level="'+e.$level+'"'},templateCommon:jeeplus.template("{common.icon()} {common.folder()} <span>#value#</span>"),templateStart:jeeplus.template('<div jeeplus_tm_id="#id#" class="{common.classname()}" {common.aria()}>'),templateEnd:jeeplus.template("</div>"),templateCopy:jeeplus.template("#value#")},jeeplus.TreeType)},jeeplus.AutoTooltip,jeeplus.Group,jeeplus.TreeAPI,jeeplus.DragItem,jeeplus.TreeDataMove,jeeplus.SelectionModel,jeeplus.KeysNavigation,jeeplus.MouseEvents,jeeplus.Scrollable,jeeplus.TreeDataLoader,jeeplus.ui.proto,jeeplus.TreeRenderStack,jeeplus.CopyPaste,jeeplus.EventSystem),jeeplus.TreeStateCheckbox={uh:function(){if(this.vg){var n=this.render;this.render=function(e,t,i){var s=n.apply(this,arguments);this.s.threeState&&s&&"checkbox"!=t&&this.vh.apply(this,arguments)},this.uh=function(){}}},threeState_setter:function(e){return e&&this.uh(),e},vh:function(e){var t,i,s,n,l;if(s=[],l=this,e&&!l.data.pull[e]&&(e=0),!e||l.data.pull[e].$count)for((i=this.wh(e)).sort(function(e,t){return l.data.pull[t].$level-l.data.pull[e].$level}),t=0;t<i.length;t++)t&&l.data.pull[i[t]].$parent==l.data.pull[i[t-1]].$parent||(s=s.concat(l.xh(i[t])));else s=s.concat(l.xh(e));for(n={},t=0;t<s.length;t++)n[s[t]]||(n[s[t]]=1,this.yh(s[t]));l=null},yh:function(e){var t;this.getItemNode(e)&&(this.render(e,"checkbox","update"),this.getItem(e).indeterminate&&((t=this.getItemNode(e).getElementsByTagName("input")[0])&&(t.indeterminate=this.getItem(e).indeterminate)))},xh:function(e){var t,i,s,n,l,a,r;for(n=this.getParentId(e),this,l=[];n&&"0"!=n;){i=a=0,this.data.eachChild(n,function(e){e.indeterminate?a++:e.checked&&i++}),t=s=r=!1;var o=this.getItem(n);i==o.$count?t=!0:(0<i||0<a)&&(s=!0),(s||s!=o.indeterminate)&&(r=!0),o.indeterminate=s,(t||o.checked!=t)&&(r=!0),o.checked=t,n=r?(l.push(n),this.getParentId(n)):0}return l},getChecked:function(){var t=[],i=this;return this.data.eachSubItem(0,function(e){i.isChecked(e.id)&&t.push(e.id)}),t},Tg:function(e,t){var i=this.getItem(e);if(i&&(""===t&&(t=!i.checked),i.checked!=t||i.indeterminate)){i.checked=t,this.zh(e);var s=this.xh(e);if(this.vg&&s.length<5)for(var n=0;n<s.length;n++)this.yh(s[n]);else this.refresh();this.callEvent("onItemCheck",[e,t])}},checkItem:function(e){this.Sg(e,!0),this.updateItem(e)},uncheckItem:function(e){this.Sg(e,!1),this.updateItem(e)},Ah:function(e,t,i){var s=t?"checkItem":"uncheckItem";e?this[s](e):e=0,this.s.threeState?e||this.data.eachChild(0,function(e){this[s](e.id)},this,i):this.data.each(function(e){this[s](e.id)},this,i,e)},checkAll:function(e,t){this.Ah(e,!0,t)},uncheckAll:function(e,t){this.Ah(e,!1,t)},zh:function(e){var t,i=this.getItem(e);i.indeterminate=!1,t=i.checked,this.data.eachSubItem(e,function(e){e.indeterminate=!1,e.checked=t}),this.vg&&this.isBranchOpen(i.$parent)&&this.render(e,0,"branch")},isChecked:function(e){return this.getItem(e).checked},wh:function(e){var i=[];return this.data.eachSubItem(e,function(e,t){t||i.push(e.id)}),i}},jeeplus.ui.tree&&jeeplus.extend(jeeplus.ui.tree,jeeplus.TreeStateCheckbox,!0),jeeplus.type(jeeplus.ui.tree,{name:"lineTree",css:"jeeplusLineTree",icon:function(e,t){for(var i="",s="",n=1;n<=e.$level;n++){if(n==e.$level)s=e.$count?e.open?"jeeplus_tree_open ":"jeeplus_tree_close ":"jeeplus_tree_none ";var l=this.Bh(e,t,n);l&&(i+="<div class='"+s+"jeeplus_tree_img jeeplus_tree_"+l+"'></div>")}return i},Bh:function(e,t,i){var s=t.sg,n=jeeplus.TreeRenderStack.tg;if(0===s&&n){var l=e.$level,a=e.id;for(s=[];l;){var r=n.getParentId(a),o=n.data.branch[r];o[o.length-1]==a&&(s[l]=!0),a=r,l--}t.sg=s}if(!s)return 0;if(i!=e.$level)return s[i]?"blank":"line1";var h=3;return e.$parent||0===e.$index&&(h=4),s[e.$level]&&(h=2),e.$count?e.open?"minus"+h:"plus"+h:"line"+h}}),jeeplus.NavigationButtons={$init:function(){this.$ready.push(function(){this.attachEvent("onKeyPress",this.DD)})},PD:function(e,t){if(37===e||39===e){jeeplus.html.preventEvent(t),this.Kh(37===e?-1:1);var i=this.Dh.querySelector("[tabindex='0']");i&&i.focus()}},Ch:function(){jeeplus.html.remove(this.Dh),this.Dh=jeeplus.html.create("DIV",{class:"jeeplus_nav_panel jeeplus_nav_panel_"+this.s.navigation.type,role:"tablist"},""),this.x.appendChild(this.Dh),this.Eh(),this.Fh(),this.Gh()},Gh:function(){var t=[];this.Dh&&(t[0]=jeeplus.event(this.Dh,"click",jeeplus.bind(function(e){for(var t=e.srcElement||e.target,i=!1;t!=this.Dh&&!i;){var s=t.getAttribute(this.Hh);s&&(i=!0,this.Ih(s)),t=t.parentNode}},this))),this.Jh&&(t[1]=jeeplus.event(this.Jh,"click",jeeplus.bind(function(e){this.Kh(-1)},this))),this.Lh&&(t[1]=jeeplus.event(this.Lh,"click",jeeplus.bind(function(e){this.Kh(1)},this))),this.attachEvent("onDestruct",function(){for(var e=0;e<t.length;e++)this.detachEvent(t[e]);t=null})},Kh:function(e){if(this.q){var t=this.Mh+e;(t>=this.q.length||t<0)&&(t=t<0?this.q.length-1:0),this.setActiveIndex(t)}},Ih:function(e){this.q&&jeeplus.$$(e).show()},Eh:function(){var e,t;if((t=this.s.navigation).items){this.Hh=t.linkAttr||"bind_id",this.Dh?this.Nh():this.Ch();var i=this.q?this.q:this.data.order;if(1<i.length)for(var s=0;s<i.length;s++){e=jeeplus.html.create("DIV",{class:"jeeplus_nav_item jeeplus_nav_"+(s==this.Mh?"active":"inactive"),role:"tab",tabindex:s==this.Mh?"0":"-1"},"<div></div>");var n=this.q?this.q[s].s.id:i[s];n&&e.setAttribute(this.Hh,n),this.Dh.appendChild(e)}}},Nh:function(){if(this.Dh)for(var e=this.Dh.childNodes,t=e.length-1;0<=t;t--)jeeplus.html.remove(e[t])},Fh:function(){var e;(e=this.s.navigation).buttons&&(this.Jh&&jeeplus.html.remove(this.Jh),this.Jh&&jeeplus.html.remove(this.Lh),this.Jh=jeeplus.html.create("DIV",{class:"jeeplus_nav_button_"+e.type+" jeeplus_nav_button_prev ",role:"button",tabindex:"0","aria-label":jeeplus.i18n.aria.prevTab},'<div class="jeeplus_nav_button_inner"></div>'),this.x.appendChild(this.Jh),this.Lh=jeeplus.html.create("DIV",{class:"jeeplus_nav_button_"+e.type+" jeeplus_nav_button_next ",role:"button",tabindex:"0","aria-label":jeeplus.i18n.aria.nextTab},'<div class="jeeplus_nav_button_inner"></div>'),this.x.appendChild(this.Lh))}},jeeplus.VRenderStack={$init:function(){this.t={},jeeplus.UE(this.x,"scroll",jeeplus.bind(function(){this.render(null,null,"paint")},this))},getItemNode:function(e){return this.t&&this.t[e]},showItem:function(e){var t=this.data.getIndexById(e);if(-1<t){var i=t*this.type.height,s=i+this.type.height,n=this.getScrollState(),l=jeeplus.html.offset(this.$view);i<n.y?this.scrollTo(0,i):s>n.y+l.height&&this.scrollTo(0,s-l.height)}},render:function(e,t,i){if(this.isVisible(this.s.id)&&!this.$blockRender){var s=this.Pe||this.y;if(!e||"paint"!=i&&"update"!=i){if("paint"!=i&&(this.t={},s.innerHTML=""),this.callEvent("onBeforeRender",[this.data])){var n=this.data.count(),l=this.getScrollState(),a=jeeplus.html.offset(this.x),r=Math.floor(l.y/this.type.height)-2,o=Math.ceil((l.y+a.height)/this.type.height)+2;r=Math.max(0,r),o=Math.min(this.data.count()-1,o);for(var h=[],u=r;u<=o;u++){var c=this.data.order[u];if(this.t[c])h.push("<div></div>");else{var d=this.data.getItem(c);if(!d){this.Ik({count:o-u+(this.s.loadahead||0),start:u});break}h.push(this.jb(d))}}this.v.innerHTML=h.join(""),s.style.position="relative",s.style.height=n*this.type.height+"px";var p=this.v.childNodes;for(u=p.length-1;0<=u;u--){var f=p[u];(e=f.getAttribute(this.ad))&&(f.style.position="absolute",f.style.top=(r+u)*this.type.height+"px",f.style.left=0,f.style.width="100%",s.appendChild(f),this.t[e]=f)}this.callEvent("onAfterRender",[])}}else{var g=this.getItemNode(e);if(g){var v=this.t[e]=this.Ne(t);return v.style.top=g.style.top,v.style.position="absolute",v.style.left=0,v.style.width="100%",jeeplus.html.insertBefore(v,g),void jeeplus.html.remove(g)}}}},$setSize:function(){jeeplus.ui.view.prototype.$setSize.apply(this,arguments)&&this.render(null,null,"paint")},Ik:function(e){var t=Math.max(e.count,this.s.datafetch||this.s.loadahead||0);this.cf(e.count,e.start)||this.loadNext(t,e.start)}},function(){function s(e,t){var i=jeeplus.html.create("div",{class:"jeeplus_view jeeplus_print_"+e.toLowerCase(),style:"height:0px;visibility:hidden;"},t["doc"+e]);"Header"===e?jeeplus.html.insertBefore(i,document.body.firstChild):document.body.appendChild(i),t["doc"+e]=i}jeeplus.env.printPPI=96,jeeplus.env.printMargin=.75*jeeplus.env.printPPI;var n=(jeeplus.env.printPPI,jeeplus.env.printMargin),l={a4:"A4",a3:"A3",letter:"letter"},a={page:!0,data:!0},r={portrait:!0,landscape:!0},o={A3:{width:11.7,height:16.5},A4:{width:8.27,height:11.7},letter:{width:8.5,height:11}};jeeplus.print=function(e,t){var i=jeeplus.$$(e);i&&i.$printView&&(i=i.$printView()),i&&(i.callEvent&&i.callEvent("onBeforePrint",[t]),function(e){jeeplus.html.addCss(document.body,"jeeplus_print"),e.docHeader&&s("Header",e),e.docFooter&&s("Footer",e);var t="@media print { @page{ size:"+e.paper+" "+e.mode+";margin-top:"+e.margin.top+"px;margin-bottom:"+e.margin.bottom+"px;margin-right:"+e.margin.right+"px;margin-left:"+e.margin.left+"px;}}";jeeplus.html.addStyle(t,"print")}(t=function(e){return(e=e||{}).paper=l[(e.paper||"").toLowerCase()]||"A4",e.mode=r[e.mode]?e.mode:"portrait",e.fit=a[e.fit]?e.fit:"page",e.scroll=e.scroll||!1,e.size=o[e.paper],e.margin=e.margin||0===e.margin?e.margin:{},n=isNaN(1*e.margin)?n:e.margin,e.margin={top:e.margin.top||0===e.margin.top?e.margin.top:n,bottom:e.margin.bottom||0===e.margin.bottom?e.margin.bottom:n,right:e.margin.right||0===e.margin.right?e.margin.right:n,left:e.margin.left||0===e.margin.left?e.margin.left:n},e}(t)),i.$customPrint&&!0!==i.$customPrint(t)||function(e,t){var i=e.$view.cloneNode(!0),s=e.$view.getElementsByTagName("canvas");if(s.length)for(var n=s.length-1;0<=n;n--)i.getElementsByTagName("canvas")[n].getContext("2d").drawImage(s[n],0,0);jeeplus.html.insertBefore(i,t.docFooter,document.body),jeeplus.html.addCss(i,"jeeplus_ui_print"),!t.scroll&&(e.y&&e.data&&e.data.pull||e.getBody)&&jeeplus.html.addCss(i,"jeeplus_print_noscroll"),window.print(),jeeplus.html.remove(i)}(i,t),function(e){jeeplus.html.removeCss(document.body,"jeeplus_print"),jeeplus.html.removeStyle("print"),e.docHeader&&jeeplus.html.remove(e.docHeader),e.docFooter&&jeeplus.html.remove(e.docFooter)}(t))}}(),jeeplus.CustomPrint={$customPrint:function(e,t){if(this.UF(e,t))return!0;var i=this.VF(e),s=this.WF(i,e);if(t)return s;var n=jeeplus.html.create("div",{class:"jeeplus_ui_print"});n.appendChild(s),jeeplus.html.insertBefore(n,e.docFooter,document.body),window.print(),jeeplus.html.remove(n)},UF:function(e,t){return!(t||!("y"==this.config.layout||e.scroll||this.config.prerender||this.config.autoheight))||void("x"==this.config.layout&&jeeplus.extend(e||{},{xCount:this.count(),nobreaks:!0},!0))},XF:function(e){if("page"==e.fit)return 1/0;var t=e.size["portrait"==e.mode?"width":"height"];return Math.min(t*jeeplus.env.printPPI-2*jeeplus.env.printMargin)},VF:function(e,t,i){var s,n,l=this.XF(e),a=e.xCount||this.Ci().Di,r=[],o=[],h=0;i=i||0,t=t||[];for(var u=0;u<this.data.order.length;){var c=this.data.pull[this.data.order[u]];if(n=u-parseInt(u/a)*a,c&&i<=n){if(l<(h+=this.type.width)&&i<n){s=o.length+i,r.push(o),u+=a-o.length,o=[],h=0;continue}var d=this.type.template(c,this.type),p=this.YF,f={display:"table-cell",height:this.type.height+"px",width:this.type.width+"px"};o.push({txt:d,className:p+" "+(c.$css||""),style:f}),(u+1)%a==0&&(r.push(o),o=[],h=0)}u++}return t.push(r),s&&this.VF(e,t,s),t},WF:function(n,l){var a=jeeplus.html.create("div");return n.forEach(jeeplus.bind(function(e,t){var i=jeeplus.html.create("table",{class:"jeeplus_table_print "+this.$view.className,style:"border-collapse:collapse"});if(e.forEach(function(e){var s=jeeplus.html.create("tr");e.forEach(function(t){var i=jeeplus.html.create("td");(t.txt&&(i.innerHTML=t.txt),t.className&&(i.className=t.className),t.style)&&Object.keys(t.style).forEach(function(e){t.style[e]&&(i.style[e]=t.style[e])});t.span&&(1<t.span.colspan&&(i.colSpan=t.span.colspan),1<t.span.rowspan&&(i.rowSpan=t.span.rowspan)),s.appendChild(i)}),i.appendChild(s)}),a.appendChild(i),!l.nobreaks&&t+1<n.length){var s=jeeplus.html.create("DIV",{class:"jeeplus_print_pagebreak"});a.appendChild(s)}},this)),a}},jeeplus.protoUI({name:"list",Oh:"jeeplus_list",YF:"jeeplus_list_item",$init:function(e){jeeplus.html.addCss(this.x,this.Oh+("x"==(e.layout||this.defaults.layout)?"-x":"")),this.data.provideApi(this,!0),this.Ph=jeeplus.bind(this.Ph,this),this.data.attachEvent("onStoreUpdated",this.Ph),this.data.attachEvent("onSyncApply",this.Ph),this.attachEvent("onAfterRender",this.hg),this.x.setAttribute("role","listbox")},dynamic_setter:function(e){return e&&jeeplus.extend(this,jeeplus.VRenderStack,!0),e},$dragHTML:function(e,t){if("y"!=this.s.layout||"auto"!=this.type.width)return this.jb(e);this.type.width=this.bc;var i=this.jb(e);return this.type.width="auto",i},defaults:{select:!1,scroll:!0,layout:"y",navigation:!0,datafetch:50},ad:"jeeplus_l_id",on_click:{jeeplus_list_item:function(e,t){this.s.select&&(this.Qh=!0,"multiselect"==this.s.select||this.s.multiselect?this.select(t,!1,e.ctrlKey||e.metaKey||"touch"==this.s.multiselect,e.shiftKey):this.select(t),this.Qh=!1)}},on_dblclick:{},getVisibleCount:function(){return Math.floor(this.dc/this.QF())},Ph:function(){(this.s.autoheight||this.s.autowidth)&&this.resize()},Rh:function(e){var t=this.data.$pagesize||this.count();this.Lf(e&&e<t),this.s.autoheight&&t<(e||1/0)&&(e=t);var i=this.QF()*e+(this.type.margin||0);return this.getUnits&&(i+=this.getUnits().length*this.type.headerHeight),Math.max(i,this.s.minHeight||0)},QF:function(){return this.type.height+(this.type.margin||0)},Sh:function(e){var t=this.data.$pagesize||this.count();return this.Lf(e&&e<t),this.s.autowidth&&t<(e||1/0)&&(e=t),this.type.width*e},hg:function(){"x"==this.s.layout&&(this.y.style.width="auto"!=this.type.width?this.type.width*this.count()+"px":"auto")},$getSize:function(e,t){return"y"==this.s.layout?("auto"!=this.type.width&&(this.s.width=this.type.width+(this.cc?jeeplus.ui.scrollSize:0)),(this.s.yCount||this.s.autoheight)&&(this.s.height=this.Rh(this.s.yCount)||1)):("auto"!=this.type.height&&(this.s.height=this.QF()+(this.ec?jeeplus.ui.scrollSize:0)),(this.s.xCount||this.s.autowidth)&&(this.s.width=this.Sh(this.s.xCount)||1)),jeeplus.ui.view.prototype.$getSize.call(this,e,t)},$setSize:function(){jeeplus.ui.view.prototype.$setSize.apply(this,arguments)},type:{css:"",widthSize:function(e,t){return t.width+(-1<t.width?"px":"")},heightSize:function(e,t){return t.height+(-1<t.height?"px":"")},classname:function(e,t,i){var s="jeeplus_list_item";return e.$css&&("object"==typeof e.$css&&(e.$css=jeeplus.html.createCss(e.$css)),s+=" "+e.$css),i&&i.$css&&(s+=" "+i.$css),s},aria:function(e,t,i){return'role="option"'+(i&&i.jeeplus_selected?' aria-selected="true" tabindex="0"':' tabindex="-1"')+(e.$count&&e.$template?'aria-expanded="true"':"")},template:function(e){return(e.icon?"<span class='jeeplus_icon fa-"+e.icon+"'></span> ":"")+e.value+(e.badge?"<div class='jeeplus_badge'>"+e.badge+"</div>":"")},width:"auto",templateStart:jeeplus.template('<div jeeplus_l_id="#id#" class="{common.classname()}" style="width:{common.widthSize()}; height:{common.heightSize()}; overflow:hidden;" {common.aria()}>'),templateEnd:jeeplus.template("</div>")},$skin:function(){this.type.height=jeeplus.skin.$active.listItemHeight}},jeeplus.CustomPrint,jeeplus.KeysNavigation,jeeplus.DataMove,jeeplus.DragItem,jeeplus.MouseEvents,jeeplus.SelectionModel,jeeplus.Scrollable,jeeplus.ui.proto,jeeplus.CopyPaste),jeeplus.protoUI({name:"grouplist",defaults:{animate:{}},Oh:"jeeplus_grouplist",$init:function(){jeeplus.extend(this.data,jeeplus.TreeStore,!0),this.data.count=function(){return this.order.length},this.data.provideApi(this,!0),this.data.attachEvent("onClearAll",jeeplus.bind(this.Th,this)),this.Th()},Th:function(){this.Uh=[],this.Vh=[]},$setSize:function(){jeeplus.ui.view.prototype.$setSize.apply(this,arguments)&&(this.y.style.width=this.bc)},on_click:{jeeplus_list_item:function(e,t){if(this.Wh)return!1;for(var i=0;i<this.Vh.length;i++)if(this.Vh[i]==t){for(var s=i;s<this.Vh.length;s++)this.data.getItem(this.Vh[s]).$template="";return i?(this.Uh=this.data.branch[this.Vh[i-1]],this.Vh.splice(i)):(this.Uh=this.data.branch[0],this.Vh=[]),this.Xh=!1,this.render()}var n=this.getItem(t);return n.$count?(this.Xh=!0,this.Vh.push(t),n.$template="Back",this.Uh=this.data.branch[n.id],this.render()):void(this.s.select&&(this.Qh=!0,"multiselect"==this.s.select||this.s.multiselect?this.select(t,!1,"touch"==this.s.multiselect||e.ctrlKey||e.metaKey,e.shiftKey):this.select(t),this.Qh=!1))}},getOpenState:function(){return{parents:this.Vh,branch:this.Uh}},render:function(e,t,i,s){var n,l;if(this.Vh=jeeplus.copy(this.Vh),this.Uh=jeeplus.copy(this.Uh),this.Vh.length)for(n=0;n<this.Vh.length;n++)this.data.branch[this.Vh[n]]||(this.Vh.splice(n,1),n--);if(l=this.Vh.length?this.Vh[this.Vh.length-1]:0,this.Uh=jeeplus.copy(this.data.branch[l]),!this.Uh.length&&this.Vh.length&&(this.Uh=[l],this.Vh.pop()),this.Wh)return jeeplus.delay(this.render,this,arguments,100);for(n=0;n<this.Uh.length;n++)this.data.getItem(this.Uh[n]).$template="";if(this.Uh.length||(this.Uh=this.data.branch[0]),this.data.order=jeeplus.toArray([].concat(this.Vh).concat(this.Uh)),this.callEvent("onBeforeRender",[this.data])){if(!this.Qh&&this.y.innerHTML&&jeeplus.animate.isSupported()&&this.s.animate&&this.Yh!=this.Vh.length){if(this.callEvent("onBeforeRender",[this.data])){this.Zh||(this.Zh=[]);var a=this.y.cloneNode(!1);a.innerHTML=this.data.getRange().map(this.jb,this).join("");var r=jeeplus.extend({},this.s.animate);r.direction=this.Xh?"left":"right";var o=[jeeplus.clone(r),jeeplus.clone(r)];if(this.Xh)this.Zh.push(this.getScrollState()),jeeplus.Touch&&jeeplus.Touch.$active&&(o[0].y=0,o[1].y=-this.getScrollState().y);else{var h=this.Zh.pop();jeeplus.Touch&&jeeplus.Touch.$active&&(o[0].y=-h.y,o[1].y=-this.getScrollState().y)}var u=jeeplus.animate.formLine(a,this.y,r);jeeplus.Touch&&jeeplus.Touch.$active&&jeeplus.Touch.Nf(a,0,this.Xh?0:o[0].y,"0ms"),r.master=this,r.callback=function(){this.y=a,this.Xh?jeeplus.Touch&&jeeplus.Touch.$active||this.scrollTo(0,0):jeeplus.Touch&&jeeplus.Touch.$active?jeeplus.delay(function(){jeeplus.Touch.Nf(a,0,o[0].y,"0ms")},this):h&&this.scrollTo(0,h.y),jeeplus.animate.breakLine(u),r.master=r.callback=null,this.t=null,this.Wh=!1,this.callEvent("onAfterRender",[])},this.Wh=!0,jeeplus.animate(u,o)}}else jeeplus.RenderStack.render.apply(this,arguments);this.Yh=this.Vh.length}},templateBack_setter:function(e){this.type.templateBack=jeeplus.template(e)},templateItem_setter:function(e){this.type.templateItem=jeeplus.template(e)},templateGroup_setter:function(e){this.type.templateGroup=jeeplus.template(e)},type:{template:function(e,t){return e.$count?t.templateGroup(e,t):t.templateItem(e,t)},css:"group",classname:function(e,t,i){return"jeeplus_list_item jeeplus_"+(e.$count?"group":"item")+(e.$template?"_back":"")+(i&&i.jeeplus_selected?" jeeplus_selected ":"")+(e.$css?e.$css:"")},templateStart:jeeplus.template('<div jeeplus_l_id="#id#" class="{common.classname()}" style="width:{common.widthSize()}; height:{common.heightSize()};  overflow:hidden;" {common.aria()}>'),templateBack:jeeplus.template("#value#"),templateItem:jeeplus.template("#value#"),templateGroup:jeeplus.template("#value#"),templateEnd:function(e,t){var i="";return e.$count&&(i+="<div class='jeeplus_arrow_icon'></div>"),i+"</div>"}},showItem:function(e){var t,i;for(e&&(i=(t=this.getItem(e)).$parent,t.$count&&(i=t.id)),this.Uh=this.data.branch[i||0],this.Vh=[];i;)this.getItem(i).$template="Back",this.Vh.unshift(i),i=this.getItem(i).$parent;this.Qh=!0,this.render(),this.Qh=!1,jeeplus.RenderStack.showItem.call(this,e)}},jeeplus.Group,jeeplus.ui.list),jeeplus.type(jeeplus.ui.grouplist,{}),jeeplus.protoUI({name:"unitlist",ad:"jeeplus_item_id",uniteBy_setter:jeeplus.template,render:function(e,t,i,s){var n=this.s;if(this.isVisible(n.id)){if(!n.uniteBy)return!1;if(e){var l=this.getItemNode(e);if(l&&"update"==i&&this.s.uniteBy.call(this,t)==this.getItem(e).$unitValue){var a=this.t[e]=this.Ne(t);return jeeplus.html.insertBefore(a,l),void jeeplus.html.remove(l)}}this.callEvent("onBeforeRender",[this.data])&&(this.units=null,this.$h(),this.units&&(this.y.innerHTML=this._h().map(this.jb,this).join(""),this.t=null),this.callEvent("onAfterRender",[]))}},getUnits:function(){var e=[];if(this.units)for(var t in this.units)e.push(t);return e},getUnitList:function(e){return this.units?this.units[e]:null},jb:function(e){var t=this.data.Me[e.id];return this.callEvent("onItemRender",[e]),e.$unit?this.type.templateStartHeader(e,this.type)+this.type.templateHeader.call(this,e.$unit)+this.type.templateEnd(e,this.type):this.type.templateStart(e,this.type,t)+(e.$template?this.type["template"+e.$template]:this.type.template)(e,this.type)+this.type.templateEnd(e,this.type)},_h:function(){var e,t,i,s;e=[];var n=this.data.$min||0,l=this.data.$max||1/0,a=0;for(i in this.units)for(e.push({$unit:i}),s=this.units[i],t=0;t<s.length;t++){if(a==n&&(e=[{$unit:i}]),e.push(this.getItem(s[t])),a==l)return jeeplus.toArray(e);a++}return jeeplus.toArray(e)},$h:function(){var i=this;this.units={},this.data.each(function(e){var t=i.s.uniteBy.call(this,e);e.$unitValue=t,i.units[t]||(i.units[t]=[]),i.units[t].push(e.id)})},type:{headerHeight:20,templateHeader:function(e){return"<span class='jeeplus_unit_header_inner'>"+e+"</span>"},templateStart:function(e,t,i){if(e.$unit)return t.templateStartHeader.apply(this,arguments);var s="jeeplus_list_item jeeplus_list_"+t.css+"_item"+(i&&i.jeeplus_selected?" jeeplus_selected":"")+(e.$css?e.$css:""),n="width:"+t.widthSize(e,t,i)+"; height:"+t.heightSize(e,t,i)+"; overflow:hidden;"+(t.layout&&"x"==t.layout?"float:left;":"");return'<div jeeplus_item_id="'+e.id+'" class="'+s+'" style="'+n+'" '+t.aria(e,t,i)+">"},templateStartHeader:function(e,t,i){var s="jeeplus_unit_header jeeplus_unit_"+t.css+"_header"+(e.$selected?"_selected":""),n="width:"+t.widthSize(e,t,i)+"; height:"+t.headerHeight+"px; overflow:hidden;";return'<div jeeplus_unit_id="'+e.$unit+'" class="'+s+'" style="'+n+'">'}},$skin:function(){this.type.headerHeight=jeeplus.skin.$active.unitHeaderHeight||20}},jeeplus.ui.list),jeeplus.EditAbility={defaults:{editaction:"click"},$init:function(e){this.ai={},this.Eb=0,this.bi=0,this.w.style.position="relative",e&&(e.onDblClick=e.onDblClick||{}),this.attachEvent("onAfterRender",this.$s),this.s.editable&&this.ci(),jeeplus.extend(this,jeeplus.Undo)},Ux:function(e){try{if("number"==typeof e.selectionStart)e.selectionStart=e.selectionEnd=e.value.length;else if(void 0!==e.createTextRange){var t=e.createTextRange();t.collapse(!1),t.select()}}catch(e){}},$s:function(){var e=this.getEditor();if(e&&e.$inline&&!e.getPopup){var t=this.mi(e);if(t&&t!=e.node){var i=e.node.value;(e.node=t).value=i,t.focus(),this.Ux(t)}else this.editStop()}},editable_setter:function(e){return e&&this.ci(),e},ci:function(){jeeplus.attachEvent("onEditEnd",jeeplus.bind(function(){this.Eb&&this.editStop()},this)),jeeplus.attachEvent("onClick",jeeplus.bind(function(e){this.Eb&&200<new Date-this.bi&&(this.di&&!this.di.popupType&&e&&this.di.node&&this.di.node.contains(e.target||e.srcElement)||this.editStop())},this)),this.data.attachEvent&&this.data.attachEvent("onIdChange",jeeplus.bind(function(e,t){this.ei(e,t)},this)),this.attachEvent("onItemClick",function(e){this.s.editable&&"click"==this.s.editaction&&this.edit(e)}),this.attachEvent("onItemDblClick",function(e){this.s.editable&&"dblclick"==this.s.editaction&&this.edit(e)}),this.fi=jeeplus.bind(function(){this.bi=new Date},this),this.ci=function(){},this.gi&&this.gi()},Vs:function(){jeeplus.delay(function(){var e=this.getEditor();if(e&&e.config.liveEdit){var t={value:e.getValue(),old:e.value};if(t.value==t.old)return;e.value=t.value,this.ti(e,t.value,!1),this.callEvent("onLiveEdit",[t,e])}},this)},hi:function(e){"string"!=typeof(t=this.s.form)&&(this.s.form=t=jeeplus.ui(t).config.id);var t,i=(t=jeeplus.$$(t)).setValues?t:t.getChildViews()[0];i.setValues(this.getItem(e.row||e)),t.config.master=this.config.id,t.show(this.getItemNode(e));var s=i.getChildViews()[0];s.focus&&s.focus()},edit:function(e,t,i){if(this.s.editable&&this.callEvent("onBeforeEditStart",[e])){if(this.s.form)return this.hi(e);var s=this.ii(e);if(s){if(this.getEditor(e))return;t||this.editStop();var n=jeeplus.extend({},jeeplus.editors[s]),l=this.ji(e,n,i);n.config.liveEdit&&(this.Ws=this.attachEvent("onKeyPress",this.Vs));var a=n.getPopup?n.getPopup(l).x:l;return a&&jeeplus.UE(a,"click",this.fi),l&&jeeplus.UE(l,"change",this.ki,{bind:{view:this,id:e}}),!1!==i&&n.focus(),this.$fixEditor&&this.$fixEditor(n),this.bi=jeeplus.edit_open_time=new Date,jeeplus.UIManager.setFocus(this,!0),this.callEvent("onAfterEditStart",[e]),n}return null}},getEditor:function(e){return e?this.ai[e]:this.di},ei:function(e,t){var i=this.ai[e];i&&((this.ai[t]=i).id=t,delete this.ai[e])},ki:function(e){this.view.hasEvent("onEditorChange")&&this.view.callEvent("onEditorChange",[this.id,this.view.getEditorValue(this.id)])},li:function(e){return this.s},ji:function(e,t,i){var s=(t.config=this.li(e),t.render());t.$inline&&(s=this.mi(e)),t.node=s;var n=this.getItem(e),l=n[this.s.editValue||"value"];return jeeplus.isUndefined(l)&&(l=""),t.setValue(l,n),t.value=l,this.ni(e,t),!1!==i&&this.showItem(e),t.$inline||this.oi(e,s,!0),t.afterRender&&t.afterRender(),s},pi:function(e){return this.getItemNode(e)},mi:function(e){var t=this.pi(e);return t&&(t=t.getElementsByTagName("input")[0]||t),t},ii:function(e){return this.s.editor},ni:function(e,t){t.id=e,this.ai[e]=this.di=t,this.Eb++},qi:function(e){this.di==e&&(this.di=0),e.destroy&&e.destroy(),delete e.popup,delete e.node,delete this.ai[e.id],this.Eb--},focusEditor:function(e){var t=this.getEditor.apply(this,arguments);t&&t.focus&&t.focus()},editCancel:function(){this.editStop(null,null,!0)},Xy:function(e){if(e){var t=this.getEditor();if(t&&t.getPopup&&t.getPopup()==e.getTopParentView())return}this.editStop()},editStop:function(e){if(!this.Zx){this.Zx=1;var t=arguments[2],i=1;return e?i=this.ri(this.ai[e],t):this.si(function(e){i*=this.ri(e,t)}),this.Zx=0,i}},ug:function(e){var t=this.getItemNode(e);return{left:t.offsetLeft,top:t.offsetTop,height:t.offsetHeight,width:t.offsetWidth,parent:this.w}},oi:function(e,t,i){if(t.style){var s=this.ug(e);t.style.top=s.top+"px",t.style.left=s.left+"px",t.style.width=s.width-1+"px",t.style.height=s.height-1+"px",t.top=s.top,i&&s.parent.appendChild(t)}},si:function(e){for(var t in this.ai)e.call(this,this.ai[t])},ri:function(e,t){if(e&&!jeeplus.B){var i={value:e.getValue(),old:e.value};if(this.callEvent("onBeforeEditStop",[i,e,t])){if(!t){var s=i.old;if("string"==typeof i.value&&(s+=""),s!=i.value||e.config.liveEdit){var n=this.ti(e,i.value,!0);this.updateItem(e.row||e.id,n)}}e.$inline?e.node=null:jeeplus.html.remove(e.node);var l=e.config.suggest;return l&&"string"==typeof l&&jeeplus.$$(l).hide(),this.qi(e),this.Ws&&this.detachEvent(this.Ws),this.callEvent("onAfterEditStop",[i,e,t]),1}return 0}},validateEditor:function(e){var t=!0;if(this.s.rules){var i=this.getEditor(e),s=i.column||this.s.editValue||"value",n=this.s.rules[s],l=this.s.rules.$all;if(n||l){var a=this.data.getItem(i.row||i.id),r=i.getValue(),o=i.getInputNode();n&&(t=n.call(this,r,a,s)),l&&(t=l.call(this,r,a,s)&&t),t?jeeplus.html.removeCss(o,"jeeplus_invalid"):jeeplus.html.addCss(o,"jeeplus_invalid"),jeeplus.callEvent("onLiveValidation",[i,t,a,r])}}return t},getEditorValue:function(e){var t;return(t=0===arguments.length?this.di:this.getEditor(e))?t.getValue():void 0},getEditState:function(){return this.di||!1},editNext:function(e,t){if(e=!1!==e,1==this.Eb||t){var i=this.ui(this.di||t,function(e){return!!this.ii(e)},e);if(this.editStop())return i&&(this.edit(i),this.vi(i)),!1}},vi:function(){},ui:function(e,t,i){var s=this.getIndexById(e.id),n=this.data.order;if(i){for(var l=s+1;l<n.length;l++)if(t.call(this,n[l]))return n[l]}else for(l=s-1;0<=l;l--)if(t.call(this,n[l]))return n[l];return null},ti:function(e,t,i){var s=i?{}:this.getItem(e.id);return s[this.s.editValue||"value"]=t,s}},function(){function l(e){return"string"==typeof e?e:e.linkInput?e.s.id:("object"==typeof e?(jeeplus.isArray(e)&&(e={data:e}),e.view=e.view||"suggest"):!0===e&&(e={view:"suggest"}),jeeplus.ui(e).config.id)}function o(e){return((e.header&&e.header[0]?e.header[0].text:e.editValue||e.label)||"").toString().replace(/<[^>]*>/g,"")}jeeplus.editors={text:{focus:function(){this.getInputNode(this.node).focus(),this.getInputNode(this.node).select()},getValue:function(){return this.getInputNode(this.node).value},setValue:function(e){var t=this.getInputNode(this.node);t.value=e,function(e,t){var i=e.config.suggest;if(i){var s=e.config.suggest=l(i),n=jeeplus.$$(s);n&&t&&n.linkInput(t)}}(this,t)},getInputNode:function(){return this.node.firstChild},render:function(){return jeeplus.html.create("div",{class:"jeeplus_dt_editor"},"<input type='text' aria-label='"+o(this.config)+"'>")}},"inline-checkbox":{render:function(){return{}},getValue:function(){return this.node.checked},setValue:function(){},focus:function(){this.node.focus()},getInputNode:function(){},$inline:!0},"inline-text":{render:function(){return{}},getValue:function(){return this.node.value},setValue:function(){},focus:function(){try{this.node.select(),this.node.focus()}catch(e){}},getInputNode:function(){},$inline:!0},checkbox:{focus:function(){this.getInputNode().focus()},getValue:function(){return this.getInputNode().checked},setValue:function(e){this.getInputNode().checked=!!e},getInputNode:function(){return this.node.firstChild.firstChild},render:function(){return jeeplus.html.create("div",{class:"jeeplus_dt_editor"},"<div><input type='checkbox' aria-label='"+o(this.config)+"'></div>")}},select:{focus:function(){this.getInputNode().focus()},getValue:function(){return this.getInputNode().value},setValue:function(e){this.getInputNode().value=e},getInputNode:function(){return this.node.firstChild},render:function(){var t="",e=this.config.options||this.config.collection;if(e.data&&e.data.each)e.data.each(function(e){t+="<option value='"+e.id+"'>"+e.value+"</option>"});else if(jeeplus.isArray(e))for(var i=0;i<e.length;i++){var s=e[i],n=jeeplus.isUndefined(s.id),l=n?s:s.id,a=n?s:s.value;t+="<option value='"+l+"'>"+a+"</option>"}else for(var r in e)t+="<option value='"+r+"'>"+e[r]+"</option>";return jeeplus.html.create("div",{class:"jeeplus_dt_editor"},"<select aria-label='"+o(this.config)+"'>"+t+"</select>")}},popup:{focus:function(){this.getInputNode().focus()},destroy:function(){this.getPopup().hide()},getValue:function(){return this.getInputNode().getValue()||""},setValue:function(e){this.getPopup().show(this.node),this.getInputNode().setValue(e)},getInputNode:function(){return this.getPopup().getChildViews()[0]},getPopup:function(){return this.config.lG||(this.config.lG=this.config.popup=this.createPopup()),jeeplus.$$(this.config.popup)},createPopup:function(){var e,t=this.config.popup||this.config.suggest;if(t)return(e="object"!=typeof t||t.name?jeeplus.$$(t):(t.view=t.view||"suggest",jeeplus.ui(jeeplus.copy(t)))).mG||(e.linkInput?e.linkInput(document.body):this.linkInput&&this.linkInput(document.body),e.mG=!0),e;var i=jeeplus.editors.$popup[this.popupType];return"string"==typeof i||i.name||(i=jeeplus.editors.$popup[this.popupType]=jeeplus.ui(i),this.popupInit(i),i.linkInput||this.linkInput(document.body)),i.s.id},linkInput:function(e){jeeplus.UE(jeeplus.toNode(e),"keydown",jeeplus.bind(function(e){var t=e.which||e.keyCode,i=this.getInputNode();if(i.isVisible())if(i.moveSelection&&t<41&&32<t){var s;33==t&&(s="pgup"),34==t&&(s="pgdown"),35==t&&(s="bottom"),36==t&&(s="top"),37==t&&(s="left"),38==t&&(s="up"),39==t&&(s="right"),40==t&&(s="down"),i.moveSelection(s)}else 13!==t||"TEXTAREA"===e.target.nodeName&&e.shiftKey||jeeplus.callEvent("onEditEnd",[])},this))},popupInit:function(e){},popupType:"text",render:function(){return{}},$inline:!0}},jeeplus.editors.color=jeeplus.extend({focus:function(){},popupType:"color",popupInit:function(e){e.getChildViews()[0].attachEvent("onItemClick",function(e){jeeplus.callEvent("onEditEnd",[e])})}},jeeplus.editors.popup),jeeplus.editors.date=jeeplus.extend({focus:function(){},popupType:"date",setValue:function(e){this.wi=this.config.stringResult||e&&"string"==typeof e,jeeplus.editors.popup.setValue.call(this,e)},getValue:function(){return this.getInputNode().getValue(this.wi?jeeplus.i18n.parseFormatStr:"")||""},popupInit:function(e){e.getChildViews()[0].attachEvent("onDateSelect",function(e){jeeplus.callEvent("onEditEnd",[e])})}},jeeplus.editors.popup),jeeplus.editors.combo=jeeplus.extend({xi:function(e){return this.config.popup?this.config.popup.config.id:e?l(e):this.rt(e)},rt:function(){var e=jeeplus.editors.combo;return e.st=e.st||this.xi(!0)},render:function(){var e=jeeplus.html.create("div",{class:"jeeplus_dt_editor"},"<input type='text' role='combobox' aria-label='"+o(this.config)+"'>"),t=this.config.suggest=this.xi(this.config.suggest);return t&&(jeeplus.$$(t).linkInput(e.firstChild,!0),jeeplus.UE(e.firstChild,"click",jeeplus.bind(this.showPopup,this))),e},getPopup:function(){return jeeplus.$$(this.config.suggest)},showPopup:function(){var e=this.getPopup(),t=e.getList(),i=this.getInputNode(),s=this.yi;e.show(i),i.setAttribute("aria-expanded","true"),s?t.exists(s)&&(t.select(s),t.showItem(s)):(t.unselect(),t.showItem(t.getFirstId())),e.ae=i},afterRender:function(){this.showPopup()},setValue:function(e){if(this.yi=e,this.config.suggest){var t=jeeplus.$$(this.config.suggest),i=this.config.collection||this.config.options;i&&t.getList().data.importData(i),this.getInputNode(this.node).value=t.getItemText(e)}},getValue:function(){var e=this.getInputNode().value;if(this.config.suggest){var t=jeeplus.$$(this.config.suggest),i=t.getList();(e||i.getSelectedId&&i.getSelectedId())&&(e=t.getSuggestion())}return e}},jeeplus.editors.text),jeeplus.editors.richselect=jeeplus.extend({focus:function(){},getValue:function(){return this.getPopup().getValue()},setValue:function(e){var t=this.config.collection||this.config.options;this.getInputNode(),t&&this.getPopup().getList().data.importData(t),this.getPopup().show(this.node),this.getPopup().setValue(e)},getInputNode:function(){return this.getPopup().getList()},popupInit:function(e){e.linkInput(document.body)},popupType:"richselect"},jeeplus.editors.popup),jeeplus.editors.password=jeeplus.extend({render:function(){return jeeplus.html.create("div",{class:"jeeplus_dt_editor"},"<input type='password' aria-label='"+o(this.config)+"'>")}},jeeplus.editors.text),jeeplus.editors.$popup={text:{view:"popup",width:250,height:150,body:{view:"textarea"}},color:{view:"popup",body:{view:"colorboard"}},date:{view:"popup",width:250,height:250,padding:0,body:{view:"calendar",icons:!0,borderless:!0}},richselect:{view:"suggest",body:{view:"list",select:!0}}}}(),jeeplus.VirtualRenderStack={$init:function(){this.t={},jeeplus.UE(this.x,"scroll",jeeplus.bind(this.Ai,this)),jeeplus.env.touch&&this.attachEvent("onAfterScroll",jeeplus.bind(this.Ai,this)),this.Bi=[]},getItemNode:function(e){return this.t[e]},showItem:function(e){var t=this.Ci(),i=this.data.getIndexById(e),s=Math.floor(i/t.Di)*t.Ei,n=this.getScrollState();(s<n.y||s+this.s.height>=n.y+this.dc)&&this.scrollTo(0,s)},render:function(e,t,i){if(this.isVisible(this.s.id)&&!this.$blockRender)if(e){var s=this.getItemNode(e);switch(i){case"update":if(!s)return;var n=this.t[e]=this.Ne(t);jeeplus.html.insertBefore(n,s),jeeplus.html.remove(s);break;default:this.Fi()}}else this.callEvent("onBeforeRender",[this.data])&&(this.t={},this.Ai(null,!0),this.Gi=!1,this.callEvent("onAfterRender",[]))},Fi:function(){this.Gi||(this.Gi=!0,window.setTimeout(jeeplus.bind(function(){this.render()},this),1))},Hi:function(e){jeeplus.env.maxHTMLElementSize&&(e=Math.min(jeeplus.env.maxHTMLElementSize,e));var t=document.createElement("DIV");return t.style.cssText="height:"+e+"px; width:100%; overflow:hidden;",t},Ai:function(e,t){this.Bi=[];var i=this.Ci();(!this.y.firstChild||t)&&(this.y.innerHTML="",this.y.appendChild(this.Hi(i.Ii)),this.u=[this.y.firstChild]);for(var s=i.R;s<=i.Ji;){for(;this.u[s]&&this.u[s].Ki&&s<=i.Ji;)s++;if(s>i.Ji)break;for(var n=s;!this.u[n];)n--;var l=this.u[n],a=s*i.Di+(this.data.$min||0);if(a>(this.data.$max||1/0))break;var r=Math.min(a+i.Di-1,this.data.$max?this.data.$max-1:1/0),o=this.Hi(i.Ei),h=this.data.getIndexRange(a,r);if(!h.length)break;for(var u={$template:"Loading"},c=0;c<h.length;c++)h[c]||this.Bi.push(a+c),h[c]=this.jb(h[c]||u);o.innerHTML=h.join("");for(c=0;c<h.length;c++)this.t[this.data.getIdByIndex(a+c)]=o.childNodes[c];var d=parseFloat(l.style.height,10),p=(s-n)*i.Ei,f=d-p-i.Ei;if(jeeplus.html.insertBefore(o,p?l.nextSibling:l,this.y),(this.u[s]=o).Ki=!0,p<=0&&0<f)l.style.height=f+"px",this.u[s+1]=l;else if(p<0?jeeplus.html.remove(l):l.style.height=p+"px",0<f){var g=this.u[s+1]=this.Hi(f);jeeplus.html.insertBefore(g,o.nextSibling,this.y)}s++}if(this.Bi.length){var v=this.Bi[0],m=this.Bi.pop()+1;if(v<m){var j=m-v;if(this.cf(j,v))return;j=Math.max(j,this.s.datafetch||this.s.loadahead||0),this.loadNext(j,v)}}},Ci:function(){var e=this.getScrollState(),t=Math.max(0,e.y),i=this.bc,s=this.dc,n=this.type,l=Math.floor(i/n.width)||1,a=Math.floor(t/n.height),r=Math.ceil((s+t)/n.height)-1,o=this.data.$max?this.data.$max-this.data.$min:this.data.count();return{R:a,Ji:r,Li:t,Ii:Math.ceil(o/l)*n.height,Ei:n.height,Di:l}},ug:function(e){var t=this.getItemNode(e);return t||(this.showItem(e),this.Ai(),t=this.getItemNode(e)),{left:t.offsetLeft,top:t.offsetTop,height:t.offsetHeight,width:t.offsetWidth,parent:this.w}}},jeeplus.protoUI({name:"dataview",$init:function(e){e.sizeToContent&&this.$ready.unshift(this.Mi);var t=e.prerender||this.defaults.prerender;(!1===t||!0!==t&&"auto"!==e.height&&!e.autoheight)&&jeeplus.extend(this,jeeplus.VirtualRenderStack,!0),e.autoheight&&(e.scroll=!1),this.w.className+=" jeeplus_dataview",this.x.setAttribute("role","listbox")},Mi:function(){var e=jeeplus.html.create("DIV",0,this.type.template({}));e.style.position="absolute",document.body.appendChild(e),this.type.width=e.offsetWidth,this.type.height=e.offsetHeight,jeeplus.html.remove(e)},defaults:{scroll:!0,datafetch:50,navigation:!0},ad:"jeeplus_l_id",YF:"jeeplus_dataview_item",on_click:{jeeplus_dataview_item:function(e,t){this.s.select&&("multiselect"==this.s.select||this.s.multiselect?this.select(t,!1,"touch"==this.s.multiselect||e.ctrlKey||e.metaKey,e.shiftKey):this.select(t))}},on_dblclick:{},on_mouse_move:{},type:{template:jeeplus.template("#value#"),templateLoading:jeeplus.template("Loading..."),width:160,height:50,classname:function(e,t,i){var s="jeeplus_dataview_item ";return t.css&&(s+=t.css+" "),e.$css&&("object"==typeof e.$css&&(e.$css=jeeplus.html.createCss(e.$css)),s+=e.$css+" "),i&&i.$css&&(s+=i.$css+" "),s},aria:function(e,t,i){return'role="option"'+(i&&i.jeeplus_selected?' aria-selected="true" tabindex="0"':' tabindex="-1"')},templateStart:jeeplus.template('<div jeeplus_l_id="#id#" class="{common.classname()}" {common.aria()} style="width:{common.width}px; height:{common.height}px; float:left; overflow:hidden;">'),templateEnd:jeeplus.template("</div>")},Ni:function(e){return this.s.height=this.type.height*Math.ceil(this.data.count()/Math.floor(e/this.type.width))},autoheight_setter:function(e){return e&&(this.data.attachEvent("onStoreLoad",jeeplus.bind(this.resize,this)),this.w.style.overflowY="hidden"),e},$getSize:function(e,t){0<this.s.xCount&&"auto"!=this.type.width&&!this.Nw&&(this.s.width=this.type.width*this.s.xCount+(this.cc?jeeplus.ui.scrollSize:0)),this.s.yCount&&"auto"!=this.type.height&&(this.s.height=this.type.height*this.s.yCount);var i=this.s.width||this.bc;return this.s.autoheight&&i&&(this.Ni(i),this.scroll_setter(!1)),jeeplus.ui.view.prototype.$getSize.call(this,e,t)},iz:function(){var e=!1;return this.s.yCount&&"auto"==this.type.height&&(this.type.height=Math.floor(this.dc/this.s.yCount),e=!0),this.s.xCount&&("auto"==this.type.width||this.Nw)?(this.Nw=!0,this.type.width=Math.floor(this.bc/this.s.xCount),e=!0):this.Nw=!1,e},$setSize:function(e,t){if(jeeplus.ui.view.prototype.$setSize.call(this,e,t)){if(this.s.autoheight&&this.Ni()!=this.dc)return jeeplus.delay(this.resize,this);(this.iz()||this.Ai)&&this.render()}}},jeeplus.DataMove,jeeplus.DragItem,jeeplus.MouseEvents,jeeplus.KeysNavigation,jeeplus.SelectionModel,jeeplus.Scrollable,jeeplus.CustomPrint,jeeplus.ui.proto),jeeplus.DataDriver.htmltable={toObject:function(e){var t=(e=jeeplus.toNode(e)).rows;return jeeplus.html.remove(e),t},getRecords:function(e){for(var t=[],i=e[0]&&e[0].Oi?1:0;i<e.length;i++)t.push(e[i]);return t},getDetails:function(e){var t=e.getElementsByTagName("td");e={};for(var i=0;i<t.length;i++)e["data"+i]=t[i].innerHTML;return e},getInfo:function(e){return{size:0}},getOptions:function(){},getConfig:function(e){var t=[],i=e[0].getElementsByTagName("th");i.length&&(e[0].Oi=!0);for(var s=0;s<i.length;s++){var n={id:"data"+s,header:this.Pi(i[s].innerHTML)},l=this.Qi(i[s]);n=jeeplus.extend(n,l),t.push(n)}return t},Pi:function(e){var t=e.indexOf("json://");return-1!=t&&(e=JSON.parse(e.substr(t+7))),e},Qi:function(e){for(var t=e.attributes,i={},s=0;s<t.length;s++)i[t[s].nodeName]=this.Pi(t[s].nodeValue);return i.width=parseInt(i.width,10),i}},jeeplus.protoUI({name:"vscroll",defaults:{scroll:"x",scrollStep:40,scrollPos:0,scrollSize:18,scrollVisible:1,zoom:1},$init:function(e){var t=e.scroll||"x",i=this.x=jeeplus.toNode(e.container);i.className+=" jeeplus_vscroll_"+t,i.innerHTML="<div class='jeeplus_vscroll_body'></div>",jeeplus.UE(i,"scroll",this.Ri,{bind:this}),this.Si=0,this.Wi=0},reset:function(){this.Wi=this.config.scrollPos=0,this.x["x"==this.config.scroll?"scrollLeft":"scrollTop"]=0},Ti:function(e){return 15e5<e?(this.s.zoom=Math.floor(e/15e5)+1,this.Ui=e-this.Si,e=Math.floor(e/this.s.zoom)+this.Si):(this.s.zoom=1,this.Ui=1/0),e},scrollWidth_setter:function(e){return e=this.Ti(e),this.x.firstChild.style.width=e+"px",e},scrollHeight_setter:function(e){return e=this.Ti(e),this.x.firstChild.style.height=e+"px",e},sizeTo:function(e,t,i){e=e-(t||0)-(i||0);var s=this.s.scrollSize;jeeplus.env.isIE&&s&&(s+=1),s||!this.s.scrollVisible||jeeplus.env.$customScroll||(this.x.style.pointerEvents="none",s=14),s?(this.x.style.display="block",t&&(this.x.style.marginTop=t+"px"),this.x.style["x"==this.s.scroll?"width":"height"]=Math.max(0,e)+"px",this.x.style["x"==this.s.scroll?"height":"width"]=s+"px"):this.x.style.display="none",this.Si=e},getScroll:function(){return this.s.scrollPos*this.s.zoom},getSize:function(){return(this.s.scrollWidth||this.s.scrollHeight)*this.s.zoom},scrollTo:function(e){e<0&&(e=0);var t=this.s;(e=Math.min(((t.scrollWidth||t.scrollHeight)-this.Si)*t.zoom,e))<0&&(e=0);var i=e/t.zoom;return this.Wi!=i?(this.x["x"==t.scroll?"scrollLeft":"scrollTop"]=i,this.Vi(i),!0):void 0},Ri:function(){var e=this.x["x"==this.s.scroll?"scrollLeft":"scrollTop"];e!=this.Wi&&this.Vi(e)},Vi:function(e){this.Wi=e,this.s.scrollPos=Math.min(this.Ui,e*this.s.zoom)||0,this.callEvent("onScroll",[this.s.scrollPos])},activeArea:function(e,t){this.Xi=t,jeeplus.UE(e,jeeplus.env.isIE8?"mousewheel":"wheel",this.Yi,{bind:this}),this.uB(e)},uB:function(e){!jeeplus.env.touch&&window.navigator.pointerEnabled&&(jeeplus.html.addCss(e,"jeeplus_scroll_touch_ie",!0),jeeplus.UE(e,"pointerdown",function(e){("touch"==e.pointerType||"pen"==e.pointerType)&&(this.km=jeeplus.Touch.hm(e),this.vB=this.s.scrollPos)},{bind:this}),jeeplus.event(document.body,"pointermove",function(e){var t;this.km&&(this.lm=jeeplus.Touch.hm(e),"x"==this.s.scroll?t=this.lm.x-this.km.x:"y"==this.s.scroll&&(t=this.lm.y-this.km.y),t&&5<Math.abs(t)&&this.scrollTo(this.vB-t))},{bind:this}),jeeplus.event(window,"pointerup",function(e){this.km&&(this.km=this.lm=null)},{bind:this}))},Yi:function(e){var t=0,i=0===e.deltaMode?30:1;return jeeplus.env.isIE8&&(t=e.detail=-e.wheelDelta/30),e.deltaX&&Math.abs(e.deltaX)>Math.abs(e.deltaY)?this.Xi&&this.s.scrollVisible&&(t=e.deltaX/i):!this.Xi&&this.s.scrollVisible&&(t=jeeplus.isUndefined(e.deltaY)?e.detail:e.deltaY/i),jeeplus.env.isSafari&&(this.Yy=e.target||e.srcElement),t&&this.scrollTo(this.s.scrollPos+t*this.s.scrollStep)?jeeplus.html.preventEvent(e):void 0}},jeeplus.EventSystem,jeeplus.Settings),jeeplus.Number={getConfig:function(e){var t={decimalSize:0,groupSize:999},i=e.indexOf("0");0<i&&(t.decimalSize=e.length-i,t.decimalDelimiter=e[i-1],e=e.substr(0,i-1));var s=e.match(/[^0-9]/);return s&&(t.groupSize=e.length-s.index-1,t.groupDelimiter=e[s.index]),t},parse:function(e,t){if(!e||"string"!=typeof e)return e;var i="";if(t.decimalDelimiter){var s=e.indexOf(t.decimalDelimiter);-1<s&&(i=(i=e.substr(s+1).replace(/[^0-9]/g,"")).substr(0,Math.min(i.length,t.decimalSize)),e=e.substr(0,s))}var n="-"===e[0]?-1:1;return(e=e.replace(/[^0-9]/g,""))||(e="0"),i&&(e+="."+i),parseFloat(e)*n},format:function(e,t){if(""===e||void 0===e)return e;t=t||jeeplus.i18n;var i=(e=parseFloat(e))<0?"-":"";e=Math.abs(e),t.decimalOptional||(e=e.toFixed(t.decimalSize));var s=e.toString();s=s.split(".");var n="";if(t.groupSize){var l=t.groupSize,a=s[0].length;do{n=(0<(a-=l)?s[0].substr(a,l):s[0].substr(0,l+a))+(n?t.groupDelimiter+n:"")}while(0<a)}else n=s[0];return t.decimalSize?i+n+(s[1]?t.decimalDelimiter+s[1]:""):i+n},numToStr:function(t){return function(e){return jeeplus.Number.format(e,t)}}},jeeplus.Date={startOnMonday:!1,toFixed:function(e){return e<10?"0"+e:e},weekStart:function(e){var t=(e=this.copy(e)).getDay();return this.startOnMonday&&(0===t?t=6:t--),this.datePart(this.add(e,-1*t,"day"))},monthStart:function(e){return(e=this.copy(e)).setDate(1),this.datePart(e)},yearStart:function(e){return(e=this.copy(e)).setMonth(0),this.monthStart(e)},dayStart:function(e){return this.datePart(e,!0)},dateToStr:function(l,i){return"function"==typeof l?l:jeeplus.env.strict?function(t){var s="",n=0;return l.replace(/%[a-zA-Z]/g,function(i,e){s+=l.slice(n,e);s+=function(e){if("%d"==i)return jeeplus.Date.toFixed(e.getDate());if("%m"==i)return jeeplus.Date.toFixed(e.getMonth()+1);if("%j"==i)return e.getDate();if("%n"==i)return e.getMonth()+1;if("%y"==i)return jeeplus.Date.toFixed(e.getFullYear()%100);if("%Y"==i)return e.getFullYear();if("%D"==i)return jeeplus.i18n.calendar.dayShort[e.getDay()];if("%l"==i)return jeeplus.i18n.calendar.dayFull[e.getDay()];if("%M"==i)return jeeplus.i18n.calendar.monthShort[e.getMonth()];if("%F"==i)return jeeplus.i18n.calendar.monthFull[e.getMonth()];if("%h"==i)return jeeplus.Date.toFixed((e.getHours()+11)%12+1);if("%g"==i)return(e.getHours()+11)%12+1;if("%G"==i)return e.getHours();if("%H"==i)return jeeplus.Date.toFixed(e.getHours());if("%i"==i)return jeeplus.Date.toFixed(e.getMinutes());if("%a"==i)return 11<e.getHours()?jeeplus.i18n.pm[0]:jeeplus.i18n.am[0];if("%A"==i)return 11<e.getHours()?jeeplus.i18n.pm[1]:jeeplus.i18n.am[1];if("%s"==i)return jeeplus.Date.toFixed(e.getSeconds());if("%S"==i)return jeeplus.Date.toFixed(e.getMilliseconds());if("%W"==i)return jeeplus.Date.toFixed(jeeplus.Date.getISOWeek(e));if("%c"!=i)return i;var t=e.getFullYear();return t+="-"+jeeplus.Date.toFixed(e.getMonth()+1),t+="-"+jeeplus.Date.toFixed(e.getDate()),t+="T",t+=jeeplus.Date.toFixed(e.getHours()),(t+=":"+jeeplus.Date.toFixed(e.getMinutes()))+":"+jeeplus.Date.toFixed(e.getSeconds())}(t),n=e+2}),s+=l.slice(n,l.length)}:(l=l.replace(/%[a-zA-Z]/g,function(e){switch(e){case"%d":return'"+jeeplus.Date.toFixed(date.getDate())+"';case"%m":return'"+jeeplus.Date.toFixed((date.getMonth()+1))+"';case"%j":return'"+date.getDate()+"';case"%n":return'"+(date.getMonth()+1)+"';case"%y":return'"+jeeplus.Date.toFixed(date.getFullYear()%100)+"';case"%Y":return'"+date.getFullYear()+"';case"%D":return'"+jeeplus.i18n.calendar.dayShort[date.getDay()]+"';case"%l":return'"+jeeplus.i18n.calendar.dayFull[date.getDay()]+"';case"%M":return'"+jeeplus.i18n.calendar.monthShort[date.getMonth()]+"';case"%F":return'"+jeeplus.i18n.calendar.monthFull[date.getMonth()]+"';case"%h":return'"+jeeplus.Date.toFixed((date.getHours()+11)%12+1)+"';case"%g":return'"+((date.getHours()+11)%12+1)+"';case"%G":return'"+date.getHours()+"';case"%H":return'"+jeeplus.Date.toFixed(date.getHours())+"';case"%i":return'"+jeeplus.Date.toFixed(date.getMinutes())+"';case"%a":return'"+(date.getHours()>11?jeeplus.i18n.pm[0]:jeeplus.i18n.am[0])+"';case"%A":return'"+(date.getHours()>11?jeeplus.i18n.pm[1]:jeeplus.i18n.am[1])+"';case"%s":return'"+jeeplus.Date.toFixed(date.getSeconds())+"';case"%S":return'"+jeeplus.Date.toFixed(date.getMilliseconds())+"';case"%W":return'"+jeeplus.Date.toFixed(jeeplus.Date.getISOWeek(date))+"';case"%c":var t='"+date.getFullYear()+"';return t+='-"+jeeplus.Date.toFixed((date.getMonth()+1))+"',t+='-"+jeeplus.Date.toFixed(date.getDate())+"',t+="T",t+='"+jeeplus.Date.toFixed(date.getHours())+"',t+=':"+jeeplus.Date.toFixed(date.getMinutes())+"',t+=':"+jeeplus.Date.toFixed(date.getSeconds())+"',!0===i&&(t+="Z"),t;default:return e}}),!0===i&&(l=l.replace(/date\.get/g,"date.getUTC")),new Function("date","if (!date) return ''; if (!date.getMonth) date=jeeplus.i18n.parseFormatDate(date);  return \""+l+'";'))},strToDate:function(e,l){if("function"==typeof e)return e;var a,t,i,r=e.match(/%[a-zA-Z]/g),s="var temp=date.split(/[^0-9a-zA-Z]+/g);";if(!jeeplus.i18n.calendar.monthShort_hash){for(i=jeeplus.i18n.calendar.monthShort,t=jeeplus.i18n.calendar.monthShort_hash={},a=0;a<i.length;a++)t[i[a]]=a;for(i=jeeplus.i18n.calendar.monthFull,t=jeeplus.i18n.calendar.monthFull_hash={},a=0;a<i.length;a++)t[i[a]]=a}if(jeeplus.env.strict)return function(e){if(!e)return"";if("object"==typeof e)return e;var t=e.split(/[^0-9a-zA-Z]+/g),i=[0,0,1,0,0,0,0];for(a=0;a<r.length;a++){var s=r[a];if("%y"==s)i[0]=1*t[a]+(30<t[a]?1900:2e3);else if("%Y"==s)i[0]=1*(t[a]||0),i[0]<30&&(i[0]+=2e3);else if("%n"==s||"%m"==s)i[1]=(t[a]||1)-1;else if("%M"==s)i[1]=jeeplus.i18n.calendar.monthShort_hash[t[a]]||0;else if("%F"==s)i[1]=jeeplus.i18n.calendar.monthFull_hash[t[a]]||0;else if("%j"==s||"%d"==s)i[2]=t[a]||1;else if("%g"==s||"%G"==s||"%h"==s||"%H"==s)i[3]=t[a]||0;else if("%a"==s)i[3]=i[3]%12+((t[a]||"")==jeeplus.i18n.am[0]?0:12);else if("%A"==s)i[3]=i[3]%12+((t[a]||"")==jeeplus.i18n.am[1]?0:12);else if("%i"==s)i[4]=t[a]||0;else if("%s"==s)i[5]=t[a]||0;else if("%S"==s)i[6]=t[a]||0;else if("%c"==s){var n=/(\d+)-(\d+)-(\d+)T(\d+):(\d+):(\d+)(\+.*|)/g.exec(e);i[0]=1*(n[1]||0),i[0]<30&&(i[0]+=2e3),i[1]=(n[2]||1)-1,i[2]=n[3]||1,i[3]=n[4]||0,i[4]=n[5]||0,i[5]=n[6]||0}}return l?new Date(Date.UTC(i[0],i[1],i[2],i[3],i[4],i[5],i[6])):new Date(i[0],i[1],i[2],i[3],i[4],i[5],i[6])};for(a=0;a<r.length;a++)switch(r[a]){case"%j":case"%d":s+="set[2]=temp["+a+"]||1;";break;case"%n":case"%m":s+="set[1]=(temp["+a+"]||1)-1;";break;case"%y":s+="set[0]=temp["+a+"]*1+(temp["+a+"]>30?1900:2000);";break;case"%g":case"%G":case"%h":case"%H":s+="set[3]=temp["+a+"]||0;";break;case"%i":s+="set[4]=temp["+a+"]||0;";break;case"%Y":s+="set[0]=(temp["+a+"]||0)*1; if (set[0]<30) set[0]+=2000;";break;case"%a":s+="set[3]=set[3]%12+(temp["+a+"]==jeeplus.i18n.am[0]?0:12);";break;case"%A":s+="set[3]=set[3]%12+(temp["+a+"]==jeeplus.i18n.am[1]?0:12);";break;case"%s":s+="set[5]=temp["+a+"]||0;";break;case"%S":s+="set[6]=temp["+a+"]||0;";break;case"%M":s+="set[1]=jeeplus.i18n.calendar.monthShort_hash[temp["+a+"]]||0;";break;case"%F":s+="set[1]=jeeplus.i18n.calendar.monthFull_hash[temp["+a+"]]||0;";break;case"%c":s+="var res = date.split('T');",s+="if(res[0]){ var d = res[0].split('-');",s+="set[0]= (d[0]||0)*1; if (set[0]<30) set[0]+=2000;",s+="set[1]= (d[1]||1)-1;",s+="set[2]= d[2]||1;}",s+="if(res[1]){ var t = res[1].split(':');",s+="set[3]= t[0]||0;",s+="set[4]= t[1]||0;",s+="set[5]= parseInt(t[2])||0;}"}var n="set[0],set[1],set[2],set[3],set[4],set[5], set[6]";return l&&(n=" Date.UTC("+n+")"),new Function("date","if (!date) return ''; if (typeof date == 'object') return date; var set=[0,0,1,0,0,0,0]; "+s+" return new Date("+n+");")},getISOWeek:function(e){if(!e)return!1;var t=e.getDay();0===t&&(t=7);var i=new Date(e.valueOf());i.setDate(e.getDate()+(4-t));var s=i.getFullYear(),n=Math.floor((i.getTime()-new Date(s,0,1).getTime())/864e5);return 1+Math.floor(n/7)},getUTCISOWeek:function(e){return this.getISOWeek(e)},Jv:function(e,t,i,s){if(i){var n=s(e,t);if(n)for(var l=0<i?1:-1;n;)e.setHours(e.getHours()+l),n=s(e,t),l+=0<i?1:-1}},add:function(e,t,i,s){s&&(e=this.copy(e));var n=jeeplus.Date.copy(e);switch(i){case"day":e.setDate(e.getDate()+t),this.Jv(e,n,t,function(e,t){return jeeplus.Date.datePart(t,!0).valueOf()==jeeplus.Date.datePart(e,!0).valueOf()});break;case"week":e.setDate(e.getDate()+7*t),this.Jv(e,n,7*t,function(e,t){return jeeplus.Date.datePart(t,!0).valueOf()==jeeplus.Date.datePart(e,!0).valueOf()});break;case"month":e.setMonth(e.getMonth()+t),this.Jv(e,n,t,function(e,t){return t.getMonth()==e.getMonth()&&t.getYear()==e.getYear()});break;case"year":e.setYear(e.getFullYear()+t),this.Jv(e,n,t,function(e,t){return t.getFullYear()==e.getFullYear()});break;case"hour":e.setHours(e.getHours()+t),this.Jv(e,n,t,function(e,t){return t.getHours()==e.getHours()&&jeeplus.Date.datePart(t,!0)==jeeplus.Date.datePart(e,!0)});break;case"minute":e.setMinutes(e.getMinutes()+t);break;default:jeeplus.Date.add[i](e,t,i)}return e},datePart:function(e,t){t&&(e=this.copy(e));var i=this.copy(e);return i.setHours(0),i.getDate()!=e.getDate()?e.setHours(1):e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e},timePart:function(e,t){return t&&(e=this.copy(e)),(e.valueOf()/1e3-60*e.getTimezoneOffset())%86400},copy:function(e){return new Date(e.valueOf())},equal:function(e,t){return!(!e||!t)&&e.valueOf()===t.valueOf()},isHoliday:function(e){return 0===(e=e.getDay())||6==e?"jeeplus_cal_event":void 0}},jeeplus.i18n={Zi:["fullDateFormat","timeFormat","dateFormat","longDateFormat","parseFormat","parseTimeFormat"],parseFormat:"%Y-%m-%d %H:%i",parseTimeFormat:"%H:%i",numberFormat:jeeplus.Number.format,priceFormat:function(e){return jeeplus.i18n.$i(jeeplus.i18n.numberFormat(e,jeeplus.i18n._i))},setLocale:function(e){var s=function(e,t){for(var i in t)"object"!=typeof t[i]||jeeplus.isArray(t[i])?e[i]=t[i]:(e[i]||(e[i]={}),s(e[i],t[i]))};"string"==typeof e&&(e=this.locales[e]),e&&s(this,e);for(var t=jeeplus.i18n.Zi,i=0;i<t.length;i++){var n=t[i],l=jeeplus.i18n[n+"UTC"];jeeplus.i18n[n+"Str"]=jeeplus.Date.dateToStr(jeeplus.i18n[n],l),jeeplus.i18n[n+"Date"]=jeeplus.Date.strToDate(jeeplus.i18n[n],l)}this.$i=jeeplus.template(this.price),this._i=this.priceSettings||this,this.intFormat=jeeplus.Number.numToStr({groupSize:this.groupSize,groupDelimiter:this.groupDelimiter,decimalSize:0})}},jeeplus.i18n.locales={},jeeplus.i18n.locales["en-US"]={groupDelimiter:",",groupSize:3,decimalDelimiter:".",decimalSize:2,dateFormat:"%m/%d/%Y",timeFormat:"%h:%i %A",longDateFormat:"%d %F %Y",fullDateFormat:"%m/%d/%Y %h:%i %A",am:["am","AM"],pm:["pm","PM"],price:"${obj}",priceSettings:{groupDelimiter:",",groupSize:3,decimalDelimiter:".",decimalSize:2},fileSize:["b","Kb","Mb","Gb","Tb","Pb","Eb"],calendar:{monthFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],hours:"Hours",minutes:"Minutes",done:"Done",clear:"Clear",today:"Today"},dataExport:{page:"Page",of:"of"},PDFviewer:{of:"of",automaticZoom:"Automatic Zoom",actualSize:"Actual Size",pageFit:"Page Fit",pageWidth:"Page Width",pageHeight:"Page Height"},aria:{calendar:"Calendar",increaseValue:"Increase value",decreaseValue:"Decrease value",navMonth:["Previous month","Next month"],navYear:["Previous year","Next year"],navDecade:["Previous decade","Next decade"],dateFormat:"%d %F %Y",monthFormat:"%F %Y",yearFormat:"%Y",hourFormat:"Hours: %h %A",minuteFormat:"Minutes: %i",removeItem:"Remove item",pages:["First page","Previous page","Next page","Last page"],page:"Page",headermenu:"Header menu",openGroup:"Open column group",closeGroup:"Close column group",closeTab:"Close tab",showTabs:"Show more tabs",resetTreeMap:"Reset tree map",navTreeMap:"Level up",nextTab:"Next tab",prevTab:"Previous tab",multitextSection:"Add section",multitextextraSection:"Remove section",showChart:"Show chart",hideChart:"Hide chart",resizeChart:"Resize chart"},richtext:{underline:"Underline",bold:"Bold",italic:"Italic"},combo:{select:"Select",selectAll:"Select all",unselectAll:"Unselect all"}},jeeplus.i18n.setLocale("en-US"),jeeplus.protoUI({name:"datatable",defaults:{leftSplit:0,rightSplit:0,topSplit:0,columnWidth:100,minColumnWidth:20,minColumnHeight:26,prerender:!1,autoheight:!1,autowidth:!1,header:!0,fixedRowHeight:!0,scrollAlignY:!0,scrollX:!0,scrollY:!0,datafetch:50,navigation:!0},$skin:function(){var e=jeeplus.skin.$active.rowHeight,t=this.defaults;t.rowHeight=e,t.headerRowHeight=jeeplus.skin.$active.barHeight},on_click:{jeeplus_richfilter:function(){return!1},jeeplus_table_checkbox:function(e,t){t=this.locate(e);var i=this.getItem(t.row),s=this.getColumnConfig(t.column),n=e.target||e.srcElement,l=("checkbox"==n.type?n.checked:i[t.column]!=s.checkValue)?s.checkValue:s.uncheckValue,a={};return a[t.column]=l,this.updateItem(t.row,a,this.s.checkboxRefresh?"update":"save"),this.callEvent("onCheck",[t.row,t.column,l]),!1},jeeplus_table_radio:function(e){var i=this.locate(e),t=this.getItem(i.row),s=this.getColumnConfig(i.column);return this.eachRow(function(e){var t=this.data.pull[e];t&&t[i.column]==s.checkValue&&(t[i.column]=s.uncheckValue)}),t[i.column]=s.checkValue,this.callEvent("onCheck",[i.row,i.column,!0]),this.refresh(),!1}},on_dblclick:{jeeplus_table_checkbox:function(){return this.on_click.jeeplus_table_checkbox.apply(this,arguments)}},on_context:{},$init:function(e){this.on_click=jeeplus.extend({},this.on_click);this.w.innerHTML="<div class='jeeplus_ss_header'><div class='jeeplus_hs_left'></div><div class='jeeplus_hs_center'></div><div class='jeeplus_hs_right'></div></div><div class='jeeplus_ss_body'><div class='jeeplus_ss_left'><div class='jeeplus_ss_center_scroll'></div></div><div class='jeeplus_ss_center'><div class='jeeplus_ss_center_scroll' role='rowgroup'></div></div><div class='jeeplus_ss_right'><div class='jeeplus_ss_center_scroll'></div></div></div><div class='jeeplus_ss_hscroll' role='scrollbar' aria-orientation='horizontal'></div><div class='jeeplus_ss_footer'><div class='jeeplus_hs_left'></div><div class='jeeplus_hs_center'></div><div class='jeeplus_hs_right'></div></div><div class='jeeplus_ss_vscroll_header'></div><div class='jeeplus_ss_vscroll' role='scrollbar' aria-orientation='vertical'></div><div class='jeeplus_ss_vscroll_footer'></div>",this.bj=this.w.id=this.name+jeeplus.uid(),this.w.className+=" jeeplus_dtable",this.y=this.w,this.I=this.w.firstChild,this.Vf=this.I.nextSibling,this.cj=this.Vf.nextSibling.nextSibling,this.x.setAttribute("role","grid"),e.editable||this.x.setAttribute("aria-readonly","true"),this.data.provideApi(this,!0),this.data.attachEvent("onParse",jeeplus.bind(this.dj,this)),this.$ready.push(this.ej),this.fj=[],this.bm=[],this.Mt=[],this.Nt=[],this.gj=[],this.hj={},this.ij={},this.$g=this.jj=0,this.Ns=[],this.data.attachEvent("onServerConfig",jeeplus.bind(this.kj,this)),this.data.attachEvent("onServerOptions",jeeplus.bind(this.lj,this)),this.attachEvent("onViewShow",function(){this.Ow(),this.nz()}),this.data.attachEvent("onClearAll",jeeplus.bind(function(e){e||(this.bk=this.jk=0,this.Zj&&this.Zj.reset(),this.Wj&&this.Wj.reset(),this.oH(0))},this)),this.attachEvent("onDestruct",this.YC),this.attachEvent("onKeyPress",this.DD),this.attachEvent("onScrollY",this.dF),jeeplus.callEvent("onDataTable",[this,e])},mj:function(){this.nj=this.oj=jeeplus.ui.scrollSize,jeeplus.html.addStyle("#"+this.bj+" .jeeplus_cell { height:"+this.s.rowHeight+"px; line-height:"+(this.s.rowLineHeight||this.s.rowHeight)+"px;"+(this.s.fixedRowHeight?"":"white-space:normal;")+" }"),jeeplus.html.addStyle("#"+this.bj+" .jeeplus_hcell { height:"+this.s.headerRowHeight+"px; line-height:"+this.s.headerRowHeight+"px;}"),this.mj=function(){}},ej:function(){this.data.attachEvent("onStoreLoad",jeeplus.bind(this.nz,this)),this.data.attachEvent("onSyncApply",jeeplus.bind(this.nz,this)),this.data.attachEvent("onStoreUpdated",jeeplus.bind(function(){return this.render.apply(this,arguments)},this)),this.data.attachEvent("onStoreUpdated",jeeplus.bind(this.pj,this)),this.render()},refresh:function(){this.render()},render:function(e,t,i){if("save"!=i){if("move"==i){var s=jeeplus.DragControl.getContext();if(s&&s.fragile)return}if(!this.fj.length){var n=this.s.columns;if(!n||!n.length){if(!this.s.autoConfig||!this.data.order.length||this.bm.length)return;this.tj=0,this.qj()}this.rj()}if(!this.isVisible(this.s.id)||this.$blockRender)return this.mj();var l=this.config.experimental&&!this.s.subview;return!e||-1==t||"paint"!=i&&"update"!=i||l?(this.sj&&(clearTimeout(this.sj),this.sj=0),this.callEvent("onBeforeRender",[this.data])?(this.mj(),this.tj||this.uj(),this.bc&&(l&&("paint"==i||"update"==i)&&e?this.Kv(e):this.vj(!0,!0)),e&&"update"==i||(this.wj=this.xj(),this.yj()),this.x.setAttribute("aria-colcount",Math.max(this.bm.length,this.fj.length)),this.x.setAttribute("aria-rowcount",this.data.count()),this.callEvent("onAfterRender",[this.data]),!0):void 0):(this.sj&&clearTimeout(this.sj),void(this.sj&&this.Lv!=e?(this.Lv=null,this.sj=jeeplus.delay(function(){this.render()},this)):(this.Lv=e,this.sj=jeeplus.delay(function(){this.render(e,-1,i)},this))))}},getColumnConfig:function(e){return this.Aj[e]||this.am[e]},lj:function(e){for(var t in e){var i=this.getColumnConfig(t),s=new jeeplus.DataCollection({data:e[t]});this.Ns.push(s),this.Bj(s,i)}},kj:function(e){e.columns&&this.tj&&this.refreshColumns(null,!0)},rj:function(){if(this.s.columns){this.fj=this.s.columns,this.Aj={};for(var e=0;e<this.fj.length;e++){var t=this.fj[e],i=(this.Aj[t.id]=t).cssFormat;if(i&&(t.cssFormat=jeeplus.toFunctor(i,this.$scope)),t.width=t.width||this.s.columnWidth,"string"==typeof t.format&&(t.format=jeeplus.i18n[t.format]||window[t.format]),t.numberFormat){var s=t.numberFormat;"string"==typeof s&&(t.numberFormat=s=jeeplus.Number.getConfig(s)),t.format=jeeplus.Number.numToStr(s),t.editFormat=t.editFormat||function(e){return jeeplus.Number.format(e,s)},t.editParse=t.editParse||function(e){return jeeplus.Number.parse(e,s)}}jeeplus.isUndefined(t.checkValue)&&(t.checkValue=1),jeeplus.isUndefined(t.uncheckValue)&&(t.uncheckValue=0),t.css&&"object"==typeof t.css&&(t.css=jeeplus.html.createCss(t.css));var n=t.template;n&&("string"==typeof n&&(n=n.replace(/#\$value#/g,"#"+t.id+"#")),t.template=jeeplus.template(n))}this.Mj("header",this.Mt),this.Mj("footer",this.Nt),this.callEvent("onStructureLoad",[])}},Cj:function(){this.uj()},YC:function(){for(var e=0;e<this.fj.length;e++)delete this.fj[e].attached,delete this.fj[e].node},uj:function(){this.Fj=this.fj.length-this.s.rightSplit;for(var e=this.Gj=0;e<this.fj.length;e++){if(!this.fj[e].node){var t=jeeplus.html.create("DIV");t.style.width=this.fj[e].width+"px",this.fj[e].node=t}e>=this.s.leftSplit&&e<this.Fj&&(this.Gj+=this.fj[e].width)}var i=[];if(this.s.rightSplit){var s=this.fj.length-this.s.rightSplit;i[s]=" jeeplus_first",i[s-1]=" jeeplus_last"}if(this.s.leftSplit){var n=this.s.leftSplit;i[n]=" jeeplus_first",i[n-1]=" jeeplus_last"}i[0]=(i[0]||"")+" jeeplus_first";var l=this.fj.length-1;i[l]=(i[l]||"")+" jeeplus_last";for(e=0;e<this.fj.length;e++){var a=this.fj[e].node;a.setAttribute("column",e),a.className="jeeplus_column "+(this.fj[e].css||"")+(i[e]||"")}this.Hj(),this.Ij(),this.Jj(),this.Kj(),this.tj=!0},Ij:function(){for(var e=0,t=0;t<this.fj.length;t++){var i=this.fj[t];(t==this.s.leftSplit||t==this.Fj)&&(e=0),i.node&&(i.node.style.left=e+"px",(this.s.leftSplit||this.s.rightSplit)&&(jeeplus.html.remove(i.node),i.attached=!1)),e+=i.width}},Kj:function(){this.Lj||(this.Lj=0),this.$g=this.jj=0,this.s.header&&(this.fk(this.I,0,1),this.Mj("header",this.Mt),this.$g=this.Mt.Ot,this.Nj(this.I,"header",this.Mt)),this.s.footer&&(this.fk(this.cj,0,1),this.Mj("footer",this.Nt),this.jj=this.Nt.Ot,this.Nj(this.cj,"footer",this.Nt)),this.refreshHeaderContent(!1,!1),this.Oj(),this.Nk&&this.markSorting(this.Nk,this.Ok)},RF:function(e,t,i){var s=0,n=e.colspan||1,l="jeeplus_hcell "+(e.css||"");if(e.rotate)l+=" jeeplus_measure_rotate";else for(var a=0;a<n;a++)s+=this.fj[i+a]?this.fj[i+a].width:this.config.columnWidth;var r=jeeplus.html.getTextSize([e.text],l,s);return(e.rotate?r.width:r.height)+1},Mj:function(e,t){for(var i=0,s=0;s<this.fj.length;s++){(r=this.fj[s][e])&&"object"==typeof r&&r.length||(jeeplus.isUndefined(r)&&(r="header"==e?this.fj[s].id:""),r=[r]);for(var n=0;n<r.length;n++)"object"!=typeof r[n]&&(r[n]={text:r[n]}),r[n]&&r[n].height&&(t[n]=r[n].height),r[n]&&r[n].autoheight&&(t[n]=this.RF(r[n],this.fj[s],s));i=Math.max(i,r.length),this.fj[s][e]=r}for(s=(t.Ot=i)-1;0<=s;s--)t[s]=t[s]||this.s.headerRowHeight,t.Ot+=1*t[s];for(s=0;s<this.fj.length;s++){var l=this.fj[s][e];for(n=0;n<l.length;n++){if(l[n]&&l[n].rowspan)for(var a=1;a<l[n].rowspan;a++)l[n+a]=null;if(l[n]&&l[n].colspan)for(a=1;a<l[n].colspan;a++)this.fj[s+a][e][n]=null}}for(s=0;s<this.fj.length;s++){var r;if((r=this.fj[s][e]).length<i){var o=r.length-1;r[o].rowspan=i-r.length+1;for(n=1+o;n<i;n++)r[n]=null}}return i},Pj:function(e,t){for(var i=e.getElementsByTagName("TD"),s=0;s<i.length;s++)if(i[s].getAttribute("active_id")==t)return i[s]},getHeaderContent:function(e){var t=this.Pj(this.I,e);if(t||(t=this.Pj(this.cj,e)),t){var i=this.hj[e],s=jeeplus.ui.datafilter[i.content];return s.getHelper?s.getHelper(t,i):{type:s,getValue:function(){return s.getValue(t)},setValue:function(e){return s.setValue(t,e)}}}},Pt:function(e,t,i){var s=i?-1:0;for(i+=t;t<i;t++)s+=e[t]+1;return s},Qj:function(e,t,i,s,n){if(e==t)return"";for(var l="<table role='presentation' style='width:"+i+"px' cellspacing='0' cellpadding='0'>",a=e;a<t;a++){l+="<tr class='jeeplus_size_row'>";for(a=e;a<t;a++)l+="<td style='width:"+this.fj[a].width+"px;'></td>";l+="</tr>"}for(var r=this.fj[0][s].length,o=0;o<r;o++){l+="<tr section='"+s+"' role='row'>";for(a=e;a<t;a++){var h=this.fj[a][s][o];if(null!==h){h.content&&(h.contentId=h.contentId||jeeplus.uid(),h.columnId=this.fj[a].id,h.format=this.fj[a].format,h.text=jeeplus.ui.datafilter[h.content].render(this,h),this.hj[h.contentId]=h,this.Rj=!0),l+="<td  role='presentation' column='"+(h.colspan?h.colspan-1+a:a)+"'";var u="";a==e&&(u+="jeeplus_first"),t-1<=a+(h.colspan?h.colspan-1:0)&&(u+=" jeeplus_last"),u&&(l+=' class="'+u+'"');var c=n[o],d="";h.contentId&&(l+=" active_id='"+h.contentId+"'"),h.colspan&&(l+=" colspan='"+h.colspan+"'"),h.rowspan&&(l+=" rowspan='"+h.rowspan+"'",c=this.Pt(this.Mt,o,h.rowspan)),c!=this.s.headerRowHeight&&(d=" style='line-height:"+c+"px; height:"+c+"px;'");var p="jeeplus_hcell",f=h.css;f&&("object"==typeof f&&(h.css=f=jeeplus.html.createCss(f)),p+=" "+f),this.fj[a].$selected&&(p+=" jeeplus_sel_hcell"),l+="><div role='columnheader' class='"+p+"'"+d+">";var g=""===h.text?"&nbsp;":h.text;h.rotate&&(g="<div class='jeeplus_rotate' style='width:"+(c-10)+"px; transform-origin:center "+(c-15)/2+"px;-webkit-transform-origin:center "+(c-15)/2+"px;'>"+g+"</div>"),l+=g+"</div></td>"}}l+="</tr>"}return l+"</tr></table>"},showItemByIndex:function(e,t){var i=this.s.pager;if(i){var s=Math.floor(e/i.size);s!=i.page&&jeeplus.$$(i.id).select(s)}if(-1!=e&&(e<(l=this.Sj())[0]+1||e>=l[1]-1)){var n=this.Tj(i?this.data.$min:0,e);e<l[0]+1?n=Math.max(0,n-1)-this.xD:(n+=this.Uj(e)-this.Vj,0<e&&(n+=this.Uj(e-1)-1)),this.Wj.scrollTo(n)}if(-1!=t){if(t<this.s.leftSplit)return;if(t>=this.Fj)return;var l;if(t<(l=this.Xj())[0]+1||t>=l[1]-1){n=0;for(var a=this.s.leftSplit;a<t;a++)n+=this.fj[a].width;t<l[0]+1||(n+=this.fj[t].width-this.Yj),this.Zj.scrollTo(n)}}},showCell:function(e,t){if(!t||!e){var i=this.getSelectedId(!0);1==i.length&&(t=t||i[0].column,e=e||i[0].row)}t=t?this.getColumnIndex(t):-1,e=e?this.getIndexById(e):-1,this.showItemByIndex(e,t)},scrollTo:function(e,t){if(this.Zj){if(this.$j)return this.$j(e,t);null!==e&&this.Zj.scrollTo(e),null!==t&&this.Wj.scrollTo(t)}},getScrollState:function(){if(this._j)return this._j();var e=this.ck?0:this.aC||0;return{x:this.bk||0,y:this.jk+e}},showItem:function(e){this.showItemByIndex(this.getIndexById(e),-1)},Nj:function(e,t,i){e.childNodes[0].innerHTML=this.Qj(0,this.s.leftSplit,this.dk,t,i),e.childNodes[1].innerHTML=this.Qj(this.s.leftSplit,this.Fj,this.Gj,t,i),e.childNodes[1].onscroll=jeeplus.bind(this._s,this),e.childNodes[2].innerHTML=this.Qj(this.Fj,this.fj.length,this.ek,t,i)},_s:function(){var e=this.getScrollState().x,t=this.I.childNodes[1].scrollLeft;t!=e&&this.scrollTo(t,null)},pj:function(){this.refreshHeaderContent(!0,!0)},nz:function(){this.refreshHeaderContent(!1,!0)},refreshHeaderContent:function(e,t,i){this.s.header&&(t&&this.fk(this.I,e,1,i),this.fk(this.I,e,0,i)),this.s.footer&&(t&&this.fk(this.cj,e,1,i),this.fk(this.cj,e,0,i))},refreshFilter:function(e){(!e||this.hj[e])&&this.refreshHeaderContent(!1,!0,e)},fk:function(e,t,i,s){if(this.Rj&&e)for(var n=e.getElementsByTagName("TD"),l=0;l<n.length;l++)if(n[l].getAttribute("active_id")){var a=this.hj[n[l].getAttribute("active_id")];if(s&&s!=a.columnId)continue;var r=jeeplus.ui.datafilter[a.content];i?r.getValue&&(a.value=r.getValue(n[l])):(!t||r.trackCells)&&r.refresh(this,n[l],a)}},headerContent:[],gk:function(e,t,i){this.oj?(e.style.height=Math.max(t,1)-1+"px",e.style.width=(this.Fj?0:i)+this.oj-1+"px",jeeplus.env.isWebKit&&e.offsetWidth):e.style.display="none"},Oj:function(){this.s.header&&this.gk(this.hk,this.$g,this.Lj),this.s.footer&&this.gk(this.ik,this.jj,this.Lj)},sk:function(e,t){var i=!(this.s.autowidth||!1===this.s.scrollX);this.nj=i?jeeplus.ui.scrollSize:0;var s=!(this.s.autoheight||!1===this.s.scrollY);this.oj=s?jeeplus.ui.scrollSize:0,jeeplus.env.touch&&(i=s=!1),this.Zj&&(this.Zj.s.scrollSize=this.nj,this.Zj.s.scrollVisible=i),this.Wj&&(this.Wj.s.scrollSize=this.oj,this.Wj.s.scrollVisible=s)},Hj:function(){var e,t;if(this.jk=0,this.bk=0,e=t=1,(this.s.autoheight||!1===this.s.scrollY)&&(t=this.oj=0),(this.s.autowidth||!1===this.s.scrollX)&&(e=this.nj=0),jeeplus.env.touch&&(e=t=0),this.Zj||(this.Zj=new jeeplus.ui.vscroll({container:this.cj.previousSibling,scrollWidth:this.Gj,scrollSize:this.nj,scrollVisible:e}),!e||this.nj||jeeplus.env.$customScroll||(this.Zj.x.style.position="absolute"),this.Zj.attachEvent("onScroll",jeeplus.bind(this.kk,this))),!this.Wj){this.hk=this.cj.nextSibling;var i=this.hk.nextSibling;this.ik=i.nextSibling,this.Wj=new jeeplus.ui.vscroll({container:i,scrollHeight:100,scroll:"y",scrollSize:this.oj,scrollVisible:t}),this.Wj.activeArea(this.Vf),this.Zj.activeArea(this.Vf,!0),this.Wj.attachEvent("onScroll",jeeplus.bind(this.lk,this))}this.bc&&this.callEvent("onResize",[this.bc,this.dc]),jeeplus.env.$customScroll&&jeeplus.CustomScroll.enable(this),this.Hj=function(){}},columnId:function(e){return this.fj[e].id},getColumnIndex:function(e){for(var t=0;t<this.fj.length;t++)if(this.fj[t].id==e)return t;return-1},nk:function(e,t){var i,s=0,n=0,l=0,a=0,r=0;for(i=0;i<this.fj.length&&((this.Fj==i||this.s.leftSplit==i)&&(s=0,r++),this.fj[i].id!=t);i++)s+=this.fj[i].width;for(n+=this.fj[i].width,i=0;i<this.data.order.length&&this.data.order[i]!=e;i++)a+=this.Uj(i);return l+=this.Uj(i),[s,n,a-this.jk,l,this.Vf.childNodes[r]]},ok:function(){return this.row},locate:function(e,t){if(this.s.subview&&this!=jeeplus.$$(e))return null;for(e=e.target||e.srcElement||e;e&&e.getAttribute&&e!==this.$view;){var i=jeeplus.html.TC(e).toString(),s=null;if(-1!=i.indexOf("jeeplus_cell")&&((s=this.pk(e))&&(s.row=this.data.order[s.rind])),-1!=i.indexOf("jeeplus_hcell")&&((s=this.pk(e))&&(s.header=!0)),s)return t?s.header?null:s.row:(s.column=this.fj[s.cind].id,s.toString=this.ok,s);e=e.parentNode}return null},pk:function(e){var t=e.parentNode;if(!t)return null;var i=1*(e.getAttribute("column")||t.getAttribute("column")),s=e.getAttribute("row")||0,n=1*(e.getAttribute("colspan")||t.getAttribute("colspan"));if(!s)for(var l=0;l<t.childNodes.length;l++)t.childNodes[l]==e&&(s=l>=this.s.topSplit?l+this.fj[i].qk-this.s.topSplit:l);return{rind:s,cind:i,span:n}},ZF:function(){for(var e=-this.Yj,t=0;t<this.fj.length;t++)e+=this.fj[t].width;this.bk=Math.min(this.bk,Math.max(0,e))},rk:function(e){this.tj&&(this.ZF(),this.Ij(),this.Jj(),this.Kj(),e||this.vj(!1,!1))},setColumnWidth:function(e,t,i){return this.Xs(this.getColumnIndex(e),t,i)},Xs:function(e,t,i,s){if(!(isNaN(t)||e<0)){var n=this.fj[e];n.minWidth&&t<n.minWidth?t=n.minWidth:t<this.s.minColumnWidth&&(t=this.s.minColumnWidth);var l=n.width;return l!=t&&(e>=this.s.leftSplit&&e<this.Fj&&(this.Gj+=t-l),n.width=t,!!n.node&&(n.node.style.width=t+"px",i||this.rk(),this.callEvent("onColumnResize",[n.id,t,l,!!s]),!0))}},FA:function(e){return(e.$height||this.s.rowHeight)+(e.$subopen?e.$subHeight:0)},Uj:function(e){var t=this.data.order[e];return t?this.FA(this.data.pull[t]):this.s.rowHeight},Tj:function(e,t){if(this.s.fixedRowHeight)return(t-e)*this.s.rowHeight;for(var i=0;e<t;e++)i+=this.Uj(e);return i},ug:function(e,t){1==arguments.length&&(t=e.column,e=e.row);for(var i=this.getItem(e),s=this.getColumnConfig(t),n=0,l=0,a=0;a<this.fj.length;a++){(a==this.s.leftSplit||a==this.Fj)&&(n=0);var r=this.fj[a];if(r.id==t){var o=a<this.s.leftSplit?0:a>=this.Fj?2:1;l=this.Vf.childNodes[o].firstChild;break}n+=r.width}return{parent:l,top:this.getIndexById(e)<this.s.topSplit?this.Tj(0,this.getIndexById(e)):this.Tj((this.ak||0)-this.s.topSplit,this.getIndexById(e))+(this.ck||0),left:n,width:s.width,height:i.$height||this.s.rowHeight}},xj:function(){var e=this.s.pager,t=0,i=this.data.order.length;return e&&(t=e.size*e.page,i=Math.min(i,t+e.size),e.level&&(t=this.data.$min,i=this.data.$max)),this.Tj(t,i)},setRowHeight:function(e,t){if(!isNaN(t)){t<this.s.minColumnHeight&&(t=this.s.minColumnHeight);var i=this.getItem(e),s=i.$height||this.s.rowHeight;s!=t&&(i.$height=t,this.config.fixedRowHeight=!1,this.render(),this.callEvent("onRowResize",[e,t,s]))}},lk:function(e){var t=this.jk!==e;if(this.jk=e,this.s.prerender)for(var i=this.Vf.childNodes,s=0;s<i.length;s++)i[s].scrollTop=e;else this.vj();jeeplus.env.$customScroll&&jeeplus.CustomScroll.sk(this.Vf),t&&(this.callEvent("onScrollY",[]),this.callEvent("onAfterScroll",[]))},oH:function(e){this.Vf.childNodes[1].scrollLeft=this.bk=e,this.s.header&&(this.I.childNodes[1].scrollLeft=e),this.s.footer&&(this.cj.childNodes[1].scrollLeft=e)},kk:function(e){var t=this.bk!==e;this.oH(e),!1===this.s.prerender&&this.vj(!this.tk),jeeplus.env.$customScroll&&jeeplus.CustomScroll.sk(this.Vf),t&&(this.callEvent("onScrollX",[]),this.callEvent("onAfterScroll",[]))},Xj:function(e){if(e)return[0,this.fj.length];for(var t=this.bk,i=this.s.leftSplit;0<t&&this.fj.length-1>i;)t-=this.fj[i].width,i++;var s=i;for(t&&0<i&&i--,t+=this.Yj;0<t&&s<this.Fj;)t-=this.fj[s].width,s++;return[i,s]},getVisibleCount:function(){return Math.floor(this.Vj/this.config.rowHeight)},Sj:function(e){var t=this.jk,i=0,s=this.count(),n=this.s.pager;if(n){i=n.page*n.size,s=Math.min(s,i+n.size);n.level&&(i=this.data.$min,s=this.data.$max)}if(this.s.autoheight)return[i,s,0];if(e)return[i,s,0];var l=i,a=this.s.topSplit||0;a&&(l+=a);var r=this.s.fixedRowHeight?this.s.rowHeight:0;if(r)t-=(o=Math.ceil(t/r))*r,l+=o;else for(;0<t;)t-=this.Uj(l),l++;var o,h=0<l&&t?-(this.Uj(l-1)+t):0,u=l;if(t&&l--,t+=(this.Vj||this.dc)-(this.xD||0),r)t-=(o=Math.ceil(t/r))*r,u+=o;else for(;0<t&&u<s;)t-=this.Uj(u),u++;return s<u&&(u=s),[l,u,h]},Kv:function(e){var t=this.getItem(e),i=this.getIndexById(e),s=this.Sj(),n=this.config.topSplit,l="";if(n<=i){if(i<s[0]||i>=s[1])return;i-=s[0]-n}else l=i==n-1?" jeeplus_topcell jeeplus_last_topcell":" jeeplus_topcell";for(var a=this.Xj(),r=0;r<this.fj.length;r++){var o=this.fj[r];if(r<this.Fj&&r>=this.s.leftSplit&&(r<a[0]||r>a[1])&&(o.qk=-999),o.attached&&o.node){var h=o.node.childNodes[i];if(!h)continue;var u=this.Ek(t,this.fj[r],0);h.innerHTML=u,h.className=this.Mv(this.fj[r],u,t,e)+l}}},vj:function(e,t){if(this.fj.length){t&&this.uk();var i=this.Xj(this.s.prerender),s=this.Sj(!0===this.s.prerender);if(e){for(var n=this.s.leftSplit;n<i[0];n++)this.vk(n,t);for(n=i[1];n<this.Fj;n++)this.vk(n,t)}this.wk=[];for(n=0;n<this.s.leftSplit;n++)this.xk(n,s,t);for(n=i[0];n<i[1];n++)this.xk(n,s,t,n==i[0]);for(n=this.Fj;n<this.fj.length;n++)this.xk(n,s,t);this.yk(s[0],s[1],t),this.zk(s)}},Ak:function(e,t){this.Bk=e,this.Ck=t,jeeplus.html.remove(this.gj),this.gj=[]},dF:function(){if(this.s.prerender&&this.GA){var e=this.getScrollState();this.GA.style.top="-"+(e.y||0)+"px"}},yk:function(e,t,i){if(this.GA&&(this.GA.style.top=this.ck+"px"),i||e!=this.Bk||t!=this.Ck){if(this.Ak(e,t),this.Dk){this.Dk=!1;for(var s=0;s<this.wk.length;s++){var n,l=this.wk[s],a=this.getItem(l.id);n="function"==typeof a.$row?a.$row.call(this,a,this.type):this.Ek(a,this.getColumnConfig(a.$row),s),(h=this.gj[s]=jeeplus.html.create("DIV",null,n)).className="jeeplus_cell "+(a.$sub?"jeeplus_dtable_sub"+(this.s.subview?"view":"row"):"jeeplus_dtable_colrow"+(a.$row?" jeeplus_topcell"+(this.data.getMark(a.id,"jeeplus_selected")?" jeeplus_selected":""):"")),h.setAttribute("column",0),h.setAttribute("row",l.index);var r=a.$height||this.s.rowHeight;a.$subopen?h.style.height=a.$subHeight+"px":h.style.height=r+"px",h.style.paddingRight=jeeplus.ui.scrollSize+"px";var o=this.wk[s].index<this.config.topSplit?-this.ck:0;h.style.top=o+l.top+(a.$subopen?r-1:0)+"px",this.GA||(this.GA=jeeplus.html.create("DIV"),this.GA.style.position="relative",this.GA.style.top=this.ck+"px",this.Vf.appendChild(this.GA)),this.GA.appendChild(h),this.attachEvent("onSyncScroll",function(e,t,i){jeeplus.Touch.Nf(this.GA,0,t,i)}),this.s.subview&&this.callEvent("onSubViewRender",[a,h])}}}else if(this.config.topSplit)for(s=0;s<this.wk.length;s++){var h=this.gj[s];this.wk[s].index<this.config.topSplit&&(h.style.top=this.wk[s].top-this.ck+"px")}},zk:function(e){var t=this.s.pager,i=this.s.datafetch,s=!this.Fk||e[0]>=this.Fk;if(this.Fk=e[0],this.Gk){if(t&&(!i||i>=t.size)&&this.Hk([0,t.size*t.page],Math.max(i,t.size),!0))return this.Gk=null;this.Ik(this.Gk,s),this.Gk=null}else this.s.loadahead&&this.Hk(e,this.s.loadahead,s)},Hk:function(e,t,i){var s=e[1],n=s+t;i||(s=e[0]-t,n=e[0]),s<0&&(s=0),n=Math.min(n,this.data.order.length-1);for(var l=!1,a=s;a<n;a++)this.data.order[a]||(l?(l.last=a,l.count=a-s):l={start:a,count:n-s});return l?(this.Ik(l,i),!0):void 0},Ik:function(e,t){var i=Math.max(e.count,this.s.datafetch||this.s.loadahead||0),s=t?e.start:e.last-i+1;this.cf(e.count,e.start)||this.loadNext(i,s)},Zy:function(e){if(jeeplus.env.isSafari){var t,i,s,n,l=[this.Zj,this.Wj];for(t=0;t<2;t++)(n=l[t])&&n.Yy&&n.Yy.parentNode==e&&(i=n.Yy);i&&(this.$y&&jeeplus.html.remove(this.$y),s=(this.$y=i).cloneNode(!0),i.parentNode.insertBefore(s,i),this.$y.style.display="none",this.Vf.appendChild(this.$y))}},vk:function(e){var t=this.fj[e];this.Zy(t.node),jeeplus.html.remove(t.node),t.attached=!1},uk:function(){for(var e=0;e<this.fj.length;e++)this.fj[e].qk=-1;this.gj.length&&(jeeplus.html.remove(this.gj),this.gj=[])},getText:function(e,t){return this.Ek(this.getItem(e),this.getColumnConfig(t),0)},getCss:function(e,t){var i=this.getItem(e);return this.Mv(this.getColumnConfig(t),i[t],i,e)},Mv:function(e,t,i,s){var n="jeeplus_cell";if(e.cssFormat){var l=e.cssFormat(t,i,s,e.id);l&&(n+="object"==typeof l?" "+jeeplus.html.createCss(l):" "+l)}var a=i.$css;a&&("object"==typeof a&&(i.$css=a=jeeplus.html.createCss(a)),n+=" "+a);var r=this.data.Me[s];if(r&&(r.$css&&(n+=" "+r.$css),r.$cellCss)){var o=r.$cellCss[e.id];o&&(n+=" "+o)}if(i.$cellCss){var h=i.$cellCss[e.id];h&&("object"==typeof h&&(h=jeeplus.html.createCss(h)),n+=" "+h)}var u=this.data.getMark(i.id,"jeeplus_selected");return(u&&(u.$row||u[e.id])||e.$selected)&&(n+=this.Lk),n},Ek:function(e,t,i){return e?(((s=e[t.id])===jeeplus.undefined||null===s)&&(s=""),t.format&&(s=t.format(s)),t.template&&(s=t.template(e,this.type,s,t,i)),s):"";var s},type:{checkbox:function(e,t,i,s){return"<input class='jeeplus_table_checkbox' type='checkbox' "+(i==s.checkValue?'checked="true"':"")+">"},radio:function(e,t,i,s){return"<input class='jeeplus_table_radio' type='radio' "+(i==s.checkValue?'checked="true"':"")+">"},editIcon:function(){return"<span class='jeeplus_icon fa-pencil'></span>"},trashIcon:function(){return"<span class='jeeplus_icon fa-trash'></span>"}},type_setter:function(e){return this.types&&this.types[e]?(this.type=jeeplus.clone(this.types[e]),this.type.css&&(this.w.className+=" "+this.type.css)):jeeplus.type(this,e),this.type.on_click&&jeeplus.extend(this.on_click,this.type.on_click),e},xk:function(e,t,i,s){var n=this.fj[e];if(!n.attached){var l=e<this.s.leftSplit?0:e>=this.Fj?2:1;this.Vf.childNodes[l].firstChild.appendChild(n.node),n.attached=!0,n.split=l}if(this.ak=t[0],this.ck=0,this.aC=t[2],this.s.scrollAlignY?t[1]==this.data.order.length||this.data.$pagesize&&t[1]%this.data.$pagesize==0?n.node.style.top=(this.ck=t[2])+"px":n.Jk&&(n.node.style.top="0px"):(this.ck=t[2],n.node.style.top=t[2]+"px"),!(i||n.qk!=t[0]||n.Kk!=t[1]||this.s.topSplit&&n.ck!=this.ck))return 0;for(var a="",r=this.s.columns[e],o={row:this.s.rowHeight,total:0,single:s},h=0;h<this.s.topSplit;h++)a+=this.yD(h,r,t,o,-this.ck);for(h=Math.max(t[0],this.s.topSplit);h<t[1];h++)a+=this.yD(h,r,t,o,-1);return this.Zy(n.node),n.node.innerHTML=a,n.qk=t[0],n.Kk=t[1],n.Jk=t[2],n.ck=this.ck,1},yD:function(e,t,i,s,n){var l=this.data.order[e],a=this.data.getItem(l),r="";if(a){var o=" role='gridcell' aria-rowindex='"+(e+1)+"' aria-colindex='"+(this.getColumnIndex(t.id)+1)+"'"+(a.$count||a.$sub?" aria-expanded='"+(a.open||a.$subopen?"true":"false")+"'":"")+(a.$level?" aria-level='"+a.$level+"'":"");if(s.single&&a.$row&&(this.Dk=!0,this.wk.push({top:s.total,id:a.id,index:e}),!a.$sub)){var h=a.$height||s.row;return s.total+=h,"<div"+o+" class='jeeplus_cell' style='height:"+h+"px;'></div>"}var u=this.Ek(a,t,e),c=this.Mv(t,u,a,l);-1!==c.indexOf("select")&&(o+=" aria-selected='true' tabindex='0'");var d=!!a.$subopen,p=d?"margin-bottom:"+a.$subHeight+"px;":"";0<=n&&(0<n&&(p+="top:"+n+"px;'"),c="jeeplus_topcell "+c,e==this.s.topSplit-1&&(c="jeeplus_last_topcell "+c)),a.$height?(r="<div"+o+" class='"+c+"' style='height:"+a.$height+"px;"+p+"'>"+u+"</div>",s.total+=a.$height-s.row):r="<div"+o+" class='"+c+"'"+(p?" style='"+p+"'":"")+">"+u+"</div>",d&&(s.total+=a.$subHeight)}else r="<div role='gridcell' class='jeeplus_cell'></div>",this.Gk?this.Gk.last=e:this.Gk={start:e,count:i[1]-e};return s.total+=s.row,r},yj:function(){if(this.fj.length&&!isNaN(1*this.dc)){var e=this.wj+(this.nj?this.nj:0);if(!this.s.autoheight&&!this.s.yCount||!this.resize()){this.Wj.sizeTo(this.dc,this.$g,this.jj),this.Wj.define("scrollHeight",e),this.xD=this.s.topSplit?this.Tj(0,this.s.topSplit):0,this.Vj=Math.max(0,this.dc-this.nj-this.$g-this.jj);for(var t=0;t<3;t++)this.Vf.childNodes[t].style.height=this.Vj+"px",this.s.prerender?this.Vf.childNodes[t].firstChild.style.height=this.wj+"px":this.Vf.childNodes[t].firstChild.style.height=this.Vj+"px";this.I.style.height=this.$g+"px"}}},Jj:function(){if(this.fj.length){var e=0;for(this.dk=0,this.ek=0,this.Yj=0;e<this.s.leftSplit;)this.dk+=this.fj[e].width,e++;for(e=this.fj.length-1;e>=this.Fj;)this.ek+=this.fj[e].width,e--;if(this.bc&&(!this.s.autowidth||!this.resize())){this.Yj=this.bc-this.ek-this.dk-this.oj,this.Vf.childNodes[1].firstChild.style.width=this.Gj+"px",this.Vf.childNodes[0].style.width=this.dk+"px",this.Vf.childNodes[1].style.width=this.Yj+"px",this.Vf.childNodes[2].style.width=this.ek+"px",this.I.childNodes[0].style.width=this.dk+"px",this.I.childNodes[1].style.width=this.Yj+"px",this.I.childNodes[2].style.width=this.ek+"px",this.cj.childNodes[0].style.width=this.dk+"px",this.cj.childNodes[1].style.width=this.Yj+"px",this.cj.childNodes[2].style.width=this.ek+"px";var t=this.Yj-this.Gj;if(t<0&&(t=0),t!=this.Lj&&(this.Lj=t,this.Oj()),jeeplus.env.isWebKit){this.Vf.childNodes[0].offsetWidth;this.Vf.childNodes[1].offsetWidth,this.Vf.childNodes[1].firstChild.offsetWidth,this.Vf.childNodes[2].offsetWidth}this.Zj.sizeTo(this.bc-this.oj),this.Zj.define("scrollWidth",this.Gj+this.dk+this.ek)}}},$getSize:function(e,t){if((this.s.autoheight||this.s.yCount)&&this.s.columns){var i=(this.s.yCount||0)*this.s.rowHeight;i||(i=this.isVisible()?this.wj:this.count()*this.s.rowHeight),this.s.height=Math.max(i+(this.nj?this.nj:0)-1,this.s.minHeight||0)+this.$g+this.jj}this.s.autowidth&&this.s.columns&&(this.s.width=Math.max(this.Gj+this.dk+this.ek+this.oj,this.s.minWidth||0));var s=this.dk+this.ek+this.oj,n=jeeplus.ui.view.prototype.$getSize.call(this,e,t);return n[0]=Math.max(n[0]||s),n},Ow:function(){if(this.Zj&&!jeeplus.env.touch){var e=this.getScrollState();this.Zj.Wi=this.Wj.Wi=-1,this.scrollTo(e.x,e.y)}},$setSize:function(e,t){var i=this.bc,s=this.dc;jeeplus.ui.view.prototype.$setSize.apply(this,arguments)&&(this.tj&&(this.callEvent("onResize",[this.bc,this.dc,i,s]),this.Jj(),this.yj()),this.render())},Mk:function(e){var t=this.getColumnConfig(e);if(t.sort){var i="asc";t.id==this.Nk&&(i="asc"==this.Ok?"desc":"asc"),this.zf(t.id,i,t.sort)}},markSorting:function(e,t){this.Pk||(this.Pk=jeeplus.html.create("DIV"));var i=this.Pk.parentNode;if(i&&(i.removeAttribute("aria-sort"),i.removeAttribute("tabindex")),jeeplus.html.remove(this.Pk),t){var s=this.Qk(this.getColumnIndex(e));s&&(this.Pk.className="jeeplus_ss_sort_"+t,s.style.position="relative",s.appendChild(this.Pk),s.setAttribute("aria-sort",t+"ending"),s.setAttribute("tabindex","0")),this.Nk=e,this.Ok=t}else this.Nk=this.Ok=null},scroll_setter:function(e){return"string"==typeof e?(this.s.scrollX=-1!=e.indexOf("x"),this.s.scrollY=-1!=e.indexOf("y"),e):this.s.scrollX=this.s.scrollY=e},Qk:function(e){for(var t=this.I.getElementsByTagName("TD"),i=null,s=0;s<t.length;s++)if(t[s].getAttribute("column")==e&&!t[s].getAttribute("active_id")&&(i=t[s].firstChild,(t[s].colSpan||0)<2))return i;return i},zf:function(t,e,i){e=e||"asc",this.markSorting(t,e),"server"==i?(this.callEvent("onBeforeSort",[t,e,i]),this.loadNext(0,0,{before:function(){this.clearAll(!0)},success:function(){this.callEvent("onAfterSort",[t,e,i])}},0,1)):("text"==i&&(this.data.each(function(e){e.$text=this.getText(e.id,t)},this),i="string",t="$text"),"function"==typeof i?this.data.sort(i,e):this.data.sort(t,e,i||"string"))},iA:function(e,t,i,s){var n;if(e.length)for(n=0;n<e.length;n++)if(!1===jeeplus.toFunctor(e[n],this.$scope).call(this,t,i,s))return!1},Yc:function(e,t,i,s){var n=(e=e||event).target||e.srcElement;if(!this.s.subview||this==jeeplus.$$(n)){var l="",a=[],r=!1,o=null;for(n=e.target||e.srcElement;n&&n.parentNode&&n!=this.x.parentNode;){if(l=jeeplus.html.TC(n))for(var h=(l=l.toString().split(" ")).length-1;0<=h;h--)t[l[h]]&&a.push(t[l[h]]);if(n.parentNode.getAttribute&&!o){var u=n.parentNode.getAttribute("column")||n.getAttribute("column");if(u){var c="DIV"==n.parentNode.tagName;if(!this.fj[u])return;if(r=!0,c){var d=n.parentNode.getAttribute("row")||n.getAttribute("row");if(!d){if(n.getAttribute("column"))return;(d=jeeplus.html.index(n))>=this.s.topSplit&&(d+=this.fj[u].qk-this.s.topSplit)}this.Qc=o={row:this.data.order[d],column:this.fj[u].id},o.toString=this.ok}else this.Qc=o={column:this.fj[u].id};if(!1===this.iA(a,e,o,n))return;if(c)this.callEvent("on"+i,[o,e,n])&&s&&this.callEvent("on"+s,[o,e,n]);else if("ItemClick"==i){"header"==n.parentNode.parentNode.getAttribute("section")&&this.callEvent("onHeaderClick",[o,e,n])&&this.Mk(o.column)}a=[]}}n=n.parentNode}return this.iA(a,e,o,this.$view),r}},showOverlay:function(e){if(!this.Rk){var t=jeeplus.html.create("DIV",{class:"jeeplus_overlay"},"");this.Vf.appendChild(t),this.Rk=t}this.Rk.innerHTML=e},hideOverlay:function(){this.Rk&&(jeeplus.html.remove(this.Rk),this.Rk=null)},mapCells:function(e,t,i,s,n,l){if(null===e&&0<this.data.order.length&&(e=this.data.order[0]),null===t&&(t=this.columnId(0)),null===i&&(i=this.data.order.length),null===s&&(s=this.s.columns.length),this.exists(e)&&(e=this.getIndexById(e),null!==(t=this.getColumnIndex(t))))for(var a=0;a<i&&e+a<this.data.order.length;a++){var r=e+a,o=this.data.order[r];if(o)for(var h=this.getItem(o),u=0;u<s&&t+u<this.s.columns.length;u++){var c=t+u,d=this.columnId(c),p=n(h[d],o,d,a,u);l||(h[d]=p)}}},dj:function(e,t){!this.s.columns&&e.getConfig&&this.define("columns",e.getConfig(t))},qj:function(){var e=this.getItem(this.getFirstId()),t=this.s.columns=[];for(var i in e)"id"!=i&&"$"!=i[0]&&t.push({id:i,header:i[0].toUpperCase()+i.substr(1),sort:"string",editor:"text"});t.length&&(t[0].fillspace=!0),void 0===this.s.select&&this.define("select","row")}},jeeplus.AutoTooltip,jeeplus.Group,jeeplus.DataMarks,jeeplus.DataLoader,jeeplus.MouseEvents,jeeplus.MapCollection,jeeplus.ui.view,jeeplus.EventSystem,jeeplus.Settings),jeeplus.ui.datafilter={textWaitDelay:500,summColumn:{getValue:function(e){return e.firstChild.innerHTML},setValue:function(){},refresh:function(e,t,i){var s=0;e.mapCells(null,i.columnId,null,1,function(e){e*=1,isNaN(e)||(s+=e)},!0),i.format&&(s=i.format(s)),i.template&&(s=i.template({value:s})),t.firstChild.innerHTML=s},trackCells:!0,render:function(e,t){return t.template&&(t.template=jeeplus.template(t.template)),""}},masterCheckbox:{getValue:function(){},setValue:function(){},getHelper:function(e,t){return{check:function(){t.checked=!1,e.onclick()},uncheck:function(){t.checked=!0,e.onclick()},isChecked:function(){return t.checked}}},refresh:function(i,e,s){e.onclick=function(){this.getElementsByTagName("input")[0].checked=s.checked=!s.checked;var e=i.getColumnConfig(s.columnId),t=s.checked?e.checkValue:e.uncheckValue;i.data.each(function(e){e[s.columnId]=t,i.callEvent("onCheck",[e.id,s.columnId,t]),this.callEvent("onStoreUpdated",[e.id,e,"save"])}),i.refresh()}},render:function(e,t){return"<input type='checkbox' "+(t.checked?"checked='1'":"")+">"}},textFilter:{getInputNode:function(e){return e.firstChild?e.firstChild.firstChild:{value:null}},getValue:function(e){return this.getInputNode(e).value},setValue:function(e,t){this.getInputNode(e).value=t},refresh:function(e,t,i){t.component=e.s.id,e.registerFilter(t,i,this),t.Sk=e.s.id,i.value&&this.getValue(t)!=i.value&&this.setValue(t,i.value),t.onclick=jeeplus.html.preventEvent,jeeplus.UE(t,"keydown",this.Tk)},render:function(e,t){return this.init&&this.init(t),t.css="jeeplus_ss_filter","<input "+(t.placeholder?'placeholder="'+t.placeholder+'" ':"")+"type='text'>"},Tk:function(e,t,i){var s=this.Sk;9!=(e.which||e.keyCode)&&(this.Uk&&window.clearTimeout(this.Uk),this.Uk=window.setTimeout(function(){var e=jeeplus.$$(s);e&&e.filterByAll()},jeeplus.ui.datafilter.textWaitDelay))}},selectFilter:{getInputNode:function(e){return e.firstChild?e.firstChild.firstChild:{value:null}},getValue:function(e){return this.getInputNode(e).value},setValue:function(e,t){this.getInputNode(e).value=t},refresh:function(t,i,s){s.compare=s.compare||function(e,t){return e==t},i.component=t.s.id,t.registerFilter(i,s,this);var e,n=s.options;n?"string"==typeof n?(e=s.options=[],jeeplus.ajax(n).then(jeeplus.bind(function(e){s.options=e.json(),this.refresh(t,i,s)},this))):e=n:(e=t.collectValues(s.columnId)).unshift({id:"",value:""});var l=jeeplus.$$(n);l&&l.data&&l.data.getRange&&(e=l.data.getRange());for(var a=document.createElement("select"),r=0;r<e.length;r++){var o=document.createElement("option");o.value=e[r].id,o.text=e[r].value,a.add(o)}i.firstChild.innerHTML="",i.firstChild.appendChild(a),s.value&&this.setValue(i,s.value),i.onclick=jeeplus.html.preventEvent,a.Sk=t.s.id,jeeplus.UE(a,"change",this.Vk)},render:function(e,t){return this.init&&this.init(t),t.css="jeeplus_ss_filter",""},Vk:function(e,t,i){jeeplus.$$(this.Sk).filterByAll()}}},jeeplus.ui.datafilter.serverFilter=jeeplus.extend({$server:!0,Tk:function(e,t,i){var s=this.Sk,n=e.which||e.keyCode;e.target||e.srcElement,9==n||33<=n&&n<=40||(this.Uk&&window.clearTimeout(this.Uk),this.Uk=window.setTimeout(function(){jeeplus.$$(s).filterByAll()},jeeplus.ui.datafilter.textWaitDelay))}},jeeplus.ui.datafilter.textFilter),jeeplus.ui.datafilter.serverSelectFilter=jeeplus.extend({$server:!0,Vk:function(e,t,i){var s=this.Sk;jeeplus.$$(s).filterByAll()}},jeeplus.ui.datafilter.selectFilter),jeeplus.ui.datafilter.numberFilter=jeeplus.extend({init:function(n){n.prepare=function(e,t){var i=-1!=e.indexOf("=")?1:0,s=this.format(e);return""===s?"":(-1!=e.indexOf(">")?n.compare=this.Wk:-1!=e.indexOf("<")?(n.compare=this.Xk,i*=-1):(n.compare=this.Yk,i=0),s-i)}},format:function(e){return e.replace(/[^\-\.0-9]/g,"")},Wk:function(e,t){return t<1*e},Xk:function(e,t){return""!==e&&1*e<t},Yk:function(e,t){return 1*e==t}},jeeplus.ui.datafilter.textFilter),jeeplus.ui.datafilter.dateFilter=jeeplus.extend({format:function(e){if(""===e)return"";var t=new Date;if(-1!=e.indexOf("today"))t=jeeplus.Date.dayStart(t);else if(-1==e.indexOf("now")){var i=e.match(/[0-9]+/g);if(!i||!i.length)return"";t=i.length<3?(i.reverse(),new Date(i[0],(i[1]||1)-1,1)):jeeplus.i18n.dateFormatDate(e.replace(/^[>< =]+/,""))}return t.valueOf()}},jeeplus.ui.datafilter.numberFilter),jeeplus.extend(jeeplus.ui.datatable,{filterByAll:function(){var a=!1;this.data.silent(function(){this.filter();var e=!1;for(var i in this.ij)if(this.isColumnVisible(i)){var t=this.ij[i],s=t[2].getValue(t[0]),n=s;t[1].prepare&&(n=t[1].prepare.call(t[2],n,t[1],this)),t[1].value=s;var l=t[1].compare;if(this.callEvent("onBeforeFilter",[i,n,t[1]]))if(t[2].$server||a)a=!0;else{if(""===n)continue;l?(l=this.fC(i,l),this.filter(jeeplus.bind(function(e,t){return!!e&&l(e[i],t,e)},this),n,e)):this.filter(i,n,e),e=!0}}a&&this.jA()},this),a||(this.refresh(),this.callEvent("onAfterFilter",[]))},fC:function(e,l){var t=this.getColumnConfig(e),a=t?t.optionslist:null;return a?("string"!=typeof a&&(a=","),function(e,t,i){if(!e)return!0;for(var s=e.split(a),n=0;n<s.length;n++)if(l(s[n],t,i))return!0}):l},filterMode_setter:function(e){return jeeplus.extend(this.data.Cf,e,!0)},getFilter:function(e){var t=this.ij[e];return t&&t[2].getInputNode?t[2].getInputNode(t[0]):null},registerFilter:function(e,t,i){this.ij[t.columnId]=[e,t,i]},collectValues:function(e){var t=[],i={"":!0},s=(a=this.getColumnConfig(e)).options||a.collection;if(s){if("object"==typeof s&&!s.loadNext){if(jeeplus.isArray(s))for(var n=0;n<s.length;n++)t.push({id:s[n],value:s[n]});else for(var l in s)t.push({id:l,value:s[l]});return t}"string"==typeof s&&(s=jeeplus.$$(s)),s.getBody&&(s=s.getBody()),this.Zk.call(s,"id","value",t,i)}else this.Zk(a.id,a.id,t,i);var a={values:t};return this.callEvent("onCollectValues",[e,a]),a.values},Zk:function(s,n,l,a){if(this.data.each(function(e){var t=e?e[s]:"";if(t!==jeeplus.undefined&&!a[t]){a[t]=!0;var i=e[s];0===i&&(i="0"),l.push({id:i,value:e[n]})}},this,!0),l.length){var e="string"==typeof l[0].value?"string":"raw";l.sort(this.data.sorting.create({as:e,by:"value",dir:"asc"}))}},jA:function(e){this.loadNext(0,0,{before:function(){this.editStop&&this.editStop(),this.clearAll(!0)},success:function(){this.callEvent("onAfterFilter",[])}},0,1)}}),jeeplus.extend(jeeplus.ui.datatable,{hover_setter:function(e){return e&&!this.Yw&&(this.Vc(),this.config.experimental=!0,this.attachEvent("onMouseMoving",function(e){var t=this.locate(e);t=t?t.row:null,this.Zw!=t&&(this.Zw&&this.removeRowCss(this.Zw,this.s.hover),this.Zw=t,this.Zw&&this.addRowCss(this.Zw,this.s.hover))}),jeeplus.event(this.$view,"mouseout",jeeplus.bind(function(e){this.Zw&&document.body.contains(e.target)&&(this.removeRowCss(this.Zw,this.s.hover),this.Zw=null)},this)),this.Yw=1),e},select_setter:function(e){return!this.select&&e&&(jeeplus.extend(this,this._k.$k,!0),!0===e?e="row":"multiselect"==e&&(e="row",this.s.multiselect=!0),jeeplus.extend(this,this._k[e],!0)),e},getSelectedId:function(e){return e?[]:""},getSelectedItem:function(e){return jeeplus.SelectionModel.getSelectedItem.call(this,e)},_k:{$k:{Lk:" jeeplus_cell_select",$init:function(){this.al(),this.on_click.jeeplus_cell=jeeplus.bind(this.bl,this),this.cl=this.zg=function(){this.unselect()},this.data.attachEvent("onStoreUpdated",jeeplus.bind(this.xg,this)),this.data.attachEvent("onSyncApply",jeeplus.bind(this.rF,this)),this.data.attachEvent("onClearAll",jeeplus.bind(this.cl,this)),this.data.attachEvent("onAfterFilter",jeeplus.bind(this.zg,this)),this.data.attachEvent("onIdChange",jeeplus.bind(this.Ag,this)),this.$ready.push(jeeplus.SelectionModel.uy)},Ag:function(e,t){for(var i=0;i<this.dl.length;i++)this.dl[i]==e&&(this.dl[i]=t);for(i=0;i<this.el.length;i++){var s=this.el[i];s.row==e&&(e=this.fl(s),s.row=t,t=this.fl(s),s.id=t,delete this.gl[e],this.gl[t]=!0)}},xg:function(e,t,i){"delete"==i&&this.unselect(e)},rF:function(){for(var e=this.el.length-1;0<=e;e--){var t=this.el[e].row;this.exists(t)||(this.el.splice(e,1),delete this.gl[t])}},al:function(){this.el=[],this.gl={},this.dl=[]},isSelected:function(e,t){var i;return i=jeeplus.isUndefined(t)?"object"==typeof e?this.fl(e):e:this.fl({row:e,column:t}),this.gl[i]},getSelectedId:function(e,t){var i;if(1<this.el.length||e){if(i=[].concat(this.el),t)for(var s=0;s<i.length;s++)i[s]=i[s].id}else if(i=this.el[0],t&&i)return i.id;return i},ok:function(){return this.row},hl:function(e,t){var i=this.fl(e);if(null!==i){if(-1===t)return this.ll(e);if(e.id=i,e.toString=this.ok,!this.callEvent("onBeforeSelect",[e,t]))return!1;if(!this.gl[i]||!t&&1!=this.el.length)return t||this.il(),this.el.push(e),this.gl[i]=!0,this.callEvent("onAfterSelect",[e,t]),this.jl(this.kl(e)),!0}},il:function(){if(!this.el.length)return!1;for(var e=0;e<this.el.length;e++)if(!this.callEvent("onBeforeUnSelect",[this.el[e]]))return!1;for(e=0;e<this.dl.length;e++)this.data.removeMark(this.dl[e],"jeeplus_selected");var t=this.s.columns;if(t)for(e=0;e<t.length;e++)t[e].$selected=null;var i=this.el;this.al();for(e=0;e<i.length;e++)this.callEvent("onAfterUnSelect",[i[e]]);return!0},unselectAll:function(){this.clearSelection()},selectAll:function(){this.selectRange()},clearSelection:function(){this.il()&&(this.callEvent("onSelectChange",[]),this.render())},ll:function(e){var t=this.fl(e);if(!t&&this.el.length&&(this.clearSelection(),this.callEvent("onSelectChange",[])),this.gl[t]){if(!this.callEvent("onBeforeUnSelect",[e]))return!1;for(var i=0;i<this.el.length;i++)if(this.el[i].id==t){this.el.splice(i,1);break}delete this.gl[t],this.callEvent("onAfterUnSelect",[e]),this.jl(0,this.ml(e))}},nl:function(e){var t=this.getItem(e);return this.data.addMark(t.id,"jeeplus_selected",0,{$count:0},!0)},jl:function(e){e&&this.dl.push(e),this.Dg||(this.render(),this.callEvent("onSelectChange",[]))},bl:function(e,t){var i=e.ctrlKey||e.metaKey||"touch"==this.s.multiselect,s=e.shiftKey;if(this.s.multiselect||"multiselect"==this.s.select||(i=s=!1),s&&this.el.length){var n=this.el[this.el.length-1];this.ol(t,n)}else i&&this.gl[this.fl(t)]?this.ll(t):this.hl({row:t.row,column:t.column},i)},pl:function(e,t,i){var s=this.s.columns;if(t){for(var n=[],l=0;l<s.length;l++)s[l].$selected&&n.push(s[l]);s=n}var a=this.data.order,r=0;for(l=0;l<a.length;l++){var o=this.getItem(a[l]);if(o){var h=this.data.getMark(o.id,"jeeplus_selected");if(h||t){for(var u=0,c=0;c<s.length;c++){var d=s[c].id;if(i||t||h[d]){if(!e)return{row:a[l],column:d};o[d]=e(o[d],a[l],d,r,u),u++}}r++}}}}},row:{Lk:" jeeplus_row_select",fl:function(e){return e.row},select:function(e,t){e&&(e=e.toString()),this.hl({row:e},t)},kl:function(e){return this.nl(e.row).$row=!0,e.row},unselect:function(e){this.ll({row:e})},ml:function(e){return this.data.removeMark(e.row,"jeeplus_selected",0,1),e.row},mapSelection:function(e){return this.pl(e,!1,!0)},ol:function(e,t){return this.selectRange(e.row,t.row)},selectRange:function(e,t,i){jeeplus.isUndefined(i)&&(i=!0);var s=e?this.getIndexById(e):0,n=t?this.getIndexById(t):this.data.order.length-1;if(n<s){var l=s;s=n,n=l}this.Dg=!0;for(var a=s;a<=n;a++){var r=this.getIdByIndex(a);if(!r){e&&this.select(e);break}this.select(r,i)}this.Dg=!1,this.jl()}},cell:{fl:function(e){return e.column?e.row+"_"+e.column:null},select:function(e,t,i){this.hl({row:e,column:t},i)},kl:function(e){var t=this.nl(e.row);return t.$count++,t[e.column]=!0,e.row},unselect:function(e,t){this.ll({row:e,column:t})},ml:function(e){var t=this.nl(e.row);return t.$count--,t[e.column]=!1,t.$count<=0&&this.data.removeMark(e.row,"jeeplus_selected"),e.row},mapSelection:function(e){return this.pl(e,!1,!1)},ol:function(e,t){return this.selectRange(e.row,e.column,t.row,t.column)},selectRange:function(e,t,i,s,n){jeeplus.isUndefined(n)&&(n=!0);var l=e?this.getIndexById(e):0,a=i?this.getIndexById(i):this.data.order.length-1,r=t?this.getColumnIndex(t):0,o=s?this.getColumnIndex(s):this.fj.length-1;if(a<l){var h=l;l=a,a=h}if(o<r){h=r;r=o,o=h}this.Dg=!0;for(var u=l;u<=a;u++)for(var c=r;c<=o;c++)this.select(this.getIdByIndex(u),this.columnId(c),n);this.Dg=!1,this.jl()}},column:{Lk:" jeeplus_column_select",fl:function(e){return e.column},ok:function(){return this.column},select:function(e,t){this.hl({column:e},t)},kl:function(e){this.s.columns[this.getColumnIndex(e.column)].$selected=!0,this.Dg||this.Kj()},unselect:function(e){this.ll({column:e})},ml:function(e){this.s.columns[this.getColumnIndex(e.column)].$selected=null,this.Kj()},mapSelection:function(e){return this.pl(e,!0,!1)},ol:function(e,t){return this.selectRange(e.column,t.column)},selectRange:function(e,t,i){jeeplus.isUndefined(i)&&(i=!0);var s=e?this.getColumnIndex(e):0,n=t?this.getColumnIndex(t):this.fj.length-1;if(n<s){var l=s;s=n,n=l}this.Dg=!0;for(var a=s;a<=n;a++)this.select(this.columnId(a),i);this.Dg=!1,this.Kj(),this.jl()},rF:function(){}},area:{fl:function(e){return e.row+"_"+e.column},getSelectedId:function(e){var t=this.getSelectArea(),i=[];if(t)if(!e||t.start.row==t.end.row&&t.start.column==t.end.column)i.push(t.end);else{var s=this.getIndexById(t.start.row),n=this.getIndexById(t.end.row);if(-1==s||-1==n)return i;for(var l=this.getColumnIndex(t.start.column),a=this.getColumnIndex(t.end.column),r=s;r<=n;r++)for(var o=l;o<=a;o++)i.push({row:this.getIdByIndex(r),column:this.columnId(o)})}return e?i:i[0]},unselect:function(e){this.ll()},ll:function(){this.removeSelectArea(),this.callEvent("onSelectChange",[])},mapSelection:function(e){var t=this.getSelectArea();if(t)for(var i=this.getColumnIndex(t.start.column),s=this.getColumnIndex(t.end.column),n=this.getIndexById(t.start.row),l=this.getIndexById(t.end.row),a=n;a<=l;a++)for(var r=this.data.order[a],o=this.getItem(r),h=i;h<=s;h++){var u=this.fj[h].id;if(!e)return{row:r,column:u};o[u]=e(o[u]||"",r,u,a-n,h-i)}},select:function(e,t,i){this.hl({row:e,column:t},i)},ol:function(e,t){this.gC(e,t)},hl:function(e,t){return this.addSelectArea(e,e,!1),!0},rF:function(){this.el.length&&this.refreshSelectArea()}}}}),jeeplus.extend(jeeplus.ui.datatable,{blockselect_setter:function(e){return e&&this.ql&&(jeeplus.UE(this.x,jeeplus.env.mouse.move,this.rl,{bind:this}),jeeplus.UE(this.x,jeeplus.env.mouse.down,this.sl,{bind:this}),jeeplus.event(document.body,jeeplus.env.mouse.up,this.tl,{bind:this}),this.ql=this.ul=this.vl=!1,this.attachEvent("onAfterScroll",function(){this.ZC()}),jeeplus.extend(this,jeeplus.AutoScroll,!0),this.attachEvent("onBeforeAutoScroll",function(){return this.vl})),e},ql:!0,wl:function(e,t){for(var i=e.target||e.srcElement;i;){if(i.getAttribute&&i.getAttribute("jeeplusignore"))return!1;if(i==t)return!0;i=i.parentNode}return!1},sl:function(e){if((!this.s.subview||this==jeeplus.$$(e.target||e.srcElement))&&this.wl(e,this.Vf)){if(e.target&&"INPUT"==e.target.tagName||this.Pl)return;this.xl=jeeplus.html.offset(this.Vf);var t=jeeplus.html.pos(e);this.ul=[t.x-this.xl.x,t.y-this.xl.y]}},tl:function(e){this.yl&&(this.jz("select",!0,e),this.yl=jeeplus.html.remove(this.yl)),jeeplus.html.removeCss(document.body,"jeeplus_noselect"),this.ul=this.vl=!1,this.bh&&(this.bh=window.clearTimeout(this.bh))},ZC:function(){this.vl&&this.jz(!1,!1)},jz:function(e,t,i){var s;this.ul[2]||(this.ul[2]=this.zl.apply(this,this.ul)),s=this.ul[2];var n=this.zl.apply(this,this.vl);if(this.callEvent("onBeforeBlockSelect",[s,n,t,i])){if((!this.wB||!1!==this.wB(s,n,t,i))&&s.row&&n.row)if("select"===e)this.il(),this.ol(s,n);else{var l,a,r,o;if("box"===e)l=Math.min(this.ul[0],this.vl[0]),r=Math.max(this.ul[0],this.vl[0]),a=Math.min(this.ul[1],this.vl[1]),o=Math.max(this.ul[1],this.vl[1]);else{var h=this.ug(s.row,s.column),u=this.ug(n.row,n.column),c=this.getScrollState(),d=h.width,p=u.width;this.ek&&this.ul[0]>this.dk+this.Yj?h.left+=this.dk+this.Yj:this.dk?this.ul[0]>this.dk&&(h.left<c.x?(d-=c.x-h.left,h.left=this.dk):h.left+=this.dk-c.x):h.left-=c.x,this.ek&&this.vl[0]>this.dk+this.Yj?u.left+=this.dk+this.Yj:this.dk?this.vl[0]>this.dk&&(u.left<c.x?(p-=c.x-u.left,u.left=this.dk):u.left+=this.dk-c.x):u.left-=c.x,this.s.prerender&&(h.top-=this.jk,u.top-=this.jk),l=Math.min(h.left,u.left),r=Math.max(h.left+d,u.left+p),a=Math.min(h.top,u.top),o=Math.max(h.top+h.height,u.top+u.height),this.s.topSplit&&(a+=this.zD(s)),this.bh&&(this.bh=window.clearTimeout(this.bh)),i&&(this.bh=jeeplus.delay(this.ch,this,[jeeplus.html.pos(i)],250))}var f=this.yl.style;f.left=l+"px",f.top=a+"px",f.width=r-l+"px",f.height=o-a+"px"}t&&this.callEvent("onAfterBlockSelect",[s,n])}},Al:function(e){this.yl=jeeplus.html.create("div",{class:"jeeplus_block_selection"},""),this.Vf.appendChild(this.yl)},rl:function(e){if(!1!==this.ul){this.vl||jeeplus.html.addCss(document.body,"jeeplus_noselect");var t=jeeplus.html.pos(e),i=[t.x-this.xl.x,t.y-this.xl.y];if(Math.abs(this.ul[0]-i[0])<5&&Math.abs(this.ul[1]-i[1])<5)return;!1===this.vl&&this.Al(e),this.vl=i,this.jz(this.config.blockselect,!1,e)}},zl:function(e,t){var i=!1,s=null,n=null;if(this.ek&&e>this.dk+this.Yj?e+=this.Zj.getSize()-this.Yj-this.dk-this.ek:(!this.dk||e>this.dk)&&(e+=this.Zj.getScroll()),this.s.topSplit&&this.ak>this.s.topSplit){var l=this.ug(this.getIdByIndex(this.s.topSplit-1),this.columnId(0));l.top+l.height>t&&(i=!0)}i||(t+=this.getScrollState().y),e<0&&(e=0),t<0&&(t=0);for(var a=this.s.columns,r=this.data.order,o=0,h=0;h<a.length;h++)if(e<=(o+=a[h].width)){n=a[h].id;break}n||(n=a[a.length-1].id),o=0;var u=this.data.$min||0;if(this.s.fixedRowHeight)s=r[u+Math.floor(t/this.s.rowHeight)];else for(h=u;h<r.length;h++)if(t<=(o+=this.Uj(h))){s=r[h];break}return s||(s=r[r.length-1]),{row:s,column:n}},zD:function(e,t){var i=0,s=this.getIndexById(e.row);if(s>=this.s.topSplit){var n=this.ug(this.getIdByIndex(s),e.column),l=this.ug(this.getIdByIndex(this.s.topSplit-1),e.column);0<l.top+l.height-n.top&&(i=l.top+l.height-(0<n.top||!t?n.top:0))}return i}}),jeeplus.protoUI({name:"resizearea",defaults:{dir:"x"},$init:function(e){var t=e.dir||"x",i=jeeplus.toNode(e.container),s="x"==t?"width":"height",n=e.margin?e.margin+"px":0;this.Cl="x"==t?"left":"top",this.x=jeeplus.html.create("DIV",{class:"jeeplus_resize_area jeeplus_dir_"+t}),jeeplus.UE(this.x,jeeplus.env.mouse.down,jeeplus.html.stopEvent),n&&(n="x"==t?n+" 0 "+n:"0 "+n+" 0 "+n),this.Dl=jeeplus.html.create("DIV",{class:"jeeplus_resize_handle_"+t,style:n?"padding:"+n:""},"<div class='jeeplus_handle_content'></div>"),this.El=jeeplus.html.create("DIV",{class:"jeeplus_resize_origin_"+t}),e[s]&&(this.El.style[s]=e[s]+(e.border?1:0)+"px",this.Dl.style[s]=e[s]+"px"),e.cursor&&(this.Dl.style.cursor=this.El.style.cursor=this.x.style.cursor=e.cursor),this.Fl=jeeplus.event(i,jeeplus.env.mouse.move,this.Gl,{bind:this}),this.Hl=jeeplus.event(document.body,jeeplus.env.mouse.up,this.Il,{bind:this}),this.Dl.style[this.Cl]=this.El.style[this.Cl]=e.start+"px",i.appendChild(this.x),i.appendChild(this.Dl),i.appendChild(this.El)},Il:function(){this.callEvent("onResizeEnd",[this.Jl]),jeeplus.eventRemove(this.Fl),jeeplus.eventRemove(this.Hl),jeeplus.html.remove(this.x),jeeplus.html.remove(this.Dl),jeeplus.html.remove(this.El),this.x=this.Dl=this.El=null},Gl:function(e){var t=jeeplus.html.pos(e);this.Jl=("x"==this.s.dir?t.x:t.y)+this.s.start-this.s.eventPos,this.Dl.style[this.Cl]=this.Jl+"px",this.callEvent("onResize",[this.Jl])}},jeeplus.EventSystem,jeeplus.Settings),jeeplus.extend(jeeplus.ui.datatable,{resizeRow_setter:function(e){return this.s.scrollAlignY=!1,this.s.fixedRowHeight=!1,this.resizeColumn_setter(e)},resizeColumn_setter:function(e){return e&&this.Kl&&(jeeplus.UE(this.x,"mousemove",this.Ll,{bind:this}),jeeplus.UE(this.x,"mousedown",this.Ml,{bind:this}),jeeplus.UE(this.x,"mouseup",this.Nl,{bind:this}),this.Kl=!1),e},Kl:!0,Ml:function(e){this.s.subview&&this!=jeeplus.$$(e.target||e.srcElement)||this.Ol&&(this.Pl=[jeeplus.html.pos(e),this.Ol[2]],jeeplus.html.addCss(document.body,"jeeplus_noselect"),jeeplus.html.denySelect())},Nl:function(){this.Pl=!1,jeeplus.html.removeCss(document.body,"jeeplus_noselect"),jeeplus.html.allowSelect()},Ql:function(e){if(e=e||event,!this.Rl){var t=this.Ol[0],i=this.Pl[1],s=this.pk(i);if(s){var n,l=this.Pl[0];if("x"==t?(n=jeeplus.html.offset(i).x+this.Ol[1]-jeeplus.html.offset(this.Vf).x,l=l.x,this.Ol[1]||(s.cind-=i.parentNode.colSpan||1)):(n=jeeplus.html.offset(i).y+this.Ol[1]-jeeplus.html.offset(this.Vf).y+this.$g,l=l.y,this.Ol[1]||s.rind--),0<=s.cind&&0<=s.rind)this.Rl=[t,s,n],new jeeplus.ui.resizearea({container:this.x,dir:t,eventPos:l,start:n,cursor:("x"==t?"col":"row")+"-resize"}).attachEvent("onResizeEnd",jeeplus.bind(this.Sl,this));this.Ml=this.Ol=!1}}},Sl:function(e){if(this.Rl){var t=this.Rl[0],i=this.Rl[1],s=e-this.Rl[2];if("x"==t){this.s.rightSplit&&i.cind+1>=this.Fj&&i.cind!==this.fj.length-1&&(i.cind++,s*=-1);var n=this.fj[i.cind],l=n.width;delete n.fillspace,delete n.adjust,this.Xs(i.cind,l+s,!0,!0),this.rk()}else{var a=this.getIdByIndex(i.rind),r=this.FA(this.getItem(a));this.setRowHeight(a,r+s)}this.Nl()}this.Rl=null},Ll:function(e){var t=null,i=this.s;if(this.Ol&&this.Pl)return this.Ql(e);var s=(e=e||event).target||e.srcElement,n=!1;if("TD"!=s.tagName&&"TABLE"!=s.tagName){var l=s.className||"",a="string"==typeof l&&-1!=l.indexOf("jeeplus_cell");if(!a||!i.drag){var r="string"==typeof l&&-1!=l.indexOf("jeeplus_hcell");if(this.Ol=!1,a||r){var o=s.offsetWidth,h=s.offsetHeight,u=jeeplus.html.posRelative(e),c=i.resizeRow;"object"==typeof c&&c.headerOnly&&(0<(t=this.pk(s)).cind&&(c=!1)),a&&c&&(c="object"==typeof c&&c.size?c.size:3,u.y<c?(t||(t=this.pk(s)),t.rind&&(this.Ol=["y",0,s],n="row-resize")):h-u.y<c+1&&(this.Ol=["y",h,s],n="row-resize"));var d=i.resizeColumn;"object"==typeof d&&d.headerOnly&&a&&(d=!1),d&&(d="object"==typeof d&&d.size?d.size:3,u.x<d?(this.Ol=["x",0,s],n="col-resize"):o-u.x<d+1&&(this.Ol=["x",o,s],n="col-resize"))}this.Tl&&window.clearTimeout(this.Tl),this.Tl=jeeplus.delay(this.Ul,this,[n],n?100:0)}}},Ul:function(e){this.Vl!=e&&(this.Vl=e,this.x.style.cursor=e||"default")}}),jeeplus.extend(jeeplus.ui.datatable,jeeplus.PagingAbility),jeeplus.csv={escape:!0,delimiter:{rows:"\n",cols:"\t"},parse:function(e,t){if(t=t||this.delimiter,!this.escape)return this.Wl(e,t);for(var i=e.replace(/\n$/,"").split(t.rows),s=0;s<i.length-1;)this.Xl(i[s],'"')%2==1&&(i[s]+=t.rows+i[s+1],delete i[s+1],s++),s++;var n=[];for(s=0;s<i.length;s++)if(void 0!==i[s]){for(var l=i[s],a=0,r=[],o=!1,h=0;h<=l.length;h++){if(!o&&l[h]===t.cols||h===l.length){var u=l.substr(a,h-a);u[0]===u[u.length-1]&&'"'===u[0]&&(u=u.substr(1,u.length-2).replace('""','"')),r.push(u),a=h+1}'"'!==l[h]||(o=!o)}n.push(r)}return n},Wl:function(e,t){for(var i=e.split(t.rows),s=0;s<i.length;s++)i[s]=i[s].split(t.cols);return i},Xl:function(e,t){return e.split(t).length-1},stringify:function(e,t){if(t=t||this.delimiter,!this.escape){for(var i=0;i<e.length;i++)e[i]=e[i].join(t.cols);return e.join(t.rows)}var s=/\n|\"|;|,/;for(i=0;i<e.length;i++){for(var n=0;n<e[i].length;n++)s.test(e[i][n])&&(e[i][n]=e[i][n].replace(/"/g,'""'),e[i][n]='"'+e[i][n]+'"');e[i]=e[i].join(t.cols)}return e.join(t.rows)}},jeeplus.TablePaste={clipboard_setter:function(e){return(!0===e||1===e)&&(e="block"),jeeplus.clipbuffer.init(),this.attachEvent("onSelectChange",this.Yl),this.attachEvent("onItemClick",function(e,t,i){document.activeElement&&this.$view.contains(document.activeElement)&&(jeeplus.clipbuffer.focus(),jeeplus.UIManager.setFocus(this))}),this.attachEvent("onPaste",this.Zl),e},templateCopy_setter:jeeplus.template,Yl:function(){if(!this.getEditor||!this.getEditor()){var e=this.$l();jeeplus.clipbuffer.set(e),jeeplus.UIManager.setFocus(this)}},$l:function(){var a=[],r=this.s.templateCopy;return this.mapSelection(function(e,t,i,s,n){a[s]||(a[s]=[]);var l=r?r(e,t,i):e;return a[s].push(l),e}),jeeplus.csv.stringify(a,this.s.delimiter)},Zl:function(e){if(!jeeplus.isUndefined(this.rh[this.s.clipboard])){var t=jeeplus.csv.parse(e,this.s.delimiter);this.rh[this.s.clipboard].call(this,t)}},rh:{block:function(l){var e=this.mapSelection(null);e&&(this.mapCells(e.row,e.column,l.length,null,function(e,t,i,s,n){return l[s]&&l[s].length>n?l[s][n]:e}),this.render())},selection:function(l){this.mapSelection(function(e,t,i,s,n){return l[s]&&l[s].length>n?l[s][n]:e}),this.render()},repeat:function(l){this.mapSelection(function(e,t,i,s,n){return(t=l[s%l.length])[n%t.length]}),this.render()},custom:function(e){}}},jeeplus.extend(jeeplus.ui.datatable,jeeplus.TablePaste),jeeplus.storage||(jeeplus.storage={}),jeeplus.storage.prefix=function(i,s){return i+=".",{put:function(e,t){return s.put(i+e,t)},get:function(e){return s.get(i+e)},remove:function(e){return s.remove(i+e)}}},jeeplus.storage.local={put:function(e,t){e&&window.JSON&&window.localStorage&&window.localStorage.setItem(e,jeeplus.stringify(t))},get:function(e){if(e&&window.JSON&&window.localStorage){var t=window.localStorage.getItem(e);return t?jeeplus.DataDriver.json.toObject(t):null}return null},remove:function(e){e&&window.JSON&&window.localStorage&&window.localStorage.removeItem(e)},clear:function(){window.localStorage.clear()}},jeeplus.storage.session={put:function(e,t){e&&window.JSON&&window.sessionStorage&&window.sessionStorage.setItem(e,jeeplus.stringify(t))},get:function(e){if(e&&window.JSON&&window.sessionStorage){var t=window.sessionStorage.getItem(e);return t?jeeplus.DataDriver.json.toObject(t):null}return null},remove:function(e){e&&window.JSON&&window.sessionStorage&&window.sessionStorage.removeItem(e)},clear:function(){window.sessionStorage.clear()}},jeeplus.storage.cookie={put:function(e,t,i,s){e&&window.JSON&&(document.cookie=e+"="+escape(jeeplus.stringify(t))+(s&&s instanceof Date?";expires="+s.toUTCString():"")+(i?";domain="+i:"")+(jeeplus.env.https?";secure":""))},getRaw:function(e){for(var t=document.cookie.split(";"),i="",s="",n=0;n<t.length;n++){if((i=t[n].split("="))[0].replace(/^\s+|\s+$/g,"")==e)return!0,1<i.length&&(s=unescape(i[1].replace(/^\s+|\s+$/g,""))),s;i=null,""}return null},get:function(e){if(e&&window.JSON){var t=this.getRaw(e);return t?jeeplus.DataDriver.json.toObject(unescape(t)):null}return null},remove:function(e,t){e&&this.getRaw(e)&&(document.cookie=e+"="+(t?";domain="+t:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT")},clear:function(e){for(var t=document.cookie.split(";"),i=0;i<t.length;i++)document.cookie=/^[^=]+/.exec(t[i])[0]+"="+(e?";domain="+e:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT"}},jeeplus.DataState={getState:function(){for(var e=this.config.columns.length,t=this.config.columns,i={ids:[],size:[],select:this.getSelectedId(!0),scroll:this.getScrollState()},s=0;s<e;s++){var n=t[s];i.ids.push(n.id),i.size.push(n.fillspace||n.adjust?-1:n.width)}if(i.order=[].concat(this.bm.length?this.bm:i.ids),this.Nk&&(i.sort={id:this.Nk,dir:this.Ok}),this.ij&&this.tj){var l={},a=0;for(var r in this.ij)if(!this.am[r]){var o=this.ij[r];o[1].value=l[r]=o[2].getValue(o[0]),a=1}a&&(i.filter=l)}for(var r in i.hidden=[],this.am)i.hidden.push(r);return i},setState:function(e){var t=this.config.columns;if(e){if(this.Nk=null,this.blockEvent(),e.hidden){for(var i={},s=0;s<e.hidden.length;s++)i[e.hidden[s]]=!0,this.bm.length||this.hideColumn(e.hidden[s]);if(this.bm.length)for(s=0;s<this.bm.length;s++){var n=this.bm[s];!!i[n]==!this.am[n]&&this.hideColumn(n,{},!1,!!i[n])}}if(e.ids){var l=!1,a=this.config.columns;for(s=0;s<a.length;s++)a[s].id!=e.ids[s]&&(l=!0);if(l){for(s=0;s<e.ids.length;s++)a[s]=this.getColumnConfig(e.ids[s])||a[s];this.refreshColumns()}}if(e.size){var r=Math.min(e.size.length,t.length);for(s=0;s<r;s++){var o=t[s];o&&0<e.size[s]&&o.width!=e.size[s]&&(delete o.fillspace,delete o.adjust,this.Xs(s,e.size[s],!0))}}this.unblockEvent();var h=!(this.s.leftSplit||this.s.rightSplit);if(this.rk(h),this.callEvent("onStructureUpdate",[]),e.sort){var u=t[this.getColumnIndex(e.sort.id)];u&&this.zf(e.sort.id,e.sort.dir,u.sort)}if(e.filter){var c=this.filterByAll;for(var d in this.filterByAll=function(){},e.filter){var p=e.filter[d];if(p&&this.ij[d]){(g=this.ij[d])[2].setValue(g[0],p);var f=g[1].contentId;f&&(this.hj[f].value=p)}}for(var d in this.ij)if(!e.filter[d]){var g;(g=this.ij[d])[2].setValue(g[0],"")}this.filterByAll=c,this.filterByAll()}if(e.select&&this.select){var v=e.select;this.unselect();for(s=0;s<v.length;s++)(!v[s].row||this.exists(v[s].row))&&this.hl(v[s],!0)}e.scroll&&this.scrollTo(e.scroll.x,e.scroll.y)}}},jeeplus.extend(jeeplus.ui.datatable,jeeplus.DataState),function(){function l(e){e.down="touchstart",e.move="touchmove",e.up="touchend",e.context=g.gm}var g=jeeplus.Touch={config:{longTouchDelay:1e3,scrollDelay:150,gravity:500,deltaStep:30,speed:"0ms",finish:1500,ellastic:!0},limit:function(e){g.cm=!1!==e},disable:function(){g.Xf=!0},enable:function(){g.Xf=!1},$init:function(){g.$init=function(){},jeeplus.event(document.body,a.down,g.dm),jeeplus.event(document.body,a.move,g.em),jeeplus.event(document.body,a.up,g.fm),jeeplus.event(document.body,"dragstart",function(e){return g.Xf||g.cm?void 0:jeeplus.html.preventEvent(e)}),jeeplus.event(document.body,"touchstart",function(e){if(!g.Xf&&!g.cm&&jeeplus.env.isSafari){var t=e.srcElement.tagName.toLowerCase();return"input"==t||"textarea"==t||"select"==t||"label"==t||(g.im=!0,jeeplus.html.preventEvent(e))}}),g.Of(),g.jm=[null,null],g.$active=!0},Of:function(){g.km=g.lm=g.mm=g.bC=null,g.nm=g.om=g.pm=this.qm=null,g.rm={sm:0,tm:0,um:0},g.vm&&(jeeplus.html.removeCss(g.vm,"jeeplus_touch"),g.vm=null),window.clearTimeout(g.wm),g.xm=!0,g.ym=!0,g.zm=!0,g.Am||g.Pf()},fm:function(e){if(g.km){if(g.nm){var t=g.Mf(g.om),i=t.e,s=t.f,n=g.config.finish,l=g.Bm(e,!0),a=(d=jeeplus.$$(g.om))&&d.$scroll?d.$scroll.gravity:g.config.gravity;if(l.um){var r=i+a*l.sm/l.um,o=s+a*l.tm/l.um,h=g.jm[0]?g.Cm(r,!1,!1,g.pm.dx,g.pm.px):i,u=g.jm[1]?g.Cm(o,!1,!1,g.pm.dy,g.pm.py):s,c=Math.max(Math.abs(h-i),Math.abs(u-s));c<150&&(n=n*c/150),(h!=i||u!=s)&&(n=Math.round(n*Math.max((h-i)/(r-i),(u-s)/(o-s))));var d,p={e:h,f:u};(d=jeeplus.$$(g.om))&&d.adjustScroll&&d.adjustScroll(p),n=Math.max(100,n),i!=p.e||s!=p.f?(g.Nf(g.om,p.e,p.f,n+"ms"),g.Dm&&g.Dm.Em(p.e,p.f,n+"ms"),g.Fm(p.e,p.f,n+"ms")):g.Pf()}else g.Pf()}else if(!this.qm)if(g.zm&&!g.ym)g.Gm("onSwipeX");else if(g.ym&&!g.zm)g.Gm("onSwipeY");else if(jeeplus.env.isSafari&&g.im){g.im=!1;var f=g.km.target;jeeplus.delay(function(){var e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),f.dispatchEvent(e)})}g.Gm("onTouchEnd"),g.Of()}},em:function(e){if(g.bC&&g.km){var t=g.Bm(e);if(g.Gm("onTouchMove"),g.nm)g.Hm(t);else if(g.ym=g.Im(t.Jm,"x",g.ym),g.zm=g.Im(t.Ei,"y",g.zm),g.nm){var i=g.Km("onBeforeScroll",!0);if(i){var s={};i.callEvent("onBeforeScroll",[s]),s.update&&(g.config.speed=s.speed,g.config.scale=s.scale)}g.Lm(t)}return jeeplus.html.preventEvent(e)}},Hm:function(){if(g.om){var e=g.Mf(g.om),t=(e.e,e.f,g.mm||g.km),i=jeeplus.$$(g.om),s=i&&i.$scroll?i.$scroll.ellastic:g.config.ellastic;g.jm[0]&&(e.e=g.Cm(e.e-t.x+g.lm.x,s,e.e,g.pm.dx,g.pm.px)),g.jm[1]&&(e.f=g.Cm(e.f-t.y+g.lm.y,s,e.f,g.pm.dy,g.pm.py)),g.Nf(g.om,e.e,e.f,"0ms"),g.Dm&&g.Dm.Em(e.e,e.f,"0ms"),g.Fm(e.e,e.f,"0ms")}},Fm:function(e,t,i){var s=g.pm.px/g.pm.dx*-e,n=g.pm.py/g.pm.dy*-t;g.jm[0]&&g.Nf(g.jm[0],s,0,i),g.jm[1]&&g.Nf(g.jm[1],0,n,i)},scrollTo:function(e,t,i,s){g.Nf(e,t,i,s)},Nf:function(e,t,i,s){if(!g.tt&&window.setAnimationFrame&&window.setAnimationFrame(function(){return g.tt=!0,g.Nf(e,t,i,s)}),g.tt=null,g.Am=!0,e){var n=g.config.translate||jeeplus.env.translate;e.style[jeeplus.env.transform]=n+"("+Math.round(t)+"px, "+Math.round(i)+"px"+("translate3d"==n?", 0":"")+")",e.style[jeeplus.env.transitionDuration]=s}},Mf:function(e){var t=window.getComputedStyle(e)[jeeplus.env.transform];if("none"==t)s={e:0,f:0};else if(window.WebKitCSSMatrix)s=new WebKitCSSMatrix(t);else if(window.MSCSSMatrix)s=new MSCSSMatrix(t);else{var i=t.replace(/(matrix\()(.*)(\))/gi,"$2");i=(i=i.replace(/\s/gi,"")).split(",");for(var s={},n=["a","b","c","d","e","f"],l=0;l<n.length;l++)s[n[l]]=parseInt(i[l],10)}return g.Dm&&g.Dm.Mm(s),s},Cm:function(e,t,i,s,n){if(e===i)return e;var l=Math.abs(e-i);if(0<e)return t?i+l/(e-i)*Math.sqrt(l):0;var a=s-n;return a+e<0?t?i-Math.sqrt(-(e-i)):-a:e},Nm:function(e){if(!e.scroll_enabled){e.scroll_enabled=!0,e.parentNode.style.position="relative";var t=jeeplus.env.cssPrefix;e.style.cssText+=t+"transition: "+t+"transform; "+t+"user-select:none; "+t+"transform-style:flat;",e.addEventListener(jeeplus.env.transitionEnd,g.Pf,!1)}},Lm:function(e){-1!=g.nm.indexOf("x")&&(g.jm[0]=g.Om("x",g.pm.dx,g.pm.px,"width")),-1!=g.nm.indexOf("y")&&(g.jm[1]=g.Om("y",g.pm.dy,g.pm.py,"height")),g.Nm(g.om),window.setTimeout(g.Hm,1)},Om:function(e,t,i,s){if(t-i<2){var n=g.Mf(g.om),l="y"==e?n.e:0,a="y"==e?0:n.f;return g.Dm||g.Nf(g.om,l,a,"0ms"),g.nm=g.nm.replace(e,""),""}var r=jeeplus.html.create("DIV",{class:"jeeplus_scroll_"+e},"");return r.style[s]=Math.max(i*i/t-7,10)+"px",g.pm.left&&("x"===e?r.style.left=g.pm.left+"px":r.style.right=-g.pm.left+"px"),g.pm.hidden&&(r.style.visibility="hidden"),g.om.parentNode.appendChild(r),r},Im:function(e,t,i){return e>g.config.deltaStep?(g.xm&&(g.Pm(t),g.pk(t),-1==(g.nm||"").indexOf(t)&&(g.nm="")),!1):i},Pf:function(){var e,t,i;(i=jeeplus.$$(g.om||this))&&(g.om?e=g.Mf(g.om):i.getScrollState&&(e={e:(t=i.getScrollState()).x,f:t.y}),jeeplus.callEvent("onAfterScroll",[e]),i.callEvent&&i.callEvent("onAfterScroll",[e])),g.nm||(jeeplus.html.remove(g.jm),g.jm=[null,null]),g.Am=!1},Pm:function(e){window.clearTimeout(g.wm),g.xm=!1},Qm:function(e){return!g.jm[0]&&!g.jm[1]||void g.Rm(e,g.jm[0]?"x":"y")},dm:function(e){var t=e.target||event.srcElement;if(!(g.Xf||t.tagName&&"textarea"==t.tagName.toLowerCase()&&t.offsetHeight<t.scrollHeight)){g.qm=null,g.bC=g.km=a.context(e);var i=jeeplus.$$(e);!g.cm||g.Sm()||i&&i.$touchCapture||(g.bC=null),g.Gm("onTouchStart"),g.Qm(e)&&(g.wm=window.setTimeout(g.Tm,g.config.longTouchDelay)),!i||!i.touchable||t.className&&0===t.className.indexOf("jeeplus_view")||(g.vm=i.getNode(e),jeeplus.html.addCss(g.vm,"jeeplus_touch"))}},Tm:function(e){g.km&&(g.Gm("onLongTouch"),jeeplus.callEvent("onClick",[g.km]),g.qm=!0)},Rm:function(e,t){g.pk(t);var i=g.jm[0]||g.jm[1];if(i){var s=g.Km("onBeforeScroll",!0);s&&s.callEvent("onBeforeScroll",[g.km,g.lm])}!i||g.om&&i.parentNode==g.om.parentNode||(g.Of(),g.Pf(),g.km=a.context(e)),g.em(e)},Bm:function(e,t){return g.mm=g.lm,g.lm=a.context(e),g.rm.Jm=Math.abs(g.km.x-g.lm.x),g.rm.Ei=Math.abs(g.km.y-g.lm.y),g.mm&&(g.lm.time-g.mm.time<g.config.scrollDelay?(g.rm.sm=g.rm.sm/1.3+g.lm.x-g.mm.x,g.rm.tm=g.rm.tm/1.3+g.lm.y-g.mm.y):g.rm.tm=g.rm.sm=0,g.rm.um=g.rm.um/1.3+(g.lm.time-g.mm.time)),g.rm},Um:function(e){g.pm={dx:e.offsetWidth,dy:e.offsetHeight,px:e.parentNode.offsetWidth,py:e.parentNode.offsetHeight}},Sm:function(e){var t=g.km.target;if(!jeeplus.env.touch&&!jeeplus.env.transition&&!jeeplus.env.transform)return null;for(;t&&"BODY"!=t.tagName;){if(t.getAttribute){var i=t.getAttribute("touch_scroll");if(i&&(!e||-1!=i.indexOf(e)))return[t,i]}t=t.parentNode}return null},pk:function(e){var t=this.Sm(e);return t&&(g.nm=t[1],g.om=t[0],g.Um(t[0])),t},Gm:function(e){jeeplus.callEvent(e,[g.km,g.lm]);var t=g.Km(e);t&&t.callEvent(e,[g.km,g.lm])},Km:function(e,t){var i=jeeplus.$$(t?g.om:g.km);if(!i)return null;for(;i;){if(i.hasEvent&&i.hasEvent(e))return i;i=i.getParentView()}return null},gm:function(e){if(e.touches[0])return{target:e.target,x:e.touches[0].pageX,y:e.touches[0].pageY,time:new Date};var t=g.lm;return t.time=new Date,t},hm:function(e){return{target:e.target||e.srcElement,x:e.pageX,y:e.pageY,time:new Date}}};jeeplus.ready(function s(){if(jeeplus.env.touch)g.$init(),-1==document.body.className.indexOf("jeeplus_full_screen")&&g.limit(!0),window.MSCSSMatrix&&jeeplus.html.addStyle(".jeeplus_view{ -ms-touch-action: none; }");else var n=jeeplus.event(document.body,"touchstart",function(e){if(e.touches.length&&4<e.touches[0].radiusX)for(var t in jeeplus.env.touch=!0,l(a),s(),jeeplus.ui.views){var i=jeeplus.ui.views[t];i&&i.$touch&&i.$touch()}jeeplus.eventRemove(n)},{capture:!0})});var a=jeeplus.env.mouse={down:"mousedown",up:"mouseup",move:"mousemove",context:g.hm};window.navigator.pointerEnabled?(a.down="pointerdown",a.move="pointermove",a.up="pointerup"):window.navigator.msPointerEnabled?(a.down="MSPointerDown",a.move="MSPointerMove",a.up="MSPointerUp"):jeeplus.env.touch&&l(a)}(),jeeplus.attachEvent("onDataTable",function(e,t){jeeplus.env.touch&&(jeeplus.Touch.$init(),t.scrollSize=0,jeeplus.Touch.Xf&&jeeplus.Touch.limit(),e.$ready.push(e.$touch))}),jeeplus.extend(jeeplus.ui.datatable,{$touch:function(){var e=this.s;e.scrollAlignY=!1,jeeplus.extend(this,!0===e.prerender?this.Vm:this.Wm);var t="";e.autowidth||!1===e.scrollX||(t+="x"),e.autoheight||!1===e.scrollY||(t+="y"),this.Vf.setAttribute("touch_scroll",t),jeeplus.Touch.Nm(this.Vf.childNodes[1].firstChild),jeeplus.Touch.Nf(this.Vf.childNodes[1].firstChild,0,0,"0ms"),this.Em(0,0,"0ms")},Vm:{$j:function(e,t){jeeplus.Touch.Nf(this.Vf.childNodes[1].firstChild,0,0,"0ms"),this.Em(e,t,"0ms")},_j:function(){var e=jeeplus.Touch.Mf(this.Vf.childNodes[1].firstChild);return{x:-e.e,y:-e.f}},$init:function(){this.attachEvent("onBeforeScroll",function(){jeeplus.Touch.om=this.Vf.childNodes[1].firstChild,jeeplus.Touch.Um(jeeplus.Touch.om),jeeplus.Touch.Dm=this}),this.attachEvent("onTouchEnd",function(){jeeplus.Touch.Dm=null})},Em:function(e,t,i){this.s.leftSplit&&jeeplus.Touch.Nf(this.Vf.childNodes[0].firstChild,0,t,i),this.s.rightSplit&&jeeplus.Touch.Nf(this.Vf.childNodes[2].firstChild,0,t,i),this.s.header&&jeeplus.Touch.Nf(this.I.childNodes[1].firstChild,e,0,i),this.s.footer&&jeeplus.Touch.Nf(this.cj.childNodes[1].firstChild,e,0,i),this.callEvent("onSyncScroll",[e,t,i])},Mm:function(){}},Wm:{$j:function(e,t){jeeplus.delay(function(){this.callEvent("onAfterScroll",[{e:-e,f:-t}])},this)},$scroll:{gravity:0,elastic:!1},$init:function(){this.attachEvent("onAfterColumnHide",function(){this.$j(0,0)}),this.attachEvent("onBeforeScroll",function(){var e=jeeplus.Touch;e.om=this.Vf.childNodes[1].firstChild,e.Um(e.om),e.pm.left=this.bk,e.pm.hidden=this.Zj.s.scrollVisible||this.Wj.s.scrollVisible,e.pm.dy=this.wj,e.Dm=this}),this.attachEvent("onAfterScroll",function(e){if(e){var t=this.bk!=-e.e,i=this.jk!=-e.f;jeeplus.Touch.Dm=null,jeeplus.Touch.$m=null,this.jk=0,this.bk=0;var s=jeeplus.Touch.config.translate;return jeeplus.Touch.config.translate="translate",this.Em(this.Zj?0:e.e,0,"0ms"),jeeplus.Touch.config.translate=s,this.bk=-e.e,this.jk=-e.f,this.ZF(),this.render(),t&&(this.Zj&&this.Zj.scrollTo(this.bk),this.callEvent("onScrollX",[])),i&&(this.Wj&&this.Wj.scrollTo(this.jk),this.callEvent("onScrollY",[])),!1}})},Em:function(e,t,i){t+=this.jk,e+=this.bk,jeeplus.Touch.Nf(this.Vf.childNodes[1].firstChild,e,t,i),this.s.leftSplit&&jeeplus.Touch.Nf(this.Vf.childNodes[0].firstChild,0,t,i),this.s.rightSplit&&jeeplus.Touch.Nf(this.Vf.childNodes[2].firstChild,0,t,i),this.s.header&&jeeplus.Touch.Nf(this.I.childNodes[1].firstChild,e,0,i),this.s.footer&&jeeplus.Touch.Nf(this.cj.childNodes[1].firstChild,e,0,i),this.callEvent("onSyncScroll",[e,t,i])},Mm:function(e){e.f-=this.jk,e.e-=this.bk}}}),jeeplus.extend(jeeplus.ui.datatable,{$init:function(){this.data.attachEvent("onStoreUpdated",jeeplus.bind(function(e){e||this._m()},this)),this.attachEvent("onStructureLoad",this._m),this.attachEvent("onStructureUpdate",this.an),this.attachEvent("onColumnResize",function(e,t,i,s){s&&this.an()}),this.attachEvent("onResize",this.an)},_m:function(){for(var e=!1,t=this.fj,i=0;i<t.length;i++)t[i].adjust&&("header"==t[i].adjust||this.count())&&(e=this.bn(i,t[i].adjust,!0)||e);e&&(this.rk(!0),this.an())},an:function(){var e=this.s.columns,t=[],i=0;if(e&&!this.s.autowidth)for(var s=0;s<e.length;s++){var n=e[s].fillspace;n&&(i+=1*(t[s]=n)||1)}i&&this.cn(t,i)},cn:function(e,t){var i=this.s.columns;if(i){var s=this.bc-this.oj,n=!1;if(0<s){for(var l=0;l<i.length;l++)e[l]||(s-=i[l].width||this.config.columnWidth);for(l=0;l<e.length;l++)if(e[l]){var a=Math.min(s,Math.round(s*e[l]/t));n=this.Xs(l,a,!0)||n,s-=i[l].width,t-=e[l]}n&&this.rk(!0)}}},dn:function(e,t){var i=this.s.columns[e],s=i.minColumnWidth||10;if("header"!=t){var n=this.data.order.length;i.adjustBatch&&i.adjustBatch<n&&(n=i.adjustBatch);for(var l=this.data.order.slice(0,n),a=0;a<n;a++)l[a]=l[a]?this.Ek(this.getItem(l[a]),i,0):"";s=Math.max(s,jeeplus.html.getTextSize(l,"jeeplus_table_cell jeeplus_cell").width)}if("data"!=t)for(a=0;a<i.header.length;a++){var r=i.header[a];if(r){var o=0;if(r.rotate)for(var h=0;h<(r.rowspan||1);h++)o+=this.Mt[h];var u="jeeplus_table_cell jeeplus_cell "+(r.css||"")+(r.rotate?"jeeplus_measure_rotate":""),c=jeeplus.html.getTextSize([r.text],u,o);s=Math.max(s,r.rotate?c.height:c.width)}}return s+1+(jeeplus.env.isIE?jeeplus.skin.$active.layoutPadding.space:0)},bn:function(e,t,i){if(0<=e){var s=this.dn(e,t);return this.Xs(e,s,i)}},adjustColumn:function(e,t){this.bn(this.getColumnIndex(e),t)},adjustRowHeight:function(e,t){if(e){var i,s=this.getColumnConfig(e),n=jeeplus.html.create("DIV",{class:"jeeplus_table_cell jeeplus_measure_size jeeplus_cell"},"");n.style.cssText="width:"+s.width+"px; height:1px; visibility:hidden; position:absolute; top:0px; left:0px; overflow:hidden;",this.$view.appendChild(n),n.offsetHeight<1&&(i=this.$view.cloneNode(!0),document.body.appendChild(i),i.appendChild(n)),this.data.each(function(e){n.innerHTML=this.Ek(e,s,0),e.$height=Math.max(n.scrollHeight,this.s.rowHeight)},this),n=jeeplus.html.remove(n),i&&jeeplus.html.remove(i)}else{var l=new Array(this.data.order.length),a=this.config.columns,r=0;for(var o in this.data.pull)l[r]=0,r++;for(var h=0;h<a.length;h++){this.adjustRowHeight(a[h].id,!0);r=0;this.data.each(function(e,t){e.$height>l[r]&&(l[r]=e.$height),e.$height=l[r],r++})}}t||this.refresh()}}),jeeplus.extend(jeeplus.ui.datatable,{math_setter:function(e){return e&&this.en(),e},fn:"$",en:function(){jeeplus.env.strict||(this.data.attachEvent("onStoreUpdated",jeeplus.bind(this.gn,this)),this.data.attachEvent("onStoreLoad",jeeplus.bind(this.hn,this)),this.attachEvent("onStructureLoad",this.hn))},gn:function(e,t,i){if(e&&"delete"!=i&&"paint"!=i){"add"==i&&this.pn(t);for(var s=0;s<this.fj.length;s++)this.jn(e,this.fj[s].id,"add"!==i);this.kn={}}},jn:function(e,t,i){var s,n=this.getItem(e);if(!0===i?s=n[this.fn+t]||n[t]:(s=n[t],this.kn={}),null!=s&&(0<s.length&&"="===s.substr(0,1)?(n[this.fn+t]&&!0===i||(n[this.fn+t]=n[t]),n[t]=this.ln(s,e,t)):(void 0!==n[this.fn+t]&&delete n[this.fn+t],this.mn(n,t)),void 0!==n.depends&&void 0!==n.depends[t]))for(var l in n.depends[t]){var a=n.depends[t][l][0]+"__"+n.depends[t][l][1];void 0===this.kn[a]&&(this.kn[a]=!0,this.jn(n.depends[t][l][0],n.depends[t][l][1],!0))}},nn:function(e,t){var i=this.getItem(e);void 0!==i[this.fn+t]&&(i[t]=i[this.fn+t])},hn:function(){if(this.fj&&this.count()){this.pn();for(var e=0;e<this.fj.length;e++){var t=this.columnId(e);this.data.each(function(e){this.jn(e.id,t)},this)}this.kn={}}},pn:function(e){for(var t=0;t<this.fj.length;t++)if(this.fj[t].math){var i=this.columnId(t),s="="+this.fj[t].math;s=s.replace(/\$c/g,"#$c#"),e?(e[i]=this.qn(s,e.id,i),delete e[this.fn+i],this.mn(e,i)):this.data.each(function(e){e[i]=this.qn(s,e.id,i),delete e[this.fn+i],this.mn(e,i)},this)}},qn:function(e,t,i){return jeeplus.template(e)({$r:t,$c:i})},rn:function(e,t){var i;if(!this.exists(e))return"#out_of_range";var s=(i=this.getItem(e))[this.fn+t]||i[t]||0;return"="!==(s=s.toString()).substring(0,1)?s:(void 0===i[this.fn+t]&&(i[this.fn+t]=i[t]),i[t]=this.ln(s,e,t,!0),i[t])},ln:function(e,t,i,s){if(!0===s){if(this.sn(t,i))return"#selfreference"}else this.tn();this.un(t,i);var n=this.getItem(t);e=e.substring(1);var l,a=this.vn(e),r=this.wn(e,t);if(e=a?(e=this.xn(e,r),this.yn(e,a)):this.xn(e,r,!0),!1!==(l=this.zn(e)))return l;this.An(t,i),this.mn(n,i);for(var o=0;o<r.length;o++)this.Bn([t,i],r[o]);return!1!==(l=this.zn(e))?l:e?(e=this.Cn(e),!1!==(l=this.zn(e))?l:e):e},vn:function(e){return e.replace(/\[[^)]*?\]/g,"").match(/(\+|\-|\*|\/)/g)},wn:function(e,t){var i=e.match(/\[([^\]]+),([^\]]+)\]/g);null===i&&(i=[]);for(var s=0;s<i.length;s++){var n=i[s],l=n;(n=(n=n.substr(1,n.length-2)).split(","))[0]=this.Dn(n[0]),n[1]=this.Dn(n[1]),":"===n[0].substr(0,1)&&(n[0]=this.getIdByIndex(n[0].substr(1))),"$r"===n[0]&&(n[0]=t),":"===n[1].substr(0,1)&&(n[1]=this.columnId(n[1].substr(1))),n[2]=l,i[s]=n}return i},xn:function(e,t,i){var s="(",n=")";i&&(s=n="");for(var l=0;l<t.length;l++){var a=t[l],r=this.rn(a[0],a[1]);isNaN(r)&&(r='"'+r+'"'),e=e.replace(a[2],s+r+n)}return e},yn:function(e,t){for(var i=[],s=0;s<t.length;s++){var n=t[s],l=this.En(e,n);i.push(l[0]),e=l[1]}i.push(e);for(s=0;s<i.length;s++){var a=this.Dn(i[s]);i[s]=a}var r="";for(s=0;s<i.length-1;s++)r+=i[s]+t[s];return r+i[i.length-1]},Cn:function(expr){try{jeeplus.temp_value="",expr="jeeplus.temp_value = "+expr,eval(expr)}catch(e){jeeplus.temp_value=""}var result=jeeplus.temp_value;return jeeplus.temp_value=null,result.toString()},En:function(e,t){var i=e.indexOf(t);return[e.substr(0,i),e.substr(i+1)]},Dn:function(e){return(e=e.replace(/^ */g,"")).replace(/ *$/g,"")},tn:function(){this.Fn=[]},un:function(e,t){this.Fn[e+"__"+t]=!0},An:function(e,t){void 0!==this.Fn[e+"__"+t]&&delete this.Fn[e+"__"+t]},sn:function(e,t){return void 0!==this.Fn[e+"__"+t]},Bn:function(e,t){var i=this.getItem(t[0]);void 0===i.depends&&(i.depends={}),void 0===i.depends[t[1]]&&(i.depends[t[1]]={}),i.depends[t[1]][e[0]+"__"+e[1]]=e,void 0===(i=this.getItem(e[0])).triggers&&(i.triggers={}),void 0===i.triggers[e[1]]&&(i.triggers[e[1]]={}),i.triggers[e[1]][t[0]+"__"+t[1]]=t},mn:function(e,t){if(e&&void 0!==e.triggers)for(var i in e.triggers[t]){var s=e.triggers[t][i];delete this.getItem(s[0]).depends[s[1]][e.id+"__"+t]}},zn:function(e){var t=e.match(/#\w+/);return null!==t&&0<t.length&&t[0]}}),jeeplus.extend(jeeplus.ui.datatable,{ii:function(e){return this.getColumnConfig(e.column).editor},getEditor:function(e,t){return e?(1==arguments.length&&(t=e.column,e=e.row),(this.ai[e]||{})[t]):this.di},si:function(e){for(var t in this.ai){var i=this.ai[t];for(var s in i)"$count"!=s&&e.call(this,i[s])}},ji:function(e,t,i){var s=e.row,n=e.column,l=t.config=this.getColumnConfig(n);!1!==i&&this.showCell(s,n);var a=t.render();t.$inline&&(a=this.mi(e)),t.node=a;var r,o=this.getItem(s),h=l.editFormat;return this.s.editMath&&(r=o["$"+n]),r=r||o[n],jeeplus.isUndefined(r)&&(r=""),t.setValue(h?h(r):r,o),t.value=o[n],this.ni(e,t),t.$inline||this.oi(e,a,!0),t.afterRender&&t.afterRender(),this.s.liveValidation&&(jeeplus.UE(t.node,"keyup",this.Gn(e,this)),this.validateEditor(e)),a},Gn:function(e,t){return function(){t.validateEditor(e)}},ti:function(e,t,i){var s=this.getColumnConfig(e.column).editParse,n=i?{}:this.getItem(e.row);return n[e.column]=s?s(t):t,this.s.editMath&&(n["$"+e.column]=null),n},ni:function(e,t,i){var s=this.ai[e.row]=this.ai[e.row]||{};s.$count=(s.$count||0)+1,t.row=e.row,t.column=e.column,this.di=s[e.column]=t,this.Eb++,this.Hn=this.getScrollState()},qi:function(e){this.di==e&&(this.di=0),e.destroy&&e.destroy();var t=this.ai[e.row];delete t[e.column],t.$count--,t.$count||delete this.ai[e.row],this.Eb--},ei:function(e,t){var i=this.ai[e];if(i)for(var s in this.ai[t]=i,delete this.ai[e],i)i[s].row=t},pi:function(e){var t,i,s,n,l,a=this.getColumnConfig(e.column),r=0;if(a&&a.node&&a.attached){if(s=this.getIndexById(e.row),this.Rt&&this.getSpan(e.row,e.column))for(i=0;i<3;i++)for(t=this.St[i],n=0;!r&&n<t.childNodes.length;n++)(l=t.childNodes[n]).getAttribute("row")==s&&l.getAttribute("column")==this.getColumnIndex(e.column)&&(r=l);!r&&s>=a.qk-this.s.topSplit&&s<a.Kk&&(r=a.node.childNodes[s-a.qk+this.s.topSplit])}return r},editCell:function(e,t,i,s){return t=t||this.s.columns[0].id,jeeplus.EditAbility.edit.call(this,{row:e,column:t},i,s)},editRow:function(t,e){t&&t.row&&(t=t.row);var i=!1;this.eachColumn(function(e){this.edit({row:t,column:e},i,!i),i=!0})},editColumn:function(t,e){t&&t.column&&(t=t.column);var i=!1;this.eachRow(function(e){this.edit({row:e,column:t},i,!i),i=!0})},eachRow:function(e,t){var i=this.data.order;t&&(i=this.data.jf||i);for(var s=0;s<i.length;s++)e.call(this,i[s])},eachColumn:function(e,t){for(var i in this.Aj){var s=this.Aj[i];e.call(this,s.id,s)}if(t)for(var i in this.am){s=this.am[i];e.call(this,s.id,s)}},vi:function(e){if(this.getSelectedId&&1==this.getSelectedId(!0).length)return this.hl(e),!1},Gb:function(e,t){if(this.s.editable&&!this.Eb){if(t.target&&"INPUT"==t.target.tagName)return!0;var i=this.getSelectedId(!0);if(1==i.length){var s=i[0];return"row"==this.s.select&&(s.column=this.s.columns[t.shiftKey?0:this.s.columns.length-1].id),this.editNext(e,s),!1}}return!0},ui:function(e,t,i){var s=this.getIndexById(e.row),n=this.getColumnIndex(e.column),l=this.data.order,a=this.fj;if(i)for(var r=s;r<l.length;r++){for(var o=n+1;o<a.length;o++){var h={row:l[r],column:a[o].id};if(t.call(this,h)&&(!this.QD||!this.QD(e,h)))return h}n=-1}else for(r=s;0<=r;r--){for(o=n-1;0<=o;o--){h={row:l[r],column:a[o].id};if(t.call(this,h))return h}n=a.length}return null},In:function(){this.Eb&&(this.Jn?this.Jn=!1:(this.Wj.scrollTo(this.getScrollState().y+this.Vf.childNodes[1].firstChild.scrollTop),this.Vf.childNodes[1].firstChild.scrollTop=0,this.Jn=!0))},Kn:function(){this.Eb&&this.Zj.scrollTo(this.Vf.childNodes[1].scrollLeft)},gi:function(){this.attachEvent("onScrollY",this.Ln),this.attachEvent("onScrollX",this.Ln),this.attachEvent("onScrollY",this.$s),this.attachEvent("onColumnResize",function(){this.editStop()}),this.attachEvent("onAfterFilter",function(){this.editStop()}),this.attachEvent("onRowResize",function(){this.editStop()}),this.attachEvent("onAfterScroll",function(){this.s.topSplit&&this.editStop()}),this.Vf.childNodes[1].firstChild.onscroll=jeeplus.bind(this.In,this),this.Vf.childNodes[1].onscroll=jeeplus.bind(this.Kn,this)},Ln:function(){if(this.Eb){var e=this.Hn;this.Hn=this.getScrollState();var i=this.Hn.y-e.y;this.si(function(e){if(e.getPopup){var t=this.getItemNode(e);t?e.getPopup().show(t):e.getPopup().show({x:-1e4,y:-1e4})}else e.$inline||(e.node.top-=i,e.node.style.top=e.node.top+"px")})}}}),jeeplus.extend(jeeplus.ui.datatable,jeeplus.EditAbility),jeeplus.extend(jeeplus.ui.datatable,{$init:function(){this.kz(),this.attachEvent("onStructureLoad",this.Nn)},kz:function(){this.am={},this.bm=jeeplus.toArray(),this.Mn=[0,0]},Nn:function(){for(var e=this.fj,t=0;t<e.length;t++)e[t].header&&this.xB(e,e[t].header),e[t].footer&&this.xB(e,e[t].footer);for(t=e.length-1;0<=t;t--)e[t].hidden?this.hideColumn(e[t].id,{},!0,!0):e[t].batch&&this.config.visibleBatch&&e[t].batch!=this.config.visibleBatch&&this.hideColumn(e[t].id,{},!0,!0)},xB:function(e,t){for(var i=0;i<t.length;i++){var s=t[i];s&&s.colspan&&!s.$colspan&&(s.$colspan=s.colspan)}},moveColumn:function(e,t){var i=this.getColumnIndex(e);if(i!=t){var s=this.s.columns,n=s.splice(i,1),l=t-(i<t?1:0);jeeplus.PowerArray.insertAt.call(s,n[0],l),this.On()}},rz:function(){var e=this.bm,t=this.s.columns;if(!e.length){for(var i=0;i<t.length;i++)e[i]=t[i].id;this.Mn=[this.s.leftSplit,this.Fj]}},isColumnVisible:function(e){return!this.am[e]},hideColumn:function(e,t,i,s){var n=this.s.columns,l=this.bm,a=this.am,r=1;if(t=t||{},!1!==s){if(-1===(d=this.getColumnIndex(e))||!this.callEvent("onBeforeColumnHide",[e]))return;if(-1==d)return;if(this.rz(),t.spans)for(var o=n[d].header,h=0;h<o.length;h++)o[h]&&(o[h].$groupSpan=o[h].colspan||1,r=Math.max(r,o[h].$groupSpan));d<this.s.leftSplit&&(this.s.leftSplit-=r),d>=this.Fj?this.s.rightSplit-=r:this.Fj-=r;for(h=d+r-1;d<=h;h--)this.vk(d),(a[(p=n.splice(d,1)[0]).id]=p).qk=-1,delete this.Aj[p.id];this.callEvent("onAfterColumnHide",[e])}else{if(!(p=a[e])||!this.callEvent("onBeforeColumnShow",[e]))return;for(var u=null,c=(h=0,0);h<l.length;h++){if(l[h]==e){c=h;break}a[l[h]]||(u=l[h])}var d=u?this.getColumnIndex(u)+1:0;if(t.spans)for(o=p.header,h=0;h<o.length;h++)o[h]&&(o[h].colspan=o[h].$groupSpan||o[h].colspan,delete o[h].$groupSpan,r=Math.max(r,o[h].colspan||1));for(h=c+r-1;c<=h;h--){var p;(p=a[l[h]])?(jeeplus.PowerArray.insertAt.call(n,p,d),delete p.hidden,delete a[p.id],this.Aj[p.id]=p):r--}c<this.Mn[0]&&(this.s.leftSplit+=r),c>=this.Mn[1]?this.s.rightSplit+=r:this.Fj+=r,this.callEvent("onAfterColumnShow",[e])}p.header&&this.xt(p,!1!==s?0:1,"header"),p.footer&&this.xt(p,!1!==s?0:1,"footer"),i||this.On()},xt:function(e,t,i){for(var s=e[i].length-1;0<=s;s--)for(var n,l=this.bm,a=!1,r=0,o=0;o<l.length;o++){var h=(e=this.getColumnConfig(l[o]))[i][s];this.isColumnVisible(l[o])?(a&&0<r&&n&&0<n.colspan?n=h=e[i][s]=n:h&&h.$colspan&&r<=0&&(r=h.colspan=h.$colspan,n=h),a=null):(h&&h.$colspan&&r<=0&&(r=h.colspan=h.$colspan,a=n=h),n&&0<r&&n.colspan--),r--}},refreshColumns:function(e,t){(e&&e!=this.config.columns||t)&&(this.kz(),this.ij={},e&&(this.Fj=e.length-(this.config.rightSplit||0))),this.Aj={};for(var i=0;i<this.fj.length;i++){var s=this.fj[i];(this.Aj[s.id]=s).attached=s.node=null}for(i=0;i<3;i++)this.I.childNodes[i].innerHTML="",this.Vf.childNodes[i].firstChild.innerHTML="";this.fj=this.config.columns=e||this.config.columns,this.Fj=this.fj.length-this.s.rightSplit,this.tj=0,this.rj(),this.callEvent("onStructureUpdate"),this.sk(),this.render()},On:function(){this.tj=0,this.callEvent("onStructureUpdate"),this.uj(),this.render()},showColumn:function(e,t,i){return this.hideColumn(e,t,i,!1)},showColumnBatch:function(s,n){var l=void 0!==n;n=!1!==n,this.eachColumn(function(e,t){if(t.batch){var i=this.am[t.id];n||(i=!i),t.batch==s&&i?this.hideColumn(t.id,{spans:!0},!0,!n):l||t.batch==s||i||this.hideColumn(t.id,{spans:!0},!0,n)}},!0),this.On()}}),jeeplus.extend(jeeplus.ui.datatable,{$init:function(){this.attachEvent("onAfterScroll",this.cF)},cF:function(){if(!this.eF()){var e=this.y.querySelector(".jeeplus_cell");e&&e.setAttribute("tabindex","0")}},eF:function(){for(var e=this.getSelectedId(!0),t=0;t<e.length;t++)if(this.isColumnVisible(e[t].column))return this.getItemNode(e[t]);return null},moveSelection:function(e,t,i){if(!this.s.disabled){t=t||{};var s=this.getSelectedId(!0),n=s.length-1,l=!(!this.s.multiselect&&!this.s.areaselect)&&t.shift;if(1<s.length&&"cell"!==this.s.select&&(s=s.sort(jeeplus.bind(function(e,t){return this.getIndexById(e.row)>this.getIndexById(t.row)||this.getColumnIndex(e.column)>this.getColumnIndex(t.column)?1:-1},this)),("up"==e||"left"==e||"top"==e||"pgup"==e)&&(n=0)),n<0&&this.count()){if("down"==e||"right"==e)e="top";else{if("up"!=e&&"left"!=e)return;e="bottom"}n=0,s=[{row:1,column:1}]}if(0<=n){var a=s[n].row,r=s[n].column;if("top"==e||"bottom"==e)a&&("top"==e?a=this.data.getFirstId():"bottom"==e&&(a=this.data.getLastId())),r&&(n=0,"bottom"==e&&(n=this.config.columns.length-1),r=this.columnId(n));else if("up"==e||"down"==e||"pgup"==e||"pgdown"==e){if(a){n=this.getIndexById(a);var o="pgup"==e||"pgdown"==e?Math.round(this.Vj/this.s.rowHeight):1;"up"==e||"pgup"==e?n-=o:("down"==e||"pgdown"==e)&&(n+=o),n<0&&(n=0),n>=this.data.order.length&&(n=this.data.order.length-1),!(a=this.getIdByIndex(n))&&this.s.pager&&this.showItemByIndex(n)}}else{if("right"!=e&&"left"!=e)return;if(r&&"row"!=this.config.select){n=this.getColumnIndex(r);"right"==e?n++:"left"==e&&n--,n<0&&(n=0),n>=this.config.columns.length&&(n=this.config.columns.length-1),r=this.columnId(n)}else{if((this.open||this.oA)&&"right"==e)return this.open?this.open(a):this.openSub(a);if((this.close||this.oA)&&"left"==e)return this.close?this.close(a):this.closeSub(a)}}if(a){this.showCell(a,r),this.select||(jeeplus.extend(this,this._k.$k,!0),this.s.select=this.open||this.oA?"row":"cell",jeeplus.extend(this,this._k[this.s.select],!0));var h={row:a,column:r};if(l&&"area"==this.s.select){var u=this.el[this.el.length-1];this.gC(h,u,e,t)}else this.hl(h,l);if(!this.s.clipboard&&!1!==i){var c=this.getItemNode(h);c&&c.focus()}}}return!1}}}),jeeplus.extend(jeeplus.ui.datatable,jeeplus.KeysNavigation),jeeplus.extend(jeeplus.ui.datatable,jeeplus.DataMove),jeeplus.extend(jeeplus.ui.datatable,{drag_setter:function(e){return this.attachEvent("onBeforeDrag",function(e){return this.RD(e.source)}),this.attachEvent("onBeforeDragIn",function(e){return this.RD(e.target)}),this.attachEvent("onBeforeDropOrder",function(e,t){return t<0||t>=this.s.topSplit}),jeeplus.DragItem.drag_setter.call(this,e)},RD:function(e){var t,i=!1;if(this.s.topSplit&&e)for(jeeplus.isArray(e)||(e=[e]),t=0;!i&&t<e.length;t++)i=this.getIndexById(e[t])<this.s.topSplit;return!i},$dragHTML:function(e,t){for(var i="<div class='jeeplus_dd_drag' style='width:"+(this.bc-this.oj-2)+"px;'>",s=this.s.columns,n=0;n<s.length;n++){var l=this.Ek(e,s[n]);i+="<div style='width:"+s[n].width+"px;'>"+l+"</div>"}return i+"</div>"},getHeaderNode:function(e,t){return this.nG(e,t,this.I)},getFooterNode:function(e,t){return this.nG(e,t,this.cj)},nG:function(e,t,i){if(this.isColumnVisible(e)){var s=this.getColumnIndex(e),n=this.s.leftSplit>s?0:this.Fj<=s?2:1;t=t||0;var l=i.childNodes[n].getElementsByTagName("TR");if(l.length)for(var a=l[t+1].childNodes,r=0;r<a.length;r++)if(a[r].getAttribute("column")==s)return a[r].firstChild}return null},getItemNode:function(e,t){if(e&&!e.header){var i=e.row||e,s=this.getIndexById(i),n=this.Sj(),l=n[0]-this.s.topSplit;if(s<l&&s>n[1])return;var a=this.Xj(),r=this.s.leftSplit?0:a[0];if(e.column&&((r=this.getColumnIndex(e.column))<this.Fj&&r>=this.s.leftSplit&&(r<a[0]||r>a[1])))return;var o=this.s.columns[r];if(o.attached&&o.node){var h=s<this.s.topSplit?s:s-l;return o.node.childNodes[h]}}},dragColumn_setter:function(e){var a;"order"==e?a={$drag:jeeplus.bind(function(e,t){var i=this.locate(t);if(this.Pl||!i||!this.callEvent("onBeforeColumnDrag",[i.column,t]))return!1;jeeplus.DragControl.Gd={from:a,start:i,custom:"column_dnd"};var s=this.getColumnConfig(i.column);return this.Qn=jeeplus.html.posRelative(t),this.Rn=s.width,"<div class='jeeplus_dd_drag_column' style='width:"+s.width+"px'>"+(s.header[0].text||"&nbsp;")+"</div>"},this),$dragPos:jeeplus.bind(function(e,t,i){var s=jeeplus.DragControl.getContext(),n=jeeplus.html.offset(this.$view);i.style.display="none";var l=document.elementFromPoint(e.x,n.y+1),a=l?this.locate(l):null,r=jeeplus.DragControl.getContext().start.column;if(a&&a.column!=r&&(!this.Sn||a.column!=this.Yg)&&"column_dnd"==s.custom&&jeeplus.$$(l)==this){if(!this.callEvent("onBeforeColumnDropOrder",[r,a.column,t]))return;var o=this.getColumnIndex(r),h=this.getColumnIndex(a.column);t.touches&&(this.wy=t.target,this.wy.style.display="none",this.$view.parentNode.appendChild(this.wy)),this.moveColumn(r,h+(o<h?1:0)),this.Yg=a.column,this.Sn=!0}if(a&&a.column==r&&(this.Sn=!1),i.style.display="block",e.x=e.x-this.Qn.x,e.y=n.y,e.x<n.x)e.x=n.x;else{var u=n.x+this.$view.offsetWidth-this.oj-this.Rn;e.x>u&&(e.x=u)}jeeplus.DragControl.Ed=!0},this),$dragDestroy:jeeplus.bind(function(e,t){jeeplus.html.remove(t),this.wy&&jeeplus.html.remove(this.wy);var i=jeeplus.DragControl.getContext().start;this.callEvent("onAfterColumnDropOrder",[i.column,this.Yg,e])},this),$drop:function(){}}:e&&(a={ah:!0,$drag:jeeplus.bind(function(e,t){var i=this.locate(t);if(this.Pl||!i||!this.callEvent("onBeforeColumnDrag",[i.column,t]))return!1;jeeplus.DragControl.Gd={from:a,start:i,custom:"column_dnd"};for(var s=this.getColumnConfig(i.column).header,n="&nbsp;",l=0;l<s.length;l++)if(s[l]){n=s[l].text;break}return"<div class='jeeplus_dd_drag_column'>"+n+"</div>"},this),$drop:jeeplus.bind(function(e,t,i){var s=i;i.touches&&this.Tn&&(s=this.Tn);var n=this.locate(s);if(!n)return!1;var l=jeeplus.DragControl.getContext().start.column;if(l!=n.column){if(!this.callEvent("onBeforeColumnDrop",[l,n.column,i]))return;var a=this.getColumnIndex(l),r=this.getColumnIndex(n.column);this.moveColumn(l,r+(a<r?1:0)),this.callEvent("onAfterColumnDrop",[l,n.column,i])}},this),$dragIn:jeeplus.bind(function(e,t,i){var s=jeeplus.DragControl.getContext();if("column_dnd"!=s.custom||s.from!=a)return!1;for(var n=i.target||i.srcElement;-1==(n.className||"").indexOf("jeeplus_hcell");)if(!(n=n.parentNode))return;return n!=this.Tn&&(this.Tn&&jeeplus.html.removeCss(this.Tn,"jeeplus_dd_over_column"),jeeplus.html.addCss(n,"jeeplus_dd_over_column")),this.Tn=n},this),$dragDestroy:jeeplus.bind(function(e,t){this.Tn&&jeeplus.html.removeCss(this.Tn,"jeeplus_dd_over_column"),jeeplus.html.remove(t)},this)}),e&&(jeeplus.DragControl.addDrag(this.I,a),jeeplus.DragControl.addDrop(this.I,a,!0))}}),jeeplus.extend(jeeplus.ui.datatable,jeeplus.DragItem),jeeplus.extend(jeeplus.ui.datatable,{clearValidation:function(){for(var e in this.data.Me)this.Un(e);this.data.clearMark("jeeplus_invalid",!0)},Te:function(e,t){for(var i in this.Un(e),t)this.addCellCss(e,i,"jeeplus_invalid_cell");this.addCss(e,"jeeplus_invalid")},Qe:function(e){this.Un(e),this.removeCss(e,"jeeplus_invalid")},Un:function(e){var t=(this.getItem(e),this.data.getMark(e,"$cellCss"));if(t)for(var i in t)t[i]=t[i].replace("jeeplus_invalid_cell","").replace("  "," ")},addRowCss:function(e,t,i){this.addCss(e,t,i)},removeRowCss:function(e,t,i){this.removeCss(e,t,i)},addCellCss:function(e,t,i,s){var n=this.data.getMark(e,"$cellCss"),l=n||{},a=l[t]||"";l[t]=a.replace(i,"").replace("  "," ")+" "+i,n||this.data.addMark(e,"$cellCss",!1,l,!0),s||this.refresh(e)},removeCellCss:function(e,t,i,s){var n=this.data.getMark(e,"$cellCss");if(n){var l=n[t]||"";l&&(n[t]=l.replace(i,"").replace("  "," ")),s||this.refresh(e)}}}),jeeplus.extend(jeeplus.ui.datatable,jeeplus.ValidateCollection),function(){var e=jeeplus.Sparklines=function(){};e.types={},e.getTemplate=function(e){var t=e||{};"string"==typeof e&&(t={type:e}),jeeplus.extend(t,{type:"line"});var i=this.types[t.type];return jeeplus.bind(this.BC,new i(t))},e.BC=function(e,t,i,s){return s?this.draw(function(e){for(var t=[],i=e.length-1;0<=i;i--){var s=e[i];t[i]="object"==typeof s?s.value:s}return t}(i),s.width,33):this.draw(e.data||e,t.width,t.height)}}(),jeeplus.attachEvent("onDataTable",function(e){e.type.sparklines=jeeplus.Sparklines.getTemplate()}),function(){function r(e){var t=" ";if(e)for(var i in e)t+=i+'="'+e[i]+'" ';return t}var o={draw:function(e,t,i,s){return"<svg "+r({xmlns:"http://www.w3.org/2000/svg",version:"1.1",height:"100%",width:"100%",viewBox:"0 0 "+t+" "+i,class:s||""})+">"+e+"</svg>"},styleMap:{lineColor:"stroke",color:"fill"},group:function(e){return"<g>"+e+"</g>"}};o.z={M:function(e){return" M "+e.x+" "+e.y},L:function(e){return" L "+e.x+" "+e.y},C:function(e,t,i){return" C "+e.x+" "+e.y+" "+t.x+" "+t.y+" "+i.x+" "+i.y},A:function(e,t,i,s){var n=e.x+Math.cos(s)*t,l=e.y+Math.sin(s)*t;return" A "+t+" "+t+" 0 "+(s-i>=Math.PI?1:0)+" 1 "+n+" "+l}},o.definePath=function(e,t){for(var i="",s=0;s<e.length;s++){var n=e[s][0].toUpperCase();i+=this.z[n].apply(this,e[s].slice(1))}return t&&(i+=" Z"),i},o.CC=function(e){for(var t=[],i=0;i<e.length;i++)t.push([i?"L":"M",e[i]]);return t},o.setOpacity=function(e,t){return(e=jeeplus.color.toRgb(e)).push(t),"rgba("+e.join(",")+")"},o.DC=function(e){for(var t=[],i=0;i<e.length;i++){var s=e[i];i||t.push(["M",s[0]]),t.push(["C",s[1],s[2],s[3]])}return t},o.getPath=function(e,t,i){return'<path class="'+t+'" vector-effect="non-scaling-stroke" d="'+e+'" '+(i=r(i))+"/>"},o.getSector=function(e,t,i,s,n,l){l=r(l);var a=[["M",e],["L",{x:e.x+Math.cos(i)*t,y:e.y+Math.sin(i)*t}],["A",e,t,i,s],["L",e]];return'<path class="'+n+'" vector-effect="non-scaling-stroke" d="'+o.definePath(a,!0)+'" '+l+"/>"},o.getCurve=function(e,t,i){return i=r(i),'<path fill="none" class="'+t+'" vector-effect="non-scaling-stroke" d="'+this.definePath(this.DC(e))+'" '+i+"/>"},o.getLine=function(e,t,i,s){return this.getPath(this.definePath(this.CC([e,t]),!0),i,s)},o.getCircle=function(e,t,i,s){return s=r(s),'<circle class="'+i+'" cx="'+e.x+'" cy="'+e.y+'" r="'+t+'" '+s+"/>"},o.getRect=function(e,t,i,s,n,l){return'<rect class="'+n+'" rx="0" ry="0" x="'+e+'" y="'+t+'" width="'+i+'" height="'+s+'" '+(l=r(l))+"/>"},jeeplus.EC=o}(),function(){function e(e){this.config=jeeplus.extend(jeeplus.copy(t),e||{},!0)}var t={paddingX:3,paddingY:4,radius:1,minHeight:4,eventRadius:8};e.prototype.draw=function(e,t,i){var s,n,l,a,r,o=this.config,h=jeeplus.Sparklines.types.line.prototype,u=jeeplus.EC;return a=this.getPoints(e,t,i),l=u.definePath(h.FC(a),!0),o.color&&(r=this.GC(u,o.color)),n=u.group(u.getPath(l,"jeeplus_sparklines_area"+(r?" "+r.area:""))),a.splice(a.length-3,3),l=u.definePath(h.FC(a)),n+=u.group(u.getPath(l,"jeeplus_sparklines_line"+(r?" "+r.line:""))),n+=h.HC(u,a,o.radius,"jeeplus_sparklines_item"+(r?" "+r.item:"")),s=Math.min(e.length?(t-2*(o.paddingX||0))/e.length:0,o.eventRadius),n+=h.IC(u,a,s),u.draw(n,t,i,"jeeplus_sparklines_area_chart"+(o.css?" "+o.css:""))},e.prototype.GC=function(e,t){var i={area:{},line:{},item:{}},s=e.styleMap;if(t)for(var n in i.area[s.color]=e.setOpacity(t,.2),i.line[s.lineColor]=t,i.item[s.color]=t,i)i[n]=jeeplus.html.createCss(i[n]);return i},e.prototype.getPoints=function(e,t,i){var s=jeeplus.Sparklines.types.line.prototype.getPoints.call(this,e,t,i),n=this.config.paddingX||0,l=this.config.paddingY||0;return s.push({x:t-n,y:i-l},{x:n,y:i-l},{x:n,y:s[0].y}),s},jeeplus.Sparklines.types.area=e}(),function(){function e(e){this.config=jeeplus.extend(jeeplus.copy(t),e||{},!0)}var t={paddingX:3,paddingY:4,width:20,margin:4,minHeight:4,eventRadius:8,origin:0,itemCss:function(e){return e<(this.config.origin||0)?" jeeplus_sparklines_bar_negative":""}};e.prototype.draw=function(e,t,i){var s,n,l,a,r,o=this.config,h="",u=[],c=this.getPoints(e,t,i),d=jeeplus.EC;for(s=0;s<c.length;s++)n="function"==typeof o.itemCss?o.itemCss.call(this,e[s]):o.itemCss||"",o.negativeColor&&e[s]<o.origin?n+=" "+this.GC(d,o.negativeColor):o.color&&(n+=" "+this.GC(d,o.color)),l=c[s],u.push(d.getRect(l.x,l.y,l.width,l.height,"jeeplus_sparklines_bar "+n));h+=d.group(u.join("")),a=parseInt(this.JC(e,t,i),10)+.5,r=o.paddingX||0,h+=d.group(d.getLine({x:r,y:a},{x:t-r,y:a},"jeeplus_sparklines_origin"));var p=this.KC(e,t,i),f=[];for(s=0;s<p.length;s++)l=p[s],f.push(d.getRect(l.x,l.y,l.width,l.height,"jeeplus_sparklines_event_area ",{jeeplus_area:s}));return h+=d.group(f.join("")),d.draw(h,t,i,"jeeplus_sparklines_bar_chart"+(o.css?" "+o.css:""))},e.prototype.GC=function(e,t){var i={},s=e.styleMap;return t&&(i[s.color]=t),jeeplus.html.createCss(i)},e.prototype.JC=function(e,t,i){var s=this.config,n=s.paddingY||0,l=n+(i=(i||100)-2*n);if(!1!==s.origin){var a=Math.min.apply(null,e),r=Math.max.apply(null,e),o=s.origin||-1e-6;if(r<=o)l=n;else if(a<o){l-=i/(r-a)*(o-a)}}return l},e.prototype.KC=function(e,t,i){var s=[],n=this.config.paddingX||0,l=this.config.paddingY||0;if(t=(t||100)-2*n,i=(i||100)-2*l,e.length)for(var a=t/e.length,r=0;r<e.length;r++)s.push({x:Math.ceil(a*r)+n,y:l,height:i,width:a});return s},e.prototype.getPoints=function(e,t,i){var s=this.config,n=Math.min.apply(null,e);s.origin<n&&(n=s.origin);var l=Math.max.apply(null,e),a=[],r=s.paddingX,o=s.paddingY,h=s.margin,u=s.width||20,c=this.JC(e,t,i);if(t=(t||100)-2*r,i=(i||100)-2*o,e.length){var d=t/e.length,p=s.scale||l-n;h=d-(u=Math.min(d-h,u));var f=0,g=n;!1!==s.origin&&s.origin>n?g=s.origin||0:f=s.minHeight;for(var v=(i-f)/(p||1),m=0;m<e.length;m++){var j=Math.ceil(v*(e[m]-g));a.push({x:Math.ceil(d*m)+r+h/2,y:c-(e[m]>=g?j:0)-f,height:Math.abs(j)+f,width:u})}}return a},jeeplus.Sparklines.types.bar=e}(),function(){function e(e){this.config=jeeplus.extend(jeeplus.copy(t),e||{},!0)}var t={paddingX:6,paddingY:6,radius:2,minHeight:4,eventRadius:8};e.prototype.draw=function(e,t,i){var s=this.getPoints(e,t,i),n=this.config,l=jeeplus.EC,a=n.color?this.GC(l,n.color):null,r=l.definePath(this.FC(s)),o=l.group(l.getPath(r,"jeeplus_sparklines_line"+(a?" "+a.line:"")));o+=this.HC(l,s,n.radius,"jeeplus_sparklines_item"+(a?" "+a.item:""));var h=Math.min(e.length?(t-2*(n.paddingX||0))/e.length:0,n.eventRadius);return o+=this.IC(l,s,h),l.draw(o,t,i,"jeeplus_sparklines_line_chart"+(n.css?" "+n.css:""))},e.prototype.GC=function(e,t){var i={line:{},item:{}},s=e.styleMap;if(t)for(var n in i.line[s.lineColor]=t,i.item[s.color]=t,i)i[n]=jeeplus.html.createCss(i[n]);return i},e.prototype.HC=function(e,t,i,s,n){for(var l=[],a=0;a<t.length;a++)l.push(e.getCircle(t[a],i,s,n));return e.group(l.join(""))},e.prototype.IC=function(e,t,i){for(var s=[],n=0;n<t.length;n++)s.push(e.getCircle(t[n],i,"jeeplus_sparklines_event_area",{jeeplus_area:n}));return e.group(s.join(""))},e.prototype.FC=function(e){var t,i,s=[];for(t=0;t<e.length;t++)i=t?"L":"M",s.push([i,e[t]]);return s},e.prototype.getPoints=function(e,t,i){var s=this.config,n=Math.min.apply(null,e);void 0!==s.origin&&(n=Math.min(s.origin,n));var l=Math.max.apply(null,e),a=[],r=s.paddingX||0,o=s.paddingY||0;t=(t||100)-2*r;var h=s.minHeight||0;if(i=(i||100)-2*o,e.length)if(1==e.length)a.push({x:t/2+r,y:i/2+r});else{var u=t/(e.length-1),c=s.scale||l-n,d=(i-h)/(c||1);c||(i/=2);for(var p=0;p<e.length;p++)a.push({x:Math.ceil(u*p)+r,y:i-Math.ceil(d*(e[p]-n))+o-h})}return a},jeeplus.Sparklines.types.line=e}(),function(){function e(e){this.config=jeeplus.extend(t,e||{},!0)}var t={paddingY:2};e.prototype.rC=0,e.prototype.qC=["#f55b50","#ff6d3f","#ffa521","#ffc927","#ffee54","#d3e153","#9acb61","#63b967","#21a497","#21c5da","#3ea4f5","#5868bf","#7b53c0","#a943ba","#ec3b77","#9eb0b8"],e.prototype.xv=function(e,t){var i=t.length,s=this.qC.length;return i<s?(e&&(e=e<s-i?this.rC+2:this.rC+1),this.rC=e):e%=s,this.qC[e]},e.prototype.draw=function(e,t,i){var s,n,l,a,r=this.config,o=r.color||this.xv,h=this.getAngles(e),u=jeeplus.EC,c=i/2-(r.paddingY||0),d=t/2,p=i/2;for("function"!=typeof o&&(o=function(){return o}),a="",l=0;l<h.length;l++)(s={})[u.styleMap.color]=o.call(this,l,e,this.LC),a+=u.getSector({x:d,y:p},c,h[l][0],h[l][1],"jeeplus_sparklines_sector",s);for(n=u.group(a),a="",l=0;l<h.length;l++)a+=u.getSector({x:d,y:p},c,h[l][0],h[l][1],"jeeplus_sparklines_event_area",{jeeplus_area:l});return n+=u.group(a),u.draw(n,t,i,"jeeplus_sparklines_pie_chart"+(r.css?" "+r.css:""))},e.prototype.getAngles=function(e){var t,i,s=-Math.PI/2,n=[],l=this.Wo(e);for(i=0;i<e.length;i++)t=-Math.PI/2+l[i]-1e-4,n.push([s,t]),s=t;return n},e.prototype.Vo=function(e){for(var t=0,i=0;i<e.length;i++)t+=1*e[i];return t},e.prototype.Wo=function(e){var t,i,s=[],n=0,l=this.Vo(e);for(t=0;t<e.length;t++)i=1*e[t],s[t]=2*Math.PI*(l?(i+n)/l:1/e.length),n+=i;return s},jeeplus.Sparklines.types.pie=e}(),function(){function a(e){this.config=jeeplus.extend(jeeplus.copy(t),e||{},!0)}function e(e){this.config=jeeplus.extend(jeeplus.copy(i),e||{},!0)}var t={paddingX:3,paddingY:6,radius:2,minHeight:4,eventRadius:8};a.prototype.draw=function(e,t,i){var s=this.config,n="",l=jeeplus.Sparklines.types.line.prototype,a=this.getPoints(e,t,i),r=jeeplus.EC,o=s.color?this.GC(r,s.color):null;n+=r.group(r.getCurve(a,"jeeplus_sparklines_line"+(o?" "+o.line:"")));var h=l.getPoints.call(this,e,t,i);n+=l.HC(r,h,s.radius,"jeeplus_sparklines_item"+(o?" "+o.item:""));var u=Math.min(e.length?(t-2*(s.paddingX||0))/e.length:0,s.eventRadius);return n+=l.IC(r,h,u),r.draw(n,t,i,"jeeplus_sparklines_line_chart"+(s.css?" "+s.css:""))},a.prototype.GC=function(e,t){var i={line:{},item:{}},s=e.styleMap;if(t)for(var n in i.line[s.lineColor]=t,i.item[s.color]=t,i)i[n]=jeeplus.html.createCss(i[n]);return i},a.prototype.getPoints=function(e,t,i){var s,n,l,a,r=[],o=[],h=[];for(n=jeeplus.Sparklines.types.line.prototype.getPoints.call(this,e,t,i),s=0;s<n.length;s++)o.push(n[s].x),h.push(n[s].y);for(l=this.MC(o),a=this.MC(h),s=0;s<n.length-1;s++)r.push([n[s],{x:l[0][s],y:a[0][s]},{x:l[1][s],y:a[1][s]},n[s+1]]);return r},a.prototype.MC=function(e){var t,i,s=[],n=[],l=[],a=[],r=[],o=[],h=e.length-1;for(n[s[0]=0]=2,l[0]=1,a[0]=e[0]+2*e[1],t=1;t<h-1;t++)s[t]=1,n[t]=4,l[t]=1,a[t]=4*e[t]+2*e[t+1];for(s[h-1]=2,n[h-1]=7,l[h-1]=0,a[h-1]=8*e[h-1]+e[h],t=1;t<h;t++)i=s[t]/n[t-1],n[t]=n[t]-i*l[t-1],a[t]=a[t]-i*a[t-1];for(r[h-1]=a[h-1]/n[h-1],t=h-2;0<=t;--t)r[t]=(a[t]-l[t]*r[t+1])/n[t];for(t=0;t<h-1;t++)o[t]=2*e[t+1]-r[t+1];return o[h-1]=.5*(e[h]+r[h-1]),[r,o]},jeeplus.Sparklines.types.spline=a;var i={paddingX:3,paddingY:6,radius:1,minHeight:4,eventRadius:8};(e.prototype=jeeplus.copy(a.prototype)).draw=function(e,t,i){var s=this.config,n=jeeplus.Sparklines.types.line.prototype,l=jeeplus.EC,a=s.color?this.GC(l,s.color):null,r=this.getPoints(e,t,i),o=r.splice(r.length-3,3),h=l.CC(o);h[0][0]="L";var u=l.DC(r).concat(h),c=l.group(l.getPath(l.definePath(u),"jeeplus_sparklines_area"+(a?" "+a.area:""),!0));c+=l.group(l.getPath(l.definePath(l.DC(r)),"jeeplus_sparklines_line"+(a?" "+a.line:"")));var d=n.getPoints.call(this,e,t,i);c+=n.HC(l,d,s.radius,"jeeplus_sparklines_item"+(a?" "+a.item:""));var p=Math.min(e.length?(t-2*(s.paddingX||0))/e.length:0,s.eventRadius);return c+=n.IC(l,d,p),l.draw(c,t,i,"jeeplus_sparklines_splinearea_chart"+(s.css?" "+s.css:""))},e.prototype.GC=function(e,t){var i={area:{},line:{},item:{}},s=e.styleMap;if(t)for(var n in i.area[s.color]=e.setOpacity(t,.2),i.line[s.lineColor]=t,i.item[s.color]=t,i)i[n]=jeeplus.html.createCss(i[n]);return i},e.prototype.getPoints=function(e,t,i){var s=a.prototype.getPoints.call(this,e,t,i),n=this.config.paddingX||0,l=this.config.paddingY||0;return s.push({x:t-n,y:i-l},{x:n,y:i-l},{x:n,y:s[0][0].y}),s},jeeplus.Sparklines.types.splineArea=e}(),jeeplus.extend(jeeplus.ui.datatable,{UF:function(e,t){return!(!e.scroll||t)||(e.header=jeeplus.isUndefined(e.header)?!!this.config.header:e.header,e.footer=jeeplus.isUndefined(e.footer)?!!this.config.footer:e.footer,void(e.xCorrection=e.xCorrection||0))},sq:function(e,t){for(var i=-1,s=0;i<0&&s<e.length;s++)t(e[s])&&(i=s);return i},$F:function(i,u,c){var d={},p=0;return i.forEach(jeeplus.bind(function(e,r){var t=e[0],o=[],h=t.length;t.forEach(jeeplus.bind(function(e,t){for(var i=u[t+p],s=0;s<i[c].length;s++){var n=i[c][s];if(n||d[r]&&d[r][s]){if(n=jeeplus.copy(n||{text:""}),d[r]&&d[r][s]&&0===t&&(n.colspan=d[r][s],d[r][s]=0),n.colspan){var l=Math.min(n.colspan,h-t);d[r+1]=d[r+1]||{},d[r+1][s]=n.colspan-l,n.colspan=l}n.rowspan&&1===h&&(n.height=(n.height||this.config.headerRowHeight)*n.rowspan,n.rowspan=null);var a={txt:n.rotate?this.getHeaderNode(i.id,s).innerHTML:n.text||(n.contentId?this.getHeaderContent(n.contentId).getValue():""),className:"jeeplus_hcell jeeplus_"+c+"_cell "+(n.css||""),style:{height:(n.height||this.config.headerRowHeight)+"px",width:n.colspan?"auto":i.width+"px"},span:n.colspan||n.rowspan?{colspan:n.colspan||1,rowspan:n.rowspan||1}:null};o[s]=o[s]||[],o[s][t]=a}}},this)),i[r]="header"==c?o.concat(e):e.concat(o),p+=h},this)),i},VF:function(f,e,g){var v=this.config.columns,m=this.getSelectedId(!0),j=this.XF(f),y=0,b=0,x=[],w=0;return g=g||0+f.xCorrection,e=e||[],this.eachRow(jeeplus.bind(function(t){for(var e=0,i=this.getItem(t),s=this.getIndexById(t),n=[],l=!1,a=g;a<v.length;a++){var r=v[a].id,o=this.getColumnIndex(r)-g;if(v[a]){if(e+=v[a].width,j<e&&g<a){w=a;break}if("selection"!==f.data||"selection"==f.data&&-1!==this.sq(m,function(e){return e.column==r&&e.row==t})){var h;if(this.getSpan&&(h=this.getSpan(t,r)),h&&this.getColumnIndex(r)===g){var u=this.getColumnIndex(h[1]);u<g&&(h[2]=h[2]-(g-u),h[4]=h[4]?h[4]:i[h[1]]?this.getText(t,h[1]):null,h[1]=r)}if(!h||h&&h[0]==t&&h[1]==r){var c=h&&h[4]?h[4]:this.Aj[r]?this.getText(t,r):"",d=this.getCss(t,r)+" "+(v[a].css||"")+(h?" jeeplus_dtable_span "+(h[5]||""):""),p={height:h&&1<h[3]?"auto":(i.$height||this.config.rowHeight)+"px",width:h&&1<h[2]?"auto":v[a].width+"px"};n.push({txt:c,className:d,style:p,span:h?{colspan:h[2],spanStart:this.getColumnIndex(h[1]),rowspan:h[3]}:null}),c&&(y=Math.max(1+o,y),b=Math.max(s+1,b)),l=l||!!c}else h&&(n.push({$inspan:!0}),y=Math.max(1+o,y),b=Math.max(s+1,b))}}}(!f.skiprows||l)&&x.push(n)},this)),b&&y&&(f.trim&&(x.length=b,x=x.map(function(e){for(var t=e.length-1;0<=t;t--)if(e[t].span&&e[t].span.colspan){e[t].span.colspan=Math.min(e[t].span.colspan,e.length-t);break}return e.length=y,e})),e.push(x)),w?this.VF(f,e,w):(f.footer&&(e=this.$F(e,v,"footer")),f.header&&(e=this.$F(e,v,"header"))),e},WF:function(n,l){var a=jeeplus.html.create("div");return n.forEach(jeeplus.bind(function(e,t){var i=jeeplus.html.create("table",{class:"jeeplus_table_print "+this.$view.className+(l.borderless?" borderless":""),style:"border-collapse:collapse"});if(e.forEach(function(e){var n=jeeplus.html.create("tr");e.forEach(function(e,t){if(!e.$inspan){var i=jeeplus.html.create("td");for(var s in i.innerHTML=e.txt,i.className=e.className,e.style)i.style[s]=e.style[s];e.span&&(i.colSpan=e.span.colspan,i.rowSpan=e.span.rowspan),n.appendChild(i)}}),i.appendChild(n)}),a.appendChild(i),t+1<n.length){var s=jeeplus.html.create("DIV",{class:"jeeplus_print_pagebreak"});a.appendChild(s)}},this)),a}}),jeeplus.extend(jeeplus.ui.datatable,jeeplus.CustomPrint),jeeplus.extend(jeeplus.ui.datatable,{$exportView:function(e){if(this.isBranchOpen&&jeeplus.extend(e,{filterHTML:!0}),"excel"!==e.export_mode||e.dataOnly||!e.styles)return this;e.dataOnly=!0,e.heights=jeeplus.isUndefined(e.heights)?"all":e.heights;var t=jeeplus.toExcel(this,e);return t[0].styles=this.oG(e),delete e.dataOnly,t},oG:function(e){var u=this.config.columns,c=[];return this.pG=this.pG||{},e.docHeader&&(c=[{0:this.qG(e.docHeader.css)},{0:{}}]),!1!==e.header&&(c=this.rG(e,"header",c)),this.data.each(function(e){for(var t={},i=0;i<u.length;i++){var s=this.getCss(e.id,u[i].id),n=u[i].node.className,l="",a=this.getIndexById(e.id)%2?"even":"odd",r=null,o=null;if(this.Rt&&(r=this.getSpan(e.id,u[i].id))?(o=this.getSpanNode({row:r[0],column:r[1]}),l="jeeplus_dtable_span "+(r[5]||"")):o=this.getItemNode({row:e.id,column:u[i].id}),!o){o=jeeplus.html.create("div",{class:s,style:"visibility:hidden"});var h=u[i].node;u[i].attached||(h=jeeplus.html.create("div",{class:n,style:"visibility:hidden"}),this.Vf.appendChild(h)),h.appendChild(o)}t[i]=this.sG(o,[s,n,l,a].join(":"))}c[c.length]=t},this),!1!==e.footer&&this.config.footer&&(c=this.rG(e,"footer",c)),e.docFooter&&(c=c.concat([{0:{}},{0:this.qG(e.docFooter.css)}])),c},rG:function(e,t,i){for(var s=this.config.columns,n=[],l=0;l<s[0][t].length;l++){for(var a={},r=0;r<s.length;r++){var o=s[r][t][l];if(o){var h=o.colspan?s[r+o.colspan-1].id:s[r].id,u="header"==t?this.getHeaderNode(h,l):this.getFooterNode(h,l);if(u){var c=[u.parentNode.className,o.css||"","jeeplus_hcell",t];a[r]=this.sG(u,c.join(":")),(o.colspan||o.rowspan)&&n.push([l,r,{colspan:o.colspan-1||0,rowspan:o.rowspan-1||0},a[r]])}}else for(var d=0;d<n.length;d++){var p=n[d][2],f=n[d][1],g=n[d][0];f+p.colspan>=r&&g+p.rowspan>=l&&(a[r]=n[d][3])}}i[i.length]=a}return i},sG:function(e,t){if(this.pG[t])return this.pG[t];var i=this.tG(e),s={font:{},alignment:{},border:{}};s.font.name=i["font-family"].replace(/,.*$/,""),s.font.sz=.75*i["font-size"].replace("px",""),s.font.color={rgb:jeeplus.color.rgbToHex(i.color)},"normal"!==i["font-weight"]&&(s.font.bold=!0),"underline"===i["text-decoration-line"]&&(s.font.underline=!0),"italic"===i["font-style"]&&(s.font.italic=!0),"line-through"===i["text-decoration-line"]&&(s.font.strike=!0),s.alignment.horizontal=i["text-align"],s.alignment.vertical=i.height==i["line-height"]?"center":"top","normal"==i["white-space"]&&(s.alignment.wrapText=!0),e.firstChild&&e.firstChild.className&&-1!==e.firstChild.className.indexOf("jeeplus_rotate")&&(s.alignment.textRotation=90);var n=jeeplus.color.rgbToHex(i["background-color"]);return n&&(s.fill={fgColor:{rgb:n}}),-1!==i["background-image"].indexOf("gradient")&&(s.fill={fgColor:{rgb:jeeplus.color.rgbToHex(i["background-image"].substring(i["background-image"].lastIndexOf("(")))}}),e.parentNode&&"TD"==e.parentNode.nodeName&&(i=this.tG(e.parentNode)),"0px"!==i["border-right-width"]&&(s.border.right={style:"thin",color:{rgb:jeeplus.color.rgbToHex(i["border-right-color"])}}),"0px"!==i["border-bottom-width"]&&(s.border.bottom={style:"thin",color:{rgb:jeeplus.color.rgbToHex(i["border-bottom-color"])}}),"0px"!==i["border-left-width"]&&(s.border.left={style:"thin",color:{rgb:jeeplus.color.rgbToHex(i["border-left-color"])}}),"0px"!==i["border-top-width"]&&(s.border.top={style:"thin",color:{rgb:jeeplus.color.rgbToHex(i["border-top-color"])}}),this.pG[t]=s},qG:function(e){e=jeeplus.extend(e||{},{visibility:"hidden","white-space":"nowrap","text-align":"left"});var t="";for(var i in e)t+=i+":"+e[i]+";";var s=jeeplus.html.create("div",{style:t});this.Vf.appendChild(s);var n=this.sG(s,t);return jeeplus.html.remove(s),n},tG:function(e){return window.getComputedStyle?window.getComputedStyle(e):e.currentStyle}}),jeeplus.extend(jeeplus.ui.datatable,{topSplit_setter:function(e){return this.data&&(this.data.$freeze=e),e},freezeRow:function(e,t){function i(e,t,i,s,n){var l;if(i&&a<=e){for(n||a++,l=e;a<=l;l--)s[l]=s[l-1];s[a-1]=t}if(!i&&e<a){for(n||a--,l=e;l<a;l++)s[l]=s[l+1];s[a]=t}}var a=this.s.topSplit,s=this.data.order,n=this.data.jf;e?(i(this.getIndexById(e),e=e.toString(),t,s),n&&i(n.find(e),e,t,n,!0)):t||(a=0),this.define("topSplit",a),this.refresh()}}),jeeplus.TreeTableClick={},jeeplus.TreeTablePaste={insert:function(e){for(var t=this.getSelectedId(!0,!0),i=0;i<e.length;i++){for(var s={},n=0;n<this.s.columns.length;n++)s[this.s.columns[n].id]=e[i][n]||"";!jeeplus.isUndefined(s.id)&&this.exists(s.id)&&(s.id=jeeplus.uid()),this.add(s,null,t[0])}}},jeeplus.protoUI({name:"treetable",$init:function(){for(var e in jeeplus.extend(this.data,jeeplus.TreeStore,!0),jeeplus.extend(this.type,jeeplus.TreeType),jeeplus.extend(this,jeeplus.TreeDataMove,!0),jeeplus.TreeClick)this.on_click[e]||(this.on_click[e]=this.Vn(jeeplus.TreeClick[e]));this.type.treetable=jeeplus.template("{common.space()}{common.icon()} {common.folder()}"),this.type.treecheckbox=function(e,t){return e.indeterminate&&!e.nocheckbox?"<div class='jeeplus_tree_checkbox jeeplus_indeterminate'></div>":jeeplus.TreeType.checkbox.apply(this,arguments)},this.data.provideApi(this,!0),this.x.setAttribute("role","treegrid")},Xg:!1,Vn:function(i){return function(e,t){return t=t.row,i.call(this,e,t)}},getState:function(){var e=jeeplus.DataState.getState.call(this);return jeeplus.extend(e,jeeplus.TreeAPI.getState.call(this)),e},setState:function(e){jeeplus.TreeAPI.setState.call(this,e)&&jeeplus.DataState.setState.call(this,e)},clipboard_setter:function(e){return jeeplus.extend(this.rh,jeeplus.TreeTablePaste),jeeplus.TablePaste.clipboard_setter.call(this,e)},Ik:function(e,t){for(var i=0;i<e.start;i++){var s=this.data.order[i];s&&1!=this.getItem(s).$level&&e.start--}return jeeplus.ui.datatable.prototype.Ik.call(this,e,t)}},jeeplus.TreeAPI,jeeplus.TreeStateCheckbox,jeeplus.TreeDataLoader,jeeplus.ui.datatable),jeeplus.extend(jeeplus.ui.datatable,{spans_setter:function(e){return e&&!this.Rt&&this.Qt(),e},Qt:function(){this.Rt={},this.St=[],this.data.attachEvent("onStoreLoad",jeeplus.bind(function(e,t){t&&t.spans&&this.addSpan(t.spans)},this)),this.data.attachEvent("onClearAll",jeeplus.bind(function(){this.Rt={}},this)),this.attachEvent("onScrollY",this.Tt),this.attachEvent("onScrollX",this.Tt),this.attachEvent("onAfterRender",this.Ut),this.attachEvent("onSelectChange",this.Vt)},addSpan:function(e,t,i,s,n,l){if("object"!=typeof e)s=s||1,i=i||1,this.Rt[e]||(this.Rt[e]={}),this.Rt[e][t]=[i,s,n,l];else for(var a=0;a<e.length;a++)this.addSpan.apply(this,e[a])},removeSpan:function(e,t){arguments.length||(this.Rt={});var i=this.Rt[e];i&&delete i[t]},getSpan:function(e,t){if(!e)return this.Rt;var i,s,n,l,a,r=this.Rt;for(e in i=this.getIndexById(e),n=this.getColumnIndex(t),r)for(t in r[e])if(a=r[e][t],s=this.getIndexById(e),l=this.getColumnIndex(t),!(i>s+a[1]-1||i<s||n>l+a[0]-1||n<l))return[e,t].concat(a);return null},Ut:function(){var e,t,i=this.fj.length-this.s.rightSplit;for(jeeplus.html.remove(this.St),t=0;t<3;t++)e=this.St[t]=jeeplus.html.create("DIV",{class:"jeeplus_span_layer"}),this.Vf.childNodes[t].appendChild(e);this.attachEvent("onSyncScroll",function(e,t,i){for(var s=0;s<3;s++)jeeplus.Touch.Nf(this.St[s],1==s?e:0,t,i)}),this.Tt(),this.s.leftSplit&&this.Wt(this.St[0],0,this.s.leftSplit),this.s.rightSplit&&this.Wt(this.St[2],i,this.fj.length),this.Wt(this.St[1],this.s.leftSplit,i),this.s.topSplit&&!jeeplus.env.touch&&this.DG()},EG:function(){for(var e,t=0,i=0,s=0,n=0;t<this.s.leftSplit;)i+=this.fj[t].width,t++;for(e=(t=this.fj.length-1)-this.s.rightSplit;e<=t;)n+=this.fj[t].width,t--;for(t=this.s.leftSplit;t<this.fj.length-this.s.rightSplit;t++)s+=this.fj[t].width;return[i,s,n]},DG:function(){var e,t,i,s=this.fj.length-this.s.rightSplit;for(t=3;t<6;t++)e=this.St[t]=jeeplus.html.create("DIV",{class:"jeeplus_span_layer_top"}),this.Vf.childNodes[t-3].appendChild(e);i=this.EG(),this.s.leftSplit&&(this.St[3].style.width=i[0]+"px",this.Wt(this.St[3],0,this.s.leftSplit,!0)),this.s.rightSplit&&(this.St[5].style.width=i[2]+"px",this.Wt(this.St[5],s,this.fj.length,!0)),this.St[4].style.width=i[1]+"px",this.Wt(this.St[4],this.s.leftSplit,s,!0)},Wt:function(e,t,i,s){for(var n=0,l=this.data.$min||0,a=this.data.$max||this.data.order.length,r=l;r<a;r++){var o=this.data.order[r];if(o){var h=this.Rt[o];if(h&&(!s||r<this.s.topSplit))for(var u=t;u<i;u++){var c=this.fj[u].id;h[c]&&this.Xt(e,r,u,h,n,t,o,c)}n+=this.FA(this.getItem(o))}}},Vt:function(){for(var e=this.config.select,t="cell"==e||"column"==e,i=this.getSelectedId(!0),s=[],n=this.Yt||[],l=jeeplus.uid()+"",a=!1,r=0;r<i.length;r++){!(o=this.Rt[i[r]])||t&&!o[i[r].column]||(o.$selected&&o.$selected.id==i[r].id||(a=!0),o.$selected=i[r],o.$time=l,s.push(i[r].id))}for(r=0;r<n.length;r++){var o;(o=this.Rt[n[r]])&&o.$time!==l&&(delete o.$selected,a=!0)}this.Yt=[].concat(i),a&&this.Ut()},Zt:function(e,t){for(var i=0,s=e;s<t;s++){var n=this.fj[s];i+=n?n.width:0}return i},$t:function(e,t){for(var i=0,s=e;s<t;s++){var n=this.getItem(this.data.order[s]);i+=n?this.FA(n):this.s.rowHeight}return i},Xt:function(e,t,i,s,n,l,a,r){var o=s[r],h=o[2]||this.getText(a,r),u="";!s.$selected||"row"!==this.s.select&&s.$selected.column!==r||(u="jeeplus_selected ");var c={column:i,row:t,class:u+"jeeplus_cell jeeplus_table_cell jeeplus_dtable_span "+(o[3]||""),"aria-colindex":i+1,"aria-rowindex":t+1};1<o[0]&&(c["aria-colspan"]=o[0]),1<o[1]&&(c["aria-rowspan"]=o[1]);var d=jeeplus.html.create("DIV",c,""+h);d.style.top=n+"px",d.style.left=this.Zt(l,i)+"px",d.style.width=this.Zt(i,i+o[0])+"px",d.style.height=this.$t(t,t+o[1])+"px",e.appendChild(d)},Tt:function(){if(!this.s.prerender)for(var e=this.getScrollState(),t=0;t<3;t++)this.St[t].style.top="-"+(e.y||0)+"px"},QD:function(e,t){var i,s,n=!1;return this.Rt&&(i=this.getSpan(e.row,e.column),s=this.getSpan(t.row,t.column),i&&s&&i[0]==s[0]&&i[1]==s[1]&&(n=!0)),n},getSpanNode:function(e){for(var t=this.St,i=this.getIndexById(e.row),s=this.getColumnIndex(e.column),n=0;n<t.length;n++)for(var l=t[n].childNodes,a=0;a<l.length;a++)if(l[a].getAttribute("row")==i&&l[a].getAttribute("column")==s)return l[a];return null}}),jeeplus.extend(jeeplus.ui.datatable,{subrow_setter:function(e){return!!e&&(this.kA(),this.s.fixedRowHeight=!1,jeeplus.template(e))},subview_setter:function(e){return e&&(this.s.subrow=this.subrow_setter("<div></div>")),e},defaults:{subRowHeight:35},lA:function(){this.data.each(function(e){e&&(e.$sub=this.s.subrow(e,this.type))},this),this.pC()},pC:function(e){if("auto"===this.s.subRowHeight&&this.bc&&this.mA(),e&&this.s.subview)for(var t in this.oA){var i=jeeplus.$$(this.oA[t]);i.s.hidden||i.adjust()}},nA:function(e){var t=this.getItem(e);t.$sub=this.s.subrow(t,this.type),"auto"===this.s.subRowHeight&&this.mA(t.id,t.$sub)},$init:function(){this.kA=jeeplus.once(function(){var e="#"+this.bj+" .jeeplus_cell.jeeplus_dtable_subview { line-height:normal;}";this.s.fixedRowHeight&&(e+="#"+this.bj+" .jeeplus_column .jeeplus_cell { white-space: nowrap;}"),jeeplus.html.addStyle(e),this.oA={},this.attachEvent("onSubViewRender",this.pA),this.data.attachEvent("onStoreUpdated",jeeplus.bind(function(e,t,i){e?("update"==i||"add"==i)&&this.nA(e):this.lA()},this)),this.attachEvent("onResize",function(e,t,i){i!=e&&this.pC(!0)})}),this.type.subrow=function(e){return e.$sub?e.$subopen?"<div class='jeeplus_tree_open jeeplus_sub_open'></div>":"<div class='jeeplus_tree_close jeeplus_sub_close'></div>":"<div class='jeeplus_tree_none'></div>"},this.on_click.jeeplus_sub_open=function(e,t){return this.closeSub(t),!1},this.on_click.jeeplus_sub_close=function(e,t){return this.openSub(t),!1}},openSub:function(e){var t=this.getItem(e);if(!t.$subopen){t.$row=this.s.subrow,t.$subHeight=t.$subHeight||this.s.subRowHeight,t.$subopen=!0;var i=this.oA[t.$subContent];i&&(i.repaintMe=!0),this.refresh(e),this.callEvent("onSubViewOpen",[e])}},getSubView:function(e){var t=this.getItem(e);if(t){var i=this.oA[t.$subContent];if(i)return jeeplus.$$(i)}return null},resizeSubView:function(e){var t=this.getSubView(e);t&&this.qA(this.getItem(e),t)},qA:function(e,t){var i=t.$getSize(0,0)[2],s=e.$subHeight||this.s.subRowHeight;2<Math.abs(i-(s||0))&&(e.$subHeight=i,this.refresh(e.id))},wC:function(e){var t=e.$width;if(e.lc){var i=e.q.length-e.qc;t-=e.mc?2*e.Dc+2:e.Cc*(i-1)+2*e.Dc+2*i}return 0<t},pA:function(n,e){var t,i=this.oA[n.$subContent];if(i)e.firstChild.appendChild(i),t=jeeplus.$$(n.$subContent),this.wC(t)||t.adjust(),i.repaintMe&&(delete i.repaintMe,t.config.hidden=!1,t.Qd());else{var s=jeeplus.copy(this.s.subview);s.$scope=this.$scope,(t=jeeplus.ui(s,e.firstChild)).getMasterView=jeeplus.bind(function(){return this},this),n.$subContent=t.config.id,this.oA[n.$subContent]=t.$view,t.attachEvent("onResize",jeeplus.bind(function(e,t,i,s){t&&t!=s&&this.refresh(n.id)},this)),this.callEvent("onSubViewCreate",[t,n])}this.qA(n,t||jeeplus.$$(i))},rA:function(e){var t=this.getItem(e),i=this.oA[t.$subContent];if(i){delete t.$subContent;var s=jeeplus.$$(i);s&&s!=this&&s.destructor()}},mA:function(t,i){var s=jeeplus.html.create("DIV",{class:"jeeplus_measure_size jeeplus_cell jeeplus_dtable_subrow"},"");s.style.cssText="width:"+this.bc+"px; height:auto; visibility:hidden; position:absolute; top:0px; left:0px; overflow:hidden;",this.$view.appendChild(s),this.data.each(function(e){(e&&!t||e.id==t&&e.$sub)&&(s.innerHTML=i||this.s.subrow(e,this.type),e.$subHeight=s.offsetHeight)},this),s=jeeplus.html.remove(s)},closeSub:function(e){var t=this.getItem(e);if(t.$subopen){t.$row=!1,t.$subopen=!1;var i=this.oA[t.$subContent];i&&(jeeplus.$$(i).config.hidden=!0),this.refresh(e),this.callEvent("onSubViewClose",[e])}}}),jeeplus.extend(jeeplus.ui.datatable,{headermenu_setter:function(e){return e&&(e.data&&(this.Xw=!0),e=this._t(e)),e},_t:function(l){var e={view:"contextmenu",template:"<span class='jeeplus_icon {common.hidden()}'></span> &nbsp; #value#",type:{hidden:function(e){return e.hidden?"fa-empty":"fa-eye"}},on:{onMenuItemClick:jeeplus.bind(function(e,t){var i=jeeplus.$$(this.s.headermenu),s=i.getItem(e).hidden;i.getItem(e).hidden=!s,i.refresh(e),i.$blockRender=!0;var n={spans:"object"==typeof l&&l.spans};return s?this.showColumn(e,n):this.hideColumn(e,n),i.$blockRender=!1},this)},data:[]};"object"==typeof l&&jeeplus.extend(e,l,!0);var t=jeeplus.ui(e);return t.attachTo(this.I),this.Ns.push(t),this.attachEvent("onStructureLoad",this.au),this.attachEvent("onStructureUpdate",this.au),this._t=function(e){return e},t.s.id},au:function(){var e=jeeplus.$$(this.s.headermenu),t=this.am;if(!e.$blockRender){if(this.Xw)return e.data.each(function(e){e.hidden=!!t[e.id]}),void e.refresh();var i=[],s=this.bm;s.length||(s=this.fj);for(var n=0;n<s.length;n++){var l=this.getColumnConfig(s[n].id||s[n]),a=l.header[0],r=!!t[l.id];!1!==l.headermenu&&a&&i.push({id:l.id,value:r?a.text:a.groupText||a.text,hidden:r})}i.length&&e.data.importData(i)}}}),jeeplus.ui.datafilter.headerMenu={getValue:function(){},setValue:function(){},refresh:function(e,t,i){e.s.headermenu||(e.define("headermenu",!0),e.au()),t.onclick=function(){jeeplus.$$(e.config.headermenu).show(t)}},render:function(e,t){return"<span class='jeeplus_icon fa-columns' role='button' tabindex='0' aria-label='"+jeeplus.i18n.aria.headermenu+"'>"}},jeeplus.ui.datafilter.richSelectFilter={getInputNode:function(e){return jeeplus.$$(e.$jeeplus)||null},getValue:function(e){var t=this.getInputNode(e);return t?t.getValue():""},setValue:function(e,t){var i=this.getInputNode(e);return i?i.setValue(t):""},compare:function(e,t){return e==t},refresh:function(i,e,s){if(!i.$destructed){var t=jeeplus.$$(s.richselect);if(!t.$view.parentNode)jeeplus.html.create("div",{class:"jeeplus_richfilter"}).appendChild(t.$view);e.$jeeplus=s.richselect,e.style.marginLeft="-10px",s.compare=s.compare||this.compare,s.prepare=s.prepare||this.prepare,i.registerFilter(e,s,this);var n,l=s.options;l?"string"==typeof l?(n=s.options=[],jeeplus.ajax(l).then(jeeplus.bind(function(e){s.options=e.json();var t=document.body.contains(t)?t:document.body.querySelector('[active_id="'+s.contentId+'"]');this.refresh(i,t,s)},this))):n=l:n=i.collectValues(s.columnId);var a=t.getPopup().getList(),r=jeeplus.$$(l);if(r&&r.data&&r.data.getRange&&(n=r.data.getRange()),e.firstChild.appendChild(t.$view.parentNode),a.parse&&(a.clearAll(),a.parse(n),!this.$noEmptyOption&&!1!==s.emptyOption||s.emptyOption)){var o={id:"",value:s.emptyOption||"",$empty:!0};a.add(o,0)}s.value&&this.setValue(e,s.value),t.render(),jeeplus.delay(t.resize,t)}},render:function(e,t){if(!t.richselect){var i={container:jeeplus.html.create("div",{class:"jeeplus_richfilter"}),view:this.inputtype,options:[]},s=jeeplus.extend(this.inputConfig||{},t.inputConfig||{},!0);jeeplus.extend(i,s),t.separator&&(i.separator=t.separator),t.suggest&&(i.suggest=t.suggest);var n=jeeplus.ui(i);n.attachEvent("onChange",function(){e.filterByAll()}),t.richselect=n.s.id,e.Ns.push(n)}return t.css="jeeplus_div_filter"," "},inputtype:"richselect"},jeeplus.ui.datafilter.serverRichSelectFilter=jeeplus.extend({$server:!0},jeeplus.ui.datafilter.richSelectFilter),jeeplus.ui.datafilter.multiSelectFilter=jeeplus.extend({$noEmptyOption:!0,inputtype:"multiselect",prepare:function(e,t){if(!e)return e;for(var i={},s=e.toString().split(t.separator||","),n=0;n<s.length;n++)i[s[n]]=1;return i},compare:function(e,t){return!t||t[e]}},jeeplus.ui.datafilter.richSelectFilter),jeeplus.ui.datafilter.serverMultiSelectFilter=jeeplus.extend({$server:!0,Vk:function(e,t,i){var s=this.Sk;jeeplus.$$(s).filterByAll()}},jeeplus.ui.datafilter.multiSelectFilter),jeeplus.ui.datafilter.multiComboFilter=jeeplus.extend({inputtype:"multicombo",inputConfig:{tagMode:!1}},jeeplus.ui.datafilter.multiSelectFilter),jeeplus.ui.datafilter.serverMultiComboFilter=jeeplus.extend({inputtype:"multicombo",inputConfig:{tagMode:!1}},jeeplus.ui.datafilter.serverMultiSelectFilter),jeeplus.ui.datafilter.datepickerFilter=jeeplus.extend({prepare:function(e){return e||""},compare:function(e,t){return 1*e==1*t},inputtype:"datepicker"},jeeplus.ui.datafilter.richSelectFilter),jeeplus.ui.datafilter.columnGroup={getValue:function(){},setValue:function(){},getHelper:function(e,t){return{open:function(){t.closed=!0,e.onclick()},close:function(){t.closed=!1,e.onclick()},isOpened:function(){return t.closed}}},refresh:function(i,e,s){e.onclick=function(e){jeeplus.html.stopEvent(e);var t=this.firstChild.firstChild;s.closed?(s.closed=!1,t.className="jeeplus_tree_open"):(s.closed=!0,t.className="jeeplus_tree_close"),jeeplus.delay(function(){i.callEvent("onColumnGroupCollapse",[s.columnId,s.batch,!s.closed]),i.showColumnBatch(s.batch,!s.closed)})},s.firstRun||(s.firstRun=1,s.closed&&i.showColumnBatch(s.batch,!1))},render:function(e,t){return"<div role='button' tabindex='0' aria-label='"+jeeplus.i18n.aria[t.closed?"openGroup":"closeGroup"]+"' class='"+(t.closed?"jeeplus_tree_close":"jeeplus_tree_open")+"'></div>&nbsp;"+(t.groupText||"")}},jeeplus.ui.datafilter.dateRangeFilter=jeeplus.extend({prepare:function(e){return e.start||e.end?jeeplus.ui.daterange.prototype.SD(e):""},compare:function(e,t){return(!t.start||e>=t.start)&&(!t.end||e<=t.end)},inputtype:"daterangepicker"},jeeplus.ui.datafilter.richSelectFilter),jeeplus.ui.datafilter.serverDateRangeFilter=jeeplus.extend({$server:!0},jeeplus.ui.datafilter.dateRangeFilter),jeeplus.editors.$popup.multiselect={view:"multisuggest",suggest:{button:!0}},jeeplus.Canvas=jeeplus.proto({$init:function(e){this.Wn=[],this.AE=jeeplus.isUndefined(e.series)?e.name:e.series,this.tg=jeeplus.toNode(e.container||e);var t=e.width*(window.devicePixelRatio||1),i=e.height*(window.devicePixelRatio||1),s=e.style||"";s+=";width:"+e.width+"px;height:"+e.height+"px;",this.Yn(e.name,s,t,i,e.title)},Yn:function(e,t,i,s,n){return this.Zn=jeeplus.html.create("canvas",{title:n,width:i,height:s,canvas_id:e,style:t||""}),this.tg.appendChild(this.Zn),this.Zn.getContext||jeeplus.env.isIE&&(jeeplus.require("legacy/excanvas/excanvas.js",!0),G_vmlCanvasManager.init_(document),G_vmlCanvasManager.initElement(this.Zn)),this.Zn},getCanvas:function(e){var t=(this.Zn||this.Yn(this.w)).getContext(e||"2d");return this.$n||(this.$n=!0,t.scale(window.devicePixelRatio||1,window.devicePixelRatio||1)),t},_n:function(e,t){this.Zn&&(this.Zn.setAttribute("width",e*(window.devicePixelRatio||1)),this.Zn.setAttribute("height",t*(window.devicePixelRatio||1)),this.Zn.style.width=e+"px",this.Zn.style.height=t+"px",this.$n=!1)},renderText:function(e,t,i,s,n){if(i){n&&(n=Math.max(n,0)),t&&(t=Math.max(t,0));var l=jeeplus.html.create("DIV",{class:"jeeplus_canvas_text"+(s?" "+s:""),style:"left:"+e+"px; top:"+t+"px;","aria-hidden":"true"},i);return this.tg.appendChild(l),this.Wn.push(l),n&&(l.style.width=n+"px"),l}},renderTextAt:function(e,t,i,s,n,l,a){var r=this.renderText.call(this,i,s,n,l,a);return r&&(e&&(r.style.top="middle"==e?parseInt(s-r.offsetHeight/2,10)+"px":s-r.offsetHeight+"px"),t&&(r.style.left="left"==t?i-r.offsetWidth+"px":parseInt(i-r.offsetWidth/2,10)+"px")),r},clearCanvas:function(e){var t=[];if(jeeplus.html.remove(this.Wn),this.Wn=[],!e&&this.tg.t){for(t=this.ao();t.length;)t[0].parentNode.removeChild(t[0]),t.splice(0,1);t=null,this.tg.t.getElementsByTagName("AREA").length||(this.tg.t.parentNode.removeChild(this.tg.t),this.tg.t=null)}this.getCanvas().clearRect(0,0,this.Zn.offsetWidth||Math.floor(this.Zn.width/(window.devicePixelRatio||1)),this.Zn.offsetHeight||Math.floor(this.Zn.height/(window.devicePixelRatio||1)))},toggleCanvas:function(){this.bo("none"==this.Zn.style.display)},showCanvas:function(){this.bo(!0)},hideCanvas:function(){this.bo(!1)},bo:function(e){var t,i;for(i=0;i<this.Wn.length;i++)this.Wn[i].style.display=e?"":"none";if(this.tg.t)for(t=this.ao(),i=0;i<t.length;i++)e?t[i].removeAttribute("disabled"):t[i].setAttribute("disabled","true");this.Zn.style.display=e?"":"none"},ao:function(){var e,t,i=[];for(e=this.tg.t.getElementsByTagName("AREA"),t=0;t<e.length;t++)e[t].getAttribute("userdata")==this.AE&&i.push(e[t]);return i}}),jeeplus.color={co:["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],toHex:function(e,t){e=parseInt(e,10);for(var i="";0<e;)i=this.co[e%16]+i,e=Math.floor(e/16);for(;i.length<t;)i="0"+i;return i},rgbToHex:function(e){var t=[];return"string"==typeof e?e.replace(/[\d+\.]+/g,function(e){t.push(parseFloat(e))}):jeeplus.isArray(e)&&(t=e),0===t[3]?"":t.slice(0,3).map(function(e){return jeeplus.color.toHex(Math.floor(e),2)}).join("")},hexToDec:function(e){return parseInt(e,16)},toRgb:function(e){var t,i,s,n;return s="string"!=typeof e?(t=e[0],i=e[1],e[2]):-1!=e.indexOf("rgb")?(t=(n=e.substr(e.indexOf("(")+1,e.lastIndexOf(")")-e.indexOf("(")-1).split(","))[0],i=n[1],n[2]):("#"==e.substr(0,1)&&(e=e.substr(1)),t=this.hexToDec(e.substr(0,2)),i=this.hexToDec(e.substr(2,2)),this.hexToDec(e.substr(4,2))),((t=parseInt(t,10)||0)<0||255<t)&&(t=0),((i=parseInt(i,10)||0)<0||255<i)&&(i=0),((s=parseInt(s,10)||0)<0||255<s)&&(s=0),[t,i,s]},hsvToRgb:function(e,t,i){var s,n,l,a,r,o,h,u;switch(l=i*(1-t),a=i*(1-(n=e/60-(s=Math.floor(e/60)%6))*t),r=i*(1-(1-n)*t),u=h=o=0,s){case 0:o=i,h=r,u=l;break;case 1:o=a,h=i,u=l;break;case 2:o=l,h=i,u=r;break;case 3:o=l,h=a,u=i;break;case 4:o=r,h=l,u=i;break;case 5:o=i,h=l,u=a}return[o=Math.floor(255*o),h=Math.floor(255*h),u=Math.floor(255*u)]},rgbToHsv:function(e,t,i){var s,n,l,a,r,o,h;return s=e/255,n=t/255,l=i/255,a=Math.min(s,n,l),o=0,(h=r=Math.max(s,n,l))==a?o=0:r==s&&l<=n?o=60*(n-l)/(r-a)+0:r==s&&n<l?o=60*(n-l)/(r-a)+360:r==n?o=60*(l-s)/(r-a)+120:r==l&&(o=60*(s-n)/(r-a)+240),[o,0===r?0:1-a/r,h]}},jeeplus.HtmlMap=jeeplus.proto({$init:function(e){this.ad="map_"+jeeplus.uid(),this.U=e,this.eo=[],this.sA=[]},addRect:function(e,t,i){this.fo(e,"RECT",t,i)},addPoly:function(e,t,i){this.fo(e,"POLY",t,i)},fo:function(e,t,i,s){var n="";4==arguments.length&&(n="userdata='"+s+"'"),this.eo.push("<area "+this.U+"='"+e+"' shape='"+t+"' coords='"+i.join()+"' "+n+"></area>"),this.sA.push({index:s,points:i})},addSector:function(e,t,i,s,n,l,a,r){var o=[];o.push(s),o.push(Math.floor(n*a));for(var h=t;h<i;h+=Math.PI/18)o.push(Math.floor(s+l*Math.cos(h))),o.push(Math.floor((n+l*Math.sin(h))*a));return o.push(Math.floor(s+l*Math.cos(i))),o.push(Math.floor((n+l*Math.sin(i))*a)),o.push(s),o.push(Math.floor(n*a)),this.addPoly(e,o,r)},hide:function(e,t,i){if(e.querySelectorAll)for(var s=e.querySelectorAll('area[userdata="'+t+'"]'),n=0;n<s.length;n++){var l=s[n];i?l.getAttribute("coords")&&(l.coordsdis=l.getAttribute("coords"),l.setAttribute("coords",""),l.coords=""):i||l.coordsdis&&(l.setAttribute("coords",l.coordsdis),l.coords=l.coordsdis,l.coordsdis=""),s[n].style.display=i?"none":""}},render:function(e){var t=jeeplus.html.create("DIV");t.style.cssText="position:absolute; width:100%; height:100%; top:0px; left:0px;",e.appendChild(t);var i=jeeplus.env.isIE?"":"src='data:image/gif;base64,R0lGODlhEgASAIAAAP///////yH5BAUUAAEALAAAAAASABIAAAIPjI+py+0Po5y02ouz3pwXADs='";t.innerHTML="<map id='"+this.ad+"' name='"+this.ad+"'>"+this.eo.join("\n")+"</map><img "+i+" class='jeeplus_map_img' usemap='#"+this.ad+"'>",e.t=t,this.eo=[]}}),jeeplus.protoUI({name:"chart",$init:function(e){if(this.go=[this.s],this.ho=[],this.w.className+=" jeeplus_chart",this.$ready.push(this.Mi),e.preset&&this.io(e),e.series){var t=e.series;delete e.series,e.series=t}this.attachEvent("onMouseMove",this.tA),this.data.provideApi(this,!0)},Mi:function(){this.data.attachEvent("onStoreUpdated",jeeplus.bind(function(){this.render.apply(this,arguments)},this))},defaults:{ariaLabel:"chart",color:"default",alpha:"1",label:!1,value:"{obj.value}",padding:{},type:"pie",lineColor:"#ffffff",cant:.5,barWidth:30,line:{width:2,color:"#1293f8"},item:{radius:3,borderColor:"#636363",borderWidth:1,color:"#ffffff",alpha:1,type:"r",shadow:!1},shadow:!0,gradient:!1,border:!0,labelOffset:20,origin:"auto",scale:"linear"},ad:"jeeplus_area_id",on_click:{jeeplus_chart_legend_item:function(e,t,i){var s=i.getAttribute("series_id");if(this.callEvent("onLegendClick",[e,s,i])&&void 0!==s&&1<this.go.length){var n=this.s,l=n.legend.values;(l&&l[s].toggle||n.legend.toggle)&&(-1!=i.className.indexOf("hidden")?this.showSeries(s):this.hideSeries(s))}}},on_dblclick:{},on_mouse_move:{},locate:function(e){return jeeplus.html.locate(e,this.ad)},$setSize:function(e,t){var i=jeeplus.ui.view.prototype.$setSize.call(this,e,t);if(i){for(var s in this.canvases)this.canvases[s]._n(this.bc,this.dc);this.render()}return i},type_setter:function(e){return void 0===this.s.offset&&(this.s.offset=!(-1!=e.toLowerCase().indexOf("area"))),"radar"!=e||this.s.yAxis||this.define("yAxis",{}),"scatter"==e&&(this.s.yAxis||this.define("yAxis",{}),this.s.xAxis||this.define("xAxis",{})),e},destructor:function(){this.removeAllSeries(),jeeplus.Destruction.destructor.apply(this,arguments)},removeAllSeries:function(){this.clearCanvas(),this.ko&&(this.ko.innerHTML="",this.ko.parentNode.removeChild(this.ko),this.ko=null),this.canvases&&(this.canvases={}),this.w.innerHTML="";for(var e=0;e<this.go.length;e++)this.go[e].tooltip&&this.go[e].tooltip.destructor();this.go=[]},clearCanvas:function(){if(this.canvases&&"object"==typeof this.canvases)for(var e in this.canvases)this.canvases[e].clearCanvas()},render:function(e,t,i){var s,n,l;if(this.isVisible(this.s.id)&&(t=this.oo(),this.callEvent("onBeforeRender",[t,i]))){if(this.canvases&&"object"==typeof this.canvases)for(r in this.canvases)this.canvases[r].clearCanvas();else this.canvases={};if(this.s.legend&&(this.canvases.legend||(this.canvases.legend=this.lo("legend")),this.mo(this.data.getRange(),this.bc,this.dc)),this.eo=n=new jeeplus.HtmlMap(this.ad),l=this.s,s=this.no(this.bc,this.dc),this.go)for(r=0;r<this.go.length;r++)this.s=this.go[r],this.canvases[r]||(this.canvases[r]=this.lo(this.name+" "+r,"z-index:"+(2+r),null,r,this.s.ariaLabel)),this["$render_"+this.s.type](this.canvases[r].getCanvas(),t,s.start,s.end,r,n);if(n.render(this.w),this.w.lastChild.style.zIndex=100,this.po(this.w.lastChild,s),this.callEvent("onAfterRender",[t]),this.s=l,this.s.legend&&this.s.legend.values)for(var a=this.s.legend.values,r=0;r<a.length;r++)a[r].$hidden&&this.hideSeries(r)}},po:function(e,t){var i={};for(var s in i.left=t.start.x,i.top=t.start.y,i.width=t.end.x-t.start.x,i.height=t.end.y-t.start.y,i)e.style[s]=i[s]+"px"},oo:function(){var e,t,i,s,n,l,a,r,o,h;if(s=this.data.getRange(),e=-1!=this.s.type.toLowerCase().indexOf("barh")?"yAxis":"xAxis",(t=this.s[e])&&t.units&&"object"==typeof t.units){if(r=[],void 0!==(i=t.units).start&&void 0!==i.end&&void 0!==i.next)for(a=i.start;a<=i.end;)r.push(a),a=i.next.call(this,a);else"[object Array]"===Object.prototype.toString.call(i)&&(r=i);if(l=[],r.length){for(o=t.value,h={},n=0;n<s.length;n++)h[o(s[n])]=n;for(n=0;n<r.length;n++)void 0!==h[r[n]]?(s[h[r[n]]].$unit=r[n],l.push(s[h[r[n]]])):l.push({$unit:r[n]})}return l}return s},series_setter:function(e){if("object"!=typeof e);else{this.e(e.length?e[0]:e),this.go=[this.s];for(var t=1;t<e.length;t++)this.addSeries(e[t])}return e},value_setter:jeeplus.template,xValue_setter:jeeplus.template,yValue_setter:function(e){this.define("value",e)},alpha_setter:jeeplus.template,label_setter:jeeplus.template,lineColor_setter:jeeplus.template,borderColor_setter:jeeplus.template,pieInnerText_setter:jeeplus.template,gradient_setter:function(e){return"function"!=typeof e&&e&&!0===e&&(e="light"),e},colormap:{RAINBOW:function(e){var t=Math.floor(this.getIndexById(e.id)/this.count()*1536);return 1536==t&&(t-=1),this.qo[Math.floor(t/256)](t%256)},default:function(e){var t=this.count(),i=this.qC.length,s=this.getIndexById(e.id);return t<i?(s&&(s=s<i-t?this.rC+2:this.rC+1),this.rC=s):s%=i,this.qC[s]}},color_setter:function(e){return this.colormap[e]||jeeplus.template(e)},fill_setter:function(e){return!(!e||"0"==e)&&jeeplus.template(e)},io:function(e){this.define("preset",e.preset),delete e.preset},preset_setter:function(e){var t,i,s;if(this.defaults=jeeplus.extend({},this.defaults),"object"!=typeof(s=this.presets[e]))return!1;for(t in s)if("object"==typeof s[t])if(this.defaults[t]&&"object"==typeof this.defaults[t])for(i in this.defaults[t]=jeeplus.extend({},this.defaults[t]),s[t])this.defaults[t][i]=s[t][i];else this.defaults[t]=jeeplus.extend({},s[t]);else this.defaults[t]=s[t];return e},legend_setter:function(e){return e?("object"!=typeof e&&(e={template:e}),this.E(e,{width:150,height:18,layout:"y",align:"left",valign:"bottom",template:"",toggle:-1!=this.s.type.toLowerCase().indexOf("stacked")?"":"hide",marker:{type:"square",width:15,height:15,radius:3},margin:4,padding:3}),e.template=jeeplus.template(e.template),e):(this.ko&&(this.ko.innerHTML="",this.ko=null),!1)},item_setter:function(e){"object"!=typeof e&&(e={color:e,borderColor:e}),this.E(e,jeeplus.extend({},this.defaults.item));return this.ro(["alpha","borderColor","color","radius"],e),e},line_setter:function(e){return"object"!=typeof e&&(e={color:e}),(e=jeeplus.extend(e,this.defaults.line)).color=jeeplus.template(e.color),e},padding_setter:function(e){return"object"!=typeof e&&(e={left:e,right:e,top:e,bottom:e}),this.E(e,{left:50,right:20,top:35,bottom:40}),e},xAxis_setter:function(e){if(!e)return!1;"object"!=typeof e&&(e={template:e}),this.E(e,{title:"",color:"#000000",lineColor:"#cfcfcf",template:"{obj}",lines:!0});return this.ro(["lineColor","template","lines"],e),this.so=jeeplus.extend({},e),e},yAxis_setter:function(e){this.E(e,{title:"",color:"#000000",lineColor:"#cfcfcf",template:"{obj}",lines:!0,bg:"#ffffff"});return this.ro(["lineColor","template","lines","bg"],e),this.to=jeeplus.extend({},e),e},ro:function(e,t){for(var i=0;i<e.length;i++)t[e[i]]=jeeplus.template(t[e[i]])},lo:function(e,t,i,s,n){var l={container:i||this.w,name:e,title:jeeplus.isUndefined(n)?e:n||"",series:s,style:t||"",width:this.bc,height:this.dc};return new jeeplus.Canvas(l)},uo:function(e,t,i,s,n,l){var a,r=0;return this.s.yAxis&&(this.canvases.y||(this.canvases.y=this.lo("axis_y")),r=this.vo(this.canvases.y.getCanvas(),e,t,i,s,n)),this.s.xAxis&&(this.canvases.x||(this.canvases.x=this.lo("axis_x")),a=this.canvases.x.getCanvas(),this.callEvent("onBeforeXAxis",[a,e,t,i,l,r])&&this.wo(a,e,t,i,l,r)),r},wo:function(e,t,i,s,n,l){var a,r,o=this.s,h=i.x-.5,u=parseInt(l||s.y,10)+.5,c=s.x,d=!0,p="stackedBar"==o.type?s.y+.5:u;for(a=0;a<t.length;a++){!0===o.offset?r=h+n/2+a*n:(r=a!=t.length-1||o.cellWidth?h+a*n:s.x,d=!!a),r=Math.ceil(r)-.5;var f="auto"!=o.origin&&"bar"==o.type&&parseFloat(o.value(t[a]))<o.origin;this.xo(r,p,t[a],d,f),(o.offset||a||o.cellWidth)&&o.xAxis.lines.call(this,t[a])&&this.yo(e,r,s.y,i.y,t[a])}this.canvases.x.renderTextAt(!0,!1,h,s.y+o.padding.bottom-3,o.xAxis.title,"jeeplus_axis_title_x",s.x-i.x),this.zo(e,h,u,c,u,o.xAxis.color,1),o.xAxis.lines.call(this,{})&&o.offset&&this.zo(e,c+.5,s.y,c+.5,i.y+.5,o.xAxis.color,.2)},vo:function(e,t,i,s,n,l){var a,r={};if(this.s.yAxis){var o=i.x-.5,h=s.y,u=i.y,c=s.y+.5;if(this.s.yAxis.step&&(a=parseFloat(this.s.yAxis.step)),void 0===this.to.step||void 0===this.to.start||void 0===this.to.end?(n=(r=this.Ao(n,l)).start,l=r.end,a=r.step,this.s.yAxis.end=l,this.s.yAxis.start=n):"logarithmic"==this.config.scale&&(this.Bo=!0),this.Co(i,s),0!==a){if(l==n)return h;for(var d=(h-u)*a/(l-n),p=0,f=n;f<=l;f+=a){var g=this.Bo?Math.pow(10,f):f;r.fixNum&&(g=parseFloat(g).toFixed(r.fixNum));var v=Math.floor(h-p*d)+.5;if(f==n&&"auto"==this.s.origin||!this.s.yAxis.lines.call(this,f)||this.zo(e,o,v,s.x,v,this.s.yAxis.lineColor.call(this,f),1),f==this.s.origin&&(c=v),a<1&&!this.Bo){var m=Math.min(Math.floor(this.Do(a)),n<=0?0:Math.floor(this.Do(n))),j=Math.pow(10,-m);f=g=Math.round(g*j)/j}this.canvases.y.renderText(0,v-5,this.s.yAxis.template(g.toString()),"jeeplus_axis_item_y",i.x-5),p++}return this.zo(e,o,h+1,o,u,this.s.yAxis.color,1),c}}},Co:function(e,t){var i="jeeplus_axis_title_y"+(jeeplus.Eo&&9!=jeeplus.Eo?" jeeplus_ie_filter":""),s=this.canvases.y.renderTextAt("middle",!1,0,parseInt((t.y-e.y)/2+e.y,10),this.s.yAxis.title,i);s&&(s.style.left=(jeeplus.env.transform?(s.offsetHeight-s.offsetWidth)/2:0)+"px")},Fo:function(e,t){return{start:Math.floor(this.Do(e)),step:1,end:Math.ceil(this.Do(t))}},uG:function(e){var t=Math.floor(this.Do(e)),i=Math.pow(10,t),s=e/i;return s=5<s?10:5,parseInt(s,10)*i},Ao:function(e,t){if(this.Bo=!1,"logarithmic"==this.s.scale){var i=Math.floor(this.Do(e)),s=Math.ceil(this.Do(t));if(0<e&&0<t&&1<s-i)return this.Bo=!0,this.Fo(e,t)}var n,l,a;if("auto"!=this.s.origin&&this.s.origin<e&&(e=this.s.origin),(n=this.uG((t-e)/8||1))>Math.abs(e))l=e<0?-n:0;else{var r=Math.abs(e),o=Math.floor(this.Do(r)),h=r/Math.pow(10,o);for(l=Math.ceil(10*h)/10*Math.pow(10,o)-n,1<r&&.1<n&&(l=Math.ceil(l));e<0?l<=e:e<=l;)l-=n;e<0&&(l=-l-2*n)}10<t-l&&(n=this.uG((t-l)/8||1)),a=l;for(var u=Math.floor(this.Do(n));a<t;)a+=n,a=parseFloat((1*a).toFixed(Math.abs(u)));return{start:l,end:a,step:n,fixNum:u<0?Math.abs(u):0}},Go:function(e,t){var i,s,n=this.data.Df(),l=arguments.length&&"h"==e?this.so:this.to;if(t=t||"value",l&&void 0!==l.end&&void 0!==l.start&&l.step)i=parseFloat(l.end),s=parseFloat(l.start);else if(i=jeeplus.GroupMethods.max(this.go[0][t],n),s=l&&void 0!==l.start?parseFloat(l.start):jeeplus.GroupMethods.min(this.go[0][t],n),1<this.go.length)for(var a=1;a<this.go.length;a++){var r=jeeplus.GroupMethods.max(this.go[a][t],n),o=jeeplus.GroupMethods.min(this.go[a][t],n);i<r&&(i=r),o<s&&(s=o)}return{max:i,min:s}},Do:function(e){return Math.log(e)/Math.LN10},xo:function(e,t,i,s,n){if(this.s.xAxis){var l=this.canvases.x.renderTextAt(n,s,e,t-(n?2:0),this.s.xAxis.template(i));l&&(l.className+=" jeeplus_axis_item_x")}},yo:function(e,t,i,s,n){this.s.xAxis&&this.s.xAxis.lines&&this.zo(e,t,i,t,s,this.s.xAxis.lineColor.call(this,n),1)},zo:function(e,t,i,s,n,l,a){e.strokeStyle=l,e.lineWidth=a,e.beginPath(),e.moveTo(t,i),e.lineTo(s,n),e.stroke(),e.lineWidth=1},Ho:function(e,t){return[t!=e?t-e:e,1]},qo:[function(e){return"#FF"+jeeplus.color.toHex(e/2,2)+"00"},function(e){return"#FF"+jeeplus.color.toHex(e/2+128,2)+"00"},function(e){return"#"+jeeplus.color.toHex(255-e,2)+"FF00"},function(e){return"#00FF"+jeeplus.color.toHex(e,2)},function(e){return"#00"+jeeplus.color.toHex(255-e,2)+"FF"},function(e){return"#"+jeeplus.color.toHex(e,2)+"00FF"}],qC:["#f55b50","#ff6d3f","#ffa521","#ffc927","#ffee54","#d3e153","#9acb61","#63b967","#21a497","#21c5da","#3ea4f5","#5868bf","#7b53c0","#a943ba","#ec3b77","#9eb0b8"],rC:0,addSeries:function(e){var t=jeeplus.extend({},this.s);this.s=jeeplus.extend({},t),this.e(e,{}),this.go.push(this.s),this.s=t},tA:function(e,t,i){var s;if(i.getAttribute("userdata")&&(this.Io=1==this.go.length?this.uA(t):i.getAttribute("userdata"),this.go[this.Io])){for(var n=0;n<this.go.length;n++)(s=this.go[n].tooltip)&&s.disable();i.getAttribute("disabled")||(s=this.go[this.Io].tooltip)&&s.enable()}},uA:function(e){var t,i,s,n,l,a,r,o;for(i=this.eo.sA,n=jeeplus.html.offset(this.w.t),r=(l=jeeplus.html.pos(e)).x-n.x,o=l.y-n.y,s=0;s<i.length;s++)r<=(t=i[s].points)[2]&&r>=t[0]&&o<=t[3]&&o>=t[1]&&(a?i[s].index>a.index&&(a=i[s]):a=i[s]);return a?a.index:0},hideSeries:function(e){this.canvases[e].hideCanvas();var t=this.s.legend;t&&t.values&&t.values[e]&&(t.values[e].$hidden=!0,this.mo()),this.eo.hide(this.w,e,!0)},showSeries:function(e){this.canvases[e].showCanvas();var t=this.s.legend;t&&t.values&&t.values[e]&&(delete t.values[e].$hidden,this.mo()),this.eo.hide(this.w,e,!1)},mo:function(e,t){var i,s,n,l,a,r,o,h,u,c,d,p=0,f=0;if(e=e||[],t=t||this.bc,h=this.canvases.legend.getCanvas(),s=this.s.legend,o="x"!=this.s.legend.layout?"width:"+s.width+"px":"",this.ko&&(this.ko.innerHTML="",this.ko.parentNode.removeChild(this.ko)),this.canvases.legend.clearCanvas(!0),n=jeeplus.html.create("DIV",{class:"jeeplus_chart_legend",style:"left:"+p+"px; top:"+f+"px;"+o},""),s.padding&&(n.style.padding=s.padding+"px"),this.ko=n,this.w.appendChild(n),a=[],s.values)for(i=0;i<s.values.length;i++)a.push(this.Jo(n,s.values[i].text,void 0!==s.values[i].id?typeof s.values[i].id:i,s.values[i].$hidden));else for(i=0;i<e.length;i++)a.push(this.Jo(n,s.template(e[i]),e[i].id));for(0===n.offsetWidth&&(n.style.width="auto"),r=n.offsetWidth,l=n.offsetHeight,r<t&&("x"==s.layout&&"center"==s.align&&(p=(t-r)/2),"right"==s.align&&(p=t-r),s.margin&&"center"!=s.align&&(p+=("left"==s.align?1:-1)*s.margin)),l<this.dc&&("middle"==s.valign&&"center"!=s.align&&"x"!=s.layout?f=(this.dc-l)/2:"bottom"==s.valign&&(f=this.dc-l),s.margin&&"middle"!=s.valign&&(f+=("top"==s.valign?1:-1)*s.margin)),n.style.left=p+"px",n.style.top=f+"px",h.save(),i=0;i<a.length;i++)d=a[i],u=s.values&&s.values[i].$hidden?(c=!0,s.values[i].disableColor?s.values[i].disableColor:"#d9d9d9"):(c=!1,s.values?s.values[i].color:this.s.color.call(this,e[i])),this.Ko(h,d.offsetLeft+p,d.offsetTop+f,u,d.offsetHeight,c,i);h.restore(),a=null},Jo:function(e,t,i,s){var n="";"x"==this.s.legend.layout&&(n="float:left;");var l=jeeplus.html.create("DIV",{style:n+"padding-left:"+(10+this.s.legend.marker.width)+"px",class:"jeeplus_chart_legend_item"+(s?" hidden":""),role:"button",tabindex:"0","aria-label":jeeplus.i18n.aria[(s?"show":"hide")+"Chart"]+" "+t},t);return 2<arguments.length&&l.setAttribute("series_id",i),e.appendChild(l),l},Ko:function(e,t,i,s,n,l,a){var r=[],o=this.s.legend.marker,h=this.s.legend.values,u=h&&h[a].markerType?h[a].markerType:o.type;if(s&&(e.strokeStyle=e.fillStyle=s),"round"!=u&&o.radius)if("item"==u){if(this.s.line&&"scatter"!=this.s.type&&!this.s.disableLines){e.beginPath(),e.lineWidth=this.go[a].line.width,e.strokeStyle=l?s:this.go[a].line.color.call(this,{});var c=t+5,d=i+n/2;e.moveTo(c,d);var p=c+o.width;e.lineTo(p,d),e.stroke()}var f=this.go[a].item,g=parseInt(f.radius.call(this,{}),10)||0;g&&(e.beginPath(),l?(e.lineWidth=f.borderWidth,e.strokeStyle=s,e.fillStyle=s):(e.lineWidth=f.borderWidth,e.fillStyle=f.color.call(this,{}),e.strokeStyle=f.borderColor.call(this,{}),e.globalAlpha=f.alpha.call(this,{})),e.beginPath(),t+=o.width/2+5,i+=n/2,this.Lo(e,t,i,g+1,f.type),e.fill(),e.stroke()),e.globalAlpha=1}else e.beginPath(),e.lineWidth=1,t+=5,i+=n/2-o.height/2,r=[[t+o.radius,i+o.radius,o.radius,Math.PI,3*Math.PI/2,!1],[t+o.width-o.radius,i],[t+o.width-o.radius,i+o.radius,o.radius,-Math.PI/2,0,!1],[t+o.width,i+o.height-o.radius],[t+o.width-o.radius,i+o.height-o.radius,o.radius,0,Math.PI/2,!1],[t+o.radius,i+o.height],[t+o.radius,i+o.height-o.radius,o.radius,Math.PI/2,Math.PI,!1],[t,i+o.radius]],this.Mo(e,r),e.stroke(),e.fill();else{e.beginPath(),e.lineWidth=o.height,e.lineCap=o.type,t+=e.lineWidth/2+5,i+=n/2,e.moveTo(t,i);p=t+o.width-o.height+1;e.lineTo(p,i),e.stroke(),e.fill()}},no:function(e,t){var i,s,n,l;if(i=this.s.padding.left,s=this.s.padding.top,n=e-this.s.padding.right,l=t-this.s.padding.bottom,this.s.legend){var a=this.s.legend,r=this.s.legend.width,o=this.s.legend.height;"x"==a.layout?"center"==a.valign?"right"==a.align?n-=r:"left"==a.align&&(i+=r):"bottom"==a.valign?l-=o:s+=o:"right"==a.align?n-=r:"left"==a.align&&(i+=r)}return{start:{x:i,y:s},end:{x:n,y:l}}},No:function(e){var t,i,s,n,l;if(this.s.yAxis&&void 0!==this.s.yAxis.end&&void 0!==this.s.yAxis.start&&this.s.yAxis.step)s=parseFloat(this.s.yAxis.end),n=parseFloat(this.s.yAxis.start);else{for(t=0;t<e.length;t++)for(e[t].$sum=0,e[t].$min=1/0,i=0;i<this.go.length;i++)l=Math.abs(parseFloat(this.go[i].value(e[t])||0)),isNaN(l)||(-1!=this.go[i].type.toLowerCase().indexOf("stacked")&&(e[t].$sum+=l),l<e[t].$min&&(e[t].$min=l));for(s=-1/0,n=1/0,t=0;t<e.length;t++)e[t].$sum>s&&(s=e[t].$sum),e[t].$min<n&&(n=e[t].$min);0<n&&(n=0)}return{max:s,min:n}},Oo:function(e,t,i,s,n,l,a,r){var o,h,u,c,d,p;return"light"==l?(o="x"==r?e.createLinearGradient(t,i,s,i):e.createLinearGradient(t,i,t,n),p=[[0,"#FFFFFF"],[.9,a],[1,a]],h=2):"falling"==l||"rising"==l?(o="x"==r?e.createLinearGradient(t,i,s,i):e.createLinearGradient(t,i,t,n),u=jeeplus.color.toRgb(a),(c=jeeplus.color.rgbToHsv(u[0],u[1],u[2]))[1]*=.5,d="rgb("+jeeplus.color.hsvToRgb(c[0],c[1],c[2])+")","falling"==l?p=[[0,d],[.7,a],[1,a]]:"rising"==l&&(p=[[0,a],[.3,a],[1,d]]),h=0):(e.globalAlpha=.37,h=0,o="x"==r?e.createLinearGradient(t,n,t,i):e.createLinearGradient(t,i,s,i),p=[[0,"#9d9d9d"],[.3,"#e8e8e8"],[.45,"#ffffff"],[.55,"#ffffff"],[.7,"#e8e8e8"],[1,"#9d9d9d"]]),this.Po(o,p),{gradient:o,offset:h}},Qo:function(e,t,i,s){return e*=-1,{x:t+=Math.cos(e)*s,y:i-=Math.sin(e)*s}},Po:function(e,t){for(var i=0;i<t.length;i++)e.addColorStop(t[i][0],t[i][1])},Mo:function(e,t){var i,s;for(i=0;i<t.length;i++)s=i?"lineTo":"moveTo",2<t[i].length&&(s="arc"),e[s].apply(e,t[i])},Ro:function(e,t,i,s,n){e.addRect(t,[i[0].x-s.x,i[0].y-s.y,i[1].x-s.x,i[1].y-s.y],n)}},jeeplus.Group,jeeplus.AutoTooltip,jeeplus.DataLoader,jeeplus.MouseEvents,jeeplus.EventSystem,jeeplus.ui.view),jeeplus.extend(jeeplus.ui.chart,{$render_pie:function(e,t,i,s,n,l){this.So(e,t,i,s,1,l,n)},So:function(e,t,i,s,n,l,a){if(t.length){var r=this.To(i,s),o=this.s.radius?this.s.radius:r.radius;if(!(o<0)){var h=this.Uo(t),u=this.Vo(h),c=this.Wo(h,u),d=this.s.x?this.s.x:r.x,p=this.s.y?this.s.y:r.y;1==n&&this.s.shadow&&this.Xo(e,d,p,o),p/=n;var f,g=-Math.PI/2,v=[];if(e.scale(1,n),this.s.gradient){var m=1!=n?d+o/3:d,j=1!=n?p+o/3:p;this.Yo(e,d,p,o,m,j)}for(var y=0;y<t.length;y++)if(h[y]){e.strokeStyle=this.s.lineColor.call(this,t[y]),e.beginPath(),e.moveTo(d,p),v.push(g);var b=-Math.PI/2+c[y]-1e-4;e.arc(d,p,o,g,b,!1),e.lineTo(d,p);var x=this.s.color.call(this,t[y]);e.fillStyle=x,e.fill(),this.s.pieInnerText&&this.Zo(d,p,5*o/6,g,b,n,this.s.pieInnerText(t[y],u),!0),this.s.label&&this.Zo(d,p,o+this.s.labelOffset,g,b,n,this.s.label(t[y])),1!=n&&(this.$o(e,d,p,g,b,o,!0),e.fillStyle="#000000",e.globalAlpha=.2,this.$o(e,d,p,g,b,o,!1),e.globalAlpha=1,e.fillStyle=x),l.addSector(t[y].id,g,b,d-i.x,p-i.y/n,o,n,a),g=b}for(e.globalAlpha=.8,y=0;y<v.length;y++)f=this.Qo(v[y],d,p,o),this.zo(e,d,p,f.x,f.y,this.s.lineColor.call(this,t[y]),2);1==n&&(e.lineWidth=2,e.strokeStyle="#ffffff",e.beginPath(),e.arc(d,p,o+1,0,2*Math.PI,!1),e.stroke()),e.globalAlpha=1,e.scale(1,1/n)}}},Uo:function(e){for(var t=[],i=0;i<e.length;i++)t.push(Math.abs(parseFloat(this.s.value(e[i])||0)));return t},Vo:function(e){for(var t=0,i=0;i<e.length;i++)t+=e[i];return t},Wo:function(e,t){var i,s=[],n=0;t=t||this.Vo(e);for(var l=0;l<e.length;l++)i=e[l],s[l]=2*Math.PI*(t?(i+n)/t:1/e.length),n+=i;return s},To:function(e,t){var i=t.x-e.x,s=t.y-e.y;return{x:e.x+i/2,y:e.y+s/2,radius:Math.min(i/2,s/2)}},$o:function(e,t,i,s,n,l,a){if(e.lineWidth=1,s<=0&&0<=n||0<=s&&n<=Math.PI||.003<Math.abs(s-Math.PI)&&s<=Math.PI&&n>=Math.PI){s<=0&&0<=n&&(s=0,a=!1,this._o(e,t,i,l,s,n)),s<=Math.PI&&n>=Math.PI&&(n=Math.PI,a=!1,this._o(e,t,i,l,s,n));var r=(this.s.pieHeight||Math.floor(l/4))/this.s.cant;e.beginPath(),e.arc(t,i,l,s,n,!1),e.lineTo(t+l*Math.cos(n),i+l*Math.sin(n)+r),e.arc(t,i+r,l,n,s,!0),e.lineTo(t+l*Math.cos(s),i+l*Math.sin(s)),e.fill(),a&&e.stroke()}},_o:function(e,t,i,s,n,l){e.beginPath(),e.arc(t,i,s,n,l,!1),e.stroke()},Xo:function(e,t,i,s){e.globalAlpha=.5;for(var n=["#c4c4c4","#c6c6c6","#cacaca","#dcdcdc","#dddddd","#e0e0e0","#eeeeee","#f5f5f5","#f8f8f8"],l=n.length-1;-1<l;l--)e.beginPath(),e.fillStyle=n[l],e.arc(t+1,i+1,s+l,0,2*Math.PI,!0),e.fill();e.globalAlpha=1},ap:function(e){return e.addColorStop(0,"#ffffff"),e.addColorStop(.7,"#7a7a7a"),e.addColorStop(1,"#000000"),e},Yo:function(e,t,i,s,n,l){var a;e.beginPath(),a="function"!=typeof this.s.gradient?(a=e.createRadialGradient(n,l,s/4,t,i,s),this.ap(a)):this.s.gradient(a),e.fillStyle=a,e.arc(t,i,s,0,2*Math.PI,!0),e.fill(),e.globalAlpha=.7},Zo:function(e,t,i,s,n,l,a,r){var o=this.canvases[0].renderText(0,0,a,0,1);if(o){var h=o.scrollWidth;o.style.width=h+"px",e<h&&(h=e);var u=n-s<.2?4:8;r&&(u=h/1.8);var c=s+(n-s)/2;i-=(u-8)/2;var d=-u,p="right";(c>=Math.PI/2&&c<Math.PI||c<=3*Math.PI/2&&c>=Math.PI)&&(d=-h-d+1,p="left");var f=0;!r&&l<1&&0<c&&c<Math.PI&&(f=(this.s.height||Math.floor(i/4))/l);var g=(t+Math.floor((i+f)*Math.sin(c)))*l-8,v=e+Math.floor((i+u/2)*Math.cos(c))+d,m=n<Math.PI/2+.01,j=s<Math.PI/2;j&&m?v=Math.max(v,e+3):j||m?!r&&(c>=Math.PI/2&&c<Math.PI||c<=3*Math.PI/2&&c>=Math.PI)&&(v+=h/3):v=Math.min(v,e-h),o.style.top=g+"px",o.style.left=v+"px",o.style.width=h+"px",o.style.textAlign=p,o.style.whiteSpace="nowrap"}},$render_pie3D:function(e,t,i,s,n,l){this.So(e,t,i,s,this.s.cant,l)},$render_donut:function(e,t,i,s,n,l){if(t.length){this.So(e,t,i,s,1,l,n);var a=this.s,r=this.To(i,s),o=a.radius?a.radius:r.radius,h=a.innerRadius&&a.innerRadius<o?a.innerRadius:o/3,u=a.x?a.x:r.x,c=a.y?a.y:r.y;e.fillStyle="#ffffff",e.beginPath(),e.arc(u,c,h,0,2*Math.PI,!0),e.fill()}}}),jeeplus.extend(jeeplus.ui.chart,{$render_bar:function(e,t,i,s,n,l){var a,r,o,h,u,c,d,p,f,g,v,m,j,y=s.y-i.y;j=!!this.s.yAxis,m=!!this.s.xAxis,u=(h=this.Go()).max,c=h.min,r=(s.x-i.x)/t.length,n||"auto"!=this.s.origin&&!j||this.uo(t,i,s,c,u,r),j&&(u=parseFloat(this.s.yAxis.end),c=parseFloat(this.s.yAxis.start)),d=(f=this.Ho(c,u))[0],p=f[1],v=d?y/d:d,j||"auto"!=this.s.origin&&m||(g=10,v=d?(y-g)/d:g),!n&&"auto"!=this.s.origin&&!j&&this.s.origin>c&&this.wo(e,t,i,s,r,s.y-v*(this.s.origin-c)),a=parseInt(this.s.barWidth,10);var b=0,x=0;for(o=0;o<this.go.length;o++)o==n&&(x=b),"bar"==this.go[o].type&&b++;this.go&&r<a*b+4&&(a=parseInt(r/b-4,10));var w=(r-a*b)/2,_=void 0!==this.s.radius?parseInt(this.s.radius,10):Math.round(a/5),$=!1,C=this.s.gradient;for(C&&"function"!=typeof C?($=C,C=!1):C&&(C=e.createLinearGradient(0,s.y,0,i.y),this.s.gradient(C)),m||this.zo(e,i.x,s.y+.5,s.x,s.y+.5,"#000000",1),o=0;o<t.length;o++){var S=parseFloat(this.s.value(t[o])||0);this.Bo&&(S=this.Do(S)),u<S&&(S=u),S-=c,S*=p;var I=i.x+w+o*r+(a+1)*x,E=s.y,k=C||this.s.color.call(this,t[o]),M=this.s.border?1:0,A=this.s.label(t[o]);S==this.s.origin||"auto"==this.s.origin&&this.s.value(t[o])==c?(M=0,A=""):S<0||this.s.yAxis&&0===S&&!("auto"!=this.s.origin&&this.s.origin>c)?(S=M=0,A=""):j||"auto"!=this.s.origin&&m||(S+=g/v),e.globalAlpha=this.s.alpha.call(this,t[o]);var D=this.bp(e,i,I,E,a,c,_,v,S,k,C,$,M);$&&this.cp(e,I,E,a,c,_,v,S,k,$,M),M&&this.dp(e,I,E,a,c,_,v,S,k),e.globalAlpha=1,D[0]!=I?this.canvases[n].renderTextAt(!1,!0,I+Math.floor(a/2),D[1],A):this.canvases[n].renderTextAt(!0,!0,I+Math.floor(a/2),D[3],A),l.addRect(t[o].id,[I-i.x,D[3]-i.y,D[2]-i.x,D[1]-i.y],n)}},ep:function(e,t,i,s,n,l,a){var r=i;return this.s.xAxis&&"auto"!=this.s.origin&&this.s.origin>a&&(r=i-=(this.s.origin-a)*n,(s-=this.s.origin-a)<0&&(s*=-1,e.translate(t+l,i),e.rotate(Math.PI),i=t=0),i-=.5),{value:s,x0:t,y0:i,start:r}},bp:function(e,t,i,s,n,l,a,r,o,h,u,c,d){e.save(),e.fillStyle=h;var p=this.ep(e,i,s,o,r,n,l),f=this.fp(e,p.x0,p.y0,n,a,r,p.value,d);u&&!c&&e.lineTo(p.x0+d,t.y),e.fill(),e.restore();var g=p.x0,v=p.x0!=i?i+f[0]:f[0];return[g,p.x0!=i?p.start-f[1]-p.y0:p.y0,v,p.x0!=i?p.start-p.y0:f[1]]},gp:function(e,t){var i,s;s=jeeplus.color.toRgb(t),(i=jeeplus.color.rgbToHsv(s[0],s[1],s[2]))[2]/=1.4,t="rgb("+jeeplus.color.hsvToRgb(i[0],i[1],i[2])+")",e.strokeStyle=t,1==e.globalAlpha&&(e.globalAlpha=.9)},dp:function(e,t,i,s,n,l,a,r,o){var h;e.save(),h=this.ep(e,t,i,r,a,s,n),this.gp(e,o),this.fp(e,h.x0,h.y0,s,l,a,h.value,e.lineWidth/2,1),e.stroke(),e.restore()},cp:function(e,t,i,s,n,l,a,r,o,h,u){e.save();var c=this.ep(e,t,i,r,a,s,n),d=this.Oo(e,c.x0,c.y0,c.x0+s,c.y0-a*c.value+2,h,o,"y");e.fillStyle=d.gradient,this.fp(e,c.x0+d.offset,c.y0,s-2*d.offset,l,a,c.value,d.offset+u),e.fill(),e.restore()},fp:function(e,t,i,s,n,l,a,r,o){e.beginPath();var h=0;if(l*a<n){var u=(n-l*a)/n;u<=1&&-1<=u&&(h=-Math.acos(u)+Math.PI/2)}e.moveTo(t+r,i);var c=i-Math.floor(l*a)+n+(n?0:r);n<l*a&&e.lineTo(t+r,c);var d=t+n;n&&0<n&&e.arc(d,c,Math.max(n-r,0),-Math.PI+h,-Math.PI/2,!1);var p=t+s-n-r,f=c-n+(n?r:0);e.lineTo(p,f),n&&0<n&&e.arc(p+r,c,Math.max(n-r,0),-Math.PI/2,0-h,!1);var g=t+s-r;return e.lineTo(g,i),o||e.lineTo(t+r,i),[g,f]}}),jeeplus.extend(jeeplus.ui.chart,{$render_line:function(e,t,i,s,n,l){var a,r,o,h,u,c,d,p,f,g,v,m;if(h=this.hp(e,t,i,s,n),a=this.s,t.length){for(u=a.offset?i.x+.5*h.cellWidth:i.x,o=[],r=0;r<t.length;r++)if((m=this.ip(t[r],i,s,h))||"0"==m){if(d=r?h.cellWidth*r-.5+u:u,f="object"==typeof m?m.y0:m,r&&this.s.fixOverflow){if((v=this.ip(t[r-1],i,s,h)).out&&v.out==m.out)continue;c=h.cellWidth*(r-1)-.5+u,p="object"==typeof v?v.y0:v,v.out&&(g="min"==v.out?s.y:i.y,o.push({x:this.jp(c,d,p,f,g),y:g})),m.out&&(g="min"==m.out?s.y:i.y,o.push({x:this.jp(c,d,p,f,g),y:g}))}m.out||o.push({x:d,y:m,index:r})}for(this.kp=i,r=1;r<=o.length;r++)c=o[r-1].x,p=o[r-1].y,r<o.length&&(d=o[r].x,f=o[r].y,this.zo(e,c,p,d,f,a.line.color.call(this,t[r-1]),a.line.width),a.line&&a.line.shadow&&(e.globalAlpha=.3,this.zo(e,c+2,p+a.line.width+8,d+2,f+a.line.width+8,"#eeeeee",a.line.width+3),e.globalAlpha=1)),void 0!==o[r-1].index&&this.lp(e,c,p,t[o[r-1].index],a.label(t[o[r-1].index]),n,l,i)}},jp:function(e,t,i,s,n){return e+(n-i)*(t-e)/(s-i)},lp:function(e,t,i,s,n,l,a){var r=this.s.item,o=parseInt(r.radius.call(this,s),10)||0,h=this.kp;if(o){if(e.save(),r.shadow){e.lineWidth=1,e.strokeStyle="#bdbdbd",e.fillStyle="#bdbdbd";for(var u=[.1,.2,.3],c=u.length-1;0<=c;c--)e.globalAlpha=u[c],e.strokeStyle="#d0d0d0",e.beginPath(),this.Lo(e,t,i+2*o/3,o+c+1,r.type),e.stroke();e.beginPath(),e.globalAlpha=.3,e.fillStyle="#bdbdbd",this.Lo(e,t,i+2*o/3,o+1,r.type),e.fill()}e.restore(),e.lineWidth=r.borderWidth,e.fillStyle=r.color.call(this,s),e.strokeStyle=r.borderColor.call(this,s),e.globalAlpha=r.alpha.call(this,s),e.beginPath(),this.Lo(e,t,i,o+1,r.type),e.fill(),e.stroke(),e.globalAlpha=1}if(n&&this.canvases[l].renderTextAt(!1,!0,t,i-o-this.s.labelOffset,this.s.label.call(this,s)),a){var d=this.s.eventRadius||o+1;a.addRect(s.id,[t-d-h.x,i-d-h.y,t+d-h.x,i+d-h.y],l)}},Lo:function(e,t,i,s,n){var l=[];if(!n||"square"!=n&&"s"!=n)if(!n||"diamond"!=n&&"d"!=n)l=!n||"triangle"!=n&&"t"!=n?[[t,i,s,0,2*Math.PI,!0]]:[[t,i-s],[t+Math.sqrt(3)*s/2,i+s/2],[t-Math.sqrt(3)*s/2,i+s/2],[t,i-s]];else{var a=1<e.lineWidth?e.lineWidth*Math.sqrt(2)/4:0;l=[[t,i-s],[t+s,i],[t,i+s],[t-s,i],[t+a,i-s-a]]}else l=[[t-(s*=Math.sqrt(2)/2)-e.lineWidth/2,i-s],[t+s,i-s],[t+s,i+s],[t-s,i+s],[t-s,i-s]];this.Mo(e,l)},ip:function(e,t,i,s){var n=s.minValue,l=s.maxValue,a=s.unit,r=s.valueFactor,o=this.s.value(e);this.Bo&&(o=this.Do(o));var h=(parseFloat(o||0)-n)*r;this.s.yAxis||(h+=s.startValue/a);var u=i.y-a*h;return!this.s.fixOverflow||"line"!=this.s.type&&"area"!=this.s.type?(l<o&&(u=t.y),(h<0||o<n)&&(u=i.y)):l<o?u={y:t.y,y0:u,out:"max"}:(h<0||o<n)&&(u={y:i.y,y0:u,out:"min"}),u},hp:function(e,t,i,s,n){var l,a={};a.totalHeight=s.y-i.y,this.s.cellWidth?a.cellWidth=Math.min(s.x-i.x,this.s.cellWidth):a.cellWidth=(s.x-i.x)/(this.s.offset?t.length:t.length-1);var r=!!this.s.yAxis,o=-1!=this.s.type.indexOf("stacked")?this.No(t):this.Go();a.maxValue=o.max,a.minValue=o.min,n||this.uo(t,i,s,a.minValue,a.maxValue,a.cellWidth),r&&(a.maxValue=parseFloat(this.s.yAxis.end),a.minValue=parseFloat(this.s.yAxis.start));var h=this.Ho(a.minValue,a.maxValue);return l=h[0],a.valueFactor=h[1],a.unit=l?a.totalHeight/l:10,a.startValue=0,r||(a.startValue=10,a.unit!=a.totalHeight&&(a.unit=l?(a.totalHeight-a.startValue)/l:10)),a}}),jeeplus.extend(jeeplus.ui.chart,{$render_barH:function(e,t,i,s,n,l){var a,r,o,h,u,c,d,p,f,g,v,m,j,y,b,x,w,_,$,C,S;for(o=(s.y-i.y)/t.length,p=(d=this.Go("h")).max,f=d.min,x=s.x-i.x,S=!!this.s.xAxis,n||this.mp(e,t,i,s,f,p,o),S&&(p=parseFloat(this.s.xAxis.end),f=parseFloat(this.s.xAxis.start)),m=(y=this.Ho(f,p))[0],v=y[1],_=m?x/m:10,S||(b=10,_=m?(x-b)/m:10),(r=parseInt(this.s.barWidth,10))*this.go.length+4>o&&(r=o/this.go.length-4),a=Math.floor((o-r*this.go.length)/2),j=void 0!==this.s.radius?parseInt(this.s.radius,10):Math.round(r/5),g=!1,(u=this.s.gradient)&&"function"!=typeof u?(g=u,u=!1):u&&(u=e.createLinearGradient(i.x,i.y,s.x,i.y),this.s.gradient(u)),S||this.zo(e,i.x-.5,i.y,i.x-.5,s.y,"#000000",1),c=0;c<t.length;c++)if(w=parseFloat(this.s.value(t[c]||0)),this.Bo&&(w=this.Do(w)),w&&!isNaN(w))if(p<w&&(w=p),w-=f,w*=v,$=i.x,C=i.y+a+c*o+(r+1)*n,w<0&&"auto"==this.s.origin||this.s.xAxis&&0===w&&!("auto"!=this.s.origin&&this.s.origin>f))this.canvases[n].renderTextAt("middle","right",$+10,C+r/2+a,this.s.label(t[c]));else{w<0&&"auto"!=this.s.origin&&this.s.origin>f&&(w=0),S||(w+=b/_),h=u||this.s.color.call(this,t[c]),this.s.border&&this.np(e,$,C,r,f,j,_,w,h),e.globalAlpha=this.s.alpha.call(this,t[c]);var I=this.op(e,s,$,C,r,f,j,_,w,h,u,g);g&&this.pp(e,$,C,r,f,j,_,w,h,g),e.globalAlpha=1,I[3]==C?(this.canvases[n].renderTextAt("middle","left",I[0]-5,I[3]+Math.floor(r/2),this.s.label(t[c])),l.addRect(t[c].id,[I[0]-i.x,I[3]-i.y,I[2]-i.x,I[3]+r-i.y],n)):(this.canvases[n].renderTextAt("middle",!1,I[2]+5,I[1]+Math.floor(r/2),this.s.label(t[c])),l.addRect(t[c].id,[I[0]-i.x,C-i.y,I[2]-i.x,I[3]-i.y],n))}},qp:function(e,t,i,s,n,l,a,r,o){var h=0;if(l*a<n){var u=(n-l*a)/n;h=-Math.asin(u)+Math.PI/2}e.moveTo(t,i+r);var c=t+l*a-n-(n?0:r);c=Math.max(t,c),n<l*a&&e.lineTo(c,i+r);var d=i+n;n&&0<n&&e.arc(c,d,n-r,-Math.PI/2+h,0,!1);var p=i+s-n-(n?0:r),f=c+n-(n?r:0);e.lineTo(f,p),n&&0<n&&e.arc(c,p,n-r,0,Math.PI/2-h,!1);var g=i+s-r;return e.lineTo(t,g),o||e.lineTo(t,i+r),[f,g]},mp:function(e,t,i,s,n,l,a){var r=0;this.s.xAxis&&(this.canvases.x||(this.canvases.x=this.lo("axis_x")),r=this.rp(this.canvases.x.getCanvas(),t,i,s,n,l)),this.s.yAxis&&(this.canvases.y||(this.canvases.y=this.lo("axis_y")),this.sp(this.canvases.y.getCanvas(),t,i,s,a,r))},sp:function(e,t,i,s,n,l){if(this.s.yAxis){var a,r=parseInt(l||i.x,10)-.5,o=s.y+.5,h=i.y;this.zo(e,r,o,r,h,this.s.yAxis.color,1);for(var u=0;u<t.length;u++){var c="auto"!=this.s.origin&&"barH"==this.s.type&&parseFloat(this.s.value(t[u]))<this.s.origin;a=h+n/2+u*n,this.canvases.y.renderTextAt("middle",!c&&"left",c?5+r:r-5,a,this.s.yAxis.template(t[u]),"jeeplus_axis_item_y",c?0:r-10),this.s.yAxis.lines.call(this,t[u])&&this.zo(e,i.x,a,s.x,a,this.s.yAxis.lineColor.call(this,t[u]),1)}this.s.yAxis.lines.call(this,{})&&this.zo(e,i.x+.5,h+.5,s.x,h+.5,this.s.yAxis.lineColor.call(this,{}),1),this.Co(i,s)}},rp:function(e,t,i,s,n,l){var a,r={},o=this.s.xAxis;if(o){var h=s.y+.5,u=i.x-.5,c=s.x-.5,d=i.x;if(this.zo(e,u,h,c,h,o.color,1),o.step&&(a=parseFloat(o.step)),(void 0===this.so.step||void 0===this.so.start||void 0===this.so.end)&&(n=(r=this.Ao(n,l)).start,l=r.end,a=r.step,this.s.xAxis.end=l,this.s.xAxis.start=n,this.s.xAxis.step=a),0!==a){for(var p=(c-u)*a/(l-n),f=0,g=n;g<=l;g+=a){var v=this.Bo?Math.pow(10,g):g;r.fixNum&&(v=parseFloat(v).toFixed(r.fixNum));var m=Math.floor(u+f*p)+.5;if(g==n&&"auto"==this.s.origin||!o.lines.call(this,g)||this.zo(e,m,h,m,i.y,this.s.xAxis.lineColor.call(this,g),1),g==this.s.origin&&(d=m+1),a<1&&!this.Bo){var j=Math.min(Math.floor(this.Do(a)),n<=0?0:Math.floor(this.Do(n))),y=Math.pow(10,-j);g=v=Math.round(v*y)/y}this.canvases.x.renderTextAt(!1,!0,m,h+2,o.template(v.toString()),"jeeplus_axis_item_x"),f++}return this.canvases.x.renderTextAt(!0,!1,u,s.y+this.s.padding.bottom-3,this.s.xAxis.title,"jeeplus_axis_title_x",s.x-i.x),o.lines.call(this,{})||this.zo(e,u,i.y-.5,c,i.y-.5,this.s.xAxis.color,.2),d}}},tp:function(e,t,i,s,n,l,a){var r=t;return this.s.yAxis&&"auto"!=this.s.origin&&this.s.origin>a&&(r=t+=(this.s.origin-a)*n,(s-=this.s.origin-a)<0&&(s*=-1,e.translate(t,i+l),e.rotate(Math.PI),t=.5,i=0),t+=.5),{value:s,x0:t,y0:i,start:r}},op:function(e,t,i,s,n,l,a,r,o,h,u,c){e.save();var d=this.tp(e,i,s,o,r,n,l);e.fillStyle=h,e.beginPath();var p=this.qp(e,d.x0,d.y0,n,a,r,d.value,this.s.border?1:0);u&&!c&&e.lineTo(t.x,d.y0+(this.s.border?1:0)),e.fill(),e.restore();var f=d.y0,g=d.y0!=s?s:p[1];return[d.y0!=s?d.start-p[0]:d.start,f,d.y0!=s?d.start:p[0],g]},np:function(e,t,i,s,n,l,a,r,o){e.save();var h=this.tp(e,t,i,r,a,s,n);e.beginPath(),this.gp(e,o),e.globalAlpha=.9,this.qp(e,h.x0,h.y0,s,l,a,h.value,e.lineWidth/2,1),e.stroke(),e.restore()},pp:function(e,t,i,s,n,l,a,r,o,h){e.save();var u=this.tp(e,t,i,r,a,s,n),c=this.Oo(e,u.x0,u.y0+s,u.x0+a*u.value,u.y0,h,o,"x");e.fillStyle=c.gradient,e.beginPath(),this.qp(e,u.x0,u.y0+c.offset,s-2*c.offset,l,a,u.value,c.offset),e.fill(),e.globalAlpha=1,e.restore()}}),jeeplus.extend(jeeplus.ui.chart,{$render_stackedBar:function(e,t,i,s,n,l){var a,r,o,h,u,c,d,p=this.s,f=s.y-i.y,g=!!p.yAxis,v=!!p.xAxis,m=this.No(t),j=0===p.origin;a=m.max,r=m.min;var y=Math.floor((s.x-i.x)/t.length);n||(o=this.uo(t,i,s,r,a,y)),g&&(a=parseFloat(p.yAxis.end),r=parseFloat(p.yAxis.start));var b=this.Ho(r,a);d=b[0],c=b[1];var x=d?f/d:10,w=parseInt(p.barWidth,10);y<w+4&&(w=y-4);var _=Math.floor((y-w)/2),$=!!p.gradient&&p.gradient;v||this.zo(e,i.x,s.y+.5,s.x,s.y+.5,"#000000",1);for(var C=0;C<t.length;C++){var S=Math.abs(parseFloat(p.value(t[C]||0)));this.Bo&&(S=this.Do(S)),h=i.x+_+C*y;var I=j&&S<0;if(n?u=I?t[C].$startYN:t[C].$startY:(u=o-1,t[C].$startY=u,j&&(I&&(u=o+1),t[C].$startYN=o+1)),S&&!isNaN(S)&&(n||j||(S-=r),S*=c,!(u<i.y+1))){var E=this.s.color.call(this,t[C]),k=Math.abs(u-(j?s.y+r*x:s.y))<3;e.globalAlpha=p.alpha.call(this,t[C]),e.fillStyle=e.strokeStyle=p.color.call(this,t[C]),e.beginPath();var M=u-x*S+(k?I?-1:1:0),A=this.up(e,h-(p.border?.5:0),u,w+(p.border?.5:0),M,0,i.y);if(e.fill(),e.stroke(),$){e.save();var D=this.Oo(e,h,u,h+w,A[1],$,E,"y");e.fillStyle=D.gradient,e.beginPath(),A=this.up(e,h+D.offset,u,w-2*D.offset,M,p.border?1:0,i.y),e.fill(),e.restore()}p.border&&(e.save(),"string"==typeof p.border?e.strokeStyle=p.border:this.gp(e,E),e.beginPath(),this.up(e,h-.5,parseInt(u,10)+.5,w+1,parseInt(M,10)+.5,0,i.y,k),e.stroke(),e.restore()),e.globalAlpha=1,this.canvases[n].renderTextAt(!1,!0,h+Math.floor(w/2),A[1]+(u-A[1])/2-7,this.s.label(t[C])),l.addRect(t[C].id,[h-i.x,A[1]-i.y,A[0]-i.x,t[C][I?"$startYN":"$startY"]-i.y],n),t[C][I?"$startYN":"$startY"]=A[1]}}},up:function(e,t,i,s,n,l,a,r){e.moveTo(t,i),n<a&&(n=a),e.lineTo(t,n);var o=t+s,h=n;e.lineTo(o,h);var u=t+s;return e.lineTo(u,i),r||e.lineTo(t,i),[u,h]}}),jeeplus.extend(jeeplus.ui.chart,{$render_stackedBarH:function(e,t,i,s,n,l){var a,r,o,h,u=s.x-i.x,c=!!this.s.yAxis,d=this.No(t);a=d.max,r=d.min;var p=Math.floor((s.y-i.y)/t.length);n||this.mp(e,t,i,s,r,a,p),c&&(a=parseFloat(this.s.xAxis.end),r=parseFloat(this.s.xAxis.start));var f=this.Ho(r,a);h=f[0],o=f[1];var g=h?u/h:10,v=0;c||(v=10,g=h?(u-v)/h:10);var m=parseInt(this.s.barWidth,10);p<m+4&&(m=p-4);var j=(p-m)/2,y=!1,b=this.s.gradient;b&&(y=!0),c||this.zo(e,i.x-.5,i.y,i.x-.5,s.y,"#000000",1);var x=0,w=0;for(_=0;_<this.go.length;_++)_==n&&(w=x),"stackedBarH"==this.go[_].type&&x++;for(var _=0;_<t.length;_++){w||(t[_].$startX=i.x);var $=Math.abs(parseFloat(this.s.value(t[_]||0)));a<$&&($=a),$-=r,$*=o;var C=i.x,S=i.y+j+_*p;if(w?C=t[_].$startX:t[_].$startX=C,$&&!isNaN($)){c||($+=v/g);var I=this.s.color.call(this,t[_]);e.globalAlpha=this.s.alpha.call(this,t[_]),e.fillStyle=this.s.color.call(this,t[_]),e.beginPath();var E=this.qp(e,C,S,m,0,g,$,0);if(b&&!y&&e.lineTo(i.x+u,S+(this.s.border?1:0)),e.fill(),y){var k=this.Oo(e,C,S+m,C,S,y,I,"x");e.fillStyle=k.gradient,e.beginPath(),E=this.qp(e,C,S,m,0,g,$,0),e.fill()}this.s.border&&this.np(e,C,S,m,r,0,g,$,I),e.globalAlpha=1,this.canvases[n].renderTextAt("middle",!0,t[_].$startX+(E[0]-t[_].$startX)/2-1,S+(E[1]-S)/2,this.s.label(t[_])),l.addRect(t[_].id,[t[_].$startX-i.x,S-i.y,E[0]-i.x,E[1]-i.y],n),t[_].$startX=E[0]}}}}),jeeplus.extend(jeeplus.ui.chart,{$render_spline:function(e,t,i,s,n,l){var a,r,o,h,u,c,d,p,f,g,v,m,j;if(u=this.hp(e,t,i,s,n),a=this.s,this.kp=i,o=[],t.length){for(p=a.offset?i.x+.5*u.cellWidth:i.x,r=0;r<t.length;r++)((v=this.ip(t[r],i,s,u))||"0"==v)&&(d=r?u.cellWidth*r-.5+p:p,o.push({x:d,y:v,v:this.s.value(t[r]),index:r}));for(c=this.vp(o),r=0;r<o.length;r++){if(f=o[r].x,m=o[r].y,r<o.length-1){for(g=o[r+1].x,j=o[r+1].y,h=f;h<g;h++){var y=this.wp(h,f,r,c.a,c.b,c.c,c.d);y<i.y&&(y=i.y),y>s.y&&(y=s.y);var b=this.wp(h+1,f,r,c.a,c.b,c.c,c.d);b<i.y&&(b=i.y),b>s.y&&(b=s.y),this.zo(e,h,y,h+1,b,a.line.color(t[r]),a.line.width)}this.zo(e,g-1,this.wp(h,f,r,c.a,c.b,c.c,c.d),g,j,a.line.color(t[r]),a.line.width)}this.lp(e,f,m,t[o[r].index],a.label(t[o[r].index]),n,l)}}},vp:function(e){var t,i,s,n,l,a,r,o,h=[],u=[],c=e.length;for(l=0;l<c-1;l++)h[l]=e[l+1].x-e[l].x,u[l]=(e[l+1].y-e[l].y)/h[l];for(o=[],(r=[])[0]=0,r[1]=2*(h[0]+h[1]),o[0]=0,o[1]=6*(u[1]-u[0]),l=2;l<c-1;l++)r[l]=2*(h[l-1]+h[l])-h[l-1]*h[l-1]/r[l-1],o[l]=6*(u[l]-u[l-1])-h[l-1]*o[l-1]/r[l-1];for((a=[])[c-1]=a[0]=0,l=c-2;1<=l;l--)a[l]=(o[l]-h[l]*a[l+1])/r[l];for(t=[],i=[],s=[],n=[],l=0;l<c-1;l++)t[l]=e[l].y,i[l]=-h[l]*a[l+1]/6-h[l]*a[l]/3+(e[l+1].y-e[l].y)/h[l],s[l]=a[l]/2,n[l]=(a[l+1]-a[l])/(6*h[l]);for(l=0;l<e.length-1;l++)0===e[l].v&&0===e[l+1].v&&(t[l]=e[l].y,n[l]=s[l]=i[l]=0);return{a:t,b:i,c:s,d:n}},wp:function(e,t,i,s,n,l,a){return s[i]+(e-t)*(n[i]+(e-t)*(l[i]+(e-t)*a[i]))}}),jeeplus.extend(jeeplus.ui.chart,{$render_area:function(e,t,i,s,n,l){var a,r,o,h,u,c,d,p,f,g,v,m,j,y,b;if(c=this.hp(e,t,i,s,n),h=(r=this.s).eventRadius||Math.floor(c.cellWidth/2),t.length){for(d=[],g=r.offset?i.x+.5*c.cellWidth:i.x,o=0;o<t.length;o++)if(u=t[o],f=this.ip(u,i,s,c),j=g+c.cellWidth*o,f){if(y="object"==typeof f?f.y0:f,o&&this.s.fixOverflow){if((p=this.ip(t[o-1],i,s,c)).out&&p.out==f.out)continue;v=c.cellWidth*(o-1)-.5+g,m="object"==typeof p?p.y0:p,p.out&&(b="min"==p.out?s.y:i.y,d.push([this.jp(v,j,m,y,b),b])),f.out&&(b="min"==f.out?s.y:i.y,d.push([this.jp(v,j,m,y,b),b]),o==t.length-1&&b==i.y&&d.push([j,i.y]))}f.out||(d.push([j,y]),l.addRect(u.id,[j-h-i.x,y-h-i.y,j+h-i.x,y+h-i.y],n)),r.yAxis||(a=r.offset||o!=t.length-1?"center":"left",this.canvases[n].renderTextAt(!1,a,j,y-r.labelOffset,r.label(u)))}d.length&&(d.push([j,s.y]),d.push([d[0][0],s.y])),e.globalAlpha=this.s.alpha.call(this,t[0]),e.fillStyle=this.s.color.call(this,t[0]),e.beginPath(),this.Mo(e,d),e.fill(),e.lineWidth=1,e.globalAlpha=1,r.border&&(e.lineWidth=r.borderWidth||1,r.borderColor?e.strokeStyle=r.borderColor.call(this,t[0]):this.gp(e,e.fillStyle),e.beginPath(),this.Mo(e,d),e.stroke())}},$render_stackedArea:function(e,i,t,s,n,l){var a,r,o,h,u,c,d,p,f,g,v,m,j,y,b,x,w;if(f=this.hp(e,i,t,s,n),d=(h=this.s).eventRadius||Math.floor(f.cellWidth/2),i.length){g=[],j=[],v=h.offset?t.x+.5*f.cellWidth:t.x;function _(e,t){return n?i[e].$startY?t-s.y+i[e].$startY:0:t}for(u=0;u<i.length;u++)p=i[u],u?v+=f.cellWidth:(m=_(u,s.y),g.push([v,m])),m=_(u,this.ip(p,t,s,f)),j.push(isNaN(m)&&!u?i[u].$startY||s.y:m),m&&(g.push([v,m]),l.addRect(p.id,[v-d-t.x,m-d-t.y,v+d-t.x,m+d-t.y],n),h.yAxis||(h.offset,o="center",this.canvases[n].renderTextAt(!1,o,v,m-h.labelOffset,h.label(p))));if(g.push([v,_(u-1,s.y)]),n)for(u=i.length-2;0<u;u--)v-=f.cellWidth,(m=i[u].$startY)&&g.push([v,m]);for(g.push([g[0][0],g[0][1]]),e.globalAlpha=this.s.alpha.call(this,i[0]),e.fillStyle=this.s.color.call(this,i[0]),e.beginPath(),this.Mo(e,g),e.fill(),u=0;u<i.length;u++){if(!(m=j[u]))for(u==i.length-1&&(m=i[u].$startY),c=u+1;c<i.length;c++)if(j[c]){a={x:t.x,y:j[0]},r={x:t.x+f.cellWidth*c,y:j[c]},y=t.x+f.cellWidth*u,void 0,m=(w=((x=r).y-(b=a).y)/(x.x-b.x))*y+b.y-w*b.x;break}i[u].$startY=m}}}}),jeeplus.extend(jeeplus.ui.chart,{$render_radar:function(e,t,i,s,n,l){this.xp(e,t,i,s,n,l)},xp:function(e,t,i,s,n,l){if(t.length){for(var a=this.To(i,s),r=this.s.radius?this.s.radius:a.radius,o=this.s.x?this.s.x:a.x,h=this.s.y?this.s.y:a.y,u=[],c=0;c<t.length;c++)u.push(1);var d=this.Wo(u,t.length);this.kp=i,n||this.yp(d,o,h,r,t),this.zp(e,d,o,h,r,t,n,l)}},zp:function(e,t,i,s,n,l,a,r){var o,h,u,c,d,p,f,g,v,m,j,y,b,x,w,_,$,C,S;for(d=(u=this.s).yAxis.start,p=u.yAxis.end,C=(y=(S=this.Ho(d,p))[0])?n/y:n/2,$=S[1],o=h=b=-Math.PI/2,v=[],c=g=0;c<l.length;c++)w=_||(x=u.value(l[c]),this.Bo&&(x=this.Do(x)),(parseFloat(x||0)-d)*$),m=Math.floor(C*w),x=u.value(c!=l.length-1?l[c+1]:l[0]),this.Bo&&(x=this.Do(x)),_=(parseFloat(x||0)-d)*$,j=Math.floor(C*_),o=h,h=c!=l.length-1?b+t[c]-1e-4:b,f=g||this.Qo(o,i,s,m),g=this.Qo(h,i,s,j),v.push(f);u.fill&&this.Ap(e,v,l),!u.disableLines&&2<l.length&&this.Bp(e,v,l),(!u.disableItems||l.length<3)&&this.Cp(e,v,l,a,r),v=null},Cp:function(e,t,i,s,n){for(var l=0;l<t.length;l++)this.lp(e,t[l].x,t[l].y,i[l],this.s.label.call(this,i),s,n)},Ap:function(e,t,i){var s,n;e.globalAlpha=this.s.alpha.call(this,{}),e.beginPath();for(var l=0;l<t.length;l++)e.fillStyle=this.s.fill.call(this,i[l]),s=t[l],n=t[l+1]||t[0],l||e.moveTo(s.x,s.y),e.lineTo(n.x,n.y);e.fill(),e.globalAlpha=1},Bp:function(e,t,i){for(var s,n,l=0;l<t.length;l++)s=t[l],n=t[l+1]||t[0],this.zo(e,s.x,s.y,n.x,n.y,this.s.line.color.call(this,i[l]),this.s.line.width)},yp:function(e,t,i,s,n){var l=this.s.yAxis,a=this.s.xAxis,r=l.start,o=l.end,h=l.step,u={},c=this.to;if(void 0===c.step||void 0===c.start||void 0===c.end){var d=this.Go();r=(u=this.Ao(d.min,d.max)).start,o=u.end,h=u.step,l.end=o,l.start=r}var p,f,g,v,m,j=[],y=0,b=s*h/(o-r);h<1&&(v=Math.min(this.Do(h),r<=0?0:this.Do(r)),m=Math.pow(10,-v));var x=[];this.canvases.scale||(this.canvases.scale=this.lo("radar_scale"));var w=this.canvases.scale.getCanvas();for(p=o;r<=p;p-=h){var _=this.Bo?Math.pow(10,p):p;u.fixNum&&(_=parseFloat(p).toFixed(u.fixNum)),j.push(Math.floor(y*b)+.5),m&&!this.Bo&&(p=_=Math.round(_*m)/m);var $=i-s+j[j.length-1];if(this.canvases.scale.renderTextAt("middle","left",t,$,l.template(_.toString()),"jeeplus_axis_item_y jeeplus_radar"),e.length<2)return void this.Dp(w,"arc",t,i,s-j[j.length-1],-Math.PI/2,3*Math.PI/2,p);var C,S=-Math.PI/2,I=S;for(f=0;f<e.length;f++)y||x.push(I),C=S+e[f]-1e-4,this.Dp(w,2<e.length?c.lineShape||"line":"arc",t,i,s-j[j.length-1],I,C,p,f,n[p]),I=C;y++}for(p=0;p<x.length;p++)g=this.Qo(x[p],t,i,s),a.lines.call(this,n[p],p)&&this.zo(w,t,i,g.x,g.y,a?a.lineColor.call(this,n[p]):"#cfcfcf",1),this.Ep(w,t,i,s,x[p],a?a.template.call(this,n[p]):"&nbsp;")},Dp:function(e,t,i,s,n,l,a,r,o){var h,u;if(n<0)return!1;h=this.Qo(l,i,s,n),u=this.Qo(a,i,s,n);var c=this.s.yAxis;c.bg&&(e.beginPath(),e.moveTo(i,s),"arc"==t?e.arc(i,s,n,l,a,!1):(e.lineTo(h.x,h.y),e.lineTo(u.x,u.y)),e.fillStyle=c.bg(r,o),e.moveTo(i,s),e.fill(),e.closePath()),c.lines.call(this,r)&&(e.lineWidth=1,e.beginPath(),"arc"==t?e.arc(i,s,n,l,a,!1):(e.moveTo(h.x,h.y),e.lineTo(u.x,u.y)),e.strokeStyle=c.lineColor.call(this,r),e.stroke())},Ep:function(e,t,i,s,n,l){if(!l)return!1;var a=this.canvases.scale.renderText(0,0,l,"jeeplus_axis_radar_title",1),r=a.scrollWidth,o=a.offsetHeight,h=this.Qo(n,t,i,s+5),u=0,c=0;(n<0||n>Math.PI)&&(c=-o),n>Math.PI/2&&(u=-r),Math.abs(n+Math.PI/2)<.001||Math.abs(n-Math.PI/2)<.001?u=-r/2:(Math.abs(n)<.001||Math.abs(n-Math.PI)<.001)&&(c=-o/2),a.style.top=h.y+c+"px",a.style.left=h.x+u+"px",a.style.width=r+"px",a.style.whiteSpace="nowrap"}}),jeeplus.extend(jeeplus.ui.chart,{$render_scatter:function(e,t,i,s,n,l){if(!this.s.xValue)return!1;var a=this.Go(),r=this.Go("h","xValue");n||(this.canvases.x||(this.canvases.x=this.lo("axis_x")),this.canvases.y||(this.canvases.y=this.lo("axis_y")),this.vo(this.canvases.y.getCanvas(),t,i,s,a.min,a.max),this.rp(this.canvases.x.getCanvas(),t,i,s,r.min,r.max)),a={min:this.s.yAxis.start,max:this.s.yAxis.end},r={min:this.s.xAxis.start,max:this.s.xAxis.end};var o=this.Fp(e,t,i,s,r,a);this.kp=i;for(var h=0;h<t.length;h++)this.Gp(e,l,i,s,o,r,a,t[h],n)},Fp:function(e,t,i,s,n,l){var a={};return a.totalHeight=s.y-i.y,a.totalWidth=s.x-i.x,this.Hp(a,n.min,n.max,a.totalWidth,"X"),this.Hp(a,l.min,l.max,a.totalHeight,"Y"),a},Gp:function(e,t,i,s,n,l,a,r,o){var h=this.Ip(n,s,i,l,r,"X"),u=this.Ip(n,i,s,a,r,"Y");this.lp(e,h,u,r,this.s.label.call(this,r),o,t)},Ip:function(e,t,i,s,n,l){var a=this.s["X"==l?"xValue":"value"].call(this,n),r=e["valueFactor"+l],o=(parseFloat(a||0)-s.min)*r,h=e["unit"+l],u=i[l.toLowerCase()]-("X"==l?-1:1)*Math.floor(h*o);return o<0&&(u=i[l.toLowerCase()]),a>s.max&&(u=t[l.toLowerCase()]),a<s.min&&(u=i[l.toLowerCase()]),u},Hp:function(e,t,i,s,n){var l=this.Ho(t,i);e["relValue"+(n=n||"")]=l[0],e["valueFactor"+n]=l[1],e["unit"+n]=e["relValue"+n]?s/e["relValue"+n]:10}}),jeeplus.extend(jeeplus.ui.chart,{presets:{simple:{item:{borderColor:"#ffffff",color:"#2b7100",shadow:!1,borderWidth:2},line:{color:"#8ecf03",width:2}},plot:{color:"#1293f8",item:{borderColor:"#636363",borderWidth:1,color:"#ffffff",type:"r",shadow:!1},line:{color:"#1293f8",width:2}},diamond:{color:"#b64040",item:{borderColor:"#b64040",color:"#b64040",type:"d",radius:3,shadow:!0},line:{color:"#ff9000",width:2}},point:{color:"#fe5916",disableLines:!0,fill:!1,disableItems:!1,item:{color:"#feb916",borderColor:"#fe5916",radius:2,borderWidth:1,type:"r"},alpha:1},line:{line:{color:"#3399ff",width:2},item:{color:"#ffffff",borderColor:"#3399ff",radius:2,borderWidth:2,type:"d"},fill:!1,disableItems:!1,disableLines:!1,alpha:1},area:{fill:"#3399ff",line:{color:"#3399ff",width:1},disableItems:!0,alpha:.2,disableLines:!1},round:{item:{radius:3,borderColor:"#3f83ff",borderWidth:1,color:"#3f83ff",type:"r",shadow:!1,alpha:.6}},square:{item:{radius:3,borderColor:"#447900",borderWidth:2,color:"#69ba00",type:"s",shadow:!1,alpha:1}},column:{color:"RAINBOW",gradient:!1,barWidth:45,radius:0,alpha:1,border:!0},stick:{barWidth:5,gradient:!1,color:"#67b5c9",radius:2,alpha:1,border:!1},alpha:{color:"#b9a8f9",barWidth:70,gradient:"falling",radius:0,alpha:.5,border:!0}}}),jeeplus.extend(jeeplus.ui.chart,{$render_splineArea:function(e,t,i,s,n,l){var a,r,o,h,u,c,d,p,f,g,v,m,j,y=this.s,b=[];if(c=this.hp(e,t,i,s,n),u=y.eventRadius||Math.floor(c.cellWidth/2),o=[],t.length){for(f=i.x,r=0;r<t.length;r++)((m=this.ip(t[r],i,s,c))||"0"==m)&&(p=r?c.cellWidth*r-.5+f:f,o.push({x:p,y:m,index:r}),l.addRect(t[r].id,[p-u-i.x,m-u-i.y,p+u-i.x,m+u-i.y],n));for(d=this.vp(o),r=0;r<o.length;r++)if(g=o[r].x,o[r].y,r<o.length-1){for(v=o[r+1].x,j=o[r+1].y,h=g;h<v;h++){var x=this.wp(h,g,r,d.a,d.b,d.c,d.d);x<i.y&&(x=i.y),x>s.y&&(x=s.y);var w=this.wp(h+1,g,r,d.a,d.b,d.c,d.d);w<i.y&&(w=i.y),w>s.y&&(w=s.y),b.push([h,x]),b.push([h+1,w])}b.push([v,j])}a=this.s.color.call(this,t[0]),b.length&&(b.push([v,s.y]),b.push([b[0][0],s.y])),e.globalAlpha=this.s.alpha.call(this,t[0]),e.fillStyle=a,e.beginPath(),this.Mo(e,b),e.fill(),e.lineWidth=1,e.globalAlpha=1,y.border&&(e.lineWidth=y.borderWidth||1,y.borderColor?e.strokeStyle=y.borderColor.call(this,t[0]):this.gp(e,a),e.beginPath(),b.splice(b.length-3),this.Mo(e,b),e.stroke())}}}),function(){function t(a){if(!a.BE){var s=a.s;s.cellWidth||(s.cellWidth=30),s.animateDuration||(s.animateDuration=400),s.offset=!1,a.BE=a.attachEvent("onBeforeRender",function(e,t){var i=a.no(a.bc,a.dc);(function(i){n(i,function(e,t){t._n(i.bc+2*i.s.cellWidth,i.dc)})})(a),function(e,t,i,s){if(s&&e.length){var n=Math.ceil((i.x-t.x)/s);e.length>n+1&&e.splice(0,e.length-n-1)}}(e,i.start,i.end,s.cellWidth),"add"==t&&function(t){var e=t.s.cellWidth;t.DE!=e&&(t.DE=e,t.render()),t.DE=0,t.EE=null,window.requestAnimationFrame&&!document.hidden&&window.requestAnimationFrame(function(e){!function t(i,e){var s,n=i.s.animateDuration,l=i.s.cellWidth;l&&1<i.count()&&(i.EE||(i.EE=e),s=e-i.EE,i.DE=Math.min(Math.max(s/n*l,1),l),i.render(),s<n&&window.requestAnimationFrame(function(e){t(i,e)}))}(t,e)}),t.FE||(t.FE=t.attachEvent("onAfterRender",function(e){!function(e,h){function i(e,t,i,s){var n=e.getCanvas(),l=e.Zn,a=e.Wn,r=e.AE;if(d&&(h.length<u||(h.length-1)*c>i-t)?(l.style.left=-d+"px",1<h.length&&(function(e,t,i){if(e.length){jeeplus.html.remove(e[0]);for(var s=1;s<e.length;s++)p(i,e[s])||(e[s].style.left=e[s].offsetLeft-t+"px")}}(a,d,r),n.clearRect(0,0,t+d,l.offsetHeight),n.clearRect(i+d,0,l.offsetWidth,l.offsetHeight))):(l.style.left="0px",s||d==c||n.clearRect(t+(h.length-1)*c-c+d,0,l.offsetWidth,l.offsetHeight)),1<a.length&&d&&d!=c){var o=a.length-1;p(r,a[o])&&(o-=1),a[o].style.display="none"}}var u=e.count(),s=e.no(e.bc,e.dc),c=e.s.cellWidth,d=e.DE||0,t=h.length<u||(h.length-1)*c>s.end.x-s.start.x;n(e,function(e,t){i(t,s.start.x,s.end.x,"x"==e)}),function(e,t,i){e.w.t.style.left=t.start.x-i+"px",e.w.t.style.width=t.end.x-t.start.x+i+"px"}(e,s,t?d:0)}(t,e)}))}(a)}),a.CE=a.attachEvent("onBeforeXAxis",function(e,t,i,s,n,l){return function(e,t,i,s,n,l,a){var r,o,h,u,c=e.s,d=s.x-.5,p=parseInt(a||n.y,10)+.5,f=n.x;if(!c.dynamic)return;for(h=(i.length-1)*l>f-d||i.length<e.count(),o=0;o<i.length;o++)u=d+o*l,r=h?1<o:!!o,u=Math.ceil(u)-.5,e.xo(u,p,i[o],r),o&&c.xAxis.lines.call(e,i[o])&&e.yo(t,u,n.y,s.y,i[o]);e.canvases.x.renderTextAt(!0,!1,d,n.y+c.padding.bottom-3,c.xAxis.title,"jeeplus_axis_title_x",n.x-s.x),e.zo(t,d,p,f+(h?e.DE:0),p,c.xAxis.color,1)}(a,e,t,i,s,n,l),!1})}}function p(e,t){return"axis_x"===e&&-1!==t.className.indexOf("jeeplus_axis_title_x")}function n(e,t){if(e.canvases){for(var i=0;i<e.go.length;i++)e.canvases[i]&&t(i,e.canvases[i]);e.canvases.x&&t("x",e.canvases.x)}}jeeplus.extend(jeeplus.ui.chart,{dynamic_setter:function(e){return e&&t(this),e}})}(),jeeplus.protoUI({name:"calendar",defaults:{date:new Date,select:!1,navigation:!0,monthSelect:!0,weekHeader:!0,weekNumber:!1,skipEmptyWeeks:!1,calendarHeader:"%F %Y",calendarWeekHeader:"W#",events:jeeplus.Date.isHoliday,minuteStep:5,icons:!1,timepickerHeight:30,headerHeight:70,dayTemplate:function(e){return e.getDate()},width:260,height:250},dayTemplate_setter:jeeplus.template,calendarHeader_setter:jeeplus.Date.dateToStr,calendarWeekHeader_setter:jeeplus.Date.dateToStr,calendarTime_setter:function(e){return this._w=e,jeeplus.Date.dateToStr(e)},date_setter:function(e){return this.Jp(e)},maxDate_setter:function(e){return this.Jp(e)},minDate_setter:function(e){return this.Jp(e)},minTime_setter:function(e){return"string"==typeof e&&(e=[(e=jeeplus.i18n.parseTimeFormatDate(e)).getHours(),e.getMinutes()]),e},maxTime_setter:function(e){return"string"==typeof e&&(e=[(e=jeeplus.i18n.parseTimeFormatDate(e)).getHours(),e.getMinutes()]),e},fF:function(){var e="focus"+(jeeplus.env.isIE?"in":"");jeeplus.env.touch||jeeplus.UE(this.$view,e,jeeplus.bind(function(e){var t=e.target.className,i=-1!==t.indexOf("jeeplus_cal_day")?"jeeplus_cal_day":-1!==t.indexOf("jeeplus_cal_block")?"jeeplus_cal_block":"";if(300<new Date-jeeplus.UIManager.XE&&100<new Date-jeeplus.UIManager.lH&&i){var s=e.relatedTarget;if(s&&!jeeplus.isUndefined(s.className)){var n="jeeplus_cal_day"==i?this.gF(e.target):this.hF(e.target);this.ID(n)}}},this),{capture:!jeeplus.env.isIE})},$init:function(){this.x.className+=" jeeplus_calendar",this.x.setAttribute("role","region"),this.x.setAttribute("aria-label",jeeplus.i18n.aria.calendar),this.Kp={},this.UG={},this.Np=0,this.fF(),this.attachEvent("onKeyPress",this.DD),this.attachEvent("onAfterZoom",function(e){0<=e&&this.$view.querySelector(".jeeplus_cal_month_name").blur()})},type_setter:function(e){return"time"==e?(this.jq=!0,this.Np=-1):"year"==e&&(this.NC=!0),e},$setSize:function(e,t){jeeplus.ui.view.prototype.$setSize.call(this,e,t)&&this.render()},$getSize:function(e,t){if(this.s.cellHeight){var i=this.Op(this.s.date);this.s.height=this.s.cellHeight*i.Sp+(jeeplus.skin.$active.calendarHeight||70)}return jeeplus.ui.view.prototype.$getSize.call(this,e,t)},moveSelection:function(e,t,i){if(!this.config.master){var s=this.getSelectedDate();this.config.multiselect&&(s=s[0]);var n=jeeplus.Date.copy(s||this.getVisibleDate());this.ID(n,e,i)}},ID:function(e,t,i){var s=this.aq[this.Np].LD(e,t,this);if(!1!==i){var n=this.x.querySelector("."+s+"[tabindex='0']");n&&n.focus()}},Op:function(e,t){if(!this.Pp||t){var i=e.getMonth(),s=e.getFullYear(),n=new Date(s,i+1,1),l=jeeplus.Date.weekStart(new Date(s,i,1)),a=Math.round((n.valueOf()-l.valueOf())/864e5),r=this.s.skipEmptyWeeks?Math.ceil(a/7):6;this.Pp={Qp:i,Rp:l,zc:n,Sp:r}}return this.Pp},$skin:function(){jeeplus.skin.$active.calendar&&(jeeplus.skin.$active.calendar.width&&(this.defaults.width=jeeplus.skin.$active.calendar.width),jeeplus.skin.$active.calendar.height&&(this.defaults.height=jeeplus.skin.$active.calendar.height),jeeplus.skin.$active.calendar.headerHeight&&(this.defaults.headerHeight=jeeplus.skin.$active.calendar.headerHeight),jeeplus.skin.$active.calendar.timepickerHeight&&(this.defaults.timepickerHeight=jeeplus.skin.$active.calendar.timepickerHeight))},Tp:function(e){for(var t=this.Op(e),i=this.s,s=[],n=[],l=this.bc-36,a=this.dc-this.s.headerHeight-10-(this.s.timepicker||this.ax?this.s.timepickerHeight:0),r=i.weekNumber?8:7,o=0;o<r;o++)n[o]=Math.ceil(l/(r-o)),l-=n[o];for(var h=t.Sp,u=0;u<h;u++)s[u]=Math.ceil(a/(h-u)),a-=s[u];return[n,s]},icons_setter:function(e){this.ax=e?"object"==typeof e?e:this.Sx:null},ax:[],Sx:[{template:function(){return"<span role='button' tabindex='0' class='jeeplus_cal_icon_today jeeplus_cal_icon'>"+jeeplus.i18n.calendar.today+"</span>"},on_click:{jeeplus_cal_icon_today:function(){var e=new Date;this.s.timepicker||(e=jeeplus.Date.datePart(e)),this.setValue(e),this.callEvent("onTodaySet",[this.getSelectedDate()])}}},{template:function(){return"<span role='button' tabindex='0' class='jeeplus_cal_icon_clear jeeplus_cal_icon'>"+jeeplus.i18n.calendar.clear+"</span>"},on_click:{jeeplus_cal_icon_clear:function(){this.setValue(""),this.callEvent("onDateClear",[this.getSelectedDate()])}}}],refresh:function(){this.render()},render:function(){this.Np=0,this.Up=!1;var e=this.s;if(this.isVisible(e.id)){this.Vp=jeeplus.Date.datePart(new Date),this.callEvent("onBeforeRender",[]);var t=this.s.date,i=this.Op(t,!0),s=this.Tp(t),n=s[0],l=s[1],a="<div class='jeeplus_cal_month'><span role='button' tabindex='0' aria-live='assertive' aria-atomic='true' class='jeeplus_cal_month_name"+(this.s.monthSelect?"":" jeeplus_readonly")+"'>"+e.calendarHeader(t)+"</span>";if(e.navigation&&(a+="<div role='button' tabindex='0' aria-label='"+jeeplus.i18n.aria.navMonth[0]+"' class='jeeplus_cal_prev_button'></div><div role='button' tabindex='0' aria-label='"+jeeplus.i18n.aria.navMonth[1]+"' class='jeeplus_cal_next_button'></div>"),a+="</div>",e.weekHeader&&(a+="<div class='jeeplus_cal_header' aria-hidden='true'>"+this.Wp(n)+"</div>"),a+="<div class='jeeplus_cal_body'>"+this.Xp(n,l,i)+"</div>",(this.s.timepicker||this.ax)&&(a+="<div class='jeeplus_cal_footer'>",this.s.timepicker&&(a+=this.Yp(t)),this.ax&&(a+=this.bx()),a+="</div>"),this.w.innerHTML=a,"time"==this.s.type){var r=this.s.date;r&&("string"==typeof r?t=jeeplus.i18n.parseTimeFormatDate(r):jeeplus.isArray(r)&&(t.setHours(r[0]),t.setMinutes(r[1]))),this.yt(-1,t)}else"month"==this.s.type?this.yt(1,t):"year"==this.s.type&&this.yt(2,t);this.callEvent("onAfterRender",[])}},bx:function(e){for(var t="<div class='jeeplus_cal_icons'>",i=this.ax,s=0;s<i.length;s++){if(i[s].template)t+=("function"==typeof i[s].template?i[s].template:jeeplus.template(i[s].template)).call(this,e);i[s].on_click&&jeeplus.extend(this.on_click,i[s].on_click)}return t+"</div>"},Yp:function(e){var t=this.s.calendarTime||jeeplus.i18n.timeFormatStr,i="";if(this.s.master){var s=jeeplus.copy(jeeplus.$$(this.s.master).s.value);for(var n in jeeplus.Date.equal(s.end,e)&&(s.start=s.end),s)i+="<div role='button' tabindex='0' class='jeeplus_range_time_"+n+" jeeplus_cal_time'><span class='jeeplus_icon fa-clock-o'></span> "+t(s[n])+"</div>"}else i="<div role='button' tabindex='0' class='jeeplus_cal_time"+(this.ax?" jeeplus_cal_time_icons":"")+"'><span class='jeeplus_icon fa-clock-o'></span> "+t(e)+"</div>";return i},Wp:function(e){var t=this.s,i="",s=0;t.weekNumber&&(s=1,i+="<div class='jeeplus_cal_week_header' style='width: "+e[0]+"px;' >"+t.calendarWeekHeader()+"</div>");for(var n=jeeplus.Date.startOnMonday?1:0,l=0;l<7;l++){var a=(n+l)%7,r=jeeplus.i18n.calendar.dayShort[a];i+="<div day='"+a+"' style='width: "+e[l+s]+"px;' >"+r+"</div>"}return i},blockDates_setter:function(e){return jeeplus.toFunctor(e,this.$scope)},Zp:function(e,t){var i="";return jeeplus.Date.equal(e,this.Vp)&&(i+=" jeeplus_cal_today"),this.sz(e)||(i+=" jeeplus_cal_day_disabled"),this.VG(e)&&(i+=" jeeplus_cal_select"),e.getMonth()!=t.Qp&&(i+=" jeeplus_cal_outside"),this.s.events&&(i+=" "+(this.s.events(e)||"")),i+" jeeplus_cal_day"},Xp:function(e,t,i){for(var s=this.s,n="",l=jeeplus.Date.datePart(jeeplus.Date.copy(i.Rp)),a=s.weekNumber?1:0,r=jeeplus.Date.getISOWeek(jeeplus.Date.add(l,2,"day",!0)),o=(this.s.minDate||new Date(1,1,1),this.s.maxDate||new Date(9999,1,1),0);o<t.length;o++){n+="<div class='jeeplus_cal_row' style='height:"+t[o]+"px;line-height:"+t[o]+"px'>",a&&(!l.getMonth()&&l.getDate()<7&&(r=jeeplus.Date.getISOWeek(jeeplus.Date.add(l,2,"day",!0))),n+="<div class='jeeplus_cal_week_num' aria-hidden='true' style='width:"+e[0]+"px'>"+r+"</div>");for(var h=a;h<e.length;h++){var u=this.Zp(l,i),c=this.s.dayTemplate.call(this,l),d=this.VG(l),p="";"object"==typeof c?(p=c.aria||p,c=c.text):p=jeeplus.Date.dateToStr(jeeplus.i18n.aria.dateFormat)(l),n+="<div day='"+h+"' role='gridcell' "+(l.getMonth()!=i.Qp?"aria-hidden='true'":"")+" aria-label='"+p+"' tabindex='"+(d?"0":"-1")+"' aria-selected='"+(d?"true":"false")+"' class='"+u+"' style='width:"+e[h]+"px'><span aria-hidden='true' class='jeeplus_cal_day_inner'>"+c+"</span></div>",(l=jeeplus.Date.add(l,1,"day")).getHours()&&(l=jeeplus.Date.datePart(l))}n+="</div>",r++}return n},$p:function(e,t,i){var s=this.s.date;t||(t=this.aq[this.Np]._p),this.Np||(s=jeeplus.Date.copy(s)).setDate(1);var n=jeeplus.Date.add(s,e*t,"month",!0);this.bq(s,n)},bq:function(e,t){this.callEvent("onBeforeMonthChange",[e,t])&&(this.Np?this.cq(t):this.showCalendar(t),this.callEvent("onAfterMonthChange",[t,e]))},aq:{"-2":{lz:function(e){var t=this.s,i=t.date,s=!1,n=t.minTime?t.minTime[0]:0,l=t.maxTime?t.maxTime[0]+(t.maxTime[1]?1:0):24,a=t.minTime&&i.getHours()==n?t.minTime[1]:0,r=t.maxTime&&t.maxTime[1]&&i.getHours()==l-1?t.maxTime[1]:60;if(this.s.blockTime){var o=jeeplus.Date.copy(i);o.setMinutes(e),s=this.s.blockTime(o)}return e<a||r<=e||s},dq:function(e,t){e.setMinutes(t)},TD:function(e,t,i){if(!this.lz.call(i,e.getMinutes()))return e;var s=i.s.minuteStep,n=jeeplus.Date.add(e,"right"==t?s:-s,"minute",!0);return e.getHours()===n.getHours()?this.TD(n,t,i):void 0}},"-1":{lz:function(e){var t=this.s,i=t.date,s=t.minTime?t.minTime[0]:0,n=t.maxTime?t.maxTime[0]+(t.maxTime[1]?1:0):24;if(e<s||n<=e)return!0;if(t.blockTime){var l=jeeplus.Date.copy(i);l.setHours(e);for(var a=t.minTime&&e==s?t.minTime[1]:0,r=t.maxTime&&t.maxTime[1]&&e==n-1?t.maxTime[1]:60,o=a;o<r;o+=t.minuteStep)if(l.setMinutes(o),!t.blockTime(l))return!1;return!0}},dq:function(e,t){e.setHours(t)},LD:function(e,t,i){var s,n,l=i.s.minuteStep;return"bottom"===t||"top"===t?(e.setHours("bottom"===t?23:0),e.setMinutes("bottom"===t?55:0),e.setSeconds(0),e.setMilliseconds(0),s=e):"left"===t||"right"===t?(n="right"===t?l:-l,"left"===t&&e.getMinutes()<l&&(n=60-l),"right"===t&&e.getMinutes()>=60-l&&(n=l-60),n-=e.getMinutes()%l,s=i.aq[-2].TD(jeeplus.Date.add(e,n,"minute"),t,i)):"up"===t||"down"===t?(n="down"===t?1:-1,"down"===t&&23===e.getHours()&&(n=-23),"up"===t&&0===e.getHours()&&(n=23),s=this.TD(jeeplus.Date.add(e,n,"hour"),t,i)):!1===t&&(s=this.TD(e,t,i)),i.selectDate(s,!1),s&&(i.cq(s),i.selectDate(s,!1)),"jeeplus_cal_block"+("left"===t||"right"===t?"_min":"")},TD:function(e,t,i){if(!this.lz.call(i,e.getHours()))return e;var s=jeeplus.Date.add(e,"down"==t?1:-1,"hour",!0);return e.getDate()===s.getDate()?this.TD(s,t,i):void 0}},0:{_p:1,LD:function(e,t,i){var s=e;return"pgup"===t||"pgdown"===t?s=jeeplus.Date.add(e,"pgdown"===t?1:-1,"month"):"bottom"===t?s=new Date(e.getFullYear(),e.getMonth()+1,0):"top"===t?s=new Date(e.setDate(1)):"left"===t||"right"===t?s=jeeplus.Date.add(e,"right"===t?1:-1,"day"):("up"===t||"down"===t)&&(s=jeeplus.Date.add(e,"down"===t?1:-1,"week")),i.sz(s)||(s=i.TD(e,t)),s&&i.selectDate(s,!0),"jeeplus_cal_day"}},1:{lz:function(e,t){var i,s,n=!1,l=t.s.minDate||null,a=t.s.maxDate||null,r=t.s.date.getFullYear();return l&&a&&(i=l.getFullYear(),s=a.getFullYear(),(r<i||r==i&&l.getMonth()>e||s<r||r==s&&a.getMonth()<e)&&(n=!0)),n},Jv:function(e,t){return e<t.s.minDate?e=jeeplus.Date.copy(t.s.minDate):e>t.s.maxDate&&(e=jeeplus.Date.copy(t.s.maxDate)),e},eq:function(e){return e.getFullYear()},fq:function(e){return jeeplus.i18n.calendar.monthShort[e]},dq:function(e,t){t!=e.getMonth()&&e.setDate(1),e.setMonth(t)},_p:12,LD:function(e,t,i){var s=e;return"pgup"===t||"pgdown"===t?s=jeeplus.Date.add(e,"pgdown"===t?1:-1,"year"):"bottom"===t?s=new Date(e.setMonth(11)):"top"===t?s=new Date(e.setMonth(0)):"left"===t||"right"===t?s=jeeplus.Date.add(e,"right"===t?1:-1,"month"):("up"===t||"down"===t)&&(s=jeeplus.Date.add(e,"down"===t?4:-4,"month")),i.sz(s)||(s=i.TD(e,t)),s&&(i.cq(s),i.selectDate(s,!1)),"jeeplus_cal_block"}},2:{lz:function(e,t){e+=t.gq;var i=!1,s=t.s.minDate,n=t.s.maxDate;return s&&n&&(s.getFullYear()>e||n.getFullYear()<e)&&(i=!0),i},Jv:function(e,t){return e<t.s.minDate?e=jeeplus.Date.copy(t.s.minDate):e>t.s.maxDate&&(e=jeeplus.Date.copy(t.s.maxDate)),e},eq:function(e,t){var i=e.getFullYear();return t.gq=i=i-i%10-1,i+" - "+(i+10+1)},fq:function(e,t){return t.gq+e},dq:function(e,t,i){e.setFullYear(i.gq+t)},_p:120,LD:function(e,t,i){var s=e;return"pgup"===t||"pgdown"===t?s=jeeplus.Date.add(e,"pgdown"===t?10:-10,"year"):"bottom"===t?s=new Date(e.setYear(i.gq+10)):"top"===t?s=new Date(e.setYear(i.gq)):"left"===t||"right"===t?s=jeeplus.Date.add(e,"right"===t?1:-1,"year"):("up"===t||"down"===t)&&(s=jeeplus.Date.add(e,"down"===t?4:-4,"year")),i.sz(s)||(s=i.TD(e,t)),s&&(i.cq(s),i.selectDate(s,!1)),"jeeplus_cal_block"}}},mz:function(){var e;if(this.aq[-1].lz.call(this,this.s.date.getHours()))for(e=0;e<24;e++)if(!this.aq[-1].lz.call(this,e)){this.s.date.setHours(e);break}if(this.aq[-2].lz.call(this,this.s.date.getMinutes()))for(e=0;e<60;e+=this.s.minuteStep)if(!this.aq[-2].lz.call(this,e)){this.s.date.setMinutes(e);break}},cq:function(e){var t,i,s,n,l,a,r,o,h,u,c,d="";if(l=(t=this.s).weekHeader?2:1,u=this.aq[this.Np],a=this.w.childNodes,e&&(t.date=e),o=t.type,this.Up||(this.hq=this.w.offsetHeight-t.headerHeight,"year"!=o&&"month"!=o?this.hq-=t.timepickerHeight:this.ax&&(this.hq-=10),this.iq=a[l].offsetWidth,this.Up=1),this.jq){s=this.hq/6;var p=6,f=(this._w||jeeplus.i18n.timeFormat).match(/%([a,A])/);for(f&&p++,h=parseInt((this.iq-3)/p,10),d+="<div class='jeeplus_time_header'>"+this.kq(h,f)+"</div>",d+="<div  class='jeeplus_cal_body' style='height:"+this.hq+"px'>",this.mz(),d+="<div class='jeeplus_hours'>",r=t.date.getHours(),c=jeeplus.Date.copy(t.date),n=0;n<24;n++){if(i="",f&&n%4==0){var g=n?12==n?jeeplus.i18n.pm[0]:"":jeeplus.i18n.am[0];d+="<div class='jeeplus_cal_block_empty"+i+"' style='"+this.lq(h,s)+"clear:both;'>"+g+"</div>"}this.aq[-1].lz.call(this,n)?i+=" jeeplus_cal_day_disabled":r==n&&(i+=" jeeplus_selected"),c.setHours(n),d+="<div aria-label='"+jeeplus.Date.dateToStr(jeeplus.i18n.aria.hourFormat)(c)+"' role='gridcell' tabindex='"+(r==n?"0":"-1")+"' aria-selected='"+(r==n?"true":"false")+"' class='jeeplus_cal_block"+i+"' data-value='"+n+"' style='"+this.lq(h,s)+(n%4!=0||f?"":"clear:both;")+"'>"+jeeplus.Date.toFixed(f?n&&12!=n?n%12:12:n)+"</div>"}for(d+="</div>",d+="<div class='jeeplus_minutes'>",r=t.date.getMinutes(),c=jeeplus.Date.copy(t.date),n=0;n<60;n+=t.minuteStep)i="",this.aq[-2].lz.call(this,n)?i=" jeeplus_cal_day_disabled":r==n&&(i=" jeeplus_selected"),c.setMinutes(n),d+="<div aria-label='"+jeeplus.Date.dateToStr(jeeplus.i18n.aria.minuteFormat)(c)+"' role='gridcell' tabindex='"+(r==n?"0":"-1")+"' aria-selected='"+(r==n?"true":"false")+"' class='jeeplus_cal_block jeeplus_cal_block_min"+i+"' data-value='"+n+"' style='"+this.lq(h,s)+(n%2==0?"clear:both;":"")+"'>"+jeeplus.Date.toFixed(n)+"</div>";d+="</div>",d+="</div>",d+="<div  class='jeeplus_time_footer'>"+this.mq()+"</div>",this.w.innerHTML=d}else{var v=a[0].childNodes,m=jeeplus.i18n.aria["nav"+(1==this.Np?"Year":"Decade")];for(v[0].innerHTML=u.eq(t.date,this),v[1].setAttribute("aria-label",m[0]),v[2].setAttribute("aria-label",m[1]),s=this.hq/3,h=this.iq/4,this.sz(t.date)&&(r=1==this.Np?t.date.getMonth():t.date.getFullYear()),n=0;n<12;n++){i=r==(1==this.Np?n:u.fq(n,this))?" jeeplus_selected":"",u.lz(n,this)&&(i+=" jeeplus_cal_day_disabled");var j=jeeplus.i18n.aria[(1==this.Np?"month":"year")+"Format"];d+="<div role='gridcell' aria-label='"+jeeplus.Date.dateToStr(j)(t.date)+"' tabindex='"+(-1!==i.indexOf("selected")?"0":"-1")+"' aria-selected='"+(-1!==i.indexOf("selected")?"true":"false")+"' class='jeeplus_cal_block"+i+"' data-value='"+n+"' style='"+this.lq(h,s)+"'>"+u.fq(n,this)+"</div>"}l-1&&(a[l-1].style.display="none"),a[l].innerHTML=d,"year"!=o&&"month"!=o&&(a[1+l]?a[1+l].innerHTML=this.mq():this.w.innerHTML+="<div  class='jeeplus_time_footer'>"+this.mq()+"</div>"),a[l].style.height=this.hq+"px"}},lq:function(e,t){return"width:"+e+"px; height:"+t+"px; line-height:"+t+"px;"},mq:function(){return"<input type='button' style='width:100%' class='jeeplus_cal_done' value='"+jeeplus.i18n.calendar.done+"'>"},kq:function(e,t){var i=2*e;return"<div class='jeeplus_cal_hours' style='width:"+e*(t?5:4)+"px'>"+jeeplus.i18n.calendar.hours+"</div><div class='jeeplus_cal_minutes' style='width:"+i+"px'>"+jeeplus.i18n.calendar.minutes+"</div>"},yt:function(e,t){var i=this.Np;this.callEvent("onBeforeZoom",[e,i])&&((this.Np=e)?this.cq(t):this.showCalendar(t),this.callEvent("onAfterZoom",[e,i]))},Jv:function(e){return!this.sz(e)&&this.aq[this.Np].Jv&&(e=this.aq[this.Np].Jv(e,this)),e},nq:function(e){var t=this.hF(e),i=this.Np-(this.NC?0:1);if(t=this.Jv(t),this.sz(t)){this.yt(i,t);var s=this.s.type;("month"==s||"year"==s)&&this.zt(t)}},zt:function(e,t){this.callEvent("onBeforeDateSelect",[e])&&(this.selectDate(e,!0,t),this.callEvent("onDateSelect",[e]),this.callEvent("onAfterDateSelect",[e]))},gF:function(e){var t=jeeplus.html.index(e)-(this.s.weekNumber?1:0),i=jeeplus.html.index(e.parentNode),s=jeeplus.Date.add(this.Op().Rp,t+7*i,"day",!0);return this.s.timepicker&&(s.setHours(this.s.date.getHours()),s.setMinutes(this.s.date.getMinutes())),s},hF:function(e){var t=1*e.getAttribute("data-value"),i=-1!=e.className.indexOf("jeeplus_cal_block_min")?this.Np-1:this.Np,s=this.s.date,n=jeeplus.Date.copy(s);return this.aq[i].dq(n,t,this),n},on_click:{jeeplus_cal_prev_button:function(e,t,i){this.$p(-1)},jeeplus_cal_next_button:function(e,t,i){this.$p(1)},jeeplus_cal_day_disabled:function(){return!1},jeeplus_cal_outside:function(){return!!this.s.navigation&&void 0},jeeplus_cal_day:function(e,t,i){var s=this.gF(i),n="touch"===this.s.multiselect||e.ctrlKey||e.metaKey;this.zt(s,n)},jeeplus_cal_time:function(e){if(this.aq[this.Np-1]){this.jq=!0;var t=this.Np-1;this.yt(t)}},jeeplus_range_time_start:function(){jeeplus.$$(this.s.master).UD="start"},jeeplus_range_time_end:function(){jeeplus.$$(this.s.master).UD="end"},jeeplus_cal_done:function(e){var t=jeeplus.Date.copy(this.s.date);t=this.Jv(t),this.zt(t)},jeeplus_cal_month_name:function(e){if(this.jq=!1,2!=this.Np&&this.s.monthSelect){var t=Math.max(this.Np,0)+1;this.yt(t)}},jeeplus_cal_block:function(e,t,i){if(this.jq){if(-1!==i.className.indexOf("jeeplus_cal_day_disabled"))return!1;var s=this.hF(i);this.cq(s)}else-1==i.className.indexOf("jeeplus_cal_day_disabled")&&this.nq(i)}},Jp:function(e,t){return e?("string"==typeof e&&(e=t?jeeplus.Date.strToDate(t)(e):jeeplus.i18n.parseFormatDate(e)),e):jeeplus.Date.datePart(new Date)},sz:function(e){var t=this.s.blockDates&&this.s.blockDates.call(this,e),i=this.s.minDate,s=this.s.maxDate;return!t&&!(e<i||s<e)},TD:function(e,t){var i,s="top"===t||"left"===t||"pgup"===t||"up"===t?-1:1,n=jeeplus.Date.add(e,s,"day",!0);return this.sz(n)?n:(0===this.Np?i=e.getMonth()===n.getMonth():1===this.Np?i=e.getFullYear()===n.getFullYear():2===this.Np&&(i=n.getFullYear()>this.gq&&n.getFullYear()<this.gq+10),i?this.TD(n,t):void 0)},showCalendar:function(e){e=this.Jp(e),this.s.date=e,this.render(),this.resize()},VG:function(e){return e&&this.UG[e.valueOf()]},getSelectedDate:function(){var e=[];for(var t in this.UG)e.push(jeeplus.Date.copy(this.UG[t]));return this.config.multiselect?e:e[0]||null},getVisibleDate:function(){return jeeplus.Date.copy(this.s.date)},setValue:function(e,t){this.selectDate(e,!0)},getValue:function(e){var t=this.getSelectedDate();return e&&(t=jeeplus.Date.dateToStr(e)(t)),t},selectDate:function(e,t,i){if(e&&i&&this.config.multiselect||(this.UG={}),e){jeeplus.isArray(e)||(e=[e]);for(var s=0;s<e.length;s++){var n=this.Jp(e[s]),l=jeeplus.Date.datePart(jeeplus.Date.copy(n)).valueOf();if(this.UG[l]&&i?delete this.UG[l]:this.UG[l]=n,!this.config.multiselect)break}}e&&t&&this.showCalendar(e[0]),!1!==t&&this.render(),this.callEvent("onChange",[e])},locate:function(){return null}},jeeplus.KeysNavigation,jeeplus.MouseEvents,jeeplus.ui.view,jeeplus.EventSystem),jeeplus.protoUI({name:"property",$init:function(){this.w.className+=" jeeplus_property",this.w.setAttribute("role","listbox"),this.Ns=[]},defaults:{nameWidth:100,editable:!0},on_render:{checkbox:function(e,t){return"<input type='checkbox' class='jeeplus_property_check' "+(e?"checked":"")+">"},color:function(e,t){return'<div class="jeeplus_property_col_val"><div class=\'jeeplus_property_col_ind\' style="background-color:'+(e||"#FFFFFF")+';"></div><span>'+e+"</span></div>"}},on_edit:{label:!1},ad:"jeeplus_f_id",on_click:{jeeplus_property_check:function(e){var t=this.locate(e);return this.getItem(t).value=!this.getItem(t).value,this.callEvent("onCheck",[t,this.getItem(t).value]),!1}},on_dblclick:{},registerType:function(e,t){if(t.template&&(this.on_render[e]=t.template),t.editor&&(this.on_edit[e]=t.editor),t.click)for(var i in t.click)this.on_click[i]=t.click[i]},elements_setter:function(e){this.oq={};for(var t=0;t<e.length;t++){var i=e[t];"multiselect"==i.type&&(i.optionslist=!0),i.id=i.id||jeeplus.uid(),i.label=i.label||"",i.value=i.value||"",this.oq[i.id]=t,this.template=this.Et(e[t])}return e},showItem:function(e){jeeplus.RenderStack.showItem.call(this,e)},locate:function(e){return jeeplus.html.locate(e,this.ad)},getItemNode:function(e){return this.y.childNodes[this.oq[e]]},getItem:function(e){return this.s.elements[this.oq[e]]},ii:function(e){var t=this.getItem(e).type;if("checkbox"==t)return"inline-checkbox";var i=this.on_edit[t];return!1!==i&&(i||t)},li:function(e){return this.getItem(e)},ui:function(e,t,i){var s=this.oq[e.id],n=this.s.elements;if(i){for(var l=s+1;l<n.length;l++)if(t.call(this,n[l].id))return n[l].id}else for(l=s-1;0<=l;l--)if(t.call(this,n[l].id))return n[l].id;return null},updateItem:function(e,t){t=t||{};var i=this.getItem(e);i&&jeeplus.extend(i,t,!0),this.refresh()},ug:function(e){var t=this.getItemNode(e);return{left:t.offsetLeft+this.s.nameWidth,top:t.offsetTop,height:t.firstChild.offsetHeight,width:this.pq,parent:this.w}},setValues:function(e,t){for(var i in this.s.complexData&&(e=jeeplus.CodeParser.collapseNames(e)),t||this.qq(),e){var s=this.getItem(i);s&&(s.value=e[i])}this.rq=e,this.refresh()},qq:function(){for(var e=this.s.elements,t=0;t<e.length;t++)e[t].value=""},getValues:function(){for(var e=jeeplus.clone(this.rq||{}),t=0;t<this.s.elements.length;t++){var i=this.s.elements[t];"label"!=i.type&&(e[i.id]=i.value)}return this.s.complexData&&(e=jeeplus.CodeParser.expandNames(e)),e},refresh:function(){this.render()},$setSize:function(e,t){jeeplus.ui.view.prototype.$setSize.call(this,e,t)&&(this.pq=this.bc-this.s.nameWidth,this.render())},$getSize:function(e,t){if(this.s.autoheight){var i=this.s.elements.length;this.s.height=Math.max(this.type.height*i,this.s.minHeight||0)}return jeeplus.ui.view.prototype.$getSize.call(this,e,t)},jb:function(){var e=[],t=this.s.elements;if(t)for(var i=0;i<t.length;i++){var s=t[i];s.css&&"object"==typeof s.css&&(s.css=jeeplus.html.createCss(s.css));var n='<div jeeplus_f_id="'+s.id+'"'+("label"!==s.type?'role="option" tabindex="0"':"")+' class="jeeplus_property_line '+(s.css||"")+'">';if("label"==s.type)e[i]=n+"<div class='jeeplus_property_label_line'>"+s.label+"</div></div>";else{var l,a=this.on_render[s.type],r="<div class='jeeplus_property_label' style='width:"+this.s.nameWidth+"px'>"+s.label+"</div><div class='jeeplus_property_value' style='width:"+this.pq+"px'>";l=s.collection||s.options?s.template(s,s.value):s.format?s.format(s.value):s.value,a&&(l=a.call(this,s.value,s)),e[i]=n+r+l+"</div></div>"}}return e.join("")},type:{height:24,templateStart:jeeplus.template(""),templateEnd:jeeplus.template("</div>")},$skin:function(){this.type.height=jeeplus.skin.$active.propertyItemHeight||24}},jeeplus.AutoTooltip,jeeplus.EditAbility,jeeplus.MapCollection,jeeplus.MouseEvents,jeeplus.Scrollable,jeeplus.SingleRender,jeeplus.AtomDataLoader,jeeplus.EventSystem,jeeplus.ui.view),jeeplus.protoUI({name:"colorboard",defaults:{template:'<div style="width:100%;height:100%;background-color:{obj.val}"></div>',palette:null,height:220,width:220,cols:12,rows:10,minLightness:.15,maxLightness:1,navigation:!0},$init:function(e){jeeplus.UE(this.x,"click",jeeplus.bind(function(e){var t=jeeplus.html.locate(e,"jeeplus_val");this.setValue(t),this.callEvent("onItemClick",[this.s.value,e]),this.callEvent("onSelect",[this.s.value])},this)),this.$view.setAttribute("role","grid"),this.x.setAttribute("aria-readonly","true")},sq:function(e){var t=this.s.palette;e=(e||"").toUpperCase();for(var i=0,s=t.length;i<s;i++)for(var n=0,l=t[i].length;n<l;n++)if(t[i][n].toUpperCase()==e)return{row:i,col:n};return null},$setSize:function(e,t){jeeplus.ui.view.prototype.$setSize.call(this,e,t)&&this.render()},getValue:function(){return this.s.value},re:function(){return this.x.firstChild},setValue:function(e){e&&"#"!=e.toString().charAt(0)&&(e="#"+e);var t=this.s.value;return this.s.value=e,this.$setValue(e,t),e},uq:null,vq:function(){if(this.uq&&this.uq.parentNode)return this.uq;var e=this.uq=document.createElement("div");return e.className="jeeplus_color_selector",this.x.lastChild.appendChild(e),e},$setValue:function(e,t){if(this.isVisible(this.s.id)){var i,s,n,l,a,r,o;if(t&&(n=this.sq(t)),n||(n={row:0,col:0}),this.x.lastChild.childNodes[n.row].childNodes[n.col].setAttribute("tabindex","-1"),(n=this.sq(e))&&(i=this.x.lastChild.childNodes[n.row].childNodes[n.col]),!(i&&i.parentNode&&i.parentNode.parentNode))return this.uq&&(this.uq.style.left="-100px"),void this.x.lastChild.childNodes[0].childNodes[0].setAttribute("tabindex","0");l=i.parentNode,r=i.offsetLeft-l.offsetLeft,o=-(this.$height-(i.offsetTop-l.parentNode.offsetTop)),i.setAttribute("tabindex","0"),i.setAttribute("aria-selected","true"),i.setAttribute("tabindex","0"),i.setAttribute("aria-selected","true"),s=this.vq(),a=["left:"+r+"px","top:"+o+"px","width:"+i.style.width,"height:"+i.style.height].join(";"),void 0!==s.style.cssText?s.style.cssText=a:s.setAttribute("style",a)}},wq:function(e){function s(e){return jeeplus.color.toHex(e,2)}function l(e,t,i){return"#"+s(Math.floor(e))+s(Math.floor(t))+s(Math.floor(i))}function t(e,t,i){var s,n,l;if(t){var a=i<.5?i*(1+t):i+t-i*t,r=2*i-a;s=o(r,a,e+1/3),n=o(r,a,e),l=o(r,a,e-1/3)}else s=n=l=i;return{r:255*s,g:255*n,b:255*l}}function o(e,t,i){return i<0&&(i+=1),1<i&&(i-=1),i<1/6?e+6*(t-e)*i:i<=.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}var i=[],n=e.rows-1,a=1/e.cols,r=(e.maxLightness-e.minLightness)/n,h=null;i.push(function(e){for(var t=[],i=255,s=i/e,n=0;n<e;n++)i=Math.round(0<i?i:0),t.push(l(i,i,i)),i-=s;return t[t.length-1]="#000000",t}(e.cols));for(var u=0,c=e.minLightness;u<n;u++){h=[];for(var d=0,p=0;d<e.cols;d++){var f=t(p,1,c);h.push(l(f.r,f.g,f.b)),p+=a}i.push(h),c+=r}this.s.palette=i},moveSelection:function(e,t,i){var s,n,l=this.getValue();if(l&&(s=this.sq(l)),s||(s={row:0,col:0}),s&&("up"==e||"down"==e?s.row=s.row+("up"==e?-1:1):"right"==e||"left"==e?s.col=s.col+("right"==e?1:-1):"top"==e?s.row=s.col=0:"bottom"==e&&(s.row=this.x.lastChild.querySelectorAll(".jeeplus_color_row").length-1,s.col=this.x.lastChild.childNodes[s.row].childNodes.length-1),0<=s.row&&(n=this.x.lastChild.childNodes[s.row].childNodes[s.col]),n&&(l=n.getAttribute("jeeplus_val"),this.setValue(l),this.callEvent("onSelect",[this.s.value]),!1!==i))){var a=this.x.querySelector("div[tabindex='0']");a&&a.focus()}},render:function(){function e(e,t,i){for(var s='<div class="jeeplus_color_row" role="row">',n=0;n<e.length;n++)a.width=t[n],a.height=i,a.val=e[n],s+=l(a);return s+"</div>"}if(this.isVisible(this.s.id)){this.s.palette||this.wq(this.s);var t=this.s.palette;this.callEvent("onBeforeRender",[]);for(var i=this.s,l=jeeplus.template('<div role=\'gridcell\' tabindex=\'-1\' aria-label="{obj.val}" style="width:{obj.width}px;height:{obj.height}px;" jeeplus_val="{obj.val}">'+(i.template||"")+"</div>"),a={width:0,height:0,val:0},s=this.$width,n=this.$height,r=[],o='<div class="jeeplus_color_palette"role="rowgroup">',h="object"==typeof t[0]?t[0]:t,u=0;u<h.length;u++)r[u]=Math.floor(s/(h.length-u)),s-=r[u];if("object"==typeof t[0])for(var c=0;c<t.length;c++){var d=Math.floor(n/(t.length-c));n-=d,o+=e(t[c],r,d)}else o+=e(t,r,n);o+="</div>",this.x.innerHTML=o,this.uq=null,this.s.value?this.$setValue(this.s.value):this.x.lastChild.childNodes[0].childNodes[0].setAttribute("tabindex","0"),this.callEvent("onAfterRender",[])}},refresh:function(){this.render()}},jeeplus.KeysNavigation,jeeplus.ui.view,jeeplus.EventSystem),jeeplus.protoUI({name:"daterange",defaults:{button:!1,icons:!1,calendarCount:2,borderless:!1},$init:function(e){e.calendar=e.calendar||{},e.value=this.SD(e.value),delete e.calendar.type,this.x.className+=" jeeplus_daterange",this.Np=this.ne[e.calendar.type]||0;for(var t=[],i=jeeplus.skin.$active.calendar,s=i&&i.height?i.height:250,n=i&&i.width?i.width:250,l=jeeplus.extend({view:"calendar",width:n,height:s},e.calendar||{},!0),a=e.calendarCount=0===this.Np&&e.calendarCount||this.defaults.calendarCount,r=(l.css?l.css+" ":"")+"jeeplus_range_",o=e.value.start||new Date,h=0;h<a;h++){var u=jeeplus.Date.add(o,this.VD[this.Np]*h,"month",!0);jeeplus.extend(l,{events:jeeplus.bind(this.WD,this),css:r+(1===a?"":0===h?"0":h+1==a?"N":"1"),timepicker:0===this.Np&&e.timepicker,borderless:!0,date:u,master:e.id},!0),t.push(jeeplus.copy(l))}e.rows=[{type:"clean",cols:t},this.XD(e,n*a)],e.height=e.height||l.height+(e.icons||e.button?35:0),e.type="line",this.$ready.push(this.av),jeeplus.event(this.$view,"keydown",jeeplus.bind(function(e){this.DD(e.which||e.keyCode,e)},this))},value_setter:function(e){return this.SD(e)},getValue:function(){return this.s.value},setValue:function(e,t){e=this.SD(e);var i=(this.s.value=e).start||e.end||new Date;if(!t){this.YD[0].showCalendar(e.start);for(var s=1;s<this.YD.length;s++)this.YD[s].s.date=i,this.ZD(this.YD[s],1,s)}this.callEvent("onChange",[e]),this.refresh()},refresh:function(){for(var e=(this.s.value,0);e<this.YD.length;e++)if(this.YD[e].Np===this.Np){jeeplus.html.removeCss(this.YD[e].$view,"jeeplus_cal_timepicker"),jeeplus.html.removeCss(this.YD[e].$view,"jeeplus_range_timepicker");var t=this.$D(this.YD[e].getVisibleDate());if(t.start||t.end){if(this.YD[e].s.date=t.start||t.end,this.s.timepicker){var i="jeeplus_"+(t.start&&t.end?"range":"cal")+"_timepicker";jeeplus.html.addCss(this.YD[e].$view,i)}}else jeeplus.Date.datePart(this.YD[e].s.date);this.YD[e].refresh()}},addToRange:function(e){var t=this._D(this.Jp(e));this.setValue(t)},ax:[{template:function(){return"<span role='button' tabindex='0' class='jeeplus_cal_icon_today jeeplus_cal_icon'>"+jeeplus.i18n.calendar.today+"</span>"},on_click:{jeeplus_cal_icon_today:function(){var e=new Date;this.s.timepicker||(e=jeeplus.Date.datePart(e)),this.addToRange(e),this.callEvent("onTodaySet",[this.getValue()])}}},{template:function(){return"<span role='button' tabindex='0' class='jeeplus_cal_icon_clear jeeplus_cal_icon'>"+jeeplus.i18n.calendar.clear+"</span>"},on_click:{jeeplus_cal_icon_clear:function(){this.setValue(""),this.callEvent("onDateClear",[])}}}],bx:function(e){if(e){e="object"==typeof e?e:this.ax;for(var t={css:"jeeplus_cal_footer ",borderless:!0,height:30,template:"<div class='jeeplus_cal_icons'>",onClick:{}},i=0;i<e.length;i++){if(e[i].template){var s="function"==typeof e[i].template?e[i].template:jeeplus.template(e[i].template);t.template+=s.call(this)}if(e[i].on_click)for(var n in e[i].on_click)t.onClick[n]=jeeplus.bind(e[i].on_click[n],this)}return t.template+="</div>",t.width=jeeplus.html.getTextSize(t.template).width+30,t}return{width:0}},XD:function(e,t){var i={view:"button",value:jeeplus.i18n.calendar.done,minWidth:100,maxWidth:230,align:"center",height:30,click:function(){this.getParentView().getParentView().hide()}},s=this.bx(e.icons),n={css:"jeeplus_range_footer",cols:[{width:s.width}]};return(e.button||e.icons)&&2*s.width+i.minWidth>t&&(n.cols[0].width=0),n.cols.push(e.button?i:{}),n.cols.push(s),n},ne:{time:-1,month:1,year:2},VD:{0:1,1:12,2:120},SD:function(e){return e||(e={start:null,end:null}),e.start||e.end||(e={start:e}),e.end=this.Jp(e.end)||null,e.start=this.Jp(e.start)||null,(e.end&&e.end<e.start||!e.start)&&(e.end=[e.start,e.start=e.end][0]),e},Jp:function(e,t){return"string"==typeof e&&(e=t?jeeplus.Date.strToDate(t)(e):jeeplus.i18n.parseFormatDate(e)),isNaN(1*e)?null:e},WD:function(e){var t=this.s.value,i=t.start?jeeplus.Date.datePart(jeeplus.Date.copy(t.start)):null,s=t.end?jeeplus.Date.datePart(jeeplus.Date.copy(t.end)):null,n=jeeplus.Date.datePart(e),l="";return i<=n&&s&&n<=s&&(l="jeeplus_cal_range"),jeeplus.Date.equal(n,i)&&(l="jeeplus_cal_range_start"),jeeplus.Date.equal(n,s)&&(l="jeeplus_cal_range_end"),l+" "+(jeeplus.Date.isHoliday(e)+" "||"")},av:function(){var e=this.YD=this.getChildViews()[0].getChildViews(),i=this;this.aE={};for(var t=0;t<e.length;t++)e[this.aE[e[t].config.id]=t].attachEvent("onBeforeDateSelect",function(e){return i.bE(this,e)}),e[t].attachEvent("onBeforeZoom",function(e){return i.cE(this,e)}),(0===t||t===e.length-1)&&(e[t].attachEvent("onAfterMonthChange",jeeplus.bind(this.dE,this)),e[t].attachEvent("onAfterZoom",function(e,t){i.eE(this,e,t)}));this.s.timepicker&&this.refresh()},cE:function(e,t){var i=this.fE(e.config.id);if(0<=t&&0<i&&i!==this.YD.length-1)return!1;if(-1===t){var s=this.$D(e.getVisibleDate());s.start&&s.end&&(e.s.date=s[this.UD])}return!0},dE:function(e,t){var i=t<e?1:-1,s=t<e?this.YD[this.YD.length-1]:this.YD[0],n=s.aq[s.Np]._p;this.gE(i,n,s),this.refresh()},eE:function(e,t,i){var s=e.aq[e.Np]._p,n=this.fE(e.config.id),l=0===n?1:-1;if(this.YD[n+l]){var a=this.YD[n+l].s.date;if(t<i&&0<=t){var r=0;if(1===t){var o=a.getFullYear();(this.Np||-1==l&&11===a.getMonth()||1==l&&0===a.getMonth())&&(o-=l),r=e.s.date.getFullYear()-o}else if(0===t){var h=a.getMonth()-l;(12===h||-1==h)&&(h=-1===h?11:0),r=e.s.date.getMonth()-h}this.gE(r,s,e),this.refresh()}}},ZD:function(e,t,i){e.blockEvent(),0<=e.Np&&e.$p(t,i),e.unblockEvent()},fE:function(e){return this.aE[e]},gE:function(e,t,i){for(var s=0;s<this.YD.length;s++){var n=this.YD[s];i&&n.config.id===i.config.id||this.ZD(n,e,t)}},$D:function(e){var t=this.s.value,i={};return t.start&&t.start.getYear()===e.getYear()&&t.start.getMonth()===e.getMonth()&&(i.start=t.start),t.end&&t.end.getYear()===e.getYear()&&t.end.getMonth()===e.getMonth()&&(i.end=t.end),i},hE:function(e,t){e.setHours(t.getHours()),e.setMinutes(t.getMinutes()),e.setSeconds(t.getSeconds()),e.setMilliseconds(t.getMilliseconds())},_D:function(e,t){var i=jeeplus.copy(this.s.value);0===this.Np||jeeplus.isUndefined(t)?i.start&&!i.end?i.end=e:(i.start=e,i.end=null):i[t?"end":"start"]=e;return i},bE:function(e,t){if(this.callEvent("onBeforeDateSelect",[t])){var i=this.s.value;if(e.Np<0){var s,n=jeeplus.copy(this.$D(t));(s=n.start&&n.end?n[this.UD]:n.start||n.end)&&this.hE(s,t),e.Np=0,i=jeeplus.extend(jeeplus.copy(i),n,!0)}else{var l=e.getVisibleDate(),a=this.fE(e.config.id);if(t.getMonth()!==l.getMonth()&&(0===a||a===this.YD.length-1)){var r=l<t?1:-1;this.gE(r,1)}i=this._D(t,a)}e.Np!==this.Np&&e.showCalendar(t),this.setValue(i,!0),this.callEvent("onAfterDateSelect",[this.getValue()])}return!1}},jeeplus.ui.layout),jeeplus.protoUI({name:"daterangesuggest",defaults:{type:"daterange",body:{view:"daterange",icons:!0,button:!0,borderless:!0}},getValue:function(){return this.getRange().getValue()},setValue:function(e){this.getRange().setValue(jeeplus.copy(e))},getRange:function(){return this.getBody()},getButton:function(){return this.getBody().getChildViews()[1].getChildViews()[1]},iE:function(e,t){var i=jeeplus.$$(this.s.master);i?(i.setValue(e),t&&this.hide()):this.setValue(e)},_d:function(){var e=this.getRange();e.attachEvent("onAfterDateSelect",jeeplus.bind(function(e){this.iE(e)},this)),e.attachEvent("onDateClear",jeeplus.bind(function(e){this.iE(e)},this)),e.attachEvent("onTodaySet",jeeplus.bind(function(e){this.iE(e)},this))}},jeeplus.ui.suggest),jeeplus.protoUI({$cssName:"datepicker",name:"daterangepicker",$init:function(){this.s.value={}},Je:function(){var e=this.s;e.suggest?e.popup=e.suggest:e.popup||(e.popup=e.suggest=this.suggest_setter({view:"daterangesuggest",body:{timepicker:e.timepicker,calendarCount:e.calendarCount,height:250+(e.button||e.icons?30:0)}})),this.ze=function(){}},$prepareValue:function(e){return(e=e||{}).start=jeeplus.ui.datepicker.prototype.$prepareValue.call(this,e.start?e.start:null),e.end=jeeplus.ui.datepicker.prototype.$prepareValue.call(this,e.end?e.end:null),e},$compareValue:function(e,t){var i=jeeplus.ui.datepicker.prototype.$compareValue,s=i.call(this,e.start,t.start),n=i.call(this,e.end,t.end);return s&&n},$setValue:function(e){e=e||{},jeeplus.$$(this.s.popup.toString()).getRange(),this.s.text=(e.start?this.YE(e.start):"")+(e.end?" - "+this.YE(e.end):""),this.ND()},$render:function(e){e.value=this.$prepareValue(e.value),this.$setValue(e.value)},getValue:function(){var e=this.s.type,t="time"==e,i=(this.config.timepicker,this.s.value);if(this.s.stringResult){var s=jeeplus.i18n.parseFormatStr;return t&&(s=jeeplus.i18n.parseTimeFormatStr),!this.Hx||"month"!=e&&"year"!=e||(s=this.Hx),this.kE(s,i)}return i||null},kE:function(e,t){var i=jeeplus.$$(this.s.popup.toString()).getRange();return(t=jeeplus.copy(i.SD(t))).start&&(t.start=e(t.start)),t.end&&(t.end=e(t.end)),t}},jeeplus.ui.datepicker),jeeplus.protoUI({name:"resizer",defaults:{width:7,height:7},$init:function(e){this.x.className+=" jeeplus_resizer";var t=this.getParentView().Cc;jeeplus.UE(this.x,jeeplus.env.mouse.down,this.xq,{bind:this}),jeeplus.event(document.body,jeeplus.env.mouse.up,this.yq,{bind:this});var i=this.zq();this.Aq=!1,this.Bq=i,this.Cq="x"==i?"width":"height","x"==i?e.height=0:e.width=0,0<t?(this.x.className+=" jeeplus_resizer_v"+i,this.x.style.marginRight="-"+t+"px","x"==i?e.width=t:e.height=t,this.$nospace=!0):this.x.className+=" jeeplus_resizer_"+i,this.x.innerHTML="<div class='jeeplus_resizer_content'></div>","y"==i&&0<t&&(this.x.style.marginBottom="-"+(e.height||this.defaults.height)+"px"),this.x.setAttribute("tabindex","-1"),this.x.setAttribute("aria-grabbed","false")},xq:function(e){var t=this.Dq();if(t&&!this.s.disabled){e=e||event,this.Aq=!0,this.Pl=jeeplus.html.pos(e),this.Eq=[],this.x.setAttribute("aria-grabbed","true");for(var i=0;i<2;i++)t[i].$view.setAttribute("aria-dropeffect","move");this.x.setAttribute("aria-dropeffect","move"),this.Fq(e,t[0])}},yq:function(){this.Aq=!1,this.Pl=!1},Fq:function(e,t){var i,s,n,l,a;e=e||event,i=this.Bq,this.getParentView().x.style.position="relative",n=jeeplus.html.offset(this.x),l=jeeplus.html.offset(this.getParentView().x),a=n[i]-l[i],s=jeeplus.html.offset(t.$view)[i]-jeeplus.html.offset(this.getParentView().$view)[i],this.Rl=[i,t,a,s],this.Gq=new jeeplus.ui.resizearea({container:this.getParentView().x,dir:i,eventPos:this.Pl[i],start:a-1,height:this.$height,width:this.$width,border:1,margin:this.getParentView()["_padding"+i.toUpperCase()]}),this.Gq.attachEvent("onResizeEnd",jeeplus.bind(this.Hq,this)),this.Gq.attachEvent("onResize",jeeplus.bind(this.Iq,this)),jeeplus.html.addCss(document.body,"jeeplus_noselect",1)},zq:function(){return this.getParentView().mc?"y":"x"},Iq:function(){var e,t,i,s,n,l,a,r,o,h;if(this.Rl)for(e=this.Dq(),n=this.Rl[0],s=this.Gq.Jl-this.Rl[2],o=this.Jq(e,n,s),h=e[0]["$"+this.Cq]+e[1]["$"+this.Cq],a="y"==n?["minHeight","maxHeight"]:["minWidth","maxWidth"],l=0;l<2;l++){i=l?-s:s;var u=(t=e[l].s)[a[0]],c=t[a[1]];if(0<i&&c&&c<=o[l]||i<0&&(u||3)>=o[l])return this.Eq[l]=0<i?c:u||3,r=this.Kq(e,n),void(this.Gq.Dl.style["y"==n?"top":"left"]=this.Rl[3]+r[0]+"px");o[l]<3?this.Gq.Dl.style["y"==n?"top":"left"]=this.Rl[3]+l*h+1+"px":this.Eq[l]=null}},Dq:function(){var e,t;for(e=this.getParentView().q,t=0;t<e.length;t++)if(e[t]==this)return!e[t-1]||e[t-1].s.$noresize?null:!e[t+1]||e[t+1].s.$noresize?null:[e[t-1],e[t+1]]},Hq:function(e){if(void 0!==e){var t,i,s,n,l=this.getParentView().mc;if(this.Lq=null,this.Rl){if(i=this.Rl[0],s=e-this.Rl[2],(t=this.Dq())[0]&&t[1]){n=this.Mq(t,i,s);for(var a=0;a<2;a++){var r=t[a].$getSize(0,0);if(l?r[2]==r[3]:Math.abs(r[1]-r[0])<3)t[a].s[this.Cq]=n[a],t[a].tc&&t[a].tc(this.Cq,n[a],l);else{var o=t[a].$view[l?"offsetHeight":"offsetWidth"];t[a].s.gravity=n[a]/o*t[a].s.gravity}}t[0].resize();for(a=0;a<2;a++)t[a].callEvent&&t[a].callEvent("onViewResize",[]),t[a].$view.removeAttribute("aria-dropeffect");jeeplus.callEvent("onLayoutResize",[t])}this.Rl=!1}this.Rl=!1,this.Aq=!1,this.Eq=null,jeeplus.html.removeCss(document.body,"jeeplus_noselect"),this.x.setAttribute("aria-grabbed","false"),this.x.removeAttribute("aria-dropeffect")}},Kq:function(e){var t,i,s;return s=e[0]["$"+this.Cq]+e[1]["$"+this.Cq],this.Eq[0]?i=s-(t=this.Eq[0]):this.Eq[1]&&(t=s-(i=this.Eq[1])),[t,i]},Jq:function(e,t,i){for(var s=[],n="height"==this.Cq?"offsetHeight":"offsetWidth",l=0;l<2;l++)s[l]=e[l].$view[n]+(l?-1:1)*i;return s},Mq:function(e,t,i){var s,n,l;if(this.Eq[0]||this.Eq[1])n=this.Kq(e,t);else for(n=this.Jq(e,t,i),s=0;s<2;s++)n[s]<0&&(l=n[0]+n[1],n[s]=1,n[1-s]=l-1);return n}},jeeplus.MouseEvents,jeeplus.Destruction,jeeplus.ui.view),jeeplus.protoUI({name:"multiview",defaults:{animate:{}},setValue:function(e){jeeplus.$$(e).show()},getValue:function(){return this.getActiveId()},$init:function(){this.Mh=0,this.mc=1,this.x.style.position="relative",this.x.className+=" jeeplus_multiview",this.Nq=[]},Oq:function(e,t){var i=jeeplus.$$(e);i.Pq||(i.Qq=[],i.Pq={}),i.Pq[t]||(i.Pq[t]=!0,i.Qq.push(t))},Rq:function(e){var t=jeeplus.$$(e);if(this.s.keepViews&&(t.x.style.display=""),this.Nq[this.Nq.length-2]!=e?(10==this.Nq.length&&this.Nq.splice(0,1),this.Nq.push(e)):this.Nq.splice(this.Nq.length-1,1),t.Pq){for(var i=0;i<t.Qq.length;i++){var s=jeeplus.$$(t.Qq[i]);s&&s.render()}t.Qq=[],t.Pq={}}},addView:function(){var e=jeeplus.ui.baselayout.prototype.addView.apply(this,arguments);return this.s.keepViews?jeeplus.$$(e).x.style.display="none":jeeplus.html.remove(jeeplus.$$(e).x),e},Vx:function(e,t){if(e==this.Mh){var i=Math.max(e-1,0);this.q[i]&&(this.Wh=!1,this.fc(this.q[i],!1))}e<this.Mh&&this.Mh--},Fb:function(){},kc:function(e){e=e||this.nc;for(var t=0;t<e.length;t++)e[t].Ob=this.s.borderless?{top:1,left:1,right:1,bottom:1}:this.s.Ob||{};jeeplus.ui.baselayout.prototype.kc.call(this,e);for(t=1;t<this.q.length;t++)this.s.keepViews?this.q[t].x.style.display="none":jeeplus.html.remove(this.q[t].x);for(t=0;t<e.length;t++){var i=this.q[t];if(!i.q||i.Gc){var s=i.s.Ob;s.top&&(i.x.style.borderTopWidth="0px"),s.left&&(i.x.style.borderLeftWidth="0px"),s.right&&(i.x.style.borderRightWidth="0px"),s.bottom&&(i.x.style.borderBottomWidth="0px"),i.x.setAttribute("role","tabpanel")}}this.Rq(this.getActiveId())},cells_setter:function(e){this.nc=e},Sq:function(e,t){var i=(this.s.animate||{}).direction,s="top"==i||"bottom"==i;return e<t?s?"bottom":"right":s?"top":"left"},fc:function(e,t){var i=this.getParentView();if(i&&i.getTabbar&&i.getTabbar().setValue(e.s.$id||e.s.id),this.Wh)return jeeplus.delay(this.fc,this,[e,t],100);for(var s=-1,n=0;n<this.q.length;n++)if(this.q[n]==e){s=n;break}if(!(s<0||s==this.Mh)){var l=this.q[this.Mh],a=this.q[s];if(l.$getSize(0,0),(t||void 0===t)&&jeeplus.animate.isSupported()&&this.s.animate){var r=jeeplus.extend({},this.s.animate);this.s.keepViews&&(r.keepViews=!0),r.direction=this.Sq(s,this.Mh),r=jeeplus.Settings.E(t||{},r);var o=jeeplus.animate.formLine(a.x,l.x,r);a.$getSize(0,0),a.$setSize(this.bc,this.dc);var h=r.callback;r.callback=function(){jeeplus.animate.breakLine(o,this.s.keepViews),this.Wh=!1,h&&h.call(this),h=r.master=r.callback=null,this.resize()},(r.master=this).Mh=s,this.Rq(this.getActiveId()),jeeplus.animate(o,r),this.Wh=!0}else this.s.keepViews?l.x.style.display="none":(jeeplus.html.remove(l.x),this.x.appendChild(this.q[n].x)),this.Mh=s,l.resize(),this.Rq(this.getActiveId());a.callEvent&&(a.callEvent("onViewShow",[]),jeeplus.ui.each(a,this.Lw)),this.callEvent("onViewChange",[l.s.id,a.s.id])}},$getSize:function(e,t){if(!this.q.length)return jeeplus.ui.baseview.prototype.$getSize.call(this,0,0);var i=this.q[this.Mh].$getSize(0,0);if(this.s.fitBiggest)for(var s=0;s<this.q.length;s++)if(s!=this.Mh)for(var n=this.q[s].$getSize(0,0),l=0;l<4;l++)i[l]=Math.max(i[l],n[l]);var a=jeeplus.ui.baseview.prototype.$getSize.call(this,0,0);return 1e5<=a[1]&&(a[1]=0),1e5<=a[3]&&(a[3]=0),a[0]=(a[0]||i[0])+e,a[1]=(a[1]||i[1])+e,a[2]=(a[2]||i[2])+t,a[3]=(a[3]||i[3])+t,a},$setSize:function(e,t){this.q.length&&(this.lc=[e,t],jeeplus.ui.baseview.prototype.$setSize.call(this,e,t),this.q[this.Mh].$setSize(e,t))},isVisible:function(e,t){return t&&t!=this.getActiveId()?(e&&this.Oq(t,e),!1):jeeplus.ui.view.prototype.isVisible.call(this,e,this.s.id)},getActiveId:function(){return this.q.length?this.q[this.Mh].s.id:null},back:function(e){if(e=e||1,this.callEvent("onBeforeBack",[this.getActiveId(),e])){if(this.Nq.length>e){var t=this.Nq[this.Nq.length-e-1];return jeeplus.$$(t).show(),t}return null}return null}},jeeplus.ui.baselayout),jeeplus.protoUI({name:"form",defaults:{type:"form",autoheight:!0},Tq:-1,_f:"jeeplus_form",ag:!0,$init:function(){this.x.setAttribute("role","form")},$getSize:function(e,t){this.cc&&!this.s.width&&(e+=jeeplus.ui.scrollSize);var i=jeeplus.ui.layout.prototype.$getSize.call(this,e,t);return(this.s.scroll||!this.s.autoheight)&&(i[2]=this.s.height||this.s.minHeight||0,i[3]+=1e5),i}},jeeplus.ui.toolbar),function(){var i={};for(var e in jeeplus.UIManager.nb)i[jeeplus.UIManager.nb[e]]=e;var s={9:"tab",38:"up",40:"down",37:"left",39:"right"};jeeplus.patterns={phone:{mask:"+# (###) ###-####",allow:/[0-9]/g},card:{mask:"#### #### #### ####",allow:/[0-9]/g},date:{mask:"####-##-## ##:##",allow:/[0-9]/g}},jeeplus.extend(jeeplus.ui.text,{$init:function(e){if((e.pattern||e.format&&!this.format_setter)&&(this.attachEvent("onKeyPress",function(e,t){if(!(t.ctrlKey||t.altKey||this.nH)){if(105<e&&e<112&&(e-=64),i[e]&&8!==e&&46!==e)return void(s[e]||jeeplus.html.preventEvent(t));jeeplus.html.preventEvent(t),this.$C(t,e)}}),this.attachEvent("onAfterRender",this.ye),this.getText=function(){return this.getInputNode().value},this.VC=function(e,t){return!1===t?this._C(e):this.aD(e)},e.format)){var t=jeeplus.Number.getConfig(e.format);this.nH=[function(e){return jeeplus.Number.parse(e,t)},function(e){return jeeplus.Number.format(e,t)}]}},pattern_setter:function(e){var t=jeeplus.patterns[e]||e;return"string"==typeof t&&(t={mask:t}),t.allow=t.allow||/[A-Za-z0-9]/g,this.bD(t),t},cD:function(){this.config.validate=this.config.validate||jeeplus.bind(function(){var e=this.getText(),t=e.replace(this.dD,"");return(e.toString().match(this.eD)||[]).join("").length==t.length&&e.length==this.s.pattern.mask.length},this)},ye:function(){var e=jeeplus.env.isIE8?"propertychange":"input";this.nH||jeeplus.UE(this.getInputNode(),e,function(e){var t=(new Date).valueOf();this.$view.offsetWidth,(!this.fD||100<t-this.fD)&&(this.fD=t,this.$setValue(this.getText()))},{bind:this}),jeeplus.UE(this.getInputNode(),"blur",function(e){this.Xy()},{bind:this})},bD:function(e){for(var t=e.mask,i={},s="",n=0,l=0;l<t.length;l++)"#"===t[l]?(i[l]=n,n++):(i[l]=!1,-1===s.indexOf(t[l])&&(s+="\\"+t[l]));this.eD=e.allow,this.dD=new RegExp("["+s+"]","g"),this.gD=i,this.cD()},$C:function(e,t){var i=this.getInputNode(),s=i.value,n=jeeplus.html.getSelectionRange(i),l="";8==t||46==t?n.start==n.end&&(8==t?n.start--:n.end++):(l=String.fromCharCode(t),e.shiftKey||(l=l.toLowerCase())),s=s.substr(0,n.start)+l+s.substr(n.end),n=this.hD(l,s.length,n.start,t),this.iD=t,this.$setValue(s),jeeplus.html.setSelectionRange(i,n)},hD:function(e,t,i,s){if(e&&e.match(this.eD)||8==s||46==s)i=e?i+1:i,i=this.jD(i,s);else if(t-1==i&&8!==s&&46!==s){var n=this.s.pattern.mask.indexOf("#",i);0<n&&(i+=n)}return i},jD:function(e,t){var i=e-1*(46!==t);return!1===this.gD[i]?(e+=8==t?-1:1,this.jD(e,t)):!1===this.gD[e]&&8!==t?this.jD(e+1,t)-1:e},_C:function(e){return this.nH?this.nH[0](e):((e=e||"").toString().match(this.eD)||[]).join("").replace(this.dD,"")},aD:function(e){if(this.nH)return this.nH[1](this.nH[0](e));var t=this._C(e),i=this.s.pattern.mask,s=this.s.pattern.mask,n=this.gD,l=!1,a=0,r=0,o=0;for(var h in n)if(!1!==n[h]){if(!l){a=1*h;var u=t[r=n[h]]||"",c=t[r+1];i=(u?i.substr(0,a):"")+u+(u&&c?i.substr(a+1):""),c||(l=!0)}o++}var d=this.iD;if(d&&8!==d||!d&&o-1===r&&i.length<s.length)if(t){var p=a+1;if("#"!==s.charAt(p)&&i.length<s.length){var f=s.indexOf("#",p);f<0&&(f=s.length),i+=s.substr(p,f-p)}}else 46!==d&&(i+=s.substr(0,s.indexOf("#")));return this.iD=null,i}})}(),jeeplus.protoUI({name:"gridsuggest",defaults:{type:"datatable",fitMaster:!1,width:0,body:{navigation:!0,autoheight:!0,autowidth:!0,select:!0},filter:function(e,t){return 0===this.config.template(e).toString().toLowerCase().indexOf(t.toLowerCase())}},$init:function(e){e.body.columns||(e.body.autoConfig=!0),e.template||(e.template=jeeplus.bind(this.bu,this))},bu:function(e,t){var i=this.getBody(),s=this.config.textValue||i.config.columns[0].id;return i.getText(e.id,s)}},jeeplus.ui.suggest),jeeplus.protoUI({name:"datasuggest",defaults:{type:"dataview",fitMaster:!1,width:0,body:{xCount:3,autoheight:!0,select:!0}}},jeeplus.ui.suggest),jeeplus.protoUI({name:"multiselect",$cssName:"richselect",defaults:{separator:","},Kt:function(e){var t=!jeeplus.isArray(e)&&"object"==typeof e&&!e.name,i={view:"checksuggest",separator:this.config.separator,buttonText:this.config.buttonText,button:this.config.button};this.s.optionWidth?i.width=this.s.optionWidth:i.fitMaster=!0,t&&jeeplus.extend(i,e,!0);var s=jeeplus.ui(i),n=s.getList();return"string"==typeof e?n.load(e):t||n.parse(e),s.attachEvent("onShow",function(e,t,i){s.setValue(jeeplus.$$(s.s.master).config.value)}),s},$setValue:function(e){if(this.se){var t=this.getPopup(),i="";t&&("object"==typeof(i=t.setValue(e))&&(i=i.join(this.config.separator+" "))),this.s.text=i,this.getInputNode().innerHTML=i||this.Yx()}},getValue:function(){return this.s.value||""}},jeeplus.ui.richselect),jeeplus.editors.multiselect=jeeplus.extend({popupType:"multiselect"},jeeplus.editors.richselect),jeeplus.type(jeeplus.ui.list,{name:"multilist",templateStart:jeeplus.template('<div jeeplus_l_id="#!id#" class="{common.classname()}" style="width:{common.widthSize()}; height:{common.heightSize()}; overflow:hidden;" {common.aria()}>')},"default"),jeeplus.type(jeeplus.ui.list,{name:"checklist",templateStart:jeeplus.template('<div jeeplus_l_id="#!id#" {common.aria()} class="{common.classname()}" style="width:{common.widthSize()}; height:{common.heightSize()}; overflow:hidden; white-space:nowrap;">{common.checkbox()}'),checkbox:function(e,t){var i=e.$checked?"fa-check-square":"fa-square-o";return"<span role='checkbox' tabindex='-1' aria-checked='"+(e.$checked?"true":"false")+"' class='jeeplus_icon "+i+"'></span>"},aria:function(e){return"role='option' tabindex='-1' "+(e.$checked?"aria-selected='true'":"")},template:jeeplus.template("#value#")},"default"),jeeplus.protoUI({name:"multisuggest",defaults:{separator:",",type:"layout",button:!0,width:0,filter:function(e,t){return-1<this.getItemText(e.id).toString().toLowerCase().indexOf(t.toLowerCase())},body:{rows:[{view:"list",type:"multilist",borderless:!0,autoheight:!0,yCount:5,multiselect:"touch",select:!0,on:{onItemClick:function(e){var t=this.getParentView().getParentView();jeeplus.delay(function(){t._y(e)})}}},{view:"button",click:function(){var e=this.getParentView().getParentView();e.setMasterValue({id:e.getValue()}),e.hide()}}]}},_y:function(e,t,i){var s=this.getValue(),n=i||jeeplus.toArray(s?this.getValue().split(this.s.separator):[]),l=jeeplus.$$(this.s.master);if(i||(n.find(e)<0?n.push(e):n.remove(e)),l)l.setValue(n.join(this.s.separator));else{var a=this.setValue(n);this.ae&&(this.ae.value=a.join(this.s.separator))}if(t){var r=this.getList().getItemNode(e).getElementsByTagName("SPAN");r&&r.length&&r[0].focus()}},Jt:function(e){return e.rows[0]},_d:function(){var e=this.getButton(),t=this.s.button?this.s.buttonText||jeeplus.i18n.combo.select:0;if(e&&(t?(e.s.value=t,e.refresh()):e.hide()),this.s.selectAll)return this.getBody().getChildViews()[0].show();this.getList().data.attachEvent("onAfterFilter",jeeplus.bind(function(){return this.be()},this))},ke:function(){var e=this.getList(),t=this.getMasterValue();if(t&&(t=t.toString().split(this.config.separator))[0])for(var i=0;i<t.length;i++)e.exists(t[i])&&e.select(t[i],!0)},getButton:function(){return this.getBody().getChildViews()[1]},getList:function(){return this.getBody().getChildViews()[0]},setValue:function(e){var t=[],i=this.getList();if(i.unselect(),e&&(jeeplus.isArray(e)||(e=e.toString().split(this.config.separator)),e[0]))for(var s=0;s<e.length;s++)i.getItem(e[s])&&(i.exists(e[s])&&i.select(e[s],!0),t.push(this.getItemText(e[s])));return this.s.value=e?e.join(this.config.separator):"",t},getValue:function(){return this.s.value}},jeeplus.ui.suggest),jeeplus.protoUI({name:"checksuggest",defaults:{button:!1,selectAll:!1,body:{rows:[{view:"checkbox",hidden:!0,customCheckbox:!1,borderless:!1,css:"jeeplus_checksuggest_select_all",labelRight:jeeplus.i18n.combo.selectAll,labelWidth:0,value:0,height:28,inputHeight:20,on:{onItemClick:function(e){for(var t=this.getParentView().getParentView(),i=t.getList(),s=i.data.order,n=0;n<s.length;n++){i.getItem(s[n]).$checked=this.getValue()}var l=this.getValue()?[].concat(s):[];t._y(s[0],e,l),i.refresh()},onChange:function(){var e=this.$view.querySelector("label"),t=jeeplus.i18n.combo;e.textContent=this.getValue()?t.unselectAll:t.selectAll},onAfterRender:function(){this.callEvent("onChange",[])}}},{view:"list",css:"jeeplus_multilist",borderless:!0,autoheight:!0,yCount:5,select:!0,type:"checklist",on:{onItemClick:function(e,t){var i=this.getItem(e);i.$checked=i.$checked?0:1,this.refresh(e);var s=this.getParentView().getParentView();if(s.FG=new Date,s._y(e,t),s.config.selectAll)if(i.$checked){(s.getValue()||"").split(",").length===this.count()&&s.getBody().q[0].setValue(1)}else s.getBody().q[0].setValue(0)}}},{view:"button",click:function(){var e=this.getParentView().getParentView();e.setMasterValue({id:e.getValue()}),e.hide()}}]}},Jt:function(e){return e.rows[1]},getButton:function(){return this.getBody().getChildViews()[2]},getList:function(){return this.getBody().getChildViews()[1]},$init:function(){this.dB={},this.$ready.push(this.eB)},eB:function(){var e=this.getList();if(e.config.dataFeed){var t=this;e.attachEvent("onAfterLoad",function(){t.setValue(t.s.value)}),e.getItem=function(e){return this.data.pull[e]||t.dB[e]}}this.config.master&&!this.config.selectAll&&this.getBody().getChildViews()[0].hide()},$enterKey:function(e,t){if(t.count&&t.count())if(e.isVisible()){var i=t.getSelectedId(!1,!0);i&&this._y(i),e.hide(!0)}else e.show(this.ae);else e.isVisible()&&e.hide(!0)},ke:function(){var e=this.getList();e.select&&e.unselect()},setValue:function(e){var t,i=this.getList(),s=[],n={},l=[];for(e=e||[],jeeplus.isArray(e)?i.config.dataFeed&&(e=this.fB(e)):e=e.toString().split(this.config.separator),t=0;t<e.length;t++)n[e[t]]=1,i.getItem(e[t])&&(this.dB&&(this.dB[e[t]]=jeeplus.copy(i.getItem(e[t]))),s.push(this.getItemText(e[t])));for(i.data.each(function(e){e.$checked?n[e.id]||(e.$checked=0,l.push(e.id)):n[e.id]&&(e.$checked=1,l.push(e.id))},this,!0),t=0;t<l.length;t++)i.refresh(l[t]);return this.s.value=e.length?e.join(this.config.separator):"",s},getValue:function(){return this.s.value},Rs:function(){var e;this.s.master&&(e=jeeplus.$$(this.s.master).getInputNode()),(e=e||this.ae)&&e.focus()},fB:function(e){if(e&&jeeplus.isArray(e)){for(var t=[],i=0;i<e.length;i++)e[i].id?(this.dB[e[i].id]=jeeplus.copy(e[i]),t.push(e[i].id)):t.push(e[i]);e=t}return e}},jeeplus.ui.multisuggest),jeeplus.protoUI({name:"multicombo",$cssName:"text",defaults:{keepText:!1,separator:",",icon:!1,iconWidth:0,tagMode:!0,tagTemplate:function(e){return e.length?e.length+" item(s)":""},template:function(e,t){return t.yy(e,t)}},$init:function(){this.$view.className+=" jeeplus_multicombo",this.attachEvent("onBeforeRender",function(){return this.zy||(this.zy=jeeplus.skin.$active.inputHeight),!0}),this.attachEvent("onAfterRender",function(){this.ac=null}),this.IA=0},on_click:{jeeplus_multicombo_delete:function(e,t,i){var s;return!this.s.readonly&&i&&(s=i.parentNode.getAttribute("optvalue"))&&this.Ay(s),!1}},_E:function(){var e=this.getInputNode().value;e&&this.s.newValues&&100<new Date-(this.getPopup().FG||0)&&this.HA(e),this.s.keepText||(this.xy=""),this.refresh()},Ay:function(e){var t=this.s.value,i=jeeplus.$$(this.config.suggest);"string"==typeof t&&(t=t.split(this.s.separator)),(t=jeeplus.toArray(jeeplus.copy(t))).remove(e),this.setValue(t.join(this.s.separator)),i&&i.s.selectAll&&i.getBody().q[0].setValue(0)},az:function(e){var t=jeeplus.$$(this.config.suggest);if(t.getList().getItem(e)){var i=t.getValue();i&&"string"==typeof i&&(i=i.split(t.config.separator)),(i=jeeplus.toArray(i||[])).find(e)<0&&(i.push(e),t.setValue(i),this.setValue(t.getValue()))}},HA:function(e){var t,i=jeeplus.$$(this.config.suggest),s=i.getList();if(e=e.replace(/^\s+|\s+$/g,""))for(var n in s.data.pull)i.getItemText(n)==e&&(t=n);!t&&e&&(t=s.add({id:e,value:e})),this.az(t)},Kt:function(e){var t=!jeeplus.isArray(e)&&"object"==typeof e&&!e.name,i={view:"checksuggest",separator:this.config.separator,buttonText:this.config.buttonText,button:this.config.button},s=this;this.s.optionWidth&&(i.width=this.s.optionWidth),t&&jeeplus.extend(i,e,!0);var n=jeeplus.ui(i);this.s.optionWidth||(n.$customWidth=function(e){this.config.width=s.Ee(s.s)}),n.attachEvent("onBeforeShow",function(e,t,i){return this.s.master&&(this.setValue(jeeplus.$$(this.s.master).config.value),jeeplus.$$(this.s.master).getInputNode().value?(this.getList().refresh(),this.je=!0):this.getList().filter(),e.tagName&&"input"==e.tagName.toLowerCase())?(jeeplus.ui.popup.prototype.show.apply(this,[e.parentNode,t,i]),!1):void 0});var l=n.getList();return"string"==typeof e?l.load(e):t||l.parse(e),n.be=function(){},n},yy:function(e,t){var i,s,n,l,a,r,o,h,u,c,d,p,f="",g="top"==this.s.labelPosition;return i="x"+jeeplus.uid(),p=t.Ee(e),s=e.inputAlign||"left",a=this.zy-2*jeeplus.skin.$active.inputPadding-2,l=this.xy||"",h="<ul class='jeeplus_multicombo_listbox' style='line-height:"+a+"px'></ul>",n="width: "+Math.min(p,t.By||7)+"px;height:"+a+"px;max-width:"+(p-20)+"px",d=e.readonly?" readonly ":"",r="<div class='jeeplus_inp_static' onclick='' style='line-height:"+a+"px;width: "+p+"px;  text-align: "+s+";height:auto' >"+h+("<input id='"+i+"' role='combobox' aria-multiline='true' aria-label='"+jeeplus.template.escape(e.label)+"' tabindex='0' type='text' class='jeeplus_multicombo_input' "+d+" style='"+n+"' value='"+l+"'/>")+"</div>",o=t.$renderLabel(e,i),c=this.s.awidth-p-2*jeeplus.skin.$active.inputPadding,(u=(e.invalid?e.invalidMessage:"")||e.bottomLabel)&&(f="<div class='jeeplus_inp_bottom_label' style='width:"+p+"px;margin-left:"+Math.max(c,jeeplus.skin.$active.inputPadding)+"px;'>"+u+"</div>"),g?o+"<div class='jeeplus_el_box' style='width:"+this.s.awidth+"px; '>"+r+f+"</div>":"<div class='jeeplus_el_box' style='width:"+this.s.awidth+"px; min-height:"+this.s.aheight+"px;'>"+o+r+f+"</div>"},Cy:function(){return this.re().getElementsByTagName("UL")[0]},oe:function(){var e=this.getPopup();if(e){var t=e?e.setValue(this.s.value):null;e.fB&&(this.s.value=e.fB(this.s.value));var i="",s=this.Cy(),n=t&&t.length;if(n){var l=this.zy-2*jeeplus.skin.$active.inputPadding-8,a=this.s.value;if("string"==typeof a&&(a=a.split(this.s.separator)),this.s.tagMode)for(var r=0;r<t.length;r++){var o="<span>"+t[r]+"</span><span class='jeeplus_multicombo_delete' role='button' aria-label='"+jeeplus.i18n.aria.removeItem+"'>x</span>";i+="<li class='jeeplus_multicombo_value' style='line-height:"+l+"px;' optvalue='"+a[r]+"'>"+o+"</li>"}else i+="<li class='jeeplus_multicombo_tag' style='line-height:"+l+"px;'>"+this.s.tagTemplate(a)+"</li>"}s.innerHTML=i;var h=this.getInputNode();this.s.placeholder&&(n?(h.placeholder="",!h.value&&20<h.offsetWidth&&(h.style.width="20px")):h.value||(h.placeholder=this.s.placeholder,h.style.width=this.Ee(this.s)+"px")),!this.s.tagMode&&s.firstChild&&(h.style.width=this.lE()+"px")}this.Dy()},Ey:function(e){if(e=e||this.getInputNode())if(e.value.length){if(e.createTextRange){var t=e.createTextRange();t.moveStart("character",e.value.length),t.collapse(),t.select()}else if(e.selectionStart||"0"==e.selectionStart){var i=e.value.length;e.selectionStart=i,e.selectionEnd=i,e.focus()}}else e.focus()},Dy:function(){var e="top"==this.s.labelPosition,t=this.JA(),i=Math.max(t.offsetHeight+2*jeeplus.skin.$active.inputPadding,this.zy);if(e&&(i+=this.le),(i+=this.s.bottomPadding||0)!=this.$getSize(0,0)[2]){var s=t.offsetHeight+(e?this.le:0);if(s==this.Fy?this.IA++:this.IA=0,10<this.IA)return!1;this.Fy=s;var n=this.getTopParentView();clearTimeout(n.kg),n.kg=jeeplus.delay(function(){this.config.height=this.Fy+2*jeeplus.skin.$active.inputPadding,this.resize(),this.Hy&&(this.Ey(this.getInputNode()),this.Hy=!1),this.bz&&(this.s.keepText?this.getInputNode().select():this.getInputNode().value="",this.bz=!1),(this.getPopup().isVisible()||this.Hy)&&this.getPopup().show(this.JA())},this)}this.bz&&this.getInputNode().select()},JA:function(){for(var e=this.re(),t=e.childNodes,i=0;i<t.length;i++)if(t[i].className&&-1!=t[i].className.indexOf("jeeplus_inp_static"))return t[i];return e},getInputNode:function(){return this.re().getElementsByTagName("INPUT")[0]},$setValue:function(){this.se&&this.oe()},getValue:function(e){if("object"==typeof e&&e.options)return this.AD();var t=this.s.value;return t?"string"!=typeof t?t.join(this.s.separator):t:""},getText:function(){var e=this.s.value;if(!e)return"";"string"==typeof e&&(e=e.split(this.s.separator));for(var t=[],i=0;i<e.length;i++)t.push(this.getPopup().getItemText(e[i]));return t.join(this.s.separator)},AD:function(){var e,t,i,s=[],n=this.s.value;if(!n)return[];for("string"==typeof n&&(n=n.split(this.s.separator)),i=this.getPopup(),e=0;e<n.length;e++)(t=i.getList().getItem(n[e])||(i.dB?i.dB[n[e]]:null))&&s.push(t);return s},$setSize:function(e,t){var i=this.s;if(jeeplus.ui.view.prototype.$setSize.call(this,e,t)){if(!e||!t)return;"top"==i.labelPosition&&(i.labelWidth=0),this.render()}},Iy:function(e){var t=document.createElement("span");t.className="jeeplus_multicombo_input",t.style.visibility="visible",t.style.height="0px",t.innerHTML=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),document.body.appendChild(t);var i=t.offsetWidth+10;return document.body.removeChild(t),i},lE:function(){var e=this.Cy();return e.offsetWidth-e.firstChild.offsetWidth-17},De:function(){jeeplus.UE(this.re(),"click",function(){this.getInputNode().focus()},{bind:this}),jeeplus.UE(this.getInputNode(),"focus",function(){-1==this.re().className.indexOf("jeeplus_focused")&&(this.re().className+=" jeeplus_focused")},{bind:this}),jeeplus.UE(this.getInputNode(),"blur",function(){this.re().className=this.re().className.replace(" jeeplus_focused","")},{bind:this}),jeeplus.UE(this.getInputNode(),"input",function(){!this.getInputNode().value&&this.xy&&(this.getInputNode().style.width="20px",this.By=20,this.xy="",this.Hy=!0,this.getPopup().show(this.JA()),this.Dy())},{bind:this}),jeeplus.UE(this.getInputNode(),"keyup",function(e){var t,i,s=this.getInputNode();if(e=e||event,!this.s.placeholder||this.s.value||s.value?(i=t=this.Iy(s.value)+10,!this.s.tagMode&&this.Cy().firstChild&&(i=this.lE())):i=this.Ee(this.s),s.style.width=i+"px",t!=this.By?(this.s.keepText||13!=e.keyCode?this.xy=s.value:this.xy=!1,this.Hy=!0,this.By&&this.getPopup().show(this.JA()),this.By=t||i,this.Dy()):this.vA!=this.getPopup().$height&&this.getPopup().show(this.JA()),-1<s.value.indexOf(this.s.separator)&&this.s.tagMode){var n=s.value.replace(this.s.separator,"");if(n)if(this.s.newValues)this.HA(n);else{var l=this.getPopup().getItemId(n);l&&this.az(l)}this.s.keepText?(this.xy=n,s.value=n,this.bz=!0,this.Hy=!0,this.Dy()):s.value=""}},{bind:this}),jeeplus.UE(this.getInputNode(),"keydown",function(e){if(this.bz=!1,this.isVisible()){e=e||event;var t=this.Cy().lastChild;if(this.vA=this.getPopup().$height,8==e.keyCode&&t&&(!this.getInputNode().value&&100<(new Date).valueOf()-(this.Jy||0)?(this.Hy=!0,this.Ay(t.getAttribute("optvalue"))):this.Jy=(new Date).valueOf()),13==e.keyCode||9==e.keyCode){var i=this.getInputNode(),s="",n=jeeplus.$$(this.s.suggest);n.getList().getSelectedId()||(i.value&&(s=n.getSuggestion()),this.s.newValues?(13==e.keyCode&&(this.bz=!0),this.HA(i.value),this.s.keepText?this.xy=i.value:i.value=""):s&&(9==e.keyCode?(this.Hy=!1,this.xy="",this.By=10,i.value="",this.az(s)):(this.bz=!0,this.az(s),this.s.keepText?this.xy=i.value:i.value=""))),13==e.keyCode&&(this.bz=!0,this.Hy=!0,this.s.keepText?this.xy=i.value:i.value="")}}},{bind:this}),jeeplus.$$(this.s.suggest).linkInput(this)}},jeeplus.ui.richselect),jeeplus.protoUI({name:"menu",Oh:"jeeplus_menu",$init:function(e){this.data.qf=jeeplus.bind(function(e){e.disabled&&this.data.addMark(e.id,"jeeplus_disabled",!0,1,!0)},this),e.autowidth&&(this.KA=!0,delete e.autowidth),this.data.attachEvent("onStoreUpdated",jeeplus.bind(function(){this.Uq()},this)),this.attachEvent("onMouseMove",this.Vq),this.attachEvent("onMouseOut",function(e){this.Wq()&&"click"==this.s.openAction||!this.Xq&&e.relatedTarget&&this.Uq()}),this.attachEvent("onItemClick",function(e,t,i){var s=this.getItem(e);if(s){if(s.$template)return;var n=this.getTopMenu();if(!this.data.getMark(e,"jeeplus_disabled")){if(!n.callEvent("onMenuItemClick",[e,t,i]))return void(t.showpopup=!0);this!=n&&n.Le(e,t,i),s.submenu||n.sH?(this!==n&&!jeeplus.env.touch||"click"!=n.s.openAction||this.Yq(e,i),t.showpopup=!0):(n.Uq(!0),n.$q&&n.hide())}}}),this.attachEvent("onKeyPress",function(e,t){if(9===e)this.getTopMenu().Uq();else if(13===e||32===e){var i,s=this.getSelectedId();s&&(i=this.getItemNode(s)),i&&jeeplus.html.triggerEvent(i,"MouseEvents","click")}}),this.data.attachEvent("onClearAll",function(){this._q=[]}),this.data._q=[],this.x.setAttribute("role","menubar")},sizeToContent:function(){if("y"==this.s.layout){var t=[],i=!1;this.data.each(function(e){t.push(this.jb(e)),e.submenu&&(i=!0)},this),this.config.width=jeeplus.html.getTextSize(t,this.$view.className).width+16+2+(i?15:0),this.resize()}},getTopMenu:function(){for(var e=this;e.ar;)e=jeeplus.$$(e.ar);return e},Rh:function(e){this.s.autoheight&&(e=this.count());for(var t=0,i=0;i<e;i++){var s=this.data.pull[this.data.order[i]];t+=s&&"Separator"==s.$template?4:this.type.height}return t},on_mouse_move:{},type:{css:"menu",width:"auto",aria:function(e,t,i){return'role="menuitem"'+(i&&i.jeeplus_selected?' aria-selected="true" tabindex="0"':'tabindex="-1"')+(e.submenu||e.data?'aria-haspopup="true"':"")+(i&&i.jeeplus_disabled?' aria-disabled="true"':"")},templateStart:function(e,t,i){if("Separator"===e.$template||"Spacer"===e.$template)return'<div jeeplus_l_id="#id#" role="separator" tabindex="-1" class="jeeplus_context_'+e.$template.toLowerCase()+'">';var s=(e.href?" href='"+e.href+"' ":"")+(e.target?" target='"+e.target+"' ":"");return jeeplus.ui.list.prototype.type.templateStart(e,t,i).replace(/^<div/,"<a "+s)+((e.submenu||e.data)&&t.subsign?"<div class='jeeplus_submenu_icon'></div>":"")},templateEnd:function(e,t,i){return"Separator"===e.$template||"Spacer"===e.$template?"</div>":"</a>"},templateSeparator:jeeplus.template("<div class='sep_line'></div>"),templateSpacer:jeeplus.template("<div></div>")},getMenu:function(e){if(this.data.pull[e])return this;for(var t in this.data.pull){var i=this.getItem(t);if(i.submenu){var s=this.br(i).getMenu(e);if(s)return s}}},getSubMenu:function(e){var t=this.getMenu(e),i=t.getItem(e);return i.submenu?t.br(i):null},getMenuItem:function(e){return this.getMenu(e).getItem(e)},br:function(e){var t=jeeplus.$$(e.submenu);return t||(e.submenu=this.cr(e),t=jeeplus.$$(e.submenu)),t},Vq:function(e,t,i){this.Wq()&&this.Yq(e,i)},Wq:function(){var e=this.getTopMenu();if("click"!=e.s.openAction)return!0;if(jeeplus.env.touch)return!1;var t=e.dr;return!(!t||!jeeplus.$$(t).isVisible())},Yq:function(e,t){var i=this.getItem(e);if(i&&(this.Xq=null,this.dr&&i.submenu!=this.dr&&this.Uq(!0),i.submenu||i.data&&!this.config.hidden)){var s=this.br(i);if(this.data.getMark(e,"jeeplus_disabled"))return;s.show(t,{pos:this.s.subMenuPos}),s.ar=this.s.id,this.dr=i.submenu}},disableItem:function(e){this.getMenu(e).addCss(e,"jeeplus_disabled")},enableItem:function(e){this.getMenu(e).removeCss(e,"jeeplus_disabled")},er:function(e,t){var i=this.data;i._q[e]!=t&&(i._q[e]=t,i.filter(function(e){return!i._q[e.id]}),this.resize())},hideItem:function(e){var t=this.getMenu(e);t&&t.er(e,!0)},showItem:function(e){var t=this.getMenu(e);return t?(t.er(e,!1),jeeplus.ui.list.prototype.showItem.call(t,e)):void 0},Uq:function(e){if(this.dr){var t=jeeplus.$$(this.dr);t.Uq&&t.Uq(e),(e||!t.gr)&&(t.hide(),this.dr=null)}},cr:function(e){var t={view:"submenu",data:e.submenu||e.data},i=this.getTopMenu().s.submenuConfig;i&&jeeplus.extend(t,i,!0);var s=this.getMenuItem(e.id);s&&s.config&&jeeplus.extend(t,s.config,!0);var n=jeeplus.ui(t);return n.ar=this,n.s.id},OD:function(e,t,i){var s=this.getItem(e);if("Separator"==s.$template||"Spacer"==s.$template||this.data.getMark(e,"jeeplus_disabled")){var n=this.getIndexById(e)+("up"==i?-1:1);return(e=0<=n?this.getIdByIndex(n):null)?this.OD(e,t,i):t}return e},$skin:function(){jeeplus.ui.list.prototype.$skin.call(this),this.type.height=jeeplus.skin.$active.menuHeight},defaults:{scroll:"",layout:"x",mouseEventDelay:100,subMenuPos:"bottom"}},jeeplus.ui.list),jeeplus.protoUI({name:"submenu",$init:function(){this.gd=jeeplus.clone(this.hr),(this.gd.A=this).attachEvent("onMouseOut",function(e){"click"!=this.getTopMenu().s.openAction&&(this.Xq||this.gr||!e.relatedTarget||this.hide())}),this.attachEvent("onMouseMoving",function(){this.ar&&(jeeplus.$$(this.ar).Xq=!0)}),this.attachEvent("onBeforeShow",function(){this.getTopMenu().KA&&this.sizeToContent&&!this.isVisible()&&this.sizeToContent()}),this.y.setAttribute("role","menu")},$skin:function(){jeeplus.ui.menu.prototype.$skin.call(this),jeeplus.ui.popup.prototype.$skin.call(this),this.type.height=jeeplus.skin.$active.menuHeight},hr:{$getSize:function(e,t){var i=1*this.A.s.height,s=1*this.A.s.width,n=jeeplus.ui.menu.prototype.$getSize.call(this.A,e,t);return this.A.s.height=i,this.A.s.width=s,n},$setSize:function(e,t){this.A.s.scroll&&(this.A.ed.style.height=t+"px")},destructor:function(){this.A=null}},body_setter:function(){},getChildViews:function(){return[]},defaults:{width:150,subMenuPos:"right",layout:"y",autoheight:!0},type:{height:jeeplus.skin.menuHeight,subsign:!0}},jeeplus.ui.menu,jeeplus.ui.popup),jeeplus.ContextHelper={defaults:{padding:"4",hidden:!0},body_setter:function(e){return e=jeeplus.ui.window.prototype.body_setter.call(this,e),this.gd.x.style.borderWidth="0px",e},attachTo:function(e){var t;t=e.on_context?e.attachEvent("onAfterContextMenu",jeeplus.bind(this.ir,this)):jeeplus.event(e,"contextmenu",this.jr,{bind:this}),this.attachEvent("onDestruct",function(){e.callEvent?e.detachEvent(t):jeeplus.eventRemove(t),e=null})},getContext:function(){return this.nh},setContext:function(e){this.nh=e},jr:function(e){return this.nh=jeeplus.toNode(e||event),this.kr(e)},ir:function(e,t,i){return this.nh={obj:jeeplus.$$(t),id:e},this.kr(t)},kr:function(e){var t=this.show(e,null,!0);return!1===t?t:(jeeplus.callEvent("onClick",[]),jeeplus.html.preventEvent(e))},gr:!0,master_setter:function(e){return this.attachTo(e),null}},jeeplus.protoUI({name:"context"},jeeplus.ContextHelper,jeeplus.ui.popup),jeeplus.protoUI({name:"contextmenu",$q:!0,$init:function(e){e.submenuConfig&&jeeplus.extend(e,e.submenuConfig)}},jeeplus.ContextHelper,jeeplus.ui.submenu),jeeplus.protoUI({name:"tabbar",$init:function(){this.attachEvent("onKeyPress",this.DD)},$skin:function(){var e=jeeplus.skin.$active,t=this.defaults;t.topOffset=e.tabTopOffset||0,t.tabOffset=void 0!==e.tabOffset?e.tabOffset:10,t.bottomOffset=e.tabBottomOffset||0,t.height=e.tabbarHeight,t.tabMargin=e.tabMargin,t.inputPadding=e.inputPadding,t.tabMinWidth=e.tabMinWidth||100,t.tabMoreWidth=e.tabMoreWidth||40},ut:function(){var e,t,i=this.s,s=this.OC||i.options,n=this.we-2*i.tabOffset,l=i.optionWidth||i.tabMinWidth;if(t=s.length,i.tabMinWidth&&n/t<l)return{max:parseInt(n/l,10)||1};if(!i.optionWidth)for(e=0;e<t;e++)s[e].width&&(n-=s[e].width+(e||i.type?0:i.tabMargin),t--);return{width:t?n/t:i.tabMinWidth}},Je:function(){var e=this.s;if(!e.tabbarPopup){var t={view:"popup",width:e.popupWidth||200,body:{view:"list",borderless:!0,select:!0,css:"jeeplus_tab_list",autoheight:!0,yCount:e.yCount,type:{template:e.popupTemplate}}},i=jeeplus.ui(t);i.getBody().attachEvent("onBeforeSelect",jeeplus.bind(function(e){return e&&this.callEvent("onBeforeTabClick",[e])?(this.setValue(e),jeeplus.$$(this.s.tabbarPopup).hide(),this.callEvent("onAfterTabClick",[e]),!0):void 0},this)),i.getBody().attachEvent("onAfterSelect",jeeplus.bind(function(e){this.refresh()},this)),e.tabbarPopup=i.s.id,this.Ns.push(i)}this.Je=function(){}},getPopup:function(){return this.Je(),jeeplus.$$(this.s.tabbarPopup)},moreTemplate_setter:jeeplus.template,popupTemplate_setter:jeeplus.template,defaults:{popupWidth:200,popupTemplate:"#value#",yCount:7,moreTemplate:'<span class="jeeplus_icon fa-ellipsis-h"></span>',template:function(e,t){var i,s,n,l,a,r,o,h,u;if(t.OC=o=t.yC(e.options),o.length){t.Be(o),!e.value&&o.length&&(e.value=o[0].id),i="",e.tabOffset&&(i+="<div class='jeeplus_tab_filler' style='width:"+e.tabOffset+"px;'>&nbsp;</div>"),t.we-2*e.tabOffset-(e.type?0:e.tabMargin*(o.length-1)),h=e.topOffset+e.bottomOffset;var c=t.ut();if(c.max&&c.max<o.length){var d=t.getPopup();d.hide();var p=d.getBody()||null;if(p)if(c.max){var f=!1;for(s=0;s<o.length&&!f;s++)if(o[s].id==e.value&&(f=!0,s+1>c.max)){var g=o.splice(s,1);o=o.splice(0,c.max-1).concat(g).concat(o)}p.clearAll(),p.parse(o.slice(c.max))}else p.clearAll()}else t.s.tabbarPopup&&jeeplus.$$(t.s.tabbarPopup).hide();r=e.tabOffset;var v=!1;for(s=0;s<o.length&&!v;s++)u=c&&c.max?(c.max==s+1&&(v=!0),(t.we-2*e.tabOffset-(!e.type&&1<c.max?e.tabMargin*(c.max-1):0)-e.tabMoreWidth)/c.max):c.width,r+=(u=o[s].width||e.optionWidth||u)+(s&&!e.type?e.tabMargin:0),0<e.tabMargin&&s&&!e.type&&(i+="<div class='jeeplus_tab_filler' style='width:"+e.tabMargin+"px;'></div>"),i+=t.vt(o[s],u),v&&(i+='<div role="button" tabindex="0" aria-label="'+jeeplus.i18n.aria.showTabs+'" class="jeeplus_tab_more_icon" style="width:'+e.tabMoreWidth+'px;">'+e.moreTemplate(e,t)+"</div>",r+=e.tabMoreWidth);0<(n=t.bc-r)&&!e.type&&(i+="<div class='jeeplus_tab_filler' style='width:"+n+"px;'>&nbsp;</div>")}else i="<div class='jeeplus_tab_filler' style='width:"+t.we+"px; border-right:0px;'></div>";return l="",a=h&&!e.type?"height:"+(t.dc-h)+"px":"",e.topOffset&&!e.type&&(l+="<div class='jeeplus_before_all_tabs' style='width:100%;height:"+e.topOffset+"px'></div>"),l+="<div style='"+a+"' role='tablist' class='jeeplus_all_tabs "+(e.type?"jeeplustype_"+e.type:"")+"'>"+i+"</div>",e.bottomOffset&&!e.type&&(l+="<div class='jeeplus_after_all_tabs' style='width:100%;height:"+e.bottomOffset+"px'></div>"),l}},Ie:function(){return this.$view.querySelectorAll(".jeeplus_item_tab")},vt:function(e,t){var i,s="",n=this.config;if(e.id==n.value&&(s=" jeeplus_selected"),e.css&&(s+=" "+e.css),t=e.width||t,i='<div class="jeeplus_item_tab'+s+'" button_id="'+e.id+'" role="tab" aria-selected="'+(e.id==n.value?"true":"false")+'" tabindex="'+(e.id==n.value?"0":"-1")+'" style="width:'+t+'px;">',this.lr){var l=this.dc-2*n.inputPadding-2,a=this.dc-2,r=jeeplus.extend({cheight:l,aheight:a},e);i+=this.lr(r)}else{i+=(e.icon?"<span class='jeeplus_icon fa-"+e.icon+"'></span> ":"")+e.value}return(e.close||n.close)&&(i+="<span role='button' tabindex='0' aria-label='"+jeeplus.i18n.aria.closeTab+"' class='jeeplus_tab_close jeeplus_icon fa-times'></span>"),i+"</div>"},ne:{image:"<div class='jeeplus_img_btn_top' style='height:#cheight#px;background-image:url(#image#);'><div class='jeeplus_img_btn_text'>#value#</div></div>",icon:"<div class='jeeplus_img_btn' style='line-height:#cheight#px;height:#cheight#px;'><span class='jeeplus_icon_btn fa-#icon#' style='max-width:#cheight#px;max-height:#cheight#px;'></span>#value#</div>",iconTop:"<div class='jeeplus_img_btn_top' style='height:#cheight#px;width:100%;top:0px;text-align:center;'><span class='jeeplus_icon fa-#icon#'></span><div class='jeeplus_img_btn_text'>#value#</div></div>"},type_setter:function(e){return this.s.tabOffset=0,this.ne[e]&&(this.lr=jeeplus.template(this.ne[e])),e}},jeeplus.ui.segmented),jeeplus.protoUI({name:"tabview",defaults:{type:"clean"},setValue:function(e){this.q[0].setValue(e)},getValue:function(){return this.q[0].getValue()},getTabbar:function(){return this.q[0]},getMultiview:function(){return this.q[1]},addView:function(e){var t=e.body.id=e.body.id||jeeplus.uid();return this.getMultiview().addView(e.body),e.id=e.body.id,e.value=e.header,delete e.body,delete e.header,this.getTabbar().addOption(e),t},removeView:function(e){var t=this.getTabbar();t.removeOption(e),t.refresh()},$init:function(e){this.$ready.push(this.Nv);for(var t=e.cells,i=[],s=t.length-1;0<=s;s--){var n=t[s].body||t[s];n.id||(n.id="view"+jeeplus.uid()),i[s]={value:t[s].header,id:n.id,close:t[s].close,width:t[s].width,hidden:!!t[s].hidden},t[s]=n}var l={view:"tabbar",multiview:!0},a={view:"multiview",cells:t,animate:!!e.animate};e.value&&(l.value=e.value),e.tabbar&&jeeplus.extend(l,e.tabbar,!0),e.multiview&&jeeplus.extend(a,e.multiview,!0),l.options=l.options||i,e.rows=[l,a],delete e.cells,delete e.tabs},Nv:function(){this.getTabbar().attachEvent("onOptionRemove",function(e){var t=jeeplus.$$(e);if(t){var i=t.getParentView();i&&i.removeView(t)}})}},jeeplus.ui.layout),jeeplus.protoUI({name:"fieldset",defaults:{borderless:!0,$cssName:"jeeplus_fieldset",paddingX:18,paddingY:30},$init:function(e){this.x.className+=" "+this.defaults.$cssName,this.x.innerHTML="<fieldset><legend></legend><div></div></fieldset>"},label_setter:function(e){return this.x.firstChild.childNodes[0].innerHTML=e},getChildViews:function(){return[this.os]},body_setter:function(e){return this.os=jeeplus.ui(e,this.x.firstChild.childNodes[1]),this.os.Xb=this,e},getBody:function(){return this.os},resizeChildren:function(){var e=this.$width-this.s.paddingX,t=this.$height-this.s.paddingY,i=this.os.$getSize(0,0);i[0]>e&&(e=i[0]),i[2]>t&&(t=i[2]),this.os.$setSize(e,t),this.resize()},$getSize:function(e,t){e+=this.s.paddingX,t+=this.s.paddingY;var i=this.os.$getSize(e,t),s=this.ps=jeeplus.ui.view.prototype.$getSize.call(this,e,t);return s[0]<i[0]&&(s[0]=i[0]),s[2]<i[2]&&(s[2]=i[2]),s[1]>i[1]&&(s[1]=i[1]),s[3]>i[3]&&(s[3]=i[3]),s},$setSize:function(e,t){jeeplus.ui.view.prototype.$setSize.call(this,e,t)&&(e=Math.min(this.ps[1],e),t=Math.min(this.ps[3],t),this.os.$setSize(e-this.s.paddingX,t-this.s.paddingY))}},jeeplus.ui.view),jeeplus.protoUI({name:"forminput",defaults:{$cssName:"jeeplus_forminput",labelWidth:80,labelAlign:"left"},setValue:function(e){this.os.setValue&&this.os.setValue(e)},focus:function(){this.os.focus()},getValue:function(){return this.os.setValue?this.os.getValue():void 0},value_setter:function(e){this.setValue(e)},getBody:function(){return this.os},$skin:function(){this.tF=jeeplus.skin.$active.inputPadding,this.$E=jeeplus.skin.$active.inputSpacing},$init:function(e){this.$ready.push(function(){var e=this.x.firstChild.childNodes[0];e.style.width=this.s.paddingX+"px",e.style.textAlign=this.s.labelAlign,this.s.labelWidth||(e.style.display="none")});var t=jeeplus.isUndefined(e.labelWidth)?this.defaults.labelWidth:e.labelWidth;e.paddingX=t-2*this.tF+2*this.$E},setBottomText:function(e){var t=this.s;if(void 0!==e){if(t.bottomLabel==e)return;t.bottomLabel=e}var i=(t.invalid?t.invalidMessage:"")||t.bottomLabel;this._F&&jeeplus.html.remove(this._F),i&&(this.$view.style.position="relative",this._F=jeeplus.html.create("div",{class:"jeeplus_inp_bottom_label",role:t.invalid?"alert":"","aria-relevant":"all",style:"position:absolute; bottom:0px; padding:2px; background: white; left:"+this.s.labelWidth+"px; "},i),this.x.appendChild(this._F))}},jeeplus.ui.fieldset),jeeplus.protoUI({name:"dbllist",defaults:{borderless:!0},$init:function(e){this.uF={},this.vF=jeeplus.bind(function(e){return this.uF[e.id]},this),this.wF=jeeplus.bind(function(e){return!this.uF[e.id]},this),this.$view.className+=" jeeplus_dbllist",this.$ready.unshift(this.HE)},$onLoad:function(e,t){this.xF(function(){this.$$("left").data.driver=t,this.$$("left").parse(e),this.$$("right").data.driver=t,this.$$("right").parse(e)}),this.QE()},yF:function(){if(!1===this.s.buttons)return{width:10};var e=jeeplus.i18n.dbllist,t={width:120,template:(t=[this.zF("deselect_all",e.deselectAll),this.zF("select_all",e.selectAll),this.zF("deselect_one",e.deselectOne),this.zF("select_one",e.selectOne)]).join(""),onClick:{dbllist_button:function(e,t,i){this.getTopParentView().AF(i.getAttribute("action"))}}};return this.s.buttons&&(t.template=this.s.buttons),t},zF:function(e,t){return"<button class='dbllist_button' action='"+e+"'>"+t+"</button>"},BF:function(e,t,i,s){var n={view:"list",select:"multiselect",multiselect:"touch",id:e,action:t,drag:!0,type:{margin:3,id:e},on:{onBeforeDrop:function(e){var t=e.from,i=e.to,s=t.getTopParentView();if(s===this.getTopParentView()){var n="select_one"!=i.s.action;s.select(e.source,n)}return!1},onItemDblClick:function(){return this.getTopParentView().AF(this.config.action)}}};return this.s.list&&jeeplus.extend(n,this.s.list,!0),i&&(n={rows:[{view:"label",label:i},n]}),s?{rows:[n,{view:"label",height:20,label:s,css:"bottom_label"}]}:n},HE:function(){var e=[{margin:10,type:"clean",cols:[this.BF("left","select_one",this.s.labelLeft,this.s.labelBottomLeft),this.yF(),this.BF("right","deselect_one",this.s.labelRight,this.s.labelBottomRight)]}];this.cols_setter(e)},AF:function(e){var t=null,i=!1;"select_all"===e?(t=this.$$("left").data.order,i=!0):"select_one"===e?(t=this.$$("left").getSelectedId(!0),i=!0):"deselect_all"===e?(t=this.$$("right").data.order,i=!1):"deselect_one"===e&&(t=this.$$("right").getSelectedId(!0),i=!1),this.select(t,i)},select:function(e,t){var i;if("object"!=typeof e&&(e=[e]),t)for(i=0;i<e.length;i++)this.uF[e[i]]=!0;else for(i=0;i<e.length;i++)delete this.uF[e[i]];this.QE(),this.callEvent("onChange",[])},xF:function(e,t){jeeplus.ui.freeze(jeeplus.bind(e,this),!1),t&&(this.$$("left").s.autoheight||this.$$("right").s.autoheight)&&this.resize()},QE:function(){var e=this.$$("left"),t=this.$$("right");e&&this.xF(function(){e.filter(this.wF),t.filter(this.vF)},!0)},focus:function(){jeeplus.UIManager.setFocus(this)},value_setter:function(e){this.setValue(e)},setValue:function(e){this.uF={},"object"!=typeof e&&(e=e.toString().split(","));for(var t=0;t<e.length;t++)this.uF[e[t]]=!0;this.QE()},getValue:function(){var e=[];for(var t in this.uF)e.push(t);return e.join(",")}},jeeplus.AtomDataLoader,jeeplus.IdSpace,jeeplus.ui.layout),jeeplus.i18n.dbllist={selectAll:"<span class='jeeplus_icon fa-angle-double-right'></span>",selectOne:"<span class='jeeplus_icon fa-angle-right'></span>",deselectAll:"<span class='jeeplus_icon fa-angle-double-left'></span>",deselectOne:"<span class='jeeplus_icon fa-angle-left'></span>"},function(){function o(e){return e.tagName?e.tagName.toLowerCase():null}function h(e,t){if(!e.getAttribute)return null;var i=e.getAttribute(t);return i?i.toLowerCase():null}function u(){var e=o(this);return t[e]?t[e](this):t.other(this)}function c(e){var t=o(this);return i[t]?i[t](this,e):i.other(this,e)}var t={radio:function(e){for(var t=0;t<e.length;t++)if(e[t].checked)return e[t].value;return""},input:function(e){return"checkbox"===h(e,"type")?e.checked:e.value},textarea:function(e){return e.value},select:function(e){var t=e.selectedIndex;return e.options[t].value},other:function(e){return e.innerHTML}},i={radio:function(e,t){for(var i=0;i<e.length;i++)e[i].checked=e[i].value==t},input:function(e,t){"checkbox"===h(e,"type")?e.checked=!!t:e.value=t},textarea:function(e,t){e.value=t},select:function(e,t){e.value=t||(e.firstElementChild.value||t)},other:function(e,t){e.innerHTML=t}};jeeplus.protoUI({name:"htmlform",$init:function(e){this.elements={},this.mr=!1,e.content&&(e.container==e.content||!e.container&&e.content==document.body)&&(this.nr=!0)},content_setter:function(e){if(e=jeeplus.toNode(e),this.nr)for(;1<e.childNodes.length;)this.x.childNodes[0].appendChild(e.childNodes[0]);else this.x.childNodes[0].appendChild(e);return this.pc(),!0},render:function(){jeeplus.ui.template.prototype.render.apply(this,arguments),this.pc()},pc:function(){var e=this.x.querySelectorAll("[name]");this.elements={};for(var t=0;t<e.length;t++){var i=e[t],s=h(i,"name");if(s){var n="button"===o(i),l=h(i,"type"),a=n||"button"===l||"submit"===l;if("radio"===l){var r=this.elements[s]||[];r.tagName="radio",r.push(i),i=r}(this.elements[s]=i).getValue=u,i.setValue=c,i.Ce=!a,i.s={defaultValue:i.getValue()}}}return this.elements},Te:function(e,t){this.Qe(e,t);var i=this.x.querySelector('[name="'+e+'"]');i&&jeeplus.html.addCss(i,"invalid")},Qe:function(e,t){var i=this.x.querySelector('[name="'+e+'"]');i&&jeeplus.html.removeCss(i,"invalid")}},jeeplus.ui.template,jeeplus.Values)}(),function(){var n,i;jeeplus.protoUI({name:"google-map",$init:function(e){this.$view.innerHTML="<div class='jeeplus_map_content' style='width:100%;height:100%'></div>",this.w=this.$view.firstChild,this.iF=jeeplus.promise.defer(),this.data.provideApi(this,!0),this.$ready.push(this.render)},getMap:function(e){return e?this.iF:this.eo},aG:function(e){return jeeplus.bind(function(){"function"==typeof e&&e(),n=n||window.google,this.mE.call(this)},this)},render:function(){if(void 0===window.google||void 0===window.google.maps){if(!i){(i=document.createElement("script")).type="text/javascript";var e=this.s,t=e.src||"//maps.google.com/maps/api/js";t+=-1===t.indexOf("?")?"?":"&",e.key&&(t+="&key="+e.key),e.libraries&&(t+="&libraries="+e.libraries),i.src=t,document.getElementsByTagName("head")[0].appendChild(i)}i.onload=this.aG(i.onload)}else this.aG()()},mE:function(){var e=this.config;this.isVisible(e.id)&&(this.eo=new n.maps.Map(this.w,{zoom:e.zoom,center:new n.maps.LatLng(e.center[0],e.center[1]),mapTypeId:n.maps.MapTypeId[e.mapType]}),this.iF.resolve(this.eo))},center_setter:function(e){return this.eo&&this.eo.setCenter(new n.maps.LatLng(e[0],e[1])),e},mapType_setter:function(e){return this.eo&&this.eo.setMapTypeId(n.maps.MapTypeId[e]),e},zoom_setter:function(e){return this.eo&&this.eo.setZoom(e),e},layerType_setter:function(e){return"heatmap"==e&&(this.config.libraries="visualization"),this.nE[e]&&(jeeplus.extend(this,this.nE[e],!0),this.data.attachEvent("onStoreUpdated",jeeplus.bind(function(){this.iF.then(jeeplus.bind(function(){this.drawData.call(this,arguments)},this))},this))),e},defaults:{zoom:5,center:[39.5,-98.5],mapType:"ROADMAP",layerType:"marker"},$setSize:function(){jeeplus.ui.view.prototype.$setSize.apply(this,arguments),this.eo&&n.maps.event.trigger(this.eo,"resize")},$onLoad:function(e){return!this.eo&&(this.iF.then(jeeplus.bind(function(){this.parse(e)},this)),!0)},nE:{marker:{drawData:function(e,t,i){switch(i){case"add":case"update":t.$marker=this.oE(t);break;case"delete":t.$marker.setMap(null);break;default:this.data.each(function(e){e.$marker=this.oE(e)},this)}},clearAll:function(e){this.data.each(function(e){e.$marker.setMap(null)}),this.data.clearAll(e)},showItem:function(e){var t=this.getItem(e);this.eo.setCenter(new n.maps.LatLng(t.lat,t.lng))},oE:function(e){var t={};for(var i in e)t[i]=e[i];t.position=new n.maps.LatLng(e.lat,e.lng),t.map=e.hidden?null:this.eo;var s=e.$marker;return s?e.$marker.setMap(t.map):(s=new n.maps.Marker(t),this.h(s)),this.callEvent("onItemRender",[e]),s},h:function(e){var t=this;e.addListener("click",function(){t.callEvent("onItemClick",[this.id,this])}),e.getDraggable()&&(e.addListener("dragend",function(){t.pE(this,!0)}),e.addListener("drag",function(){t.pE(this)}))},pE:function(e,t){var i=this.getItem(e.id),s=e.getPosition(),n=t?"onAfterDrop":"onDrag";i.lat=s.lat(),i.lng=s.lng(),this.callEvent(n,[i.id,i])}},heatmap:{heatmapConfig_setter:function(e){return e||{}},drawData:function(){this.jF&&(this.jF.setMap(null),this.jF=null);var t=[];if(this.data.each(function(e){t.push(this.qE(e))},this),t.length){var e=jeeplus.extend(this.config.heatmapConfig,{data:t,map:this.eo},!0);this.jF=new n.maps.visualization.HeatmapLayer(e),this.callEvent("onHeatMapRender",[this.jF])}},getHeatmap:function(){return this.jF},qE:function(e){var t={};for(var i in e)t[i]=e[i];return t.location=new n.maps.LatLng(e.lat,e.lng),t}}}},jeeplus.DataLoader,jeeplus.EventSystem,jeeplus.ui.view)}(),function(){var s,e;jeeplus.protoUI({name:"geochart",defaults:{chart:{displayMode:"auto",region:"world",resolution:"countries"}},$init:function(e){this.$view.innerHTML="<div class='jeeplus_map_content' style='width:100%;height:100%'></div>",this.w=this.$view.firstChild,this.iF=jeeplus.promise.defer(),e.chart=jeeplus.extend(e.chart||{},this.defaults.chart),this.data.provideApi(this,!0),this.$ready.push(this.render),this.data.attachEvent("onClearAll",jeeplus.bind(this.vG,this)),this.data.attachEvent("onStoreUpdated",jeeplus.bind(this.wG,this))},getMap:function(e){return e?this.iF:this.eo},aG:function(e){return jeeplus.bind(function(){"function"==typeof e&&e(),s=s||window.google,this.mE()},this)},render:function(){void 0===window.google||void 0===window.google.charts?(e||((e=document.createElement("script")).type="text/javascript",e.src="//www.gstatic.com/charts/loader.js",document.getElementsByTagName("head")[0].appendChild(e)),e.onload=this.aG(e.onload)):this.aG()()},mE:function(){s.visualization&&s.visualization.GeoChart?(this.eo=new s.visualization.GeoChart(this.w),this.xG(),this.iF.resolve(this.eo)):(s.charts.load("current",{packages:["geochart"],mapsApiKey:this.s.key}),s.charts.setOnLoadCallback(jeeplus.bind(function(){this.mE()},this)))},$onLoad:function(e,t){return!this.eo&&(this.iF.then(jeeplus.bind(function(){this.parse(e,this.s.datatype)},this)),!0)},wG:function(){if(this.eo){var l=this.fj&&this.fj.length?this.fj:this.yG(),a=[];if(this.data.each(function(e,t){for(var i=[],s=0;s<l.length;s++){var n=e[l[s].label];"number"==l[s].type?n*=1:"tooltip"==l[s].role&&(n=this.s.tooltip(e)),i.push(n)}a.push(i)},this),l.length){for(var e=new s.visualization.DataTable,t=0;t<l.length;t++)e.addColumn(l[t]);e.addRows(a);var i=new s.visualization.DataView(e);this.eo.draw(i,this.s.chart)}else this.eo.draw(s.visualization.arrayToDataTable([["",""]]),{})}else this.eo||this.iF.then(jeeplus.bind(this.wG,this))},setDisplayMode:function(e){this.s.chart.displayMode=e,this.refresh()},setRegion:function(e){this.s.chart.region=e,this.refresh()},refresh:function(){this.eo.clearChart(),this.wG()},tooltip_setter:function(e){var t=this.s.chart.tooltip;return this.s.chart.tooltip=jeeplus.extend(t||{},{isHtml:!0}),jeeplus.template(e)},$setSize:function(e,t){jeeplus.ui.view.prototype.$setSize.apply(this,arguments)&&this.eo&&(jeeplus.extend(this.s,{width:e,height:t}),this.refresh())},vG:function(){this.fj=null,this.wG()},zG:function(e,t){if(!e||jeeplus.isUndefined(e[t]))return"string";var i=typeof e[t];return"string"!=i||isNaN(1*e[t])||(i="number"),i},yG:function(e){var t=this.s.columns||[];e=this.data.pull[this.data.order[0]];if(!t.length&&e)for(var i in e)"id"!==i&&t.push(i);for(var s=0;s<t.length;s++)"object"!=typeof t[s]&&(t[s]={type:this.zG(e,t[s]),label:t[s]});return this.s.tooltip&&t.push({type:"string",role:"tooltip",p:{html:!0}}),this.fj=t},xG:function(){s.visualization.events.addListener(this.eo,"error",jeeplus.bind(function(){this.callEvent("onMapError",arguments)},this)),s.visualization.events.addListener(this.eo,"ready",jeeplus.bind(function(){this.callEvent("onMapReady",arguments)},this)),s.visualization.events.addListener(this.eo,"regionClick",jeeplus.bind(function(){this.callEvent("onRegionClick",arguments)},this)),s.visualization.events.addListener(this.eo,"select",jeeplus.bind(function(){var e=this.eo.getSelection()[0],t=e||this.AG;if(t){var i=this.data.order[t.row];this.AG=t,this.callEvent("onItemClick",[i,!!e])}},this))}},jeeplus.DataLoader,jeeplus.EventSystem,jeeplus.ui.view)}(),jeeplus.dp=function(e,t){if("object"==typeof e&&e.s&&(e=e.s.id),jeeplus.dp.ur[e]||t)return jeeplus.dp.ur[e];("string"==typeof e||"number"==typeof e)&&(e={master:jeeplus.$$(e)});var i=new jeeplus.DataProcessor(e),s=i.s.master.s.id;return jeeplus.dp.ur[s]=i,jeeplus.$$(s).attachEvent("onDestruct",function(){jeeplus.dp.ur[this.s.id]=null,delete jeeplus.dp.ur[this.s.id]}),i},jeeplus.dp.ur={},jeeplus.dp.$$=function(e){return jeeplus.dp.ur[e]},jeeplus.DataProcessor=jeeplus.proto({defaults:{autoupdate:!0,updateFromResponse:!1,mode:"post",operationName:"jeeplus_operation",trackMove:!1},$init:function(){this.reset(),this.vr=!1,this.name="DataProcessor",this.$ready.push(this.Mi)},reset:function(){this.zr=[]},url_setter:function(e){var t="";if("string"==typeof e){var i=e.split("->");1<i.length&&(e=i[1],t=i[0])}else e&&e.mode&&(t=e.mode,e=e.url);return t?jeeplus.proxy(t,e):e},master_setter:function(e){var t=e;return"DataStore"!=e.name&&(t=e.data),this.s.store=t,e},Mi:function(){this.s.store.attachEvent("onStoreUpdated",jeeplus.bind(this.Ar,this)),this.s.store.attachEvent("onDataMove",jeeplus.bind(this.Br,this))},ignore:function(e,t){var i=this.vr;this.vr=!0,e.call(t||this),this.vr=i},off:function(){this.vr=!0},on:function(){this.vr=!1},Cr:function(e){var t={};for(var i in e)0!==i.indexOf("$")&&(t[i]=e[i]);return t},save:function(e,t,i){t=t||"update",this.Dr(e,i||this.s.store.getItem(e),t)},Dr:function(e,t,i){if("object"==typeof e&&(e=e.toString()),!e||!0===this.vr||!i||"paint"==i)return!0;var s=this.s.store;s&&s.vf&&(t=s.vf(t));var n={id:e,data:this.Cr(t),operation:i};if(jeeplus.isUndefined(t.$parent)||(n.data.parent=t.$parent),"delete"!=n.operation){var l=this.s.master;l&&l.data&&l.data.getMark&&l.data.getMark(e,"jeeplus_invalid")&&(n.Er=!0),this.validate(null,n.data)||(n.Er=!0)}return this.Fr(n)&&this.zr.push(n),this.s.autoupdate&&this.send(),!0},Br:function(e,t,i,s){if(this.s.trackMove){var n=jeeplus.copy(this.s.store.getItem(e));this.s.store.order,n.jeeplus_move_index=t,n.jeeplus_move_id=s,n.jeeplus_move_parent=i,this.Dr(e,n,"order")}},Ar:function(e,t,i){switch(i){case"save":case"update":i="update";break;case"add":i="insert";break;case"delete":i="delete";break;default:return!0}return this.Dr(e,t,i)},Fr:function(e){for(var t=0;t<this.zr.length;t++){var i=this.zr[t];if(i.id==e.id)return"delete"==e.operation&&("insert"==i.operation?this.zr.splice(t,1):i.operation="delete"),i.data=e.data,i.Er=e.Er,!1}return!0},send:function(){this.Gr()},Gr:function(){if(this.s.url){for(var e=this.zr,t=[],i=this.s.url,s=0;s<e.length;s++){var n=e[s];if(!n.Hr&&!n.Er){var l=n.id,a=n.operation,r="object"!=typeof i||i.$proxy?i:i[a],o=r&&(r.$proxy||"function"==typeof r);if(r&&(this.s.store.uf&&this.s.store.uf(n.data),this.callEvent("onBefore"+a,[l,n]))){if(n.Hr=!0,!this.callEvent("onBeforeDataSend",[n]))return;n.data=this.Ir(n.data);var h=this.at({id:n.id,status:n.operation});r.$proxy?r.save?r.save(this.config.master,n,this,h):t.push(n):("insert"==a&&delete n.data.id,o?r(n.id,n.operation,n.data).then(function(e){e&&"function"==typeof e.json&&(e=e.json()),h.success("",e,-1)},function(e){h.error("",null,e)}):(n.data[this.s.operationName]=a,this.G(r,n.data,this.s.mode,a,h))),this.callEvent("onAfterDataSend",[n])}}}i.$proxy&&i.saveAll&&t.length&&i.saveAll(this.config.master,t,this,this.at({}))}},Ir:function(e){var t={};for(var i in e)0!==i.indexOf("$")&&(t[i]=e[i]);return t},G:function(e,t,i,s,n){return"function"==typeof e?e(t,s,n):void jeeplus.ajax()[i](e,t,n)},at:function(s){var n=this;return{success:function(e,t,i){return n.xr(s,e,t,i)},error:function(e,t,i){return n.yr(s,e,t,i)}}},attachProgress:function(e,t,i){this.attachEvent("onBeforeDataSend",e),this.attachEvent("onAfterSync",t),this.attachEvent("onAfterSaveError",i),this.attachEvent("onLoadError",i)},yr:function(e,t,i,s){e?this.Jr(!0,e.id,!1,e.status,!1,{text:t,data:i,loader:s}):(this.callEvent("onLoadError",arguments),jeeplus.callEvent("onLoadError",[t,i,s,this]))},Jr:function(e,t,i,s,n,l){var a=this.s.master,r=this.getItemState(t);if(r.Hr=!1,e){if(this.callEvent("onBeforeSaveError",[t,s,n,l]))return r.Er=!0,this.s.undoOnError&&a.s.undo&&(this.ignore(function(){a.undo(t)}),this.setItemState(t,!1)),void this.callEvent("onAfterSaveError",[t,s,n,l])}else this.setItemState(t,!1);i&&t!=i&&this.s.store.changeId(t,i),n&&"delete"!=s&&this.s.updateFromResponse&&this.ignore(function(){this.s.store.updateItem(i||t,n)}),this.s.undoOnError&&a.s.undo&&a.removeUndo(i||t),this.callEvent("onAfterSave",[n,t,l]),this.callEvent("onAfter"+s,[n,t,l])},processResult:function(e,t,i){var s=t&&("error"==t.status||"invalid"==t.status),n=!!t&&(t.newid||t.id);this.Jr(s,e.id,n,e.status,t,i)},xr:function(e,t,i,s){if(this.callEvent("onBeforeSync",[e,t,i,s]),-1===s)this.processResult(e,i,{});else{var n,l=this.s.url;if(l.$proxy&&l.result)l.result(e,this.s.master,this,t,i,s);else t&&(n=i.json(),!t||null!=n||(n={status:"error"})),this.processResult(e,n,{text:t,data:i,loader:s})}this.callEvent("onAfterSync",[e,t,i,s])},escape:function(e){return this.s.escape?this.s.escape(e):encodeURIComponent(e)},getState:function(){if(!this.zr.length)return!1;for(var e=this.zr.length-1;0<=e;e--)if(this.zr[e].Hr)return"saving";return!0},getItemState:function(e){var t=this.bt(e);return this.zr[t]||null},setItemState:function(e,t){if(t)this.save(e,t);else{var i=this.bt(e);-1<i&&this.zr.splice(i,1)}},bt:function(e){for(var t=-1,i=0;i<this.zr.length;i++)if(this.zr[i].id==e){t=i;break}return t}},jeeplus.Settings,jeeplus.EventSystem,jeeplus.ValidateData),function(){var u={};jeeplus.jsonp=function(e,t,i,s){var n=jeeplus.promise.defer(),l="jeeplus_jsonp_"+jeeplus.uid(),a=document.createElement("script");a.id=l,a.type="text/javascript";var r=document.getElementsByTagName("head")[0];"function"==typeof t&&(s=i,i=t,t={}),t||(t={}),t.jsonp="jeeplus.jsonp."+l,jeeplus.jsonp[l]=function(){i&&i.apply(s||window,arguments),n.resolve(arguments[0]),window.clearTimeout(u[l]),delete u[l],a.parentNode.removeChild(a),i=r=s=a=null,delete jeeplus.jsonp[l]},u[l]=window.setTimeout(function(){n.reject(),delete jeeplus.jsonp[l]},jeeplus.jsonp.timer);var o=[];for(var h in t)o.push(h+"="+encodeURIComponent(t[h]));return e+=(-1==e.indexOf("?")?"?":"&")+o.join("&"),a.src=e,r.appendChild(a),n},jeeplus.jsonp.timer=3e3}(),jeeplus.markup={namespace:"x",attribute:"data-",dataTag:"li",Ys:/-([a-z])/g,Zs:function(e){return e[1].toUpperCase()},Lr:{width:!0,height:!0,gravity:!0,margin:!0,padding:!0,paddingX:!0,paddingY:!0,minWidth:!0,maxWidth:!0,minHeight:!0,maxHeight:!0,headerRowHeight:!0},AA:{disabled:!0,hidden:!0},Mr:function(e,t){return jeeplus.ui.hasMethod(e,t)},init:function(e,t,i){e=e||document.body;for(var s=[],n=this.Nr(e),l=n.html,a=null,r=n.length-1;0<=r;r--)s[r]=n[r];for(r=0;r<s.length;r++){var o;(o=this.Or(s[r],l)).$scope=i,a=this.Pr(o,s[r],l,t)}return a},parse:function(e,t){"string"==typeof e&&(e=jeeplus.DataDriver[t||"xml"].toObject(e,e));var i=this.Nr(e,t);return this.Or(i[0],i.html)},Pr:function(e,t,i,s){return s?e.container=s:(e.container=t.parentNode,jeeplus.html.remove(t)),this.Mr(e.view,"setPosition")&&delete e.container,jeeplus.ui(e)},Nr:function(e){this.Qr=this.namespace?this.namespace+":":"",this.Rr=this.Qr+"ui";var t=e.getElementsByTagName(this.Rr);return!t.length&&e.documentElement&&e.documentElement.tagName==this.Rr&&(t=[e.documentElement]),!t.length&&this.namespace&&(!(t=e.getElementsByTagName("ui")).length&&e.documentElement&&"ui"==e.documentElement.tagName&&(t=[e.documentElement])),t.length||((t=this.Sr(e)).html=!0),t},Sr:function(e){if(e.getAttribute&&e.getAttribute(this.attribute+"view"))return[e];for(var t=e.querySelectorAll("["+this.attribute+"view]"),i=[],s=0;s<t.length;s++)t[s].parentNode.getAttribute(this.attribute+"view")||i.push(t[s]);return i},Or:function(e,t,i){var s=!1;if(!i){if("ui"==(c=this.Tr(e,t)))for(var n=e.childNodes,l=0;l<n.length;l++)if(1==n[l].nodeType)return this.Or(n[l],t);i={view:c},t&&"table"==e.tagName.toLowerCase()&&(i.data=e,i.datatype="htmltable",s=!0)}for(var a="cols"==i.view||"rows"==i.view||this.Mr(i.view,"addView"),r=[],o=0,h=!(t||e.style),u=e.firstChild;u;){if(1==u.nodeType){var c;if("data"==(c=this.Tr(u,t))){o=1;var d=u;u=u.nextSibling,i.data=this.Ur(d,t);continue}if("config"==c){this.Vr(u,i,t);var p=u;u=u.nextSibling,jeeplus.html.remove(p);continue}if("column"==c){o=1;var f=this.Wr(u,t);f.header=f.header||f.value,f.width=1*f.width||"",i.columns=i.columns||[],i.columns.push(f)}else if(c||a&&t){var g=this.Or(u,t,{view:c});"head"==g.view?i.head=g.rows?g.rows[0]:g.template:"body"==g.view?this.Mr(i.view,"addView")?r.push({body:g.rows?g.rows[0]:g.value,header:g.header||""}):i.body=g.rows?1==g.rows.length?g.rows[0]:{rows:g.rows}:g.value:r.push(g)}else if(h){o=1;var v=u.tagName;t&&(v=v.toLowerCase().replace(this.Ys,this.Zs)),i[v]=jeeplus.DataDriver.xml.tagToObject(u)}}u=u.nextSibling}if(this.Xr(e,i,t),r.length)i.stack?i[i.stack]=r:this.Mr(i.view,"setValues")?i.elements=r:"rows"==i.view?(i.view="layout",i.rows=r):"cols"==i.view?(i.view="layout",i.cols=r):this.Mr(i.view,"setValue")?i.cells=r:this.Mr(i.view,"getBody")?i.body=1==r.length?r[0]:{rows:r}:i.rows=r;else if(!s&&!o)if(!t||i.template||i.view&&"template"!=i.view){var m=this.Yr(e,t);if(m){var j="template";this.Mr(i.view,"setValue")&&(j="value"),i[j]=i[j]||m}}else i.view="template",i.content=e;return i},Zr:function(e){return!(0<e.replace(/\s+/gm,"").length)},$r:{body:1,head:1,data:1,rows:1,cols:1,cells:1,elements:1,ui:1,column:1,config:1},Vr:function(e,t,i){var s=this.Xr(e,{});s.name?delete(t[s.name]=s).name:s.stack?t[s.stack]=[]:t=s;for(var n=e.childNodes,l=0;l<n.length;l++){var a;a=1==n[l].nodeType&&"config"==n[l].tagName.toLowerCase()&&n[l].attributes.length?this.Vr(n[l],s,i):n[l].innerHTML,s.stack&&a&&t[s.stack].push(a)}return t},Tr:function(e,t){if(t)return e.getAttribute(this.attribute+"view")||("config"==e.tagName.toLowerCase()?"config":null);var i=e.tagName.toLowerCase();if(this.namespace){if(0===i.indexOf(this.Qr)||e.scopeName==this.namespace)return i.replace(this.Qr,"")}else if(jeeplus.ui[i]||this.$r[i])return i;return 0},Ur:function(e,t){for(var i=[],s=e.getElementsByTagName(jeeplus.markup.dataTag),n=0;n<s.length;n++){var l=s[n];if(l.parentNode.parentNode.tagName!=jeeplus.markup.dataTag){var a=this.Wr(l,t);l.className&&(a.$css=l.className),i.push(a)}}return jeeplus.html.remove(e),i},Yr:function(e,t){return e.style?e.innerHTML:e.firstChild&&(e.firstChild.wholeText||e.firstChild.data)||""},Wr:function(e,t){if(!t)return jeeplus.DataDriver.xml.tagToObject(e);var i=this.Xr(e,{},t);return!i.value&&e.childNodes.length&&(i.value=this.Yr(e,t)),i},Xr:function(e,t,i){for(var s=e.attributes,n=0;n<s.length;n++){var l=s[n].name;if(i){if(0!==l.indexOf(this.attribute))continue;l=l.replace(this.attribute,"").replace(this.Ys,this.Zs)}var a=s[n].value;-1!=a.indexOf("json://")&&(a=JSON.parse(a.replace("json://",""))),this.Lr[l]?a=parseInt(a,10):this.AA[l]&&(a=a&&"false"!==a&&"0"!=a),t[l]=a}return t}},function(){function r(e,t){var i=e.callback;o(!1),e.box.parentNode.removeChild(e.box),c=e.box=null,i&&i(t,e.details)}function a(e){if(c){var t=(e=e||event).which||event.keyCode;if(jeeplus.message.keyboard)return(13==t||32==t)&&r(c,!0),27==t&&r(c,!1),e.preventDefault&&e.preventDefault(),!(e.cancelBubble=!0)}}function o(e){o.cover&&o.cover.parentNode||((o.cover=document.createElement("DIV")).onkeydown=a,o.cover.className="jeeplus_modal_cover",document.body.appendChild(o.cover)),o.cover.style.display=e?"inline-block":"none"}function h(e,t,i){return"<div role='button' tabindex='0' aria-label='"+e+"' class='jeeplus_popup_button"+(i?" "+i:"")+"' result='"+t+"' ><div>"+e+"</div></div>"}function t(e,t,i){var s=e.tagName?e:function(s,e,t){var i=document.createElement("DIV");i.className=" jeeplus_modal_box jeeplus_"+s.type,i.setAttribute("jeeplusbox",1),i.setAttribute("role","alertdialog"),i.setAttribute("aria-label",s.title||""),i.setAttribute("tabindex","0");var n="";if(s.width&&(i.style.width=s.width+(jeeplus.rules.isNumber(s.width)?"px":"")),s.height&&(i.style.height=s.height+(jeeplus.rules.isNumber(s.height)?"px":"")),s.title&&(n+='<div class="jeeplus_popup_title">'+s.title+"</div>"),n+='<div class="jeeplus_popup_text"><span>'+(s.content?"":s.text)+'</span></div><div  class="jeeplus_popup_controls">',(e||s.ok)&&(n+=h(s.ok||"OK",!0,"confirm")),(t||s.cancel)&&(n+=h(s.cancel||"Cancel",!1)),s.buttons)for(var l=0;l<s.buttons.length;l++)n+=h(s.buttons[l],l);if(n+="</div>",i.innerHTML=n,s.content){var a=s.content;"string"==typeof a&&(a=document.getElementById(a)),"none"==a.style.display&&(a.style.display=""),i.childNodes[s.title?1:0].appendChild(a)}return i.onclick=function(e){var t=(e=e||event).target||e.srcElement;if(t.className||(t=t.parentNode),-1!=t.className.indexOf("jeeplus_popup_button")){var i=t.getAttribute("result");r(s,i="true"==i||"false"!=i&&i)}e.cancelBubble=!0},s.box=i,(e||t||s.buttons)&&(c=s),i}(e,t,i);e.hidden||o(!0),jeeplus.toNode(e.container||document.body).appendChild(s);var n=e.left||Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-s.offsetWidth)/2)),l=e.top||Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-s.offsetHeight)/2));return"top"==e.position?s.style.top="-3px":s.style.top=l+"px",s.style.left=n+"px",s.onkeydown=a,s.focus(),e.hidden&&jeeplus.modalbox.hide(s),s}function n(e){return t(e,!0,!1)}function l(e){return t(e,!0,!0)}function u(e){return t(e)}function i(e,t,i){return"object"!=typeof e&&("function"==typeof t&&(i=t,t=""),e={text:e,type:t,callback:i}),e}var c=null;jeeplus.event(document,"keydown",a,{capture:!0}),jeeplus.alert=function(){var e=i.apply(this,arguments);return e.type=e.type||"confirm",n(e)},jeeplus.confirm=function(){var e=i.apply(this,arguments);return e.type=e.type||"alert",l(e)},jeeplus.modalbox=function(){var e=i.apply(this,arguments);return e.type=e.type||"alert",u(e)},jeeplus.modalbox.hide=function(e){if(e){for(;e&&e.getAttribute&&!e.getAttribute("jeeplusbox");)e=e.parentNode;e&&e.parentNode.removeChild(e)}o(!1),c=null};var d=jeeplus.message=function(e,t,i,s){switch((e=function(e,t,i,s){return"object"!=typeof e&&(e={text:e,type:t,expire:i,id:s}),e.id=e.id||d.uid(),e.expire=e.expire||d.expire,e}.apply(this,arguments)).type=e.type||"info",e.type.split("-")[0]){case"alert":return n(e);case"confirm":return l(e);case"modalbox":return u(e);default:return function(e){d.area||(d.area=document.createElement("DIV"),d.area.className="jeeplus_message_area",d.area.style[d.position]="5px",document.body.appendChild(d.area)),d.area.setAttribute("role","alert"),d.area.setAttribute("aria-atomic",!0),d.hide(e.id);var t=document.createElement("DIV");return t.innerHTML="<div>"+e.text+"</div>",t.className="jeeplus_info jeeplus_"+e.type,t.onclick=function(){d.hide(e.id),e=null},jeeplus.$testmode&&(t.className+=" jeeplus_no_transition"),"bottom"==d.position&&d.area.firstChild?d.area.insertBefore(t,d.area.firstChild):d.area.appendChild(t),0<e.expire&&(d.timers[e.id]=window.setTimeout(function(){d.hide(e.id)},e.expire)),t.style.height=t.offsetHeight-2+"px",d.pull[e.id]=t,t=null,e.id}(e)}};d.seed=(new Date).valueOf(),d.uid=function(){return d.seed++},d.expire=4e3,d.keyboard=!0,d.position="top",d.pull={},d.timers={},d.hideAll=function(){for(var e in d.pull)d.hide(e)},d.hide=function(e){var t=d.pull[e];t&&t.parentNode&&(window.setTimeout(function(){t.parentNode.removeChild(t),t=null},2e3),t.style.height=0,t.className+=" hidden",d.area.removeAttribute("role"),d.timers[e]&&window.clearTimeout(d.timers[e]),delete d.pull[e])}}(),jeeplus.protoUI({name:"carousel",defaults:{scrollSpeed:"300ms",type:"clean",navigation:{},animate:!0},$init:function(e){this.x.className+=" jeeplus_carousel",this.Ft=null,this.y=null,this.Mh=0,this.$ready.unshift(this.Gt),this.$ready.push(this.Mi)},addView:function(e,t){var i=this.Ft.addView(e,t);return this.bG(),i},removeView:function(e){this.Ft.removeView(e),this.bG()},Qb:function(e,t){this.Ft.Qb(e,t),this.bG()},bG:function(){this.q=this.Ft.q,this.Ch(),this.setActiveIndex(Math.min(this.Mh,this.q.length-1))},Gt:function(){this.Ft&&this.Ft.destructor&&this.Ft.destructor();var e="";this.config.cols?(e="cols",this.mc=0):(e="rows",this.mc=1);var t={borderless:!0,type:"clean"};t[e]=jeeplus.copy(this.s[e]);for(var i=["type","margin","marginX","marginY","padding","paddingX","paddingY"],s={},n=0;n<i.length;n++)this.s[i[n]]&&(s[i[n]]=this.s[i[n]]);jeeplus.extend(t,s,!0),this.Ft=jeeplus.ui.A(t),(this.Ft.Xb=this).x.appendChild(this.Ft.x),this.q=this.Ft.q,this.Ft.fc=jeeplus.bind(jeeplus.ui.carousel.prototype.fc,this),this.Ft.adjustScroll=jeeplus.bind(jeeplus.ui.carousel.prototype.adjustScroll,this),jeeplus.attachEvent("onReconstruct",jeeplus.bind(function(e){e==this.Ft&&this.Ht()},this)),this.w=this.x.firstChild},DD:function(e,t){this.s.navigation.items&&"tab"===t.target.getAttribute("role")&&this.PD(e,t),jeeplus.ui.baseview.prototype.DD.call(this,e,t)},getChildViews:function(){return[this.Ft]},getLayout:function(){return this.Ft},Mi:function(){this.w.setAttribute("touch_scroll",this.mc?"y":"x"),this.Ft.attachEvent("onAfterScroll",jeeplus.bind(function(e){this.callEvent("onShow",[this.getActiveId()])},this)),jeeplus.ui.each(this.Ft,function(e){e.x.setAttribute("role","tabpanel")})},adjustScroll:function(e){var t,i=this.mc?this.dc:this.bc;return this.mc?(t=Math.round(e.f/i),e.f=t*i):(t=Math.round(e.e/i),e.e=t*i),this.Mh=-t,this.s.navigation&&this.Eh(),!0},fc:function(e){var t,i,s,n,l,a;for(s=-1,i=this.Ft,t=0;t<i.q.length;t++)if(i.q[t]==e){s=t;break}s<0||s==this.Mh||(this.Mh=s,n=i.mc?this.dc:this.bc,l=-(i.mc?0:s*n),a=-(i.mc?s*n:0),this.scrollTo(l,a),this.callEvent("onShow",[i.q[this.Mh].s.id]),this.s.navigation&&this.Ch())},scrollTo:function(e,t){jeeplus.Touch&&jeeplus.animate.isSupported()&&this.s.animate?jeeplus.Touch.Nf(this.w,e,t,this.s.scrollSpeed||"100ms"):(this.w.style.marginLeft=e+"px",this.w.style.marginTop=t+"px")},navigation_setter:function(e){return this.E(e,{type:"corner",buttons:!0,items:!0}),e},showNext:function(){this.Mh<this.Ft.q.length-1&&this.setActiveIndex(this.Mh+1)},showPrev:function(){0<this.Mh&&this.setActiveIndex(this.Mh-1)},setActiveIndex:function(e){var t=this.Ft.q[e].s.id;jeeplus.$$(t).show()},getActiveIndex:function(){return this.Mh},$getSize:function(e,t){var i=this.Ft.$getSize(0,0),s=jeeplus.ui.view.prototype.$getSize.call(this,e,t);return this.Ft.mc?(s[0]=Math.max(s[0],i[0]),s[1]=Math.min(s[1],i[1])):(s[2]=Math.max(s[2],i[2]),s[3]=Math.min(s[3],i[3])),s},$setSize:function(e,t){var i=this.Ft,s=i.q.length,n=jeeplus.ui.view.prototype.$setSize.call(this,e,t),l=this.dc*(i.mc?s:1),a=this.bc*(i.mc?1:s);n?(this.w.style.height=l+"px",this.w.style.width=a+"px",i.$setSize(a,l),this.Ht()):i.$setSize(a,l)},Ht:function(){var e=this.Ft,t=this.Mh||0,i=e.mc?this.dc:this.bc,s=-(e.mc?0:t*i),n=-(e.mc?t*i:0);this.scrollTo(s,n),this.s.navigation&&this.Ch()},getActiveId:function(){var e=this.Ft.q[this.Mh];return e?e.s.id:null},setActive:function(e){jeeplus.$$(e).show()}},jeeplus.EventSystem,jeeplus.NavigationButtons,jeeplus.ui.view),jeeplus.type(jeeplus.ui.list,{name:"uploader",template:"#name#  {common.removeIcon()}{common.percent()}<div style='float:right'>#sizetext#</div>",percent:function(e){return"transfer"==e.status?"<div style='width:60px; text-align:center; float:right'>"+e.percent+"%</div>":"<div class='jeeplus_upload_"+e.status+"'><span class='"+("error"==e.status?"error_icon":"fa-check jeeplus_icon")+"'></span></div>"},removeIcon:function(e){return"<div class='jeeplus_remove_upload'><span class='cancel_icon'></span></div>"},on_click:{jeeplus_remove_upload:function(e,t){jeeplus.$$(this.config.uploader).files.remove(t)}}}),jeeplus.UploadDriver={flash:{$render:function(e){window.swfobject||jeeplus.require("legacy/swfobject.js",!0);var t=this.s;t.swfId=t.swfId||"jeeplus_swf_"+jeeplus.uid(),this.re().innerHTML+="<div class='jeeplus_upload_flash'><div id='"+t.swfId+"'></div></div>",this._r=this.re().lastChild,swfobject.embedSWF(jeeplus.codebase+"/legacy/uploader.swf",t.swfId,"100%","100%","9",null,{uploaderId:t.id,ID:t.swfId,enableLogs:t.enableLogs?"1":"",paramName:t.inputName,multiple:t.multiple?"Y":""},{wmode:"transparent"}),swfobject.getFlashPlayerVersion(),jeeplus.UE(this.x,"click",jeeplus.bind(function(){250<new Date-(this.ds||0)&&this.fileDialog()},this)),this.files.attachEvent("onBeforeDelete",jeeplus.bind(this.as,this))},$applyFlash:function(e,t){return this[e].apply(this,t)},getSwfObject:function(){return swfobject.getObjectById(this.s.swfId)},fileDialog:function(){this.getSwfObject()&&this.getSwfObject().showDialog()},send:function(e){if("function"==typeof e&&(this.fs=e,e=0),e){var t=this.files.getItem(e);if("client"!==t.status)return!1;if(t.status="transfer",this.getSwfObject()){var i=this.rE(t),s=this.s.formData||{};"function"==typeof s&&(s=s.call(this));var n=jeeplus.extend(t.formData||{},s);this.getSwfObject().upload(e,i,n)}return!0}var l=this.files.data.order,a=!0;if(l.length)for(var r=0;r<l.length;r++)a=this.send(l[r])&&a;a&&this.gs()},$beforeAddFileToQueue:function(e,t,i){var s=t.split(".").pop(),n=this.ks(i);return this.callEvent("onBeforeFileAdd",[{id:e,name:t,size:i,sizetext:n,type:s}])},$addFileToQueue:function(e,t,i){if(this.files.exists(e))return!1;this.s.multiple||this.files.clearAll();var s=t.split(".").pop(),n={name:t,id:e,size:i,sizetext:this.ks(i),type:s,status:"client"};this.files.add(n),this.callEvent("onAfterFileAdd",[n]),e&&this.s.autosend&&this.send(e)},stopUpload:function(e){this.as(e)},as:function(e){var t=this.files.getItem(e);"transfer"==t.status&&(this.getSwfObject().uploadStop(e),t.status="client")},bs:function(){},$onUploadComplete:function(){this.s.autosend&&this.gs()},$onUploadSuccess:function(e,t,i){var s=this.files.getItem(e);s&&(s.status="server",s.progress=100,i.text&&"string"==typeof i.text&&(jeeplus.DataDriver.json.toObject(i.text),jeeplus.extend(s,i,!0)),this.callEvent("onFileUpload",[s,i]),this.callEvent("onChange",[]),this.files.updateItem(e))},$onUploadFail:function(e){var t=this.files.getItem(e);t.status="error",delete t.percent,this.files.updateItem(e),this.callEvent("onFileUploadError",[t,""])}},html5:{$render:function(e){if(this._r)this.w.firstChild.appendChild(this._r);else{this.files.attachEvent("onBeforeDelete",this.as);var t={type:"file",class:"jeeplus_hidden_upload",tabindex:-1};this.s.accept&&(t.accept=this.s.accept),this.s.multiple&&(t.multiple="true"),this.s.directory&&(t.webkitdirectory="true",t.mozdirectory="true",t.directory="true");var i=jeeplus.html.create("input",t);this._r=this.w.firstChild.appendChild(i),jeeplus.UE(this.x,"drop",jeeplus.bind(function(e){this.bs(e),jeeplus.html.preventEvent(e)},this)),jeeplus.UE(i,"change",jeeplus.bind(function(){if(this.cs(i.files),jeeplus.env.isIE){var e=document.createElement("form");e.appendChild(this._r),e.reset(),this.w.firstChild.appendChild(i)}else i.value=""},this)),jeeplus.UE(this.x,"click",jeeplus.bind(function(){250<new Date-(this.ds||0)&&this.fileDialog()},this)),jeeplus.UE(this.x,"dragenter",jeeplus.html.preventEvent),jeeplus.UE(this.x,"dragexit",jeeplus.html.preventEvent),jeeplus.UE(this.x,"dragover",jeeplus.html.preventEvent)}},kF:function(e){return e.isDirectory},lF:function(i,s,n){if(i.isFile)i.file(function(e){s.addFile(e,null,null,{name:n+"/"+e.name})});else if(i.isDirectory){i.createReader().readEntries(function(e){for(var t=0;t<e.length;t++)s.lF(e[t],s,(n?n+"/":"")+i.name)})}},bs:function(e){var t=e.dataTransfer.files,i=e.dataTransfer.items;if(this.callEvent("onBeforeFileDrop",[t,e])){i=i||t;for(var s=0;s<i.length;s++){var n=i[s];this.s.directory&&n.webkitGetAsEntry&&(n=n.webkitGetAsEntry()).isDirectory?this.lF(n,this,""):this.addFile(t[s])}}this.callEvent("onAfterFileDrop",[t,e])},fileDialog:function(e){this.ds=new Date,this.es=e;var t=this.x.getElementsByTagName("INPUT");t[t.length-1].click()},send:function(t){if("function"==typeof t&&(this.fs=t,t=0),t){var e=this.files.getItem(t);if("client"!==e.status)return!1;e.status="transfer";var i=new FormData;if(e.folder)for(c=0;c<e.folder.length;c++)i.append(this.config.inputName+c,e.folder[c],e.folder[c].webkitRelativePath);else i.append(this.config.inputName,e.file,e.name),this.s.directory&&i.append(this.config.inputName+"_fullpath",e.name);var s={},n=this.s.formData||{};"function"==typeof n&&(n=n.call(this));var l=jeeplus.extend(e.formData||{},n),a=new XMLHttpRequest,r=this.rE(e);if(jeeplus.callEvent("onBeforeAjax",["POST",r,l,a,s,i])){for(var o in l)i.append(o,l[o]);for(var o in(e.xhr=a).upload.addEventListener("progress",jeeplus.bind(function(e){this.$updateProgress(t,e.loaded/e.total*100)},this),!1),a.onload=jeeplus.bind(function(e){a.aborted||this.is(t)},this),a.open("POST",r,!0),s)a.setRequestHeader(o,s[o]);a.send(i)}return this.$updateProgress(t,0),!0}var h=this.files.data.order,u=!0;if(h.length)for(var c=0;c<h.length;c++)u=!this.send(h[c])&&u;u&&this.gs()},is:function(e){var t=this.files.getItem(e);if(t){var i=null;t.xhr.status<400&&(i=jeeplus.DataDriver[this.s.datatype||"json"].toObject(t.xhr.responseText)),i&&"error"!=i.status?this.js(e,i):(t.status="error",delete t.percent,this.files.updateItem(e),this.callEvent("onFileUploadError",[t,i])),delete t.xhr}},stopUpload:function(e){jeeplus.bind(this.as,this.files)(e)},as:function(e){var t=this.getItem(e);void 0!==t.xhr&&(t.xhr.aborted=!0,t.xhr.abort(),delete t.xhr,t.status="client")}}},jeeplus.protoUI({name:"uploader",defaults:{autosend:!0,multiple:!0,inputName:"upload"},$cssName:"button",Ce:!0,on_click:{jeeplus_hidden_upload:function(){return!1}},send:function(){},fileDialog:function(){},stopUpload:function(){},$init:function(e){var t=jeeplus.UploadDriver.html5;this.files=new jeeplus.DataCollection,this.Ns=[this.files],(jeeplus.isUndefined(XMLHttpRequest)||jeeplus.isUndefined((new XMLHttpRequest).upload))&&(t=jeeplus.UploadDriver.flash),jeeplus.extend(this,t,!0)},$setSize:function(e,t){jeeplus.ui.view.prototype.$setSize.call(this,e,t)&&this.render()},apiOnly_setter:function(e){return jeeplus.delay(this.render,this),this.$apiOnly=e},cs:function(e){for(var t=0;t<e.length;t++)this.addFile(e[t])},link_setter:function(e){return e&&jeeplus.delay(function(){var e=jeeplus.$$(this.s.link);if(!e){var t=this.getTopParentView();t.$$&&(e=t.$$(this.s.link))}e.sync&&e.filter?e.sync(this.files):e.setValues&&this.files.data.attachEvent("onStoreUpdated",function(){e.setValues(this)}),e.s.uploader=this.s.id},this),e},addFile:function(e,t,i,s){var n=null;"object"==typeof e&&(e=(n=e).name,t=n.size);var l=this.ks(t);i=i||e.split(".").pop();var a={file:n,name:e,id:jeeplus.uid(),size:t,sizetext:l,type:i,context:this.es,status:"client"};if(this.s.directory&&n.webkitRelativePath&&(a.name=n.webkitRelativePath),s&&jeeplus.extend(a,s,!0),this.callEvent("onBeforeFileAdd",[a])){this.s.multiple||this.files.clearAll();var r=this.files.add(a);this.callEvent("onAfterFileAdd",[a]),r&&this.s.autosend&&this.send(r)}return a},rE:function(e){var t=this.s.upload,i=jeeplus.extend(e.urlData||{},this.s.urlData||{});if(t&&i){var s=[];for(var n in i)s.push(encodeURIComponent(n)+"="+encodeURIComponent(i[n]));s.length&&(t+=(-1==t.indexOf("?")?"?":"&")+s.join("&"))}return t},addDropZone:function(e,t){var i=jeeplus.toNode(e),s="";t&&(s=" "+jeeplus.html.createCss({content:'"'+t+'"'},":before"));var n="jeeplus_drop_file"+s,l=null;jeeplus.UE(i,"dragover",jeeplus.html.preventEvent),jeeplus.UE(i,"dragover",function(e){jeeplus.html.addCss(i,n,!0),l&&(clearTimeout(l),l=null)}),jeeplus.UE(i,"dragleave",function(e){l=setTimeout(function(){jeeplus.html.removeCss(i,n)},150)}),jeeplus.UE(i,"drop",jeeplus.bind(function(e){return jeeplus.html.removeCss(i,n),this.bs(e),jeeplus.html.preventEvent(e)},this))},ks:function(e){for(var t=0;1024<e;)t++,e/=1024;return Math.round(100*e)/100+" "+jeeplus.i18n.fileSize[t]},js:function(e,t){var i=this.files.getItem(e);jeeplus.extend(i,t,!0),i.status="server",i.progress=100,this.callEvent("onFileUpload",[i,t]),this.callEvent("onChange",[]),this.files.updateItem(e),this.isUploaded()&&this.gs(t)},gs:function(e){this.callEvent("onUploadComplete",[e]),this.fs&&(this.fs.call(this,e),this.fs=0)},isUploaded:function(){for(var e=this.files.data.order,t=0;t<e.length;t++)if("server"!=this.files.getItem(e[t]).status)return!1;return!0},$onUploadComplete:function(){},$updateProgress:function(e,t){this.files.getItem(e).percent=Math.round(t),this.files.updateItem(e)},setValue:function(e){"string"==typeof e&&e&&(e={value:e,status:"server"}),this.files.clearAll(),e&&this.files.parse(e),this.callEvent("onChange",[])},getValue:function(){var t=[];return this.files.data.each(function(e){"server"==e.status&&t.push(e.value||e.name)}),t.join(",")}},jeeplus.ui.button),jeeplus.html.addMeta=function(e,t){document.getElementsByTagName("head").item(0).appendChild(jeeplus.html.create("meta",{name:e,content:t}))},function(){function i(){var e=!!(window.orientation%180);jeeplus.ui.orientation!==e&&(jeeplus.ui.orientation=e,jeeplus.callEvent("onRotate",[e]))}jeeplus.env.touch&&(jeeplus.ui.orientation=!!((jeeplus.isUndefined(window.orientation)?90:window.orientation)%180),jeeplus.event(window,"onorientationchange"in window?"orientationchange":"resize",i)),jeeplus.ui.fullScreen=function(){if(jeeplus.env.touch){jeeplus.html.addMeta("apple-mobile-web-app-capable","yes"),jeeplus.html.addMeta("viewport","initial-scale=1, maximum-scale=1, user-scalable=no, shrink-to-fit=no");function e(){var e=window.innerWidth,t=window.innerHeight;t&&(document.body.style.height=t+"px",document.body.style.width=e+"px"),jeeplus.ui.PG=!1,jeeplus.ui.resize()}function t(){jeeplus.ui.PG=!0,jeeplus.delay(e,null,[],500)}jeeplus.attachEvent("onRotate",t),i(),jeeplus.delay(t)}}}(),jeeplus.history={track:function(e,t){if(this.ls(e,t),this.cG&&jeeplus.$$(this.dG).detachEvent(this.cG),e){this.dG=e;function i(){jeeplus.history.ms||s.getValue&&jeeplus.history.push(e,s.getValue())}var s=jeeplus.$$(e);s.getActiveId?this.cG=s.attachEvent("onViewChange",i):this.cG=s.attachEvent("onChange",i)}},ns:function(e,t){jeeplus.history.ms=1,(e=jeeplus.$$(e)).callEvent("onBeforeHistoryNav",[t])&&e.setValue&&e.setValue(t),jeeplus.history.ms=0},push:function(e,t,i){e=jeeplus.$$(e);var s="";t&&(s="#!/"+t),jeeplus.isUndefined(i)&&(i=e.getValue?e.getValue():t),window.history.pushState({jeeplus:!0,id:e.s.id,value:i},"",s)},ls:function(e,t){jeeplus.event(window,"popstate",function(e){e.state&&e.state.jeeplus&&jeeplus.history.ns(e.state.id,e.state.value)});var i=window.location.hash;jeeplus.noanimate=!0,i&&0===i.indexOf("#!/")?jeeplus.history.ns(e,i.replace("#!/","")):t&&(jeeplus.history.push(e,t),jeeplus.history.ns(e,t)),jeeplus.noanimate=!1,this.ls=function(){}}},jeeplus.protoUI({name:"slider",$touchCapture:!0,defaults:{min:0,max:100,value:50,step:1,title:!1,moveTitle:!0,template:function(e,t){var i,s=t.qs="x"+jeeplus.uid(),n="<div class='jeeplus_slider_title"+(e.moveTitle?" jeeplus_slider_move":"")+"'"+(!e.moveTitle&&e.vertical?" style='line-height:"+(e.aheight-2*e.inputPadding)+"px;'":"")+"></div>",l="<div class='jeeplus_slider_left'>&nbsp;</div>",a="<div class='jeeplus_slider_right'></div>",r="<div class='jeeplus_slider_handle' role='slider' aria-label='"+e.label+(e.title?" "+e.title(e):"")+"' aria-valuemax='"+e.max+"' aria-valuemin='"+e.min+"' aria-valuenow='"+e.value+"' tabindex='0' id='"+s+"'>&nbsp;</div>";return i=e.vertical?"<div class='jeeplus_slider_box'>"+a+l+r+"</div>"+n:n+"<div class='jeeplus_slider_box'>"+l+a+r+"</div>",t.$renderInput(e,i,s)}},type_setter:function(e){this.x.className+=" jeeplus_slider_"+e},title_setter:function(e){return"string"==typeof e?jeeplus.template(e):e},rs:function(){return this.$view.querySelector(".jeeplus_slider_handle")},oe:function(){var e=this.rs(),t=this.s;if(e){var i=t.vertical?this.dc:this.Ee(t),s=t.value%t.step?Math.round(t.value/t.step)*t.step:t.value,n=t.max-t.min;s=Math.max(Math.min(s,t.max),t.min),s=t.vertical?n-(s-t.min):s-t.min;var l=Math.ceil((i-2*this.mF)*s/n),a=i-2*this.mF-l,r=t.vertical?"top":"left",o=t.vertical?"height":"width";e.style[r]=this.mF+l-this.nF/2+"px",e.parentNode.style[o]=i+"px",a=Math.min(Math.max(a,2*this.oF),i-2*this.mF-2*this.oF),l=Math.min(Math.max(l,2*this.oF),i-2*this.mF-2*this.oF);var h=e.previousSibling;h.style[o]=a+"px",h.previousSibling.style[o]=l+"px",this.BG(e,l,a,r)}},BG:function(e,t,i,s){var n=this.s;if(this.s.title){var l=e.parentNode[n.vertical?"nextSibling":"previousSibling"];if(l.innerHTML=this.s.title(this.s,this),this.s.moveTitle){var a=0;if(n.vertical)a=t+2*this.oF-this.nF/2;else{var r=l.clientWidth/2,o=t<r?r-t-2*this.oF:0,h=i<r?r-i-2*this.oF-this.nF/2:0;a=this.mF+t-r+o-h}l.style[s]=a+"px"}}},sE:function(){this.rs().setAttribute("aria-valuenow",this.s.value)},refresh:function(){var e=this.rs();e&&(this.sE(),this.s.title&&e.setAttribute("aria-label",this.s.label+" "+this.s.title(this.s,this)),this.oe())},$setValue:function(){this.refresh()},$getValue:function(){return this.s.value},$init:function(e){jeeplus.env.touch?this.attachEvent("onTouchStart",jeeplus.bind(this.ss,this)):jeeplus.UE(this.x,"mousedown",jeeplus.bind(this.ss,this)),jeeplus.UE(this.$view,"keydown",jeeplus.bind(this.tE,this)),e.vertical&&(e.height=e.height||jeeplus.skin.$active.vSliderHeight,this.x.className+=" jeeplus_slider_vertical",this.mF=jeeplus.skin.$active.vSliderPadding)},$skin:function(){this.nF=jeeplus.skin.$active.sliderHandleWidth,this.mF=jeeplus.skin.$active.sliderPadding,this.oF=jeeplus.skin.$active.sliderBorder},tE:function(e){var t=e.keyCode,i=this.s,s=i.value;if(32<t&&t<41){jeeplus.html.preventEvent(e);var n=e.target||e.srcElement,l=/jeeplus_slider_handle_(\d)/.exec(n.className);if(this.My=l?parseInt(l[1],10):-1,l&&(s=i.value[this.My]),s=s<i.min?i.min:s>i.max?i.max:s,35===t)s=i.min;else if(36===t)s=i.max;else{var a=37===t||40===t||34===t?-1:1;(33===t||34===t||1<i.step)&&(a*=i.step),s=1*s+a}if(l){var r=i.value[this.My?0:1];s=this.My&&s<=r||!this.My&&r<=s?r:s}if(s>=i.min&&s<=i.max){if(l){for(var o=[],h=0;h<i.value.length;h++)o[h]=h===this.My?s:i.value[h];s=o}this.setValue(s),this.My=-1}}},ss:function(e){var t=e.target||e.srcElement;this.Ky&&this.Ky(e);var i=this.s.value;return jeeplus.isArray(i)&&(i=jeeplus.copy(i)),-1!=t.className.indexOf("jeeplus_slider_handle")?(this.$x=i,this.ts.apply(this,arguments)):void(-1!=t.className.indexOf("jeeplus_slider")&&(this.$x=i,this.s.value=this.us.apply(this,arguments),this.ts(e)))},ts:function(e){jeeplus.env.touch?this.vs=[this.attachEvent("onTouchMove",jeeplus.bind(this.ws,this)),this.attachEvent("onTouchEnd",jeeplus.bind(this.xs,this))]:this.vs=[jeeplus.event(document.body,"mousemove",jeeplus.bind(this.ws,this)),jeeplus.event(window,"mouseup",jeeplus.bind(this.xs,this))],jeeplus.html.addCss(document.body,"jeeplus_noselect")},xs:function(e){this.vs&&(jeeplus.env.touch?(jeeplus.detachEvent(this.vs[0]),jeeplus.detachEvent(this.vs[1])):(jeeplus.eventRemove(this.vs[0]),jeeplus.eventRemove(this.vs[1])),this.vs=[]),jeeplus.html.removeCss(document.body,"jeeplus_noselect");var t=this.s.value;jeeplus.isArray(t)&&(t=jeeplus.copy(t)),this.s.value=this.$x,this.setValue(t),this.rs(this.My).focus(),this.My=-1},ws:function(e){this.s.value=this.us.apply(this,arguments),this.refresh(),this.callEvent("onSliderDrag",[])},us:function(e,t){var i,s=this.s.vertical?"y":"x";return i=jeeplus.env.touch?t?t[s]:e[s]:jeeplus.html.pos(e)[s],this.ys(i)},ys:function(e){var t=this.s,i=t.max-t.min,s=t.vertical?"y":"x",n=jeeplus.html.offset(this.rs().parentNode)[s]+this.mF,l=(t.vertical?this.dc:this.Ee(t))-2*this.mF,a=l?(e-n)*i/l:0;return t.vertical&&(a=i-a),a=Math.round((a+t.min)/t.step)*t.step,Math.max(Math.min(a,t.max),t.min)},De:function(){}},jeeplus.ui.text),jeeplus.protoUI({name:"rangeslider",$cssName:"slider jeeplus_rangeslider",defaults:{separator:",",value:"20,80",template:function(e,t){var i="x"+jeeplus.uid();t.qs=[i+"_0",i+"_1"];var s="role='slider' aria-label='"+e.label+(e.title?" "+e.title(e):"")+"' aria-valuemax='"+e.max+"' aria-valuemin='"+e.min+"' tabindex='0'",n="<div class='jeeplus_slider_handle jeeplus_slider_handle_0' id='"+t.qs[0]+"' "+s+" aria-valuenow='"+e.value[0]+"'>&nbsp;</div>";n+="<div class='jeeplus_slider_handle jeeplus_slider_handle_1' id='"+t.qs[1]+"' "+s+" aria-valuenow='"+e.value[1]+"'>&nbsp;</div>";var l="<div class='jeeplus_slider_title"+(e.moveTitle?" jeeplus_slider_move":"")+"'"+(!e.moveTitle&&e.vertical?" style='line-height:"+(e.aheight-t.mF-2*e.inputPadding)+"px;'":"")+"></div>";e.moveTitle&&(l="<div class='jeeplus_slider_title_box'>"+(l+l)+"</div>");var a,r="<div class='jeeplus_slider_right'>&nbsp;</div><div class='jeeplus_slider_left'></div>";return a=e.vertical?"<div class='jeeplus_slider_box'>"+r+n+"</div>"+l:l+"<div class='jeeplus_slider_box'>"+r+n+"</div>",t.$renderInput(e,a,i)}},value_setter:function(e){return jeeplus.isArray(e)||(e=e.toString().split(this.s.separator)),e.length<2&&(e[1]=e[0]),e[0]=parseFloat(e[0]),e[1]=parseFloat(e[1]),e},rs:function(e){return e=e&&0<=e?e:0,this.$view.querySelector(".jeeplus_slider_handle_"+(e||0))},Ly:function(e,t){var i,s,n;return s=(i=this.s).max-i.min,n=i.value[t]%i.step?Math.round(i.value[t]/i.step)*i.step:i.value[t],n=Math.max(Math.min(n,i.max),i.min),Math.ceil((e-2*this.mF)*(n-i.min)/s)},tH:function(e,t,i){var s=this.mF+t-this.nF/2*(i?-1:1);return(s=i?e-s:s)+"px"},uH:function(e,t,i,s){var n=t+this.mF+2*this.oF;return s&&(n=e-n-i),n+"px"},oe:function(){var e,t,i,s,n,l,a,r,o,h,u;t=this.rs(0),i=this.rs(1),e=this.s,jeeplus.isArray(e.value)||this.define("value",e.value),t&&(o=e.vertical?"height":"width",u=e.vertical?"top":"left",l=(h=e.vertical?this.dc:this.Ee(e))-2*this.mF-2*this.oF,s=this.Ly(h,0),a=(n=this.Ly(h,1))-s,t.style[u]=this.tH(h,s,e.vertical),i.style[u]=this.tH(h,n,e.vertical),(r=t.parentNode).style[o]=h+"px",r.firstChild.style[o]=l+"px",r.childNodes[1].style[o]=a+"px",r.childNodes[1].style[u]=this.uH(h,s,a,e.vertical),this.BG(t,[s,n],l,u))},vH:0,wH:function(e,t){jeeplus.isUndefined(this.vH)||(e[this.vH].style.visibility="visible"),jeeplus.isUndefined(t)||(e[t].style.visibility="hidden",this.vH=t)},BG:function(e,t,i,s){var n=this.s;if(this.s.title){var l=e.parentNode,a=n.vertical?"nextSibling":"previousSibling";if(n.moveTitle){for(var r=l[a].childNodes,o=[],h=0;h<2;h++)o.push(this.xH(r[h],n.value[h],t[h],i,s,h));var u=n.vertical?o[0]-o[1]-this.nF:o[1]-o[0],c=n.vertical?"clientHeight":"clientWidth";r[0][c]/2+r[1][c]/2>u?this.wH(r,jeeplus.isUndefined(this.My)?0:this.My?0:1):this.wH(r);for(h=0;h<2;h++)r[h].style[s]=o[h]+"px"}else l[a].innerHTML=this.s.title(this.s,this)}},xH:function(e,t,i,s,n,l){e.innerHTML=this.s.title({value:t},this);var a=e.clientWidth/2,r=0;return r=this.s.vertical?s-i-this.nF/2-(l?this.mF+this.config.inputPadding:0)+2*this.oF:(r=i+this.nF/2+2*this.oF-a,r=!l&&i<a?a-i+r:r,l&&s<a+i?r-a+(s-i):r)},sE:function(){for(var e=0;e<2;e++)this.rs(e).setAttribute("aria-valuenow",this.s.value[e])},Ky:function(e){var t=e.target||e.srcElement,i=/jeeplus_slider_handle_(\d)/.exec(t.className);this.My=i?parseInt(i[1],10):-1,i&&this.Ny(this.My)},setValue:function(e){var t=this.s.value,i="object"==typeof e?e.join(this.s.separator):e;return t.join(this.s.separator)!=i&&(this.s.value=e,this.se&&this.$setValue(e),void this.callEvent("onChange",[e,t]))},$getValue:function(){var e=this.s.value;return this.s.stringResult?e.join(this.s.separator):e},Ny:function(e){var t=this.rs(e),i=this.rs(1-e);-1==t.className.indexOf("jeeplus_slider_active")&&(t.className+=" jeeplus_slider_active"),i.className=i.className.replace(" jeeplus_slider_active","")},ys:function(e){var t=this.s,i=t.value,s=t.max-t.min,n=t.vertical?"y":"x",l=jeeplus.html.offset(this.rs().parentNode)[n],a=Math.ceil((e-l)*s/(t.vertical?this.dc:this.Ee(t)));a=Math.round((a+t.min)/t.step)*t.step,t.vertical&&(a=s-a);var r=null,o=jeeplus.html.offset(this.rs(0))[n],h=jeeplus.html.offset(this.rs(1))[n];if(o!=h||t.value[0]!=t.min&&t.value[0]!=t.max)if(0<=this.My)r=this.My;else if(o==h)r=e<o?0:1;else{r=Math.abs(o-e)<Math.abs(h-e)?0:1,this.My=r}else r=t.value[0]==t.min?1:0,this.Ny(r);return i[r]=r?Math.max(Math.min(a,t.max),i[0]):Math.max(Math.min(a,i[1]),t.min),i}},jeeplus.ui.slider),jeeplus.proxy.offline={$proxy:!0,storage:jeeplus.storage.local,cache:!1,data:"",zs:function(){this.cache||jeeplus.env.offline||(jeeplus.callEvent("onOfflineMode",[]),jeeplus.env.offline=!0)},As:function(){!this.cache&&jeeplus.env.offline&&(jeeplus.env.offline=!1,jeeplus.callEvent("onOnlineMode",[]))},load:function(s,n){var e={error:function(){var e=this.getCache()||this.data,t={responseText:e},i=jeeplus.ajax.prototype.J(t);this.zs(),jeeplus.ajax.$callback(s,n,e,i,t)},success:function(e,t,i){this.As(),jeeplus.ajax.$callback(s,n,e,t,i),this.setCache(e)}};this.cache&&this.getCache()?e.error.call(this):this.source.$proxy?this.source.load(this,e):jeeplus.ajax(this.source,e,this)},getCache:function(){return this.storage.get(this.Bs())},clearCache:function(){this.storage.remove(this.Bs())},setCache:function(e){this.storage.put(this.Bs(),e)},Bs:function(){return this.source.$proxy?this.source.source+"_$proxy$_data":this.source+"_$proxy$_data"},saveAll:function(e,t,i,s){this.setCache(e.serialize()),jeeplus.ajax.$callback(e,s,"",t)},result:function(e,t,i,s,n){for(var l=0;l<n.length;l++)i.processResult({id:n[l].id,status:n[l].operation},{},{})}},jeeplus.proxy.cache={init:function(){jeeplus.extend(this,jeeplus.proxy.offline)},cache:!0},jeeplus.proxy.local={init:function(){jeeplus.extend(this,jeeplus.proxy.offline)},cache:!0,data:[]},jeeplus.ActiveContent={$init:function(e){if(e.activeContent)for(var t in this.$ready.push(this.Ds),this.Es={},this.Fs={},this.Gs={},this.Hs={},e.activeContent)if(this[t]=this.Is(t),e.activeContent[t].earlyInit){var i=jeeplus.Xb;jeeplus.Xb=null,this[t].call(this,{},this,e.activeContent),jeeplus.Xb=i}},uE:function(){for(var e in this.Hs){var t=this.Hs[e];t.destructor&&t.destructor()}},Ds:function(){if(this.attachEvent("onDestruct",jeeplus.bind(this.uE,this)),jeeplus.UE(this.$view,"blur",function(e){if("BUTTON"!=(e.target||e.srcElement).tagName){var t=jeeplus.$$(e);if(t&&t!==this&&t.getValue&&t.setValue){t.getNode(e);var i=t.getValue();i!=t.s.value&&t.setValue(i)}}},{bind:this,capture:!0}),this.filter){for(var e in this.s.activeContent)this.type[e]=this[e],this[e]=this.Js(e);this.attachEvent("onBeforeRender",function(){this.type.masterUI=this}),this.type.masterUI=this}},Js:function(l){return function(e){for(var t=this.Hs[l],i=t.s.id,s=this.getItemNode(e).getElementsByTagName("DIV"),n=0;n<s.length;n++)if(s[n].getAttribute("view_id")==i){t.x=t.y=s[n];break}return t}},Ks:function(n,l,a){return function(e){if(e)for(var t=e.target||e.srcElement;t;){if(t.getAttribute&&t.getAttribute("view_id")){if(a.vE(n,t),a.locate){var i=a.locate(t.parentNode),s=a.Gs[l][i];n.s.value=s,n.s.$masterId=i}return t}t=t.parentNode}return n.x}},Ls:function(s,n){return function(e){var t=n.data;if(n.filter){var i=n.locate(this.x.parentNode);t=n.getItem(i),this.refresh(),n.Fs[s][i]=this.x.outerHTML||(new XMLSerializer).serializeToString(this.x),n.Gs[s][i]=e}t&&(t[s]=e)}},Is:function(a){return function(e,t,i){var s=t.Es?t:t.masterUI;if(!s.Es[a]){var n=document.createElement("DIV");i=i||s.s.activeContent;var l=jeeplus.ui(i[a],n);n.firstChild.setAttribute("onclick","event.processed = true; if (jeeplus.env.isIE8) event.srcElement.w_view = '"+l.s.id+"';"),l.getNode=s.Ks(l,a,s),l.attachEvent("onChange",s.Ls(a,s)),s.Hs[a]=l,s.Es[a]=n.innerHTML,s.Fs[a]={},s.Gs[a]={},l.$activeEl=l.$view}s.filter&&e[a]!=s.Gs[a]&&!jeeplus.isUndefined(e[a])&&((l=s.Hs[a]).blockEvent(),s.vE(l,l.$activeEl),l.$view.firstChild||l.refresh(),l.setValue(e[a]),l.refresh(),l.unblockEvent(),s.Gs[a][e.id]=e[a],s.Fs[a][e.id]=l.x.outerHTML||(new XMLSerializer).serializeToString(l.x));return s.Fs[a][e.id]||s.Es[a]}},vE:function(e,t){e.y=e.x=e.$view=t}},jeeplus.ProgressBar={$init:function(){jeeplus.isUndefined(this.cu)&&this.attachEvent&&(this.attachEvent("onBeforeLoad",this.showProgress),this.attachEvent("onAfterLoad",this.hideProgress),this.cu=null)},showProgress:function(l){if(!this.cu){var e="icon"==(l=jeeplus.extend({position:0,delay:2e3,type:"icon",icon:"refresh",hide:!1},l||{},!0)).type?"fa-"+l.icon+" fa-spin":"";if(this.cu=jeeplus.html.create("DIV",{class:"jeeplus_progress_"+l.type,role:"progressbar","aria-valuemin":"0","aria-valuemax":"100",tabindex:"0"},"<div class='jeeplus_progress_state "+e+"'></div>"),this.setPosition||(this.x.style.position="relative"),jeeplus.html.insertBefore(this.cu,this.x.firstChild,this.x),this.x.setAttribute("aria-busy","true"),!jeeplus.Touch.$active&&this.getScrollState){var t=this.getScrollState();this.x.scrollWidth!=this.$width&&(this.cu.style.left=t.x+"px"),this.x.scrollHeight!=this.$height&&("bottom"!=l.type?this.cu.style.top=t.y+"px":this.cu.style.top=t.y+this.$height-this.cu.offsetHeight+"px")}this.du=1}l&&"icon"!=l.type?jeeplus.delay(function(){if(this.cu){var e=l.position||1;if(this.cu.style[jeeplus.env.transitionDuration]===jeeplus.undefined&&l.delay){var t=0,i=0,s=e/l.delay*30,n=this;this.Oy&&(window.clearInterval(this.Oy),i=this.cu.firstChild.offsetWidth/this.cu.offsetWidth*100),this.Oy=window.setInterval(function(){30*t==l.delay?window.clearInterval(n.Oy):(n.cu&&n.cu.firstChild&&(n.cu.firstChild.style.width=i+t*s*e*100+"%"),t++)},30)}else this.cu.firstChild.style.width=100*e+"%",l.delay&&(this.cu.firstChild.style[jeeplus.env.transitionDuration]=l.delay+"ms");l.hide&&jeeplus.delay(this.hideProgress,this,[1],l.delay)}this.du=0},this):l&&"icon"==l.type&&l.hide&&jeeplus.delay(this.hideProgress,this,[1],l.delay)},hideProgress:function(e){this.du&&(e=!0),this.cu&&(e?(this.Oy&&window.clearInterval(this.Oy),jeeplus.html.remove(this.cu),this.cu=null,this.x.removeAttribute("aria-busy")):this.showProgress({position:1.1,delay:300,hide:!0}))}},jeeplus.protoUI({name:"multitext",$cssName:"text",defaults:{icon:"plus-circle",iconWidth:25,separator:", "},getValueHere:function(){return jeeplus.ui.text.prototype.getValue.call(this)},setValueHere:function(e){return jeeplus.ui.text.prototype.$setValue.call(this,e)},getValue:function(){if("extra"==this.config.mode)return this.getValueHere();if(this.rH)return this.rH;for(var e=[this.getValueHere(this)],t=0;t<this.eu.length;t++){var i=jeeplus.$$(this.eu[t]).getValueHere();i&&e.push(i)}return e.join(this.config.separator)},$setValue:function(e){if(e=e||"","extra"==this.config.mode)return this.setValueHere(e);var t=(this.rH=e).split(this.config.separator);if(t.length!=this.eu.length+1){this.removeSection(),this.setValueHere.call(this,t[0]);for(var i=1;i<t.length;i++)this.addSection(t[i]);this.rH=""}else{this.setValueHere(t[0]);for(i=0;i<this.eu.length;i++)jeeplus.$$(this.eu[i]).setValueHere(t[i+1])}},yB:function(e){var t=this.config.master?jeeplus.$$(this.config.master):this,i=t.getValue(),s=t.s.value;i!==s&&(t.s.value=i,t.callEvent("onChange",[i,s]))},addSection:function(e){var t=this.config,i={labelWidth:t.labelWidth,inputWidth:t.inputWidth,width:t.width,label:t.label?"&nbsp;":"",view:this.name,mode:"extra",value:e||"",icon:"minus-circle",suggest:t.suggest||null,master:t.id};jeeplus.extend(i,t.subConfig||{},!0);var s=this.getParentView().addView(i);return jeeplus.$$(s).attachEvent("onChange",this.yB),this.eu.push(s),this.callEvent("onSectionAdd",[s,this.eu.length]),s},removeSection:function(e){for(var t=this.config.master?jeeplus.$$(this.config.master):this,i=t.eu.length-1;0<=i;i--){var s=t.eu[i];e&&s!=e||(t.eu.removeAt(i),this.getParentView().removeView(s),t.callEvent("onSectionRemove",[s,i+1]))}},on_click:{jeeplus_input_icon:function(e,t,i){if("extra"==this.config.mode){this.removeSection(this.config.id);var s=this.getParentView().getChildViews();s[s.length-1].focus(),this.yB()}else jeeplus.$$(this.addSection()).focus();return!1}},$init:function(){this.eu=jeeplus.toArray([]),this.attachEvent("onKeyPress",this.DD)},$render:function(e){this.$setValue(e.value)}},jeeplus.ui.text),jeeplus.protoUI({name:"organogram",defaults:{scroll:"auto",ariaLabel:"lines"},$init:function(){this.x.className+=" jeeplus_organogram",this.v=document.createElement("DIV"),this.$ready.push(this.Av),jeeplus.extend(this.data,jeeplus.TreeStore,!0),this.data.provideApi(this,!0)},ad:"jeeplus_dg_id",on_click:{jeeplus_organogram_item:function(e,t){this.s.select&&("multiselect"==this.s.select||this.s.multiselect?this.select(t,!1,e.ctrlKey||e.metaKey||"touch"==this.s.multiselect,e.shiftKey):this.select(t),this.Qh=!1)}},on_context:{},on_dblclick:{},Av:function(){this.y.style.position="relative",this.data.attachEvent("onStoreUpdated",jeeplus.bind(this.render,this))},pg:function(e){var t=this.data.Me[e.id];return this.callEvent("onItemRender",[e]),this.type.templateStart.call(this,e,this.type,t)+(e.$template?this.type["template"+e.$template].call(this,e,this.type,t):this.type.template.call(this,e,this.type,t))+this.type.templateEnd.call(this)},jb:function(e){var t=this.pg(e);return this.data.branch[e.id]&&(t+=this._x(e.id)),t},LA:function(){return this.type.listMarginX||this.type.listMarginY},_x:function(e,t){var i,s,n,l,a="",r=this.data.branch[e],o=this.data.Me[e],h=this.getItem(e),u=!!h&&h.$type;if(t=t||0,"list"===u&&(t+=this.type.listMarginX),e||(this.ay=[],this.$xy={},l=this.$width-2*this.type.padding,this.$xy[0]={totalWidth:l,start:this.type.padding,width:0,height:0,left:l/2,top:this.type.padding||0}),r){n=this.$xy[e],"list"!=u||this.LA()||(a+=this.type.templateListStart.call(this,h,this.type,o));var c=0,d=0;for(i=0;i<r.length;i++){s=r[i],l=this.by[s],(m=this.getItem(s)).open==jeeplus.undefined&&(m.open=!0),"list"==u&&this.data.addMark(s,"list_item","",1,!0);var p=this.cy(s);if("list"==u){var f=0;this.LA()?f=this.type.listMarginY:i||(f=this.type.marginY),this.$xy[s]={totalWidth:l,start:n.start,width:this.type.width,height:p,left:n.start+l/2-this.type.width/2+t,top:i?this.$xy[r[i-1]].top+this.$xy[r[i-1]].height+f+d:n.top+n.height+f},d=this.data.branch[s]?this.GG(s):0}else this.$xy[s]={totalWidth:l,start:n.start+c,width:this.type.width,height:p,left:n.start+c+l/2-this.type.width/2,top:n.top+n.height+(e?this.type.marginY:0)};a+=this.pg(m),c+=l}for(i=0;i<r.length;i++)s=r[i],this.data.branch[s]&&this.getItem(s).open?a+=this._x(s,t):h&&("list"!=h.$type?this.ay.push(this.$xy[s].top+this.$xy[s].height):i==r.length-1&&this.ay.push(this.$xy[s].top+this.$xy[s].height));var g=0;for(var v in this.$xy){var m=this.$xy[v];g=Math.max(m.left+m.width,g)}this.y.style.width=g+this.type.padding+this.type.marginX/2+"px","list"!=u||this.LA()||(a+=this.type.templateListEnd(h,this.type,o))}return a},GG:function(e){for(var t=this.data.branch[e],i=0,s=0;s<t.length;s++)i+=this.cy(t[s])+this.type.listMarginY,this.data.branch[t[s]]&&(i+=this.GG(t[s]));return i+this.type.marginY},cy:function(e){var t=this.getItem(e),i=this.type.height;return"function"==typeof i&&(i=i.call(t,this.type,this.data.Me[e])),this.dy||(this.dy=jeeplus.html.create("div"),this.y.appendChild(this.dy)),this.dy.className=this.type.classname(t,this.type,this.data.Me[e]),this.dy.style.cssText="width:"+this.type.width+"px;height:"+i+("auto"==i?"":"px")+";",this.dy.innerHTML=this.type.template.call(this,t,this.type,this.data.Me[e]),this.dy.scrollHeight},ey:function(){var n={},l=this.type.width,a=this.type.marginX;return this.data.each(function(e){n[e.id]=l+a;var t=this.getParentId(e.id);if(t&&"list"!=this.getItem(t).$type)for(;t;){for(var i=this.branch[t],s=n[t]=0;s<i.length;s++)n[t]+=n[i[s]]||0;t=this.getParentId(t)}}),this.by=n},getItemNode:function(e){if(this.t)return this.t[e];this.t={};for(var t=this.y.childNodes,i=0;i<t.length;i++){var s=t[i].getAttribute(this.ad);if(s&&(this.t[s]=t[i]),-1!=t[i].className.indexOf("jeeplus_organogram_list")&&!this.LA())for(var n=t[i].childNodes,l=0;l<n.length;l++)(s=n[l].getAttribute(this.ad))&&(this.t[s]=n[l])}return this.getItemNode(e)},Ne:function(e){return this.v.innerHTML=this.pg(e),this.v.firstChild},render:function(e,t,i){if(this.isVisible(this.s.id)&&!this.$blockRender){if("update"!=i)return this.callEvent("onBeforeRender",[this.data])&&(this.ey(),this.t=null,this.y.innerHTML=this._x(0),this.dy=null,this.y.style.height=Math.max.apply(Math,this.ay)+this.type.padding+"px",this.fy(),this.resize(),this.callEvent("onAfterRender",[])),!0;var s=this.getItemNode(e),n=this.t[e]=this.Ne(t);return jeeplus.html.insertBefore(n,s),jeeplus.html.remove(s),!0}},fy:function(){this.canvas&&this.canvas.clearCanvas(!0),this.canvas=new jeeplus.Canvas({container:this.y,name:this.name,title:this.s.ariaLabel,width:this.y.offsetWidth,height:this.y.offsetHeight}),this.gy(0)},zo:function(e,t,i,s,n,l,a){e.strokeStyle=l,e.lineCap="square",e.lineWidth=a,e.beginPath(),e.moveTo(t,i),e.lineTo(s,n),e.stroke(),e.lineWidth=1},gy:function(e,t){var i,s,n,l,a,r,o,h,u,c;if(this.config.layout,t||(t=this.canvas.getCanvas()),this.$xy&&(e=e||0,n=this.data.branch[e],s=this.getItem(e),n&&n.length)){if(l=this.$xy[e],e)if(r=parseInt(l.left+l.width/2,10)+.5,o=parseInt(l.top+l.height,10),h=parseInt(l.top+l.height+this.type.marginY/2,10),"list"==s.$type){if(!this.LA())return h=parseInt(l.top+l.height+this.type.marginY,10),void this.zo(t,r,o,r,h,this.type.lineColor)}else this.zo(t,r,o,r,h,this.type.lineColor);for(o=parseInt(l.top+l.height+this.type.marginY/2,10)+.5,i=0;i<n.length;i++)e&&(a=this.$xy[n[i]],"list"==s.$type&&this.LA()?(r=parseInt(l.left+this.type.listMarginX/2,10)+.5,i?i==n.length-1&&(c=r):u=r,h=parseInt(a.top+a.height/2,10),this.zo(t,r,o-this.type.marginY/2,r,h,this.type.lineColor),this.zo(t,r,h,r+this.type.listMarginX/2,h,this.type.lineColor)):(r=parseInt(a.left+a.width/2,10)+.5,i?i==n.length-1&&(c=r):u=r,h=parseInt(a.top,10),this.zo(t,r,o,r,h,this.type.lineColor))),this.getItem(n[i]).open&&this.gy(n[i],t);e&&this.zo(t,u,o,c,o,this.type.lineColor)}},$getSize:function(e,t){var i=this.s.autowidth,s=this.s.autoheight;return i&&(e=this.y.offsetWidth+(this.y.offsetHeight>t&&!s?jeeplus.ui.scrollSize:0)),s&&(t=this.y.offsetHeight+(this.y.offsetWidth>e&&!i?jeeplus.ui.scrollSize:0)),jeeplus.ui.view.prototype.$getSize.call(this,e,t)},$setSize:function(e,t){jeeplus.ui.view.prototype.$setSize.call(this,e,t)&&(this.y.style.width=this.$width+"px",this.y.style.height=this.$height+"px",this.render())},type:{width:120,height:"auto",padding:20,marginX:20,marginY:20,listMarginX:0,listMarginY:0,lineColor:"#90caf9",classname:function(e,t,i){var s="jeeplus_organogram_item ";return e.$css&&("object"==typeof e.$css&&(e.$css=jeeplus.html.createCss(e.$css)),s+=" "+e.$css),i&&i.list_item&&(s+=" jeeplus_organogram_list_item "),i&&i.$css&&(s+=i.$css),s+" jeeplus_organogram_level_"+e.$level},listClassName:function(e){var t="jeeplus_organogram_list jeeplus_organogram_list_"+e.$level;return e.$listCss&&("object"==typeof e.$listCss&&(e.$listCss=jeeplus.html.createCss(e.$listCss)),t+=" "+e.$listCss),t},template:jeeplus.template("#value#"),templateStart:function(e,t,i){var s="";if((!i||!i.list_item||t.listMarginX||t.listMarginY)&&this.$xy){var n=this.$xy[e.id];s+="width: "+n.width+"px; height: "+n.height+"px;",s+="top: "+n.top+"px; left: "+n.left+"px;"}return'<div jeeplus_dg_id="'+e.id+'" class="'+t.classname.call(this,e,t,i)+'"'+(s?'style="'+s+'"':"")+'">'},templateEnd:jeeplus.template("</div>"),templateListStart:function(e,t,i){var s="";if(this.$xy){var n=this.$xy[e.id];s+="width: "+n.width+"px;",s+="top: "+(n.top+n.height+t.marginY)+"px; left: "+n.left+"px;"}return'<div class="'+t.listClassName.call(this,e,t,i)+'"'+(s?'style="'+s+'"':"")+'">'},templateListEnd:jeeplus.template("</div>")}},jeeplus.AutoTooltip,jeeplus.Group,jeeplus.TreeAPI,jeeplus.DataMarks,jeeplus.SelectionModel,jeeplus.MouseEvents,jeeplus.Scrollable,jeeplus.RenderStack,jeeplus.TreeDataLoader,jeeplus.DataLoader,jeeplus.ui.view,jeeplus.EventSystem),jeeplus.protoUI({name:"barcode",defaults:{type:"ean13",height:160,width:220,paddingY:10,paddingX:20,textHeight:20,color:"#000",ariaLabel:"bars"},$init:function(){this.$view.className+=" jeeplus_barcode",this.types||(this.types={default:this.type},this.type.name="default")},type:{},render:function(){this.isVisible(this.s.id)&&(this.canvas&&this.canvas.clearCanvas(!0),this.$view.innerHTML="",this.fy())},fy:function(){this.canvas=new jeeplus.Canvas({container:this.$view,name:this.name,title:this.s.ariaLabel,width:this.$width,height:this.$height}),this.hy()},hy:function(){var e,t,i,s,n=this.s.value,l=this.s.type;if(!l||!this.types[l]||!n)return!1;if(s=(e=this.type.encode(n)).length,t=this.canvas.getCanvas(),s){var a=(this.$width-2*this.config.paddingX)/s,r=0;for(i=0;i<s;i++){parseInt(e.charAt(i),10)?(r++,i==s-1&&this.bp(t,i+1,a,r,s)):r&&(this.bp(t,i,a,r,s),r=0)}this.iy(n,a)}},bp:function(e,t,i,s,n){var l,a,r,o;a=parseInt(t*i+this.config.paddingX,10),l=parseInt(a-s*i,10),r=this.config.paddingY,o=this.$height-this.config.paddingY-this.config.textHeight,this.jy()&&(t<4||n-4<t||t<n/2+2&&n/2-2<t)&&(o+=this.config.textHeight/2),e.fillStyle=this.config.color,e.beginPath(),e.moveTo(l,r),e.lineTo(a,r),e.lineTo(a,o),e.lineTo(l,o),e.lineTo(l,r),e.fill()},iy:function(e,t){var i,s,n;if(this.type.template&&(e=this.type.template(e)),this.jy()){if(this.type.firstDigit&&(this.canvas.renderTextAt(!0,"left",this.config.paddingX,this.$height-this.config.paddingY,e.charAt(0)),e=e.slice(1)),s=e.length,this.type.lastDigit&&s--,s){var l=(this.$width-2*this.config.paddingX-11*t)/s;for(i=0;i<s;i++)n=this.config.paddingX+i*l+(i<s/2?3:8)*t+l/2,this.canvas.renderTextAt(!0,!0,n,this.$height-this.config.paddingY,e.charAt(i));this.type.lastDigit&&(n=this.config.paddingX+s*l+11*t,this.canvas.renderTextAt(!0,!1,n,this.$height-this.config.paddingY,e.charAt(s)))}}else this.canvas.renderTextAt(!0,!0,this.$width/2,this.$height-this.config.paddingY,e)},setValue:function(e){return this.s.value=e,this.render(),e},getValue:function(){var e=this.s.value;return this.type.template?this.type.template(e):e},type_setter:function(e){return this.types[e]?(this.type=jeeplus.clone(this.types[e]),this.type.css&&(this.w.className+=" "+this.type.css)):this.customize(e),e},jy:function(){var e=this.config.type;return 0===e.indexOf("ean")||-1!=e.indexOf("upcA")},$setSize:function(e,t){jeeplus.ui.view.prototype.$setSize.call(this,e,t)&&this.render()}},jeeplus.ui.view),jeeplus.type(jeeplus.ui.barcode,{name:"ean8",encodings:[["0001101","1110010"],["0011001","1100110"],["0010011","1101100"],["0111101","1000010"],["0100011","1011100"],["0110001","1001110"],["0101111","1010000"],["0111011","1000100"],["0110111","1001000"],["0001011","1110100"]],encode:function(e){var t,i;if(7!=(e=e.replace(/[^0-9]/g,"").substring(0,7)).length)return"";for(e+=this.checksum(e),t="101",i=0;i<4;i++)t+=this.encodings[parseInt(e.charAt(i),10)][0];for(t+="01010",i=4;i<8;i++)t+=this.encodings[parseInt(e.charAt(i),10)][1];return t+"101"},template:function(e){return e.replace(/[^0-9]/g,"").substring(0,7)+this.checksum(e)},checksum:function(e){e=e.substring(0,7);var t,i=!0,s=0;for(t=0;t<7;t++)s+=(i?3:1)*parseInt(e.charAt(t),10),i=!i;return((10-s%10)%10).toString()}}),jeeplus.type(jeeplus.ui.barcode,{name:"ean13",firstDigit:!0,encodings:[["0001101","0100111","1110010","000000"],["0011001","0110011","1100110","001011"],["0010011","0011011","1101100","001101"],["0111101","0100001","1000010","001110"],["0100011","0011101","1011100","010011"],["0110001","0111001","1001110","011001"],["0101111","0000101","1010000","011100"],["0111011","0010001","1000100","010101"],["0110111","0001001","1001000","010110"],["0001011","0010111","1110100","011010"]],encode:function(e){var t,i,s;if(12!=(e=e.replace(/[^0-9]/g,"").substring(0,12)).length)return"";for(e+=this.checksum(e),t="101",i=this.encodings[parseInt(e.charAt(0),10)][3],s=1;s<7;s++)t+=this.encodings[parseInt(e.charAt(s),10)][parseInt(i.charAt(s-1),10)];for(t+="01010",s=7;s<13;s++)t+=this.encodings[parseInt(e.charAt(s),10)][2];return t+"101"},template:function(e){return e.replace(/[^0-9]/g,"").substring(0,12)+this.checksum(e)},checksum:function(e){var t,i=!1,s=0;for(e=e.substring(0,12),t=0;t<12;t++)s+=(i?3:1)*parseInt(e.charAt(t),10),i=!i;return((10-s%10)%10).toString()}}),jeeplus.type(jeeplus.ui.barcode,{name:"upcA",firstDigit:!0,lastDigit:!0,encode:function(e){return e.length<12&&(e="0"+e),jeeplus.ui.barcode.prototype.types.ean13.encode(e)},template:function(e){return e.replace(/[^0-9]/g,"").substring(0,11)+this.checksum(e)},checksum:function(e){return e.length<12&&(e="0"+e),jeeplus.ui.barcode.prototype.types.ean13.checksum(e)}}),jeeplus.protoUI({name:"abslayout",$init:function(){this.$view.className+=" jeeplus_abslayout",delete this.rows_setter,delete this.cols_setter,this.nc=[]},cells_setter:function(e){this.nc=e},kc:function(){jeeplus.ui.baselayout.prototype.kc.call(this,this.nc)},$getSize:function(e,t){for(var i=jeeplus.ui.baseview.prototype.$getSize.call(this,0,0),s=null,n=0;n<this.q.length;n++)this.q[n].s.relative&&(s=this.q[n].$getSize(0,0));return s&&(1e5<=i[1]&&(i[1]=0),1e5<=i[3]&&(i[3]=0),i[0]=Math.max(i[0],s[0]),i[1]=Math.max(i[1],s[1]),i[2]=Math.max(i[2],s[2]),i[3]=Math.max(i[3],s[3])),i},$setSize:function(e,t){this.lc=[e,t],jeeplus.ui.baseview.prototype.$setSize.call(this,e,t),this.rc(e,t)},rc:function(e,t){for(var i=0;i<this.q.length;i++){var s=this.q[i],n=s.s,l=s.$getSize(0,0);n.relative?(n.left=n.top=0,s.$setSize(e,t)):s.$setSize(l[0],l[2]);for(var a=s.$view,r=["left","right","top","bottom"],o=0;o<r.length;o++){var h=r[o];h in n&&(a.style[h]=n[h]+"px")}}}},jeeplus.ui.baselayout),jeeplus.protoUI({name:"datalayout",$init:function(){this.data.provideApi(this,!0),this.data.attachEvent("onStoreUpdated",jeeplus.bind(this.render,this))},kc:function(e){return this.cC||(this.cC=this.nc,this.nc=[{}]),jeeplus.ui.layout.prototype.kc.call(this,this.nc)},setValue:function(e){this.parse(e)},getValue:function(e){for(var t=this.cC.length,i=0;i<this.q.length;i++){var s=this.data.order[Math.floor(i/t)],n=this.data.getItem(s);this.HG(this.q[i],n)}return this.data.serialize()},HG:function(e,t){var i=e.s.name;if(i){var s=null;e.getValues?s=e.getValues():e.getValue?s=e.getValue():e.serialize&&(s=e.serialize()),"$value"==i?jeeplus.extend(t,s,!0):t[i]=s}else{var n=e.q;if(n)for(var l=0;l<n.length;l++)this.HG(n[l],t)}},sC:function(e,t){var i,s=e.s.name;if(s)i="$value"==s?t:t[s],e.setValues?e.setValues(i):e.setValue?e.setValue(i):e.parse&&(e.openAll&&(i=jeeplus.copy(i)),e.parse(i));else{var n=e.q;if(n)for(var l=0;l<n.length;l++)this.sC(n[l],t)}},render:function(e,t,i){var s=this.cC.length;if(e&&"update"===i){t=this.getItem(e);for(var n=this.getIndexById(e),l=0;l<s;l++)this.sC(this.q[n*s+l],t)}else{var a=this.nc=[],r=this.data.order;for(l=0;l<r.length;l++)if(s)for(var o=0;o<s;o++)a.push(jeeplus.copy(this.cC[o]));else a.push(this.getItem(r[l]));if(a.length||a.push({}),this.reconstruct(),s)for(l=0;l<r.length;l++){var h=this.getItem(r[l]);for(o=0;o<s;o++){var u=this.q[l*s+o];this.sC(u,h)}}}}},jeeplus.DataLoader,jeeplus.ui.layout),jeeplus.protoUI({$init:function(){jeeplus.extend(this,jeeplus.FlexLayout,!0)},name:"flexdatalayout"},jeeplus.ui.datalayout),jeeplus.protoUI({name:"gridlayout",defaults:{gridColumns:2,gridRows:2,margin:10,padding:10},gridRows_setter:function(e){return this.WG=e},kc:function(){for(var e=0;e<this.nc.length;e++)this.nc[e].Ob={};jeeplus.ui.baselayout.prototype.kc.call(this,this.nc)},removeView:function(e){jeeplus.ui.abslayout.prototype.removeView.call(this,e),this.pH(),this.callEvent("onChange",[])},XG:function(e){if(e.dx=e.dx||1,e.dy=e.dy||1,jeeplus.isUndefined(e.y)||jeeplus.isUndefined(e.x)){for(var t=this.YG(),i=0;i<this.WG;i++)for(var s=0;s<this.s.gridColumns;s++)if(!t[s][i]&&this.ZG(t,s,i,s+e.dx,i+e.dy))return e.x=s,void(e.y=i);e.x=0,e.y=this.WG}var n=e.x+e.dx-this.s.gridColumns;0<n&&(e.dx-=n)},Qb:function(e,t){this.XG(e.config),this.q.push(e),(e.Xb=this).$view.appendChild(e.x),this.$G(e.config,e.config.id),this._G||this.callEvent("onChange",[])},ZG:function(e,t,i,s,n){for(var l=t;l<s;l++)for(var a=i;a<n;a++)if(!e[l]||e[l][a])return!1;return!0},aH:function(e,t,i){for(var s=0;s<t.dx;s++)for(var n=0;n<t.dy;n++)e[s+t.x][n+t.y]=i},bH:function(e,t,i){for(var s=this.s.gridColumns,n=t.x+t.dx;n+i.dx<=s;n++)if(this.ZG(e,n,i.y,n+i.dx,i.y+i.dy))return n-i.x;return 0},cH:function(e,t,i){for(var s=t.x-i.dx;0<=s;s--)if(this.ZG(e,s,i.y,s+i.dx,i.y+i.dy))return i.x-s;return 0},dH:function(e,t,i){for(var s=t.y-i.dy;0<=s;s--)if(this.ZG(e,i.x,s,i.x+i.dx,s+i.dy))return i.y-s;return 0},YG:function(e){for(var t=[],i=0;i<this.s.gridColumns;i++)t[i]=[];for(var s=0;s<this.q.length;s++){var n=this.q[s].config;n.id!==e&&this.aH(t,n,n.id)}return t},pH:function(){this.kH()&&this.eH()},kH:function(){var e=this.s.gridColumns,t=this.WG,i=this.YG(),s=!1;e:for(var n=t-1;0<=n;n--){for(var l=e-1;0<=l;l--)if(i[l][n])continue e;s=!0;for(var a=0;a<this.q.length;a++){var r=this.q[a].config;r.y>=n&&(r.y-=1)}}return s},$G:function(e,t,i){e.x-=Math.max(0,e.x+e.dx-this.s.gridColumns);for(var s=[],n=this.YG(t),l=0;l<this.q.length;l++){(r=this.q[l].config).id!==t&&r.y<e.y+e.dy&&r.y+r.dy>e.y&&r.x<e.x+e.dx&&r.x+r.dx>e.x&&s.push(r)}var a=[];for(l=0;l<s.length;l++){var r=s[l];this.aH(n,r,0);var o=this.bH(n,e,r);if(o)r.x+=o;else{var h=this.cH(n,e,r);if(h)r.x-=h;else{var u=this.dH(n,e,r);u?r.y-=u:(r.y=e.y+e.dy,a.push(r))}}this.aH(n,r,r.id)}for(l=0;l<a.length;l++)this.$G(a[l],a[l].id,!0);i||(this.kH(),this.eH())},eH:function(){for(var e=this.s.gridRows,t=0;t<this.q.length;t++){var i=this.q[t].config;e=Math.max(e,i.y+i.dy)}this.WG!=e&&(this.WG=e,this.resize()),this.rc()},moveView:function(e,t){t=jeeplus.extend(jeeplus.$$(e).config,t,!0),this.$G(t,e),this.callEvent("onChange",[])},serialize:function(e){for(var t=[],i=0;i<this.q.length;i++)if(e)t.push(e.call(this,this.q[i]));else{var s=this.q[i].config;t.push({id:s.id,name:s.name,x:s.x,y:s.y,dx:s.dx,dy:s.dy})}return t},clearAll:function(){for(var e=0;e<this.q.length;e++)this.q[e].destructor();this.q=[]},restore:function(e,t){t=t||this.s.factory,e=jeeplus.copy(e),this._G=!0;for(var i={},s=0;s<e.length;s++){var n=e[s],l=jeeplus.$$(n.id);i[l?(jeeplus.extend(l.config,n,!0),l.config.id):(l=t.call(this,n),this.addView(l))]=1}for(s=this.q.length-1;0<=s;s--)i[this.q[s].config.id]||(this.q[s].destructor(),this.q.splice(s,1));this.eH(),this._G=!1},$getSize:function(e,t){for(var i=jeeplus.ui.baseview.prototype.$getSize.call(this,0,0),s=0;s<this.q.length;s++)this.q[s].$getSize(0,0);var n=this.s.cellWidth,l=this.s.cellHeight,a=this.fH(0,0,this.s.gridColumns,this.WG);return n&&(i[0]=a.dx+2*a.x),l&&(i[2]=a.dy+2*a.y),i},fH:function(e,t,i,s){var n=this.s.margin,l=this.s.paddingX||this.s.padding,a=this.s.paddingY||this.s.padding,r=this.s.cellWidth;r||(r=(this.$width-2*l+n)/this.s.gridColumns-n);var o=this.s.cellHeight;return o||(o=(this.$height-2*a+n)/this.WG-n),{x:l+(r+n)*e,y:a+(o+n)*t,dx:Math.ceil(r+(r+n)*(i-1)),dy:Math.ceil(o+(o+n)*(s-1))}},rc:function(e,t){for(var i=0;i<this.q.length;i++){var s=this.q[i],n=s.s,l=this.fH(n.x,n.y,n.dx,n.dy);s.$getSize(0,0),s.$setSize(l.dx,l.dy);var a=s.$view;a.style.left=l.x+"px",a.style.top=l.y+"px"}}},jeeplus.ui.abslayout),jeeplus.protoUI({name:"dashboard",$init:function(){jeeplus.DragControl.addDrag(this.$view,this),jeeplus.DragControl.addDrop(this.$view,this,!0)},gH:function(e){return!(!e.getAttribute||e.getAttribute("jeeplus_disable_drag")||e.getAttribute("jeeplusignore"))&&(-1!=(e.className||"").toString().indexOf("panel_drag")?e:!(!e.parentNode||e==this.$view)&&this.gH(e.parentNode))},$dragCreate:function(e,t){if(t.target){if(!this.gH(t.target))return!1;var i=jeeplus.$$(t);i.$resizeMove||(i=i.queryView(function(e){return!!e.config.dx},"parent"));var s=jeeplus.html.offset(this.$view),n=jeeplus.html.pos(t);return jeeplus.DragControl.Gd={source:i,from:this,dashboard:{sx:n.x-s.x-parseInt(i.$view.style.left)+this.s.margin/2,sy:n.y-s.y-parseInt(i.$view.style.top)+this.s.margin/2}},this.hH(i.s.dx,i.s.dy),i.$view}},hH:function(e,t){var i=this.iH=jeeplus.html.create("div",{class:"panel_target"}),s=this.fH(0,0,e,t);i.style.width=s.dx+"px",i.style.height=s.dy+"px",this.$view.appendChild(this.iH)},$drop:function(e,t){var i=jeeplus.DragControl.Gd,s={x:i.dashboard.x,y:i.dashboard.y};if(i.from===this){var n=i.source.config;this.moveView(n.id,s)}else s.name=i.source[0],s.dx=i.dashboard.dx,s.dy=i.dashboard.dy,s.id=s.name+":"+jeeplus.uid(),s=this.s.factory.call(this,s),this.addView(s)},$dragDestroy:function(e,t,i){t.style.zIndex=1,jeeplus.html.remove(this.iH),this.iH=null,this.eH()},jH:function(e,t){var i=this.s.margin,s=this.s.paddingX||this.s.padding,n=this.s.paddingY||this.s.padding,l=this.s.cellWidth;l||(l=(this.$width-2*s+i)/this.s.gridColumns-i);var a=this.s.cellHeight;return a||(a=(this.$height-2*n+i)/this.WG-i),e=Math.round((e-s)/(l+i/2)-.2),t=Math.round((t-s)/(a+i/2)-.2),{x:e=Math.max(0,Math.min(e,this.s.gridColumns)),y:t=Math.max(0,Math.min(t,this.WG)),width:l,height:a,margin:i,rx:e*l+i*e+s,ry:t*a+i*t+n}},$dragOut:function(){var e=jeeplus.DragControl.Gd;this.iH&&e.external&&(jeeplus.html.remove(this.iH),this.iH=null)},$dragIn:function(e,t,i){var s=jeeplus.DragControl.Gd;if(!this.iH){s.external=!0;var n=s.from.getItem(s.source);s.dashboard={dx:n.dx,dy:n.dy},this.hH(n.dx,n.dy)}if(s.external){var l=this.iH,a=jeeplus.env.mouse.context(i),r=jeeplus.html.offset(this.$view),o=this.jH(a.x-r.x,a.y-r.y);jeeplus.extend(s.dashboard,o,!0),l.style.left=o.rx+"px",l.style.top=o.ry+"px"}return!0},$dragPos:function(e,t,i){var s=jeeplus.DragControl.Gd;i.style.left="-10000px";var n=jeeplus.env.mouse.context(t),l=jeeplus.html.offset(this.$view),a=s.dashboard,r=this.jH(n.x-l.x-a.sx,n.y-l.y-a.sy);e.x=n.x-a.sx-l.x,e.y=n.y-a.sy-l.y;var o=this.iH;o.style.left=r.rx+"px",o.style.top=r.ry+"px",jeeplus.extend(a,r,!0)}},jeeplus.ui.gridlayout),jeeplus.protoUI({name:"panel",$init:function(e){if(e.header&&e.body){var t=e.header;"object"!=typeof t&&(t={template:e.header,type:"header",css:"jeeplus_header"}),e.body=[t,e.body]}jeeplus.html.addCss(this.$view,"panel_drag_view"),this.$ready.push(this.Py)},Py:function(){var e=this.getChildViews(),t=1===e.length?this:e[1];if(this.s.icon){var i=jeeplus.html.create("div",{class:"panel_icon"},"<span class='jeeplus_icon fa-"+this.s.icon+" panel_icon_span'></span>");t!=this&&(t.$view.style.position="relative"),t.$view.appendChild(i)}},body_setter:function(e){return this.rows_setter(jeeplus.isArray(e)?e:[e])},$resizeEnd:function(e){var t=this.getParentView();if(t&&t.jH){var i=t.jH(e.x,e.y),s=(this.s,Math.max(i.x,1)),n=Math.max(i.y,1);t.moveView(this.s.id,{dx:s,dy:n})}},$resizeMove:function(e){var t=this.getParentView();if(t&&t.jH){var i=t.jH(e.x,e.y);e.x=i.width*i.x+i.margin*(i.x-1),e.y=i.height*i.y+i.margin*(i.y-1)}}},jeeplus.ui.layout,jeeplus.ResizeArea),jeeplus.protoUI({name:"video",$init:function(e){e.id||(e.id=jeeplus.uid()),this.$ready.push(this.Ms)},Ms:function(){var e=this.s;if(this.w=jeeplus.html.create("video",{class:"jeeplus_view_video",style:"width:100%;height:100%;",autobuffer:"autobuffer"},""),e.poster&&(this.w.poster=e.poster),e.src){"object"!=typeof e.src&&(e.src=[e.src]);for(var t=0;t<e.src.length;t++)this.w.innerHTML+=' <source src="'+e.src[t]+'">'}e.controls&&(this.w.controls=!0),e.autoplay&&(this.w.autoplay=!0),this.x.appendChild(this.w)},getVideo:function(){return this.w},defaults:{src:"",controls:!0}},jeeplus.ui.view),jeeplus.protoUI({name:"sidemenu",defaults:{animate:!0,position:"left",width:200,borderless:!0},$init:function(){this.$view.className+=" jeeplus_sidemenu"},$skin:function(){this.defaults.padding=0},position_setter:function(e){var t=this.s.position;return t&&jeeplus.html.removeCss(this.$view," jeeplus_sidemenu_"+t),jeeplus.html.addCss(this.$view," jeeplus_sidemenu_"+e),e},$getSize:function(){var e=jeeplus.ui.window.prototype.$getSize.apply(this,arguments);return this.MA=e},$setSize:function(e,t){jeeplus.ui.view.prototype.$setSize.call(this,e,t),e=this.bc-2*this.s.padding,t=this.dc-2*this.s.padding,this.w.style.padding=this.s.padding+"px",this.bd.style.display="none",this.ed.style.height=t+"px",this.gd.$setSize(e,t)},show:function(){return!!this.callEvent("onBeforeShow",arguments)&&(this.s.hidden=!1,this.x.style.zIndex=this.s.zIndex||jeeplus.ui.zIndex(),(this.s.modal||this.my)&&(this.Md(!0),this.my=null),this.x.style.display="block",this.Qd(),this.s.position&&this.Td(),this.Ww=1,jeeplus.delay(function(){this.Ww=0},this,[],jeeplus.env.touch?400:100),this.config.autofocus&&(this.Vd=jeeplus.UIManager.getFocus(),jeeplus.UIManager.setFocus(this)),-1==jeeplus.ui.et.find(this)&&jeeplus.ui.et.push(this),void this.callEvent("onShow",[]))},Td:function(e){var t,i,s,n,l,a=0,r=0,o={};this.$view.style.position="fixed",s=window.innerWidth||document.documentElement.offsetWidth,n=window.innerHeight||document.documentElement.offsetHeight,t=this.MA[0]||s,i=this.MA[2]||n,"top"==(l=this.s.position)?t=s:"right"==l?(i=n,a=s-t):"bottom"==l?(t=s,r=n-i):i=n,o={left:a,top:r,width:t,height:i,maxWidth:s,maxHeight:n},"function"==typeof this.s.state&&this.s.state.call(this,o),this.NA=o,this.$setSize(o.width,o.height),void 0===e&&this.OA()?(jeeplus.html.removeCss(this.$view,"jeeplus_animate",!0),this.Qf[this.s.position].beforeShow.call(this,o),jeeplus.delay(function(){jeeplus.html.addCss(this.$view,"jeeplus_animate",!0)},this,null,1),jeeplus.delay(function(){this.Qf[this.s.position].show.call(this,o)},this,null,10)):("right"===this.s.position&&(o.left=o.right?s-o.width-o.right:s-o.width),this.setPosition(o.left,o.top))},OA:function(){return jeeplus.animate.isSupported()&&this.s.animate&&!(jeeplus.env.isIE&&-1!=navigator.appVersion.indexOf("MSIE 9"))},hidden_setter:function(e){return e?this.hide(!0):this.show(),!!e},Qf:{left:{beforeShow:function(e){this.$view.style.left=-e.width+"px",this.$view.style.top=e.top+"px"},show:function(e){this.$view.style.left=e.left?e.left+"px":"0px"},hide:function(e){this.$view.style.left=-e.width+"px"}},right:{beforeShow:function(e){this.$view.style.left="auto",this.$view.style.right=-e.width+"px",this.$view.style.top=e.top+"px"},show:function(e){this.$view.style.right=e.right?e.right+"px":"0px"},hide:function(e){this.$view.style.right=-e.width+"px"}},top:{beforeShow:function(e){this.setPosition(e.left,e.top),this.$view.style.height="0px",this.ed.style.height="0px"},show:function(e){this.$view.style.height=e.height+"px",this.ed.style.height=e.height+"px"},hide:function(){this.$view.style.height="0px",this.ed.style.height="0px"}},bottom:{beforeShow:function(e){this.$view.style.left=e.left+"px",this.$view.style.top="auto";var t=e.bottom!=jeeplus.undefined?e.bottom:e.maxHeight-e.top-e.height;this.$view.style.bottom=t+"px",this.$view.style.height="0px"},show:function(e){this.$view.style.height=e.height+"px"},hide:function(){this.$view.style.height="0px"}}},hide:function(e){if(!this.$destructed){this.s.modal&&this.Md(!1);var t=window.innerWidth||document.documentElement.offsetWidth,i=window.innerHeight||document.documentElement.offsetHeight;if(!e&&this.OA()&&t==this.NA.maxWidth&&i==this.NA.maxHeight){this.Qf[this.s.position].hide.call(this,this.NA);var s=jeeplus.event(this.$view,jeeplus.env.transitionEnd,jeeplus.bind(function(e){this.Wd(),jeeplus.eventRemove(s)},this))}else this.Wd();if(this.s.autofocus){var n=document.activeElement;n&&this.x&&this.x.contains(n)&&(jeeplus.UIManager.setFocus(this.Vd),this.Vd=null)}this.ny()}}},jeeplus.ui.popup),jeeplus.protoUI({name:"sidebar",defaults:{titleHeight:40,type:"sideBar",activeTitle:!0,select:!0,scroll:!1,collapsed:!1,collapsedWidth:41,position:"left",width:250,mouseEventDelay:10},$init:function(e){this.$ready.push(this.yH),this.$ready.push(this.zH),this.data.qf=function(e){e.data&&(e.menu=jeeplus.copy(e.data))}},on_context:{},on_mouse_move:{},yH:function(){this.AH=this.config.width,this.attachEvent("onBeforeOpen",function(e){if(!this.config.multipleOpen)for(var t=this.getOpenItems(),i=0;i<t.length;i++)this.getParentId(e)==this.getParentId(t[i])&&this.close(t[i]);return!this.config.collapsed}),this.attachEvent("onItemClick",function(e,t,i){this.getPopup()&&!this.getPopup().config.hidden&&(t.showpopup=!0),jeeplus.env.touch&&this.BH(e,i)}),this.attachEvent("onBeforeSelect",function(e){return!this.getItem(e).$count&&(this.clearCss("jeeplus_sidebar_selected"),!0)}),this.attachEvent("onAfterSelect",function(e){this.CH(this,e,!0),this.getPopup().DH(e)}),this.attachEvent("onMouseMove",function(e,t,i){this.BH(e,i)}),this.config.collapsed&&this.collapse()},BH:function(e,t){if(this.config.collapsed){var i=this.getPopup();i&&(this.EH(e),this.FH(e),i.show(t,{x:"left"==this.config.position?this.config.collapsedWidth:-i.config.width,y:-1}))}},EH:function(e){var t=this.getPopup().getBody().getChildViews()[0];if(t){var i=this.getSelectedId();t.masterId=e,t.parse(this.getItem(e)),i&&this.getParentId(i)==e?jeeplus.html.addCss(t.$view,"jeeplus_sidebar_selected",!0):jeeplus.html.removeCss(t.$view,"jeeplus_sidebar_selected"),i==e?jeeplus.html.addCss(t.$view,"jeeplus_selected",!0):jeeplus.html.removeCss(t.$view,"jeeplus_selected")}},FH:function(e){var t=this.getPopup().getBody().getChildViews()[1];if(t){t.clearCss("jeeplus_sidebar_selected"),t.masterId=e;var i=this.getSelectedId(),s=this.getItem(e).menu?jeeplus.copy(this.getItem(e).menu):[].concat(jeeplus.copy(this.data.getBranch(e)));t.unselect(),s.length?(t.show(),t.data.importData(s),t.exists(i)?t.select(i):i&&this.CH(t,i)):t.hide()}},zH:function(){var i,n=this,t=n.config;if(t.popup&&(i=jeeplus.$$(t.popup)),!i){function e(e){return(e.submenu||e.data?'<div class="jeeplus_icon fa-angle-'+("left"==t.position?"right":"left")+'"></div>':"")+e.value}var s="left"==t.position?"jeeplus_sidebar_popup_left":"jeeplus_sidebar_popup_right",l="left"==t.position?"right":"left",a={view:"popup",css:"jeeplus_sidebar_popup "+s,autofit:!1,width:this.AH-this.config.collapsedWidth,borderless:!0,padding:0,body:{rows:[{view:"template",borderless:!0,css:"jeeplus_sidebar_popup_title",template:"#value#",height:this.config.titleHeight+2,onClick:{jeeplus_template:function(){var e=this.masterId;n.getItem(e).$count||n.select(e)}}},{view:"menu",submenu:"data",layout:"y",subMenuPos:l,select:!0,borderless:!0,autoheight:!0,css:"jeeplus_sidebar_popup_list "+s,template:e,type:{subsign:!1},submenuConfig:{padding:0,subMenuPos:l,template:e,select:!0,type:{subsign:!1},css:"jeeplus_sidebar_popup_list "+s,on:{onShow:function(){this.clearCss("jeeplus_sidebar_selected"),this.unselectAll();var e=n.getSelectedId();e&&this.exists(e)?this.select(e):e&&n.CH(this,e)},onBeforeSelect:function(e){return!this.getSubMenu(e)&&void 0},onAfterSelect:function(e){for(var t=n.getPopup().queryView({view:"menu"}),i=n.getParentId(e);i;){var s=t.getMenu(i);s&&(s.unselectAll(),n.CH(s,e)),i=n.getParentId(i)}n.CH(this,e)}}},on:{onBeforeSelect:function(e){return!this.getSubMenu(e)&&void 0},onMenuItemClick:function(e){this.getSubMenu(e)||n.select(e)}}}]}};jeeplus.extend(a,t.popup||{},!0),(i=jeeplus.ui(a)).DH=function(e){n&&n.getParentId(e)==this.masterId&&jeeplus.html.addCss(this.$view,"jeeplus_sidebar_selected",!0),n.config.collapsed&&1==n.getItem(e).$level&&jeeplus.html.addCss(this.$view,"jeeplus_selected",!0)},i.queryView({view:"menu"}).sH=!0}i.attachEvent("onBeforeShow",function(){return t.collapsed}),this.Ns=[i],t.popupId=i.config.id,jeeplus.UE(document.body,"mousemove",function(e){var t=e.target||e.srcElement;i.config.hidden||i.$view.contains(t)||this.$view.firstChild.contains(t)||i.queryView({view:"menu"}).dr||i.hide()},{bind:this})},CH:function(t,i,s){var n="jeeplus_sidebar_selected";t.data.each(function(e){!this.GH(i,e.id)||s&&"0"!=this.getParentId(e.id)?t.hasCss(e.id,n)&&t.removeCss(e.id,n):t.addCss(e.id,n)},this)},GH:function(e,t){var i=this.getParentId(e);return t==i||!!i&&this.GH(i,t)},getPopup:function(){return jeeplus.$$(this.config.popupId)},position_setter:function(e){var t=e,i="left"==e?"right":"left";jeeplus.html.removeCss(this.$view,"jeeplus_sidebar_"+i),jeeplus.html.addCss(this.$view,"jeeplus_sidebar_"+t,!0);var s=this.getPopup();if(s){var n=s.$view;jeeplus.html.removeCss(n,"jeeplus_sidebar_popup_"+i),jeeplus.html.addCss(n,"jeeplus_sidebar_popup_"+t,!0)}return e},collapse:function(){this.define("collapsed",!0)},expand:function(){this.define("collapsed",!1)},toggle:function(){var e=!this.config.collapsed;this.define("collapsed",e)},collapsed_setter:function(e){var t;return e?(t=this.config.collapsedWidth,this.closeAll(),this.type.collapsed=!0,jeeplus.html.removeCss(this.$view,"jeeplus_sidebar_expanded")):(t=this.AH,this.type.collapsed=!1,jeeplus.html.addCss(this.$view,"jeeplus_sidebar_expanded",!0)),this.define("width",t),this.resize(),e}},jeeplus.ui.tree),jeeplus.type(jeeplus.ui.tree,{name:"sideBar",height:"auto",css:"jeeplus_sidebar",template:function(e,t){return t.collapsed?t.icon(e,t):t.arrow(e,t)+t.icon(e,t)+"<span>"+e.value+"</span>"},arrow:function(e,t){for(var i="",s=1;s<=e.$level;s++)if(s==e.$level&&e.$count){i+="<span class='"+("jeeplus_sidebar_dir_icon jeeplus_icon fa-angle-"+(e.open?"down":"left"))+"'></span>"}return i},icon:function(e,t){var i="";return 2<e.$level&&(i='style="padding-left:'+40*(e.$level-2)+'px"'),e.icon?"<span class='jeeplus_icon jeeplus_sidebar_icon fa-"+e.icon+"' "+i+"></span>":"<span "+i+"></span>"}}),function(){var r=jeeplus.CustomScroll={scrollStep:40,init:function(){this.ze(),jeeplus.env.$customScroll=!0,jeeplus.ui.scrollSize=0,jeeplus.destructors.push({obj:{destructor:function(){this.gu=null}}}),jeeplus.attachEvent("onReconstruct",r.hu),jeeplus.attachEvent("onResize",r.hu),jeeplus.attachEvent("onClick",r.hu)},resize:function(){this.hu()},mk:function(e){e.Vf.iu=e.s.id,e.attachEvent("onAfterRender",function(){var e=r.ju(this),t=Math.max(e.dy-e.py,0),i=Math.max(e.dx-e.px,0);this.Wj&&this.jk>t?this.Wj.scrollTo(t):this.Zj&&this.bk>i&&this.Zj.scrollTo(i),r.gu==this.Vf&&r.hu()}),jeeplus.UE(e.Vf,"mouseover",r.ku),jeeplus.UE(e.Vf,"mouseout",r.lu)},enable:function(e,t){if(r.ze(),e.mapCells)return this.mk(e);var i=e;e.y&&(i=e.y.parentNode),i.mu=t||"xy",jeeplus.UE(i,"mouseover",r.ku),jeeplus.UE(i,"mouseout",r.lu),jeeplus.UE(i,"mousewheel",r.nu),jeeplus.UE(i,"DOMMouseScroll",r.nu),this.wE(e)},hu:function(){var e=r.gu;e&&e.ou&&(r.pu.call(e),r.ku.call(e))},ze:function(e){jeeplus.event(document.body,"mousemove",function(e){r.qu&&r.ru(r.qu,r.qu.su,jeeplus.html.pos(e))}),r.ze=function(){}},ku:function(e){if(r.gu=this,clearTimeout(this.tu),!this.ou&&!r.qu){var t;if(this.iu){var i=jeeplus.$$(this.iu);if(!i)return;t=r.ju(i)}else(t={dx:this.scrollWidth,dy:this.scrollHeight,px:this.clientWidth,py:this.clientHeight}).ec=t.dx>t.px&&-1!=this.mu.indexOf("x"),t.cc=t.dy>t.py&&-1!=this.mu.indexOf("y");(this.ou=t).ec&&(t.uu=r.Om(this,"x",t.dx,t.px,"width","height"),t.vu=t.px-t.uu.offsetWidth-4,t.wu=t.dx-t.px,r.trackBar&&(t.wA=r.xA(this,"x"))),t.cc&&(t.xu=r.Om(this,"y",t.dy,t.py,"height","width"),t.yu=t.py-t.xu.offsetHeight-4,t.zu=t.dy-t.py,r.trackBar&&(t.yA=r.xA(this,"y"))),r.sk(this)}},xA:function(e,t){var i=jeeplus.html.create("DIV",{jeeplusignore:"1",class:"jeeplus_c_scroll_bar_"+t},"");return e.appendChild(i),i},ru:function(e,t,i){var s=e.ou,n=e.iu;if(n&&(n=jeeplus.$$(n)),s.uu==e.Au){var l=(i.x-t.x)*s.wu/s.vu;n?n.Zj.scrollTo(n.bk+l):r.Bu(e,"scrollLeft",l)}if(s.xu==e.Au){l=(i.y-t.y)*s.zu/s.yu;n?n.Wj.scrollTo(n.jk+l):r.Bu(e,"scrollTop",l)}e.su=i,r.sk(e)},ju:function(e){var t={};return e.Zj&&e.s.scrollX&&(t.dx=e.Zj.s.scrollWidth,t.px=e.Zj.Si||1,t.ec=1<t.dx-t.px),e.Wj&&e.s.scrollY&&(t.dy=e.Wj.s.scrollHeight,t.py=e.Wj.Si||1,t.cc=1<t.dy-t.py),t},lu:function(){clearTimeout(this.tu),this.tu=jeeplus.delay(r.pu,this,[],200)},Cu:function(e){e&&(jeeplus.html.remove(e),e.Du&&(jeeplus.eventRemove(e.Du),jeeplus.eventRemove(e.Eu)))},pu:function(){if(this.ou){if(this.Au)return void(this.Fu=!0);var e=this.ou;r.Cu(e.uu),r.Cu(e.xu),jeeplus.html.removeCss(document.body,"jeeplus_noselect"),e.wA&&jeeplus.html.remove(e.wA),e.yA&&jeeplus.html.remove(e.yA),this.ou=null}},nu:function(e){var t=this.ou,i=e.wheelDelta/-40,s=!0;if(!i&&e.detail&&jeeplus.isUndefined(e.wheelDelta)&&(i=e.detail),t)if(t.uu&&(e.wheelDeltaX||i&&!t.xu)){var n=e.wheelDeltaX/-40||i;s=r.Bu(this,"scrollLeft",n*r.scrollStep)}else i&&t.xu&&(s=r.Bu(this,"scrollTop",i*r.scrollStep));return r.sk(this),!1!==s?jeeplus.html.preventEvent(e):void 0},Bu:function(e,t,i){var s=e.ou,n="scrollLeft"==t?s.dx-s.px:s.dy-s.py,l=e[t];return n<l+i&&(i=n-l),!(!i||l+i<0&&0===l)&&(jeeplus.env.isIE&&r.sk(e,t,i+l),e[t]+=i,!0)},Om:function(e,t,i,s,n,l){var a=jeeplus.html.create("DIV",{jeeplusignore:"1",class:"jeeplus_c_scroll_"+t},"<div></div>");return a.style[n]=Math.max(s*s/i-7,40)+"px",e.style.position="relative",e.appendChild(a),e.Du=jeeplus.event(a,"mousedown",r.Gu(e)),e.Eu=jeeplus.event(document.body,"mouseup",jeeplus.bind(r.Hu,e)),a},Gu:function(t){return function(e){jeeplus.html.addCss(document.body,"jeeplus_noselect",1),this.className+=" jeeplus_scroll_active",(r.qu=t).Au=this,t.su=jeeplus.html.pos(e)}},Hu:function(e){this.Au&&(jeeplus.html.removeCss(document.body,"jeeplus_noselect"),this.Au.className=this.Au.className.toString().replace(" jeeplus_scroll_active",""),this.Au=!1,r.qu=0,this.Fu&&(r.pu.call(this),this.Fu=!1))},sk:function(e,t,i){var s=e.ou;if(s&&(s.uu||s.xu)){var n=e.iu,l="scrollLeft"==t?i:e.scrollLeft,a=n?jeeplus.$$(n).bk:l,r=n?0:a,o="scrollTop"==t?i:e.scrollTop,h=n?jeeplus.$$(n).jk:o,u=n?0:h;s.uu&&(s.uu.style.bottom=1-u+"px",s.uu.style.left=Math.round(s.vu*a/(s.dx-s.px))+r+1+"px",s.wA&&(s.wA.style.bottom=1-u+"px",s.wA.style.left=r+"px")),s.xu&&(s.xu.style.right=0-r+"px",s.xu.style.top=Math.round(s.yu*h/(s.dy-s.py))+u+1+"px",s.yA&&(s.yA.style.right=0-r+"px",s.yA.style.top=u+"px"))}},wE:function(t){t.data&&t.data.attachEvent&&t.data.attachEvent("onStoreUpdated",function(){var e=r.gu;e&&t.$view.contains(e)&&r.resize()})}}}(),jeeplus.protoUI({name:"portlet",defaults:{layoutType:"wide",icon:"bars"},$init:function(e){this.x.style.position="relative",e.header&&e.body&&(e.body=[{template:e.header,type:"header"},e.body]),this.$ready.push(this.Py),jeeplus.attachEvent("onAfterPortletMove",this.xC)},xC:function(e){jeeplus.ui.each(e,function(e){e.Ow&&e.Ow()})},Py:function(){var e=this.getChildViews();if(1<e.length)jeeplus.DragControl.addDrag(e[0].$view,this);else if(this.s.icon){var t=jeeplus.html.create("div",{class:"portlet_drag"},"<span class='jeeplus_icon fa-"+this.s.icon+"'></span>");this.x.appendChild(t),jeeplus.DragControl.addDrag(t,this)}else jeeplus.DragControl.addDrag(this.$view,this)},body_setter:function(e){return this.rows_setter(jeeplus.isArray(e)?e:[e])},markDropArea:function(e,t){return e?(e=jeeplus.$$(e),this.Qy||(this.Qy=jeeplus.html.create("div",null,"&nbsp;")),e.$view.appendChild(this.Qy),void(this.Qy.className="portlet_marker"+t)):jeeplus.html.remove(this.Qy)},movePortlet:function(e,t){var i=e.getParentView(),s=this.getParentView(),n=i.index(e),l=s.index(this);if(jeeplus.callEvent("onBeforePortletMove",[s,i,this,e,t])){jeeplus.ui.PG=!0;var a=s!=i?1:0,r=i.mc;"top"==t||"bottom"==t?(1!==r&&(i=jeeplus.ui({type:e.s.layoutType,rows:[]},i,n+a),jeeplus.ui(e,i,0),n=0,a=1),"bottom"==t&&(a+=1)):("left"==t||"right"==t)&&(0!==r&&(i=jeeplus.ui({type:e.s.layoutType,cols:[]},i,n+a),jeeplus.ui(e,i,0),n=0,a=1),"right"==t&&(a+=1)),l<n&&(a-=1),jeeplus.ui(this,i,n+a),"replace"==t&&jeeplus.ui(e,s,l),this.Ry(s),jeeplus.ui.PG=!1,s.getTopParentView(),e.resize(),s.resize(),jeeplus.callEvent("onAfterPortletMove",[s,i,this,e,t])}},Ry:function(e){for(var t,i=0;e.getChildViews().length<=i;)e=(t=e).getParentView(),i=1;i&&e.removeView(t)},$drag:function(e,t){return jeeplus.html.addCss(this.x,"portlet_in_drag"),jeeplus.DragControl.Gd={source:e,from:e},this.x.innerHTML},$dragDestroy:function(e,t,i){jeeplus.html.removeCss(this.x,"portlet_in_drag"),jeeplus.html.remove(t),this.Sy&&(this.movePortlet(this.Sy,this.Ty),this.markDropArea(),this.Sy=null)},WB:function(){return jeeplus.html.offset(this.$view)},$dragPos:function(e,t,i){i.style.left="-10000px";var s=jeeplus.env.mouse.context(t),n=document.body.scrollTop||document.documentElement.scrollTop||0,l=document.body.scrollLeft||document.documentElement.scrollLeft||0,a=document.elementFromPoint(s.x-l,s.y-n),r=null;a&&(r=jeeplus.$$(a)),this.Sy=this.Uy(r),this.Ty=this.Vy(this.Sy,t),e.x=e.x-this.bc+10,e.y=e.y-20,jeeplus.DragControl.Ed=!0},Vy:function(e,t){var i="",s="";if(t&&e){var n=jeeplus.html.offset(e.$view),l=jeeplus.html.pos(t),a=l.x-n.x-n.width/2,r=l.y-n.y-n.height/2;(s=e.s.mode)||(s=Math.abs(a)*(n.height/n.width)>Math.abs(r)?"cols":"rows"),"cols"==s?i=0<=a?"right":"left":"rows"==s&&(i=0<=r?"bottom":"top"),this.markDropArea(e,i)}return this.markDropArea(e,i),i||s},Uy:function(e){for(;e;){if(e.movePortlet)return e;e=e.getParentView()}}},jeeplus.ui.layout),jeeplus.UIManager.getState=function(e,t){t=t||!1;var i={id:(e=jeeplus.$$(e)).config.id,width:e.config.width,height:e.config.height,gravity:e.config.gravity};if(jeeplus.isUndefined(e.config.collapsed)||(i.collapsed=e.config.collapsed),("tabs"===e.name||"tabbar"===e.name)&&(i.activeCell=e.getValue()),t&&(i=[i],e.q))for(var s=0;s<e.q.length;s++)i=i.concat(this.getState(e.q[s],t));return i},jeeplus.UIManager.setState=function(e){jeeplus.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var i=e[t],s=jeeplus.$$(i.id);s&&(jeeplus.isUndefined(i.collapsed)||s.define("collapsed",i.collapsed),jeeplus.isUndefined(i.activeCell)||s.setValue(i.activeCell),s.define("width",i.width),s.define("height",i.height),s.define("gravity",i.gravity))}var n=jeeplus.$$(e[0].id);n&&n.resize()},function(){function _(t,i,e){return!e&&i.format?function(e){return i.format(e[t])}:function(e){return e[t]}}function g(e,t){var i=[],s=0,n=0,l=e.getColumnConfig,a=t.columns,r=!!t.rawValues;if(i.heights={},a){if(!a.length){var o=[];for(var h in a)o.push(jeeplus.extend({id:h},jeeplus.extend({},a[h])));a=o}}else if(l)a=[].concat(e.fj);else{a=[];var u=e.data.pull[e.data.order[0]];for(var h in u)"id"!==h&&"$"!=h[0]&&a.push({id:h})}if(t.ignore)for(var c=a.length-1;0<=c;c--)t.ignore[a[c].id]&&a.splice(c,1);if(t.id&&i.push({id:"id",width:50,header:" ",template:function(e){return e.id}}),t.flatTree){var d=t.flatTree.id,p=[].concat(t.flatTree.columns),f=[],g=!!t.flatTree.fill;for(c=1;c<=p.length;c++)p[c-1].template=function(t,e){return function(e){return e.$level==t?f[t]=e[d]:g&&t<e.$level?f[t]:""}}(c);var v=0;for(c=a.length-1;0<=c;c--)a[c].id===d&&(v=c);a=[].concat(a.slice(0,v)).concat(p).concat(a.slice(v+1))}for(var m=0;m<a.length;m++){var j=a[m];h=j.id;if(!j.noExport){l&&e.Aj[h]&&(j=jeeplus.extend(jeeplus.extend({},j),e.Aj[h]));var y={id:j.id,template:r||!j.template?_(h,j,r):j.template,width:(j.width||200)*("excel"===t.export_mode?8.43/70:1),header:!1!==j.header?j.header||h:""};"excel"===t.export_mode&&jeeplus.extend(y,{type:j.exportType||"",format:j.exportFormat||""}),"string"==typeof y.header?y.header=[{text:y.header}]:y.header=jeeplus.copy(y.header);for(c=0;c<y.header.length;c++)y.header[c]=y.header[c]?y.header[c].contentId?"":y.header[c].text:"";if(s=Math.max(s,y.header.length),e.s.footer){var b=j.footer||"";b="string"==typeof b?[{text:b}]:jeeplus.copy(b);for(c=0;c<b.length;c++)b[c]?b[c]=b[c].contentId?e.getHeaderContent(b[c].contentId).getValue():b[c].text:b[c]="";y.footer=b,n=Math.max(n,y.footer.length)}i.push(y)}}for(c=0;c<i.length;c++){for(var x=s-i[c].header.length,w=0;w<x;w++)i[c].header.push("");if(e.s.footer){x=n-i[c].footer.length;for(w=0;w<x;w++)i[c].footer.push("")}}return i}function v(a,r,o){var e,t,h=!!r.filterHTML,u=/<[^>]*>/gi,c=[];if("excel"===r.export_mode&&r.docHeader&&(c=[[(r.docHeader.text||r.docHeader).toString()],[""]],r.docHeader.height&&(o.heights[0]=r.docHeader.height)),!1!==r.header&&o.length)for(var i=0;i<o[0].header.length;i++){t=[];for(var s=0;s<o.length;s++)e="",o[s].header[i]&&(e=o[s].header[i],h&&(e=o[s].header[i]=e.replace(u,""))),t.push(e);"excel"!=r.export_mode||!a.fj||!1===r.heights||a.Mt[i]===jeeplus.skin.$active.barHeight&&"all"!=r.heights||(o.heights[c.length]=a.Mt[i]),"pdf"!==r.export_mode&&(c[c.length]=t)}r.yCorrection=(r.yCorrection||0)-c.length;var d="TreeStore"==a.data.name,p=r.flatTree||r.plainOutput?"":" - ";if(a.data.each(function(e){if(!r.filter||r.filter(e)){for(var t=[],i=0;i<o.length;i++){var s=o[i],n=null;if(r.math&&e["$"+s.id]&&"="==e["$"+s.id].charAt(0)&&!e["$"+s.id].match(/^=(image|link|sparkline)\(/i)&&(n=e["$"+s.id]),this.Rt){var l=this.getSpan(e.id,s.id);l&&l[4]&&l[0]==e.id&&l[1]==s.id&&(n=l[4],h&&"string"==typeof n&&(n=n.replace(u,"")))}n||((n=s.template(e,a.type,e[s.id],s,i))||0===n||(n=""),h&&"string"==typeof n&&(d&&(n=n.replace(/<div class=.jeeplus_tree_none.><\/div>/,p)),n=n.replace(u,"")),"string"==typeof n&&"csv"===r.export_mode&&(n=n.trim()),"string"!=typeof n||"excel"!==r.export_mode&&"csv"!==r.export_mode||(n=n.replace(/<br\s*\/?>/gm,"\n"))),t.push(n)}"excel"==r.export_mode&&a.fj&&!1!==r.heights&&(e.$height&&e.$height!==jeeplus.skin.$active.rowHeight||"all"==r.heights)&&(o.heights[c.length]=e.$height||this.config.rowHeight),c.push(t)}},a),!1!==r.footer)for(var n=o[0].footer?o[0].footer.length:0,l=0;l<n;l++){var f=[];for(s=0;s<o.length;s++){var g=o[s].footer[l];h&&(g=o[s].footer[l]=g.toString().replace(u,"")),f.push(g)}"excel"!=r.export_mode||!a.fj||!1===r.heights||a.Nt[l]===jeeplus.skin.$active.barHeight&&"all"!=r.heights||(o.heights[c.length]=a.Nt[l]),"pdf"!==r.export_mode&&c.push(f)}return"excel"===r.export_mode&&r.docFooter&&(c=c.concat([[],[(r.docFooter.text||r.docFooter).toString()]]),r.docFooter.height&&(o.heights[c.length-1]=r.docFooter.height)),c}function m(e,t){var i=e.getColumnConfig,s=e.Rt,n=[];if(i){if(!1!==t.header&&(n=f(e,t,"header",n)),s){var l=t.xCorrection||0,a=t.yCorrection||0;for(var r in s){var o=s[r];for(var h in o){var u=e.getColumnIndex(h)-l,c=e.getIndexById(r)-a,d=u+o[h][0]-1,p=c+(o[h][1]-1);n.push({s:{c:u,r:c},e:{c:d,r:p}})}}}!1!==t.footer&&(n=f(e,t,"footer",n))}return n}function f(e,t,i,s){for(var n=e.config.columns,l=(t.docHeader?2:0)+("header"==i?0:(!1!==t.header?e.Mt.length:0)+e.count()),a=0;a<n.length;a++)for(var r=n[a][i],o=0;o<r.length;o++)r[o]&&(r[o].colspan||r[o].rowspan)&&s.push({s:{c:a,r:o+l},e:{c:a+(r[o].colspan||1)-1,r:o+(r[o].rowspan||1)-1+l}});return s}function j(e,t,i,s){for(var n={},l={s:{c:1e7,r:1e7},e:{c:0,r:0}},a=0;a!=e.length;++a)for(var r=0;r!=e[a].length;++r){l.s.r>a&&(l.s.r=a),l.s.c>r&&(l.s.c=r),l.e.r<a&&(l.e.r=a),l.e.c<r&&(l.e.c=r);var o={v:e[a][r]};if(null!==o.v){var h=XLSX.utils.encode_cell({c:r,r:a});if(o.v instanceof Date?(o.t="n",o.z=XLSX.SSF[x][14],o.v=(f=o.v,Math.round(25569+f/864e5))):"boolean"==typeof o.v?o.t="b":"number"==typeof o.v||o.v&&!isNaN(1*o.v)?(o.v=1*o.v,o.t="n"):"="==o.v.charAt(0)?(o.t="n",o.f=o.v,delete o.v):o.t="s",a>=t[0].header.length&&!o.f){var u=t[r];u.type&&(o.t=b[u.type]||o.t),u.format&&(o.z=u.format)}s&&(o.s=(d=r,(p=s)[c=a]&&p[c][d]?p[c][d]:"")),n[h]=o}}var c,d,p,f;return l.s.c<1e7&&(n["!ref"]=XLSX.utils.encode_range(l)),n["!rows"]=function(e){for(var t in e)e[t]={hpx:e[t],hpt:.75*e[t]};return e}(t.heights),n["!cols"]=function(e){for(var t=[],i=0;i<e.length;i++)t.push({wch:e[i].width});return t}(t),i.length&&(n["!merges"]=i),n}function r(e,t,n,l){n.header=jeeplus.isUndefined(n.header)||!0===n.header?{}:n.header,n.footer=jeeplus.isUndefined(n.footer)||!0===n.footer?{}:n.footer,n.table=n.table||{};var i=n.width||595.296,s=n.height||841.896;if(n.orientation&&"landscape"===n.orientation&&(s=[i,i=s][0]),n.autowidth){i=80;for(var a=0;a<e.length;a++)i+=e[a].width}var r=new pdfjs.Document({padding:40,font:n.hB,threshold:256,width:i,height:s}),o=!1===n.header?0:e[0].header.length,h=!1!==n.footer&&e[0].footer?e[0].footer.length:0,u=[];for(a=0;a<e.length;a++)u[a]=e[a].width;var c=jeeplus.extend(n.table,{borderWidth:1,height:20,lineHeight:1.1,borderColor:15658734,backgroundColor:16777215,color:6710886,textAlign:"left",paddingRight:10,paddingLeft:10,headerRows:o,widths:u.length?u:["100%"]}),d=r.table(c);if(o){var p=jeeplus.extend(n.header,{borderRightColor:11587299,borderBottomColor:11587299,color:4868682,backgroundColor:13820911,height:27,lineHeight:1.2});for(a=0;a<o;a++)for(var f=d.tr(p),g=0;g<e.length;g++)f.td(e[g].header[a].toString())}for(var v=0;v<t.length;v++)for(var m=d.tr({}),j=0;j<t[v].length;j++)m.td(t[v][j]);if(h){var y=jeeplus.extend(n.footer,{borderRightColor:15658734,borderBottomColor:15658734,backgroundColor:16448250,color:6710886,height:27,lineHeight:1.2});for(a=0;a<h;a++){var b=d.tr(y);for(g=0;g<e.length;g++)b.td(e[g].footer[a].toString())}}!1!==n.docFooter&&r.footer().text({color:6710886,textAlign:"center"}).append(jeeplus.i18n.dataExport.page||"Page").pageNumber().append("  "+(jeeplus.i18n.dataExport.of||"of")+"  ").pageCount();var x={text:0,image:1};if(n.docHeader&&("string"==typeof n.docHeader&&(n.docHeader={text:n.docHeader}),jeeplus.extend(n.docHeader,{color:6710886,textAlign:"right",order:0}),x.text=n.docHeader.order),n.docHeaderImage&&("string"==typeof n.docHeaderImage&&(n.docHeaderImage={url:n.docHeaderImage}),jeeplus.extend(n.docHeaderImage,{align:"right",order:1}),x.image=n.docHeaderImage.order),n.docHeader&&x.image>x.text&&r.header({paddingBottom:10}).text(n.docHeader.text,n.docHeader),n.docHeaderImage)pdfjs.load(n.docHeaderImage.url,function(e,t){if(!e){var i=new pdfjs.Image(t);r.header({paddingBottom:10}).image(i,n.docHeaderImage),n.docHeader&&x.image<x.text&&r.header({paddingBottom:10}).text(n.docHeader.text,n.docHeader)}var s=r.render();l(s,n)});else{var w=r.render();l(w,n)}}var o,y="non-existing view for export";jeeplus.toPNG=function(s,n){var l=jeeplus.promise.defer();return jeeplus.require(jeeplus.cdn+"/extras/html2canvas.min.js",function(){"string"==typeof n&&(n={filename:n}),n=n||{};var e=jeeplus.$$(s);if(e&&e.$exportView&&(e=e.$exportView(n)),!e)return l.reject(y);var t=e?e.$view:jeeplus.toNode(s),i=(n.filename||"Data")+".png";window.html2canvas(t).then(function(t){function e(e){!1!==n.download&&jeeplus.html.download(e,i),t.remove(),l.resolve(e)}t.msToBlob?e(t.msToBlob()):t.toBlob(e,"image/png")})}),l},jeeplus.toExcel=function(e,d){(d=d||{}).export_mode="excel",e=jeeplus.isArray(e)?e:[e];for(var p=[],t=0;t<e.length;t++){var i=jeeplus.$$(e[t]);if(i&&i.$exportView&&(i=i.$exportView(d)),i&&(p=p.concat(i)),d.dataOnly){var s=g(i,d);p[t]={scheme:s,exportData:v(i,d,s),spans:d.spans?m(i,d):[]}}}if(d.dataOnly)return p;var f=jeeplus.promise.defer();return jeeplus.require(jeeplus.cdn+"/extras/xlsx.core.styles.min.js",function(){if(!p.length)return f.reject(y);for(var e={SheetNames:[],Sheets:{},Workbook:{WBProps:{},Names:[]}},t=jeeplus.isArray(d.sheets)?d.sheets:[d.name||"Data"],i=0;i<p.length;i++){var s=p[i].scheme||g(p[i],d),n=p[i].exportData||v(p[i],d,s),l=p[i].spans?p[i].spans:d.spans?m(p[i],d):[],a=p[i].ranges||[],r=j(n,s,l,p[i].styles||[]),o=(t[i]||"Data"+i).replace(/[\*\?\:\[\]\\\/]/g,"").replace(/&/g,"&amp;").substring(0,31);e.SheetNames.push(o),e.Sheets[o]=r,e.Workbook.Names=e.Workbook.Names.concat(a)}var h=XLSX.write(e,{bookType:"xlsx",bookSST:!1,type:"binary"}),u=(d.filename||t.join(","))+".xlsx",c=new Blob([function(e){for(var t=new ArrayBuffer(e.length),i=new Uint8Array(t),s=0;s!=e.length;++s)i[s]=255&e.charCodeAt(s);return t}(h)],{type:"application/xlsx"});!1!==d.download&&jeeplus.html.download(c,u),f.resolve(c)}),f},jeeplus.toCSV=function(e,t){t=t||{};var i=jeeplus.$$(e);if(i&&i.$exportView&&(i=i.$exportView(t)),!i)return jeeplus.promise.reject(y);t.export_mode="csv",t.filterHTML=!0;var s=function(e,t){return jeeplus.csv.stringify(e)}(v(i,t,g(i,t))),n=(t.filename||"Data")+".csv",l=new Blob(["\ufeff"+s],{type:"text/csv"});return!1!==t.download&&jeeplus.html.download(l,n),jeeplus.promise.resolve(l)},jeeplus.toPDF=function(t,l){var a=jeeplus.promise.defer();return jeeplus.require(jeeplus.cdn+"/extras/pdfjs.js",function(){l=l||{};var e=jeeplus.$$(t);if(e&&e.$exportView&&(e=e.$exportView(l)),!e)return a.reject();l.export_mode="pdf",l.hB=o,l.fontName=l.fontName||"pt-sans.regular";function i(e,t){var i=(t.filename||"Data")+".pdf",s=new Blob([e.toString()],{type:"application/pdf"});!1!==t.download&&jeeplus.html.download(s,i),a.resolve(s)}var s=g(e,l),n=v(e,l,s);l.hB?r(s,n,l,i):pdfjs.load(jeeplus.cdn+"/extras/"+l.fontName+".ttf",function(e,t){if(e)throw e;o=l.hB=new pdfjs.TTFFont(t),r(s,n,l,i)})}),a};var b={number:"n",date:"n",string:"s",boolean:"b"},x="_table"}(),jeeplus.protoUI({name:"pdfviewer",defaults:{scale:"auto"},$init:function(e){this.$view.className+=" jeeplus_pdf";var t=document.createElement("DIV");t.className="canvas_wrapper";var i=document.createElement("canvas");this.uz=this.$view,this.gt=this.$view.appendChild(t),this.Zn=this.gt.appendChild(i),this.$pdfDoc=null,this.$pageNum=0,this.$numPages=0,this.vz=!1,this.wz=null,this.xz=this.Zn.getContext("2d"),this.zz=.1,this.Az=e.scaleDelta||1.1,this.Bz=e.minScale||.25,this.Cz=e.maxScale||10,this.Dz=1.25,this.Ez=40,this.Fz=10,this.$ready.push(this.Hz)},toolbar_setter:function(e){if("string"==typeof e){var t=jeeplus.$$(e);return t&&(t.$master=this,t.refresh()),this.attachEvent("onDocumentReady",function(){t?(t.setPage(this.$pageNum),t.setValues(this.$numPages,this.s.scale)):this.toolbar_setter(e)}),e}},Hz:function(){if(delete this.s.datatype,this.attachEvent("onScaleChange",function(e,t){t&&this.s.toolbar&&jeeplus.$$(this.s.toolbar).setScale&&jeeplus.$$(this.s.toolbar).setScale(e)}),jeeplus.env.touch)this.xE=!1,jeeplus.UE(this.x,"touchstart",jeeplus.bind(function(e){var t=e.targetTouches;2===t.length&&(jeeplus.html.preventEvent(e),this.xE=Math.abs(t[0].pageY-t[1].pageY))},this)),jeeplus.UE(this.$view,"touchmove",jeeplus.bind(function(e){var t=e.targetTouches;2===t.length&&!1!==this.xE&&(jeeplus.html.preventEvent(e),Math.abs(t[0].pageY-t[1].pageY)>this.xE?this.zoomIn():this.zoomOut(),this.xE=!1)},this)),this.attachEvent("onSwipeX",function(e,t){this.$view.scrollLeft=this.$view.scrollLeft-(t.x-e.x)}),this.attachEvent("onSwipeY",function(e,t){var i=this.$view.clientHeight,s=this.$view.scrollHeight,n=this.$view.offsetHeight,l=this.$view.scrollTop,a=t.y-e.y;if(i===s||a<0&&s-n<l||0<a&&0===l){var r=this.$pageNum+(0<a?-1:1);0<r&&r<=this.$numPages&&(this.$pageNum=r,this.Mz(this.$pageNum),this.$view.scrollTop=0<a?s:0)}else this.$view.scrollTop=l-a});else{var e=jeeplus.env.isFF?"DOMMouseScroll":"mousewheel";jeeplus.event(window,e,jeeplus.bind(function(e){var t=("DOMMouseScroll"===e.type?-e.detail:e.wheelDelta)<0?"out":"in";e.ctrlKey&&(jeeplus.html.preventEvent(e),"in"==t?this.zoomIn():this.zoomOut())},this))}},yE:function(e){if(e.name){var t=new FileReader;t.onload=jeeplus.bind(function(e){this.yE({data:e.target.result})},this),t.readAsArrayBuffer(e)}else PDFJS.getDocument({data:e.data}).then(jeeplus.bind(function(e){this.clear(),this.$pdfDoc=e,this.$numPages=this.$pdfDoc.numPages,this.$pageNum=1,this.Jz(this.$pageNum).then(jeeplus.bind(function(){this.callEvent("onDocumentReady")},this))},this))},$onLoad:function(e){return window.PDFJS?this.yE(e):jeeplus.require([jeeplus.cdn+"/extras/pdfjs/compatibility.min.js",jeeplus.cdn+"/extras/pdfjs/pdf.min.js"],function(){PDFJS.workerSrc=jeeplus.cdn+"/extras/pdfjs/pdf.worker.min.js",this.yE(e)},this),!0},Kz:function(e,t){var i=e.getViewport(t);return this.Zn.height=i.height,this.Zn.width=i.width,this.gt.style.width=i.width+"px",this.gt.style.height=i.height+"px",i},Jz:function(e){var n=this;return n.vz=!0,this.$pdfDoc.getPage(e).then(function(e){var t=isNaN(parseFloat(n.s.scale))?n.zz:n.s.scale,i=n.Kz(e,t);t!==n.s.scale&&(t=n.Lz(n.s.scale),i=n.Kz(e,t),n.s.scale=t);var s={canvasContext:n.xz,viewport:i};return e.cleanupAfterRender=!0,e.render(s).promise.then(function(){n.callEvent("onPageRender",[n.$pageNum]),n.vz=!1,null!==n.wz&&(n.Jz(n.wz),n.wz=null)})})},Mz:function(e){this.vz?this.wz=e:this.Jz(e)},renderPage:function(e){!this.$pdfDoc||e<0||e>this.$numPages||(this.$pageNum=e,this.Mz(this.$pageNum))},prevPage:function(){this.$pageNum<=1||(this.$pageNum--,this.Mz(this.$pageNum))},nextPage:function(){this.$pageNum>=this.$numPages||(this.$pageNum++,this.Mz(this.$pageNum))},zoomIn:function(){var e=this.s.scale;e=(e*this.Az).toFixed(2),e=Math.ceil(10*e)/10,e=Math.min(this.Cz,e),this.setScale(e,!0)},zoomOut:function(){var e=this.s.scale;e=(e/this.Az).toFixed(2),e=Math.floor(10*e)/10,e=Math.max(this.Bz,e),this.setScale(e,!0)},Lz:function(e){if(!isNaN(parseFloat(e)))return e;isNaN(parseFloat(this.s.scale))&&(this.s.scale=this.zz);var t=1,i=((this.uz.clientWidth-this.Ez)*this.s.scale/this.Zn.clientWidth).toFixed(2),s=((this.uz.clientHeight-this.Fz)*this.s.scale/this.Zn.clientHeight).toFixed(2);switch(e){case"page-actual":t=1;break;case"page-width":t=i;break;case"page-height":t=s;break;case"page-fit":t=Math.min(i,s);break;case"auto":var n=this.uz.clientWidth>this.uz.clientHeight?Math.min(s,i):i;t=Math.min(this.Dz,n)}return t},setScale:function(e,t){if(isNaN(parseFloat(e))){var i=this.Lz(e);this.Nz(i,t)}else this.Nz(e,t)},Nz:function(e,t){this.s.scale=e,this.renderPage(this.$pageNum),this.callEvent("onScaleChange",[e,t])},download:function(){if(this.$pdfDoc){var i=(this.s.downloadName||"document")+".pdf";this.$pdfDoc.getData().then(function(e){var t=PDFJS.createBlob(e,"application/pdf");jeeplus.html.download(t,i)})}},clear:function(){this.$pdfDoc&&(this.xz.clearRect(0,0,this.Zn.width,this.Zn.height),this.gt.style.height=this.gt.style.width=this.Zn.width=this.Zn.height=0,this.s.scale="auto",this.$pageNum=this.$numPages=0,this.$pdfDoc.transport.startCleanup(),this.$pdfDoc.destroy(),this.$pdfDoc=null,this.s.toolbar&&jeeplus.$$(this.s.toolbar)&&jeeplus.$$(this.s.toolbar).reset())}},jeeplus.EventSystem,jeeplus.AtomDataLoader,jeeplus.ui.view),jeeplus.protoUI({name:"pdfbar",reset:function(){this.setPage(0),this.setValues(0,"auto")},$init:function(e){this.$view.className+=" pdf_bar",e.cols=[{view:"button",type:"icon",icon:"arrow-left",width:35,click:function(){this.getParentView().he("prev")}},{view:"text",width:70,value:"0",on:{onBlur:function(){this.getParentView().he(this.getValue())},onKeyPress:function(e){13===e&&this.getParentView().he(this.getValue())}}},{template:jeeplus.i18n.PDFviewer.of+" #limit#",width:70,data:{limit:0},borderless:!0},{view:"button",type:"icon",icon:"arrow-right",width:35,click:function(){this.getParentView().he("next")}},{},{view:"button",type:"icon",icon:"minus",width:35,click:function(){this.getParentView().zoom("out")}},{view:"richselect",options:[],maxWidth:195,suggest:{padding:0,css:"pdf_opt_list",borderless:!0,body:{type:{height:25},scroll:!1,yCount:13}},on:{onChange:function(){this.getParentView().setMasterScale(this.getValue())}}},{view:"button",type:"icon",icon:"plus",width:35,click:function(){this.getParentView().zoom("in")}},{view:"button",type:"icon",icon:"download",width:35,click:function(){this.getParentView().download()}}],this.$ready.push(this.Oz)},Oz:function(){var e=this.getChildViews()[6].getPopup().getBody();e.clearAll(),e.parse([{id:"auto",value:jeeplus.i18n.PDFviewer.automaticZoom},{id:"page-actual",value:jeeplus.i18n.PDFviewer.actualSize},{id:"page-fit",value:jeeplus.i18n.PDFviewer.pageFit},{id:"page-width",value:jeeplus.i18n.PDFviewer.pageWidth},{id:"page-height",value:jeeplus.i18n.PDFviewer.pageHeight},{id:"0.5",value:"50%"},{id:"0.75",value:"75%"},{id:"1",value:"100%"},{id:"1.25",value:"125%"},{id:"1.5",value:"150%"},{id:"2",value:"200%"},{id:"3",value:"300%"},{id:"4",value:"400%"}]);var t=0;e.data.each(function(e){t=Math.max(jeeplus.html.getTextSize(e.value,"jeeplusbutton").width,t)}),this.getChildViews()[6].define("width",t+20),this.getChildViews()[6].resize()},he:function(e){this.setMasterPage(e),this.setPage(this.$master.$pageNum)},setScale:function(e){var t=this.getChildViews()[6];t.blockEvent(),t.getPopup().getList().exists(e)?t.setValue(e):(t.setValue(""),t.getInputNode().innerHTML=(100*e).toFixed(0)+"%"),t.unblockEvent()},setMasterScale:function(e){this.$master&&this.$master.setScale(e)},setMasterPage:function(e){this.$master&&("prev"===e?this.$master.prevPage():"next"===e?this.$master.nextPage():isNaN(parseInt(e))||this.$master.renderPage(parseInt(e)))},zoom:function(e){this.$master&&("out"===e?this.$master.zoomOut():"in"===e&&this.$master.zoomIn())},setPage:function(e){this.getChildViews()[1].setValue(e)},setValues:function(e,t){this.getChildViews()[2].data.limit=e,this.getChildViews()[2].refresh(),this.setScale(t)},download:function(){this.$master&&this.$master.download()}},jeeplus.ui.toolbar),jeeplus.protoUI({name:"excelbar",defaults:{padding:0,type:"line"},$init:function(e){e.cols=[{view:"tabbar",options:[""],optionWidth:200,on:{onaftertabclick:function(){this.getParentView().callEvent("onExcelSheetSelect",[this.getValue()])}}}]},getValue:function(){return this.getInput().getValue()},setValue:function(e){return this.getInput().setValue(e)},getInput:function(){return this.getChildViews()[0]},setSheets:function(e){var t=this.getInput();t.config.options=e,t.refresh()}},jeeplus.ui.toolbar),jeeplus.protoUI({name:"excelviewer",$init:function(){this.$ready.push(function(){this.s.toolbar&&jeeplus.$$(this.s.toolbar).attachEvent("onExcelSheetSelect",jeeplus.bind(this.showSheet,this))})},defaults:{datatype:"excel"},$onLoad:function(e){if(e.sheets){this.zA=e,this.s.toolbar&&jeeplus.$$(this.s.toolbar).setSheets(e.names);var t=e.names[0];return this.showSheet(t.id||t),!0}return!1},$exportView:function(e){if("excel"!==e.export_mode||e.dataOnly)return this;!0===e.sheets?e.sheets=this.getSheets():e.sheets&&e.sheets.length?"string"==typeof e.sheets&&(e.sheets=[e.sheets]):e.sheets=[this.IG],e.dataOnly=!0,e.heights=jeeplus.isUndefined(e.heights)&&e.styles?"all":e.heights;for(var t=[],i=this.IG,s=0;s<e.sheets.length;s++)this.showSheet(e.sheets[s]),t=t.concat(jeeplus.toExcel(this,e)),e.styles&&(t[s].styles=this.oG(e));return this.showSheet(i),delete e.dataOnly,t},showSheet:function(e){this.clearAll();var t=this.data.driver.sheetToArray(this.zA.sheets[e],{spans:this.s.spans}),i=this.s.excelHeader,s={},n={};if(t.sizes)for(var l=0;l<t.sizes.length;l++)"column"==t.sizes[l][0]?s[t.sizes[l][1]]=Math.round(t.sizes[l][2]):"row"==t.sizes[l][0]&&(n[t.sizes[l][1]]=Math.round(t.sizes[l][2]));if(i)if(!0===i){i=t.data.splice(0,1)[0];for(l=0;l<i.length;l++)i[l]={header:i[l],id:"data"+l,width:s[l],adjust:!s[l],editor:"text",sort:"string"}}else i=jeeplus.copy(i);else{i=jeeplus.copy(t.data[0]);for(l=0;l<i.length;l++)i[l]={header:"ABCDEFGHIJKLMNOPQRSTUVWXYZ"[l],id:"data"+l,width:s[l],adjust:!s[l],editor:"text",sort:"string"}}this.config.columns=i,this.refreshColumns(),this.parse(t,this.s.datatype),this.IG=e;var a=this.eG(t.spans),r=this.JG(n),o=this.KG(t.styles,a);(a||r||o)&&this.refresh()},getSheets:function(){return this.zA.names},LG:function(e,t,i,s){for(var n=!1,l=0;l<e.length;l++)if(e[l][0]===t&&e[l][1]===i){e[l][5]=jeeplus.html.createCss(this.MG(s)),this.addSpan(e[l][0],e[l][1],e[l][2],e[l][3],e[l][4],e[l][5]),n=!0;break}return n},KG:function(e,t){var i=0;if(e&&e.length){for(var s=0;s<e.length;s++){var n=e[s][0]-(this.config.excelHeader?1:0);if(0<=n){var l=this.getIdByIndex(n);if(this.exists(l)){var a=this.getItem(l),r=this.columnId(e[s][1]);r&&(t.length&&this.LG(t,l,r,e[s][2])||(a.$cellCss=a.$cellCss||{},a.$cellCss[r]=this.MG(e[s][2])),i++)}}}return i}return!1},NG:function(e){return 8===(e=e||"000000").length&&(e=e.substring(2)),"#"+e},MG:function(e){var t={};if(e.fill&&e.fill.fgColor&&(t["background-color"]=this.NG(e.fill.fgColor.rgb)),e.font){var i=e.font;i.name&&(t["font-family"]=i.name),i.sz&&(t["font-size"]=i.sz/.75+"px"),i.color&&i.color.rgb&&(t.color=this.NG(i.color.rgb)),i.bold&&(t["font-weight"]="bold"),i.underline&&(t["text-decoration"]="underline"),i.italic&&(t["font-style"]="italic"),i.strike&&(t["text-decoration"]="line-through")}if(e.alignment){var s=e.alignment;s.vertical&&"center"==s.vertical&&(t.display="flex",t["justify-content"]="flex-start",t["align-items"]="center"),s.vertical&&"bottom"==s.vertical&&(t.display="flex",t["justify-content"]="flex-end",t["align-items"]="flex-end"),s.horizontal&&(!s.vertical||"center"!=s.vertical&&"bottom"!=s.vertical?t["text-align"]=s.horizontal:t["justify-content"]="center"),s.wrapText&&(t["white-space"]="normal")}if(e.border){var n=e.border;n.top&&(t["border-top"]="1px solid "+this.NG(n.top.color.rgb)),n.bottom&&(t["border-bottom"]="1px solid "+this.NG(n.bottom.color.rgb)+" !important"),n.left&&(t["border-left"]="1px solid "+this.NG(n.left.color.rgb)),n.right&&(t["border-right"]="1px solid "+this.NG(n.right.color.rgb)+" !important")}return t},JG:function(e){var t=0;for(var i in e){var s=this.config.excelHeader?i-1:i;if(0<=s){var n=this.getIdByIndex(s);this.exists(n)&&(this.getItem(n).$height=e[i],t++)}}return this.config.fixedRowHeight=!t,t},eG:function(e){var t=[];if(this.s.spans&&e&&e.length){this.Rt={};for(var i=0;i<e.length;i++)this.config.excelHeader&&e[i][0]--,0<=e[i][0]&&(e[i][0]=this.getIdByIndex(e[i][0]),e[i][1]="data"+e[i][1],t.push(e[i]));return this.addSpan(t),t}return!1}},jeeplus.ui.datatable),jeeplus.DataDriver.excel=jeeplus.extend({toObject:function(e){if(e.excel)return e;var t=e.options||{};t.dataurl&&jeeplus.extend(t,this.zB(t.dataurl)),e=e.data||e;var i=jeeplus.promise.defer();if(e.name){t.ext=e.name.split(".").pop();var s=new FileReader;s.onload=jeeplus.bind(function(e){i.resolve(this.parseData(e.target.result,t))},this),s.readAsArrayBuffer(e)}else i.resolve(this.parseData(e,t));return i},parseData:function(e,i){e=new Uint8Array(e);for(var s=[],t=0;t!=e.length;++t)s[t]=String.fromCharCode(e[t]);var n=(i.ext||i).toLowerCase();return"xls"!=n&&(n="xlsx"),jeeplus.require(jeeplus.cdn+"/extras/xlsx.core.styles.min.js").then(jeeplus.bind(function(){var e="xls"==n?XLS.read(s.join(""),{type:"binary",cellStyles:!0,cellDates:!0}):XLSX.read(s.join(""),{type:"binary",cellStyles:!0,cellDates:!0}),t={sheets:e.Sheets,names:e.SheetNames,options:i,ranges:e.Workbook&&e.Workbook.Names||[]};return jeeplus.extend(this.getSheet(t,i),t)},this))},getSheet:function(e,t){var i=t.name||e.names[0];return e=this.sheetToArray(e.sheets[i],t),t.rows&&t.rows.length&&(e.data=e.data.splice(t.rows[0],Math.min(t.rows[1],e.data.length)-t.rows[0])),e},sheetToArray:function(e,t){var i=[],s=[],n=[],l=[];if(e&&e["!ref"]){var a,r,o,h=XLS.utils.decode_range(e["!ref"]),u=h.s.c,c=h.s.r+(t.rows?t.rows[0]:0);for(a=h.s.r;a<=h.e.r;a++){var d=[];for(r=h.s.c;r<=h.e.c;r++)if(o=e[XLS.utils.encode_cell({r:a,c:r})]){var p;p=t.math&&o.f?"="==o.f.charAt(0)?o.f:"="+o.f:"d"==o.t&&jeeplus.isDate(o.v)?jeeplus.i18n.dateFormatStr(o.v):o.v,d.push(p),o.s&&n.push([a-c,r-u,o.s])}else d.push("");i.push(d)}if(e["!merges"])for(var f=e["!merges"],g=0;g<f.length;g++){var v=f[g].s,m=f[g].e;(!t.rows||0<=v.r-c&&m.r-c<=t.rows[1])&&s.push([v.r-c,v.c-u,m.c-v.c+1,m.r-v.r+1])}if(e["!cols"]){var j=e["!cols"];for(g=0;g<j.length;g++)j[g]&&l.push(["column",g-u,Math.round(j[g].wch/(8.43/70))])}if(e["!rows"]){var y=e["!rows"];for(g=0;g<y.length;g++)y[g]&&l.push(["row",g-c,y[g].hpx])}}return{data:i,spans:s,styles:n,sizes:l,excel:!0}},zB:function(e){var t=e.split("["),i={};if(i.name=t[0],t[1]){var s=t[1].split(/[^0-9]+/g);s[0]=1*s[0]||0,s[1]=1*s[1]||9999999,i.rows=s}return i}},jeeplus.DataDriver.jsarray),jeeplus.protoUI({name:"treemap",defaults:{activeItem:!1,subRender:!0,header:!0,headerHeight:35,value:jeeplus.template("#value#"),headerTemplate:"",navigation:!0},value_setter:jeeplus.template,headerTemplate_setter:jeeplus.template,header_setter:function(e){return e&&!0!==e&&(this.type.header=e),e},$init:function(e){this.$view.className+=" jeeplus_treemap",this.x.setAttribute("role","tree"),this.PA=document.createElement("DIV"),jeeplus.extend(this.data,jeeplus.TreeStore,!0),this.data.provideApi(this,!0),this.data.attachEvent("onClearAll",jeeplus.bind(function(){this.v="",this.$values={},this.$xy={}},this)),this.attachEvent("onKeyPress",this.DD)},pg:function(e){var t=this.data.Me[e.id];this.callEvent("onItemRender",[e]);var i=e.$template?this.type["template"+e.$template].call(this,e,this.type,t):this.type.template.call(this,e,this.type,t);return this.type.templateStart.call(this,e,this.type,t)+i+this.type.templateEnd.call(this)},QA:function(e){var t=this.getItem(e),i=this.s.headerHeight,s="<div class='jeeplus_treemap_header' style='height:"+i+"px;line-height:"+i+"px;'>";return(s+=this.type.header.call(this,t,this.type))+"</div>"},_x:function(e){var t,i,s,n,l=[];if(!this.$width||!this.count())return this.v="",!1;if(e||(e=this.config.branch||0,this.v="",this.$values={},this.$xy={},this.$xy[e]={width:this.$width,height:this.$height,top:0,left:0},e&&this.s.header&&(this.$xy[e].height-=this.s.headerHeight,this.$xy[e].top=this.s.headerHeight,this.v+=this.QA(e)),n=0,this.data.each(function(e){var t=this.getParentId(e.id);if(!this.data.branch[e.id]&&(s=1*this.config.value.call(this,e),!isNaN(s)&&s))for(this.$values[e.id]=s,n+=s;t;)this.$values[t]||(this.$values[t]=0),this.$values[t]+=s,t=this.getParentId(t)},this,!1,e)),this.data.eachChild(e,function(e){this.$values[e.id]&&l.push(jeeplus.copy(e))},this),n=n||this.$values[e],l.length&&n){(i={top:(t=this.$xy[e]).top,left:t.left,dx:t.width,dy:t.height,set:[],sum:0}).dim=Math.min(i.dx,i.dy);var a=i.dx*i.dy/n;for(o=0;o<l.length;o++)l[o].$value=this.$values[l[o].id]*a;l.sort(function(e,t){return e.$value>t.$value?-1:1});for(var r=1/0,o=0;l[o];){var h=this.RA(i,l[o]);if(h<r)i.sum+=l[o].$value,i.set.push(l[o]),r=h,o++;else{this.SA(i);var u={top:i.top,left:i.left,dx:i.dx,dy:i.dy,set:[],sum:0};a=i.sum/i.dim;i.dx>i.dy?(u.left+=a,u.dx-=a):(u.top+=a,u.dy-=a),(i=u).dim=Math.min(i.dx,i.dy),r=1/0}}}i&&this.SA(i)},SA:function(e){var t,i,s,n,l=e.top,a=e.left;for(e.mode=e.dy<e.dx,e.contra=e.sum/e.dim,t=0;t<e.set.length;t++)i=e.set[t].id,n=e.mode?(s=e.contra,e.set[t].$value/e.contra):(s=e.set[t].$value/e.contra,e.contra),this.$xy[i]={},this.$xy[i].top=l,this.$xy[i].left=a,e.mode?l+=n:a+=s,this.$xy[i].width=s,this.$xy[i].height=n,this.v+=this.pg(this.getItem(i)),this.s.subRender&&this.data.branch[i]&&this._x(i)},RA:function(e,t){var i=e.sum+t.$value,s=i*i/(e.dim*e.dim*t.$value);return e.set.length&&(s=Math.max(e.dim*e.dim*e.set[0].$value/(i*i),s)),1<s?s:1/s},Ne:function(e){return this.PA.innerHTML=this.pg(e),this.PA.firstChild},showBranch:function(e){this.s.branch=e,this.refresh()},render:function(e,t,i){if(this.isVisible(this.s.id)&&!this.$blockRender){if("update"==i){var s=this.getItemNode(e);if(s){var n=this.t[e]=this.Ne(t);jeeplus.html.insertBefore(n,s),jeeplus.html.remove(s)}}else!this.data.branch||this.s.branch&&!this.data.branch[this.s.branch]||(this.t=null,this.callEvent("onBeforeRender",[]),this._x(),this.y.innerHTML=this.v,this.callEvent("onAfterRender",[]));return!0}},ad:"jeeplus_dm_id",on_click:{jeeplus_treemap_item:function(e,t){this.s.select&&("multiselect"==this.s.select||this.s.multiselect?this.select(t,!1,e.ctrlKey||e.metaKey||"touch"==this.s.multiselect,e.shiftKey):this.select(t)),this.s.activeItem&&this.isBranch(t)&&this.showBranch(t)},jeeplus_treemap_header_item:function(e){var t=jeeplus.html.locate(e,"jeeplus_dm_header_id");this.define("branch",t),this.refresh()},jeeplus_treemap_reset:function(e){this.define("branch",0),this.refresh()}},on_dblclick:{},on_mouse_move:{},TA:function(e){var t="";for(var i in e)t+=i+":"+e[i]+";";return t},type:{template:jeeplus.template("#value#"),header:function(e,t){for(var i=e.id,s="<div role='button' tabindex='0' aria-label='"+jeeplus.i18n.aria.resetTreeMap+"' class='jeeplus_treemap_reset'></div>",n=[];i;)e=this.getItem(i),n.push(t.headerItem.call(this,e,t)),i=this.getParentId(i);return n.reverse(),s+n.join("<span class='jeeplus_icon fa-angle-right jeeplus_treemap_path_icon'></span>")},headerItem:function(e){var t=this.config.headerTemplate(e),i='<a role="button" tabindex="0" aria-label="'+t+'" jeeplus_dm_header_id="'+e.id+'" class="jeeplus_treemap_header_item">';return(i+=t)+"</a>"},classname:function(e,t,i){var s="jeeplus_treemap_item";t.css&&(s+=t.css+" "),e.$css&&("object"==typeof e.$css&&(e.$css=jeeplus.html.createCss(e.$css)),s+=" "+e.$css);var n=this.$xy[e.id];i&&i.$css&&(s+=" "+i.$css),s+=" jeeplus_treemap_level_"+this.getItem(e.id).$level;var l=this.getParentId(e.id);if(l&&l!=this.s.branch||(s+=" jeeplus_treemap_level_top"),this.$height-n.top-n.height<1&&(s+=" jeeplus_treemap_item_bottom"),this.$width-n.left-n.width<1&&(s+=" jeeplus_treemap_item_right"),t.cssClass){var a=t.cssClass.call(this,e,t,i);a&&(s+="object"==typeof a?" "+jeeplus.html.createCss(a):" "+a)}return s},templateStart:function(e,t,i){var s="";if(this.$xy){var n=this.$xy[e.id];s+="width: "+n.width+"px; height: "+n.height+"px;",s+="top: "+n.top+"px; left: "+n.left+"px;"}return'<div role="treeitem" aria-level="'+e.$level+'" '+(i&&i.jeeplus_selected?'aria-selected="true" tabindex="0"':"")+' jeeplus_dm_id="'+e.id+'" class="'+t.classname.call(this,e,t,i)+'" style="'+s+'">'},templateEnd:jeeplus.template("</div>")}},jeeplus.AutoTooltip,jeeplus.Group,jeeplus.TreeAPI,jeeplus.SelectionModel,jeeplus.KeysNavigation,jeeplus.MouseEvents,jeeplus.Scrollable,jeeplus.TreeDataLoader,jeeplus.ui.proto,jeeplus.TreeRenderStack,jeeplus.CopyPaste,jeeplus.EventSystem),jeeplus.extend(jeeplus.ui.datatable,{iB:function(){this.jB=!0,this.kB={},this.define("select","area"),this.attachEvent("onAfterScroll",function(){this.refreshSelectArea()}),this.attachEvent("onAfterRender",function(){this.refreshSelectArea()}),this.attachEvent("onBeforeColumnHide",function(e){this.tC=this.getColumnIndex(e)}),this.attachEvent("onAfterColumnHide",function(){this.uC(this.tC)}),this.attachEvent("onAfterRender",function(){this.qH()}),this.wB=function(e,t,i,s){if(e.row&&t.row){if(i)return this.addSelectArea(e,t,!0),!(this.jB=!0);if(!this.callEvent("onAreaDrag",[e,t,s]))return!1;this.mB?this.nB(this.mB):!this.jB||this.s.multiselect&&s&&s.ctrlKey||(this.removeSelectArea(),this.jB=!1)}},this.attachEvent("onBeforeAreaAdd",this.oB),jeeplus.UE(this.Vf,"mousedown",this.pB,{bind:this})},ql:!0,uC:function(e){var t=this.kB;for(var i in t){var s=t[i];if(this.getColumnIndex(s.start.column)<0)if(s.start.column==s.end.column)this.removeSelectArea(s.name);else{(n=this.columnId(e+1))&&this.vC(s.name,{row:s.start.row,column:n},null)}else if(this.getColumnIndex(s.end.column)<0){var n;(n=this.columnId(e-1))&&this.vC(s.name,null,{row:s.end.row,column:n})}}},gC:function(e,t,i,s){var n,l,a,r,o,h,u,c;if(t){n=this.getColumnIndex(t.start.column),l=this.getColumnIndex(t.end.column),a=this.getIndexById(t.start.row),r=this.getIndexById(t.end.row),o=this.getColumnIndex(e.column),h=this.getIndexById(e.row),u=this.getIndexById(t.init.row),c=this.getColumnIndex(t.init.column),o<n||"left"==i?"left"===i&&s.ctrl?(n=this.OG(u,n,i),l=c):"left"===i&&c<l?l--:n=o:(l<=o||"right"==i)&&("right"==i&&s.ctrl?(l=this.OG(u,l,i),n=c):"right"==i&&n<c?n++:l=o),h<a||"up"==i?"up"==i&&s.ctrl?(a=this.OG(a,c,i),r=u):"up"==i&&u<r?r--:a=h:(r<h||"down"==i)&&("down"==i&&s.ctrl?(r=this.OG(r,c,i),a=u):"down"==i&&a<u?a++:r=h);var d={row:this.getIdByIndex(a),column:this.columnId(n)},p={row:this.getIdByIndex(r),column:this.columnId(l)};this.callEvent("onBeforeBlockSelect",[d,p,!0])&&(this.vC(t.name,d,p),this.callEvent("onSelectChange",[]),this.callEvent("onAfterBlockSelect",[d,p]))}},OG:function(e,t,i){var s=this.config.columns,n=this.data.order,l=this.data.pull[n[e]],a=s[t].id,r=0;if("right"==i)for(var o=t+1;o<s.length;o++){if(l[s[o].id]){r=o;break}r=o}else if("left"==i){for(o=t-1;0<=o;o--)if(l[s[o].id]){r=o;break}}else if("down"==i)for(o=e+1;o<n.length;o++){if(this.getItem(n[o])[a]){r=o;break}r=o}else if("up"==i)for(o=e-1;0<=o;o--)if(this.getItem(n[o])[a]){r=o;break}return r},vC:function(e,t,i,s){var n=this.kB[e];if(!n)return!1;var l=jeeplus.copy(n),a={start:t||n.start,end:i||n.end};this.oB(a),jeeplus.extend(n,a,!0),this.refreshSelectArea(),this.qH(l),s&&this.callEvent("onSelectChange",[])},areaselect_setter:function(e){return e&&(this.iB(),this.iB=function(){}),this.define("blockselect",e),e},addSelectArea:function(e,t,i,s,n,l){var a,r,o,h,u;a=this.getIndexById(e.row),r=this.getIndexById(t.row),o=this.getColumnIndex(e.column),r<a&&(u=a,a=r,r=u),(h=this.getColumnIndex(t.column))<o&&(u=o,o=h,h=u),s=s||this.mB||jeeplus.uid(),this.mB=null;var c={start:{row:this.getIdByIndex(a),column:this.columnId(o)},end:{row:this.getIdByIndex(r),column:this.columnId(h)}};return n&&(c.css=n),(l||!1===l)&&(c.handle=l),this.kB[s]?this.vC(s,c.start,c.end,!0):(c.handle=!0,c.name=s,c.init=c.start,void(this.callEvent("onBeforeAreaAdd",[c])&&(this.qB=s,i||this.removeSelectArea(),this.kB[c.name]=c,this.el.push(c),this.refreshSelectArea(),this.qH(),this.callEvent("onAfterAreaAdd",[c]),this.callEvent("onSelectChange",[]))))},PC:function(){var e=jeeplus.html.create("DIV");return e.className="jeeplus_area_selection_layer",e.style.top=this.ck+"px",e},refreshSelectArea:function(){var e,t,i,s,n=null,l=null,a=null,r=this.s.prerender;if(this.wk){e=this.Xj(r),t=this.Sj(!0===r),this.rB||(this.rB=this.PC(),this.Vf.childNodes[1].appendChild(this.rB),this.QC=this.PC(),this.Vf.childNodes[0].appendChild(this.QC),this.RC=this.PC(),this.Vf.childNodes[2].appendChild(this.RC)),this.rB.innerHTML="",this.QC.innerHTML="",this.RC.innerHTML="";var o=this.s.leftSplit,h=this.s.rightSplit;for(i in this.kB){s=this.kB[i];var u=this.BD(s,e,t);if(null!==u){var c=this.getColumnIndex(s.start.column),d=this.getColumnIndex(s.end.column);if(u.r0<=u.r1){if(this.s.topSplit&&this.s.topSplit<=void 0&&void 0<this.ak)return!1;c<o&&(l=this.SC(u.r0,c,u.r1,Math.min(d,o-1))),u.c0<=u.c1&&(n=this.SC(u.r0,u.c0,u.r1,u.c1)),h&&d>=this.Fj&&(a=this.SC(u.r0,Math.max(c,this.Fj),u.r1,d)),(l||n||a)&&this.sB(l,n,a,i,s.css,s.handle)}}else this.removeSelectArea(i)}}},BD:function(e,t,i){var s,n,l=this.getIndexById(e.start.row),a=this.getIndexById(e.end.row),r=this.getColumnIndex(e.start.column),o=this.getColumnIndex(e.end.column);if(-1===r||-1===o)return null;if(-1===l||-1===a)return null;if(n=Math.min(i[1],a),this.s.topSplit){if((s=l)>=this.s.topSplit&&(s=Math.max(i[0]-this.s.topSplit,l)),n>=this.s.topSplit){var h=this.ug(this.getIdByIndex(a),e.end.column),u=this.ug(this.getIdByIndex(this.s.topSplit-1),e.end.column);u.top+u.height>h.top+h.height&&(n=this.s.topSplit-1)}}else s=Math.max(i[0],this.getIndexById(e.start.row));return{r0:s,r1:n,c0:Math.max(t[0],r),c1:Math.min(this.Fj?t[1]-1:t[1],o)}},SC:function(e,t,i,s){return[this.ug(this.getIdByIndex(e),this.columnId(t)),this.ug(this.getIdByIndex(i),this.columnId(s))]},sB:function(e,t,i,p,f,s){var n,l,a=this.kB[p],g=0;this.s.topSplit&&(g=this.zD(a.start,!0));function r(e,t,i,s,n){var l,a,r,o,h,u,c={top:1,right:1,bottom:1,left:1};for(l in s&&delete c.left,n&&delete c.right,a=i.top-t.top+i.height-1,r=i.left-t.left+i.width,c){o=t.top+g,"bottom"==l&&(o=i.top+i.height),h=t.left,"right"==l&&(h=i.left+i.width),u="top"==l||"bottom"==l,e.appendChild(jeeplus.html.create("DIV",{class:"jeeplus_area_selection jeeplus_area_selection_"+l+(f?" "+f:""),style:"left:"+h+"px;top:"+o+"px;"+(u?"width:"+r+"px;":"height:"+(a-g)+"px;"),jeeplus_area_name:p},""));var d=e.lastChild;"right"==l&&(d.style.left=h-d.offsetWidth+"px"),"bottom"==l&&(d.style.top=o-d.offsetHeight+"px"),g&&("top"==l&&(d.style.display="none"),i.height==g&&"bottom"==l&&(d.style.display="none"))}}i&&r(this.RC,i[0],i[1],!!t,!1),t&&r(this.rB,t[0],t[1],!!e,!!i),e&&r(this.QC,e[0],e[1],!1,!!t),s&&(l=i?i[1]:t?t[1]:e[1],(n=i?this.RC:t?this.rB:this.QC).appendChild(jeeplus.html.create("DIV",{class:"jeeplus_area_selection_handle"+(f?" "+f:""),style:"left:"+(l.left+l.width)+"px;top:"+(l.top+l.height)+"px;",jeeplus_area_name:p},"")),g&&l.height==g&&(n.lastChild.style.display="none"))},nB:function(s){if(s){function e(e){for(var t=e.childNodes,i=t.length-1;0<=i;i--)t[i].getAttribute("jeeplus_area_name")==s&&e.removeChild(t[i])}e(this.rB),e(this.QC),e(this.RC)}},removeSelectArea:function(e){if(e&&this.kB[e]){if(this.callEvent("onBeforeAreaRemove",[e])){for(var t in this.qH(jeeplus.copy(this.kB[e]),!0),delete this.kB[e],this.nB(e),this.el=[],this.kB)this.el.push(this.kB[t]);this.callEvent("onAfterAreaRemove",[e])}}else for(var i in this.kB)this.removeSelectArea(i)},pB:function(e){var t=e.target||e.srcElement,i=jeeplus.html.TC(t);if(i&&-1!=i.indexOf("jeeplus_area_selection_handle")){var s=t.getAttribute("jeeplus_area_name");this.mB=s;var n=this.kB[s],l=this.ug(n.start.row,n.start.column),a=this.ug(n.end.row,n.end.column),r=this.s.prerender,o=this.getColumnIndex(n.start.column)<this.s.leftSplit?0:this.dk,h=this.getColumnIndex(n.end.column)<this.s.leftSplit?0:this.dk;return this.ul=[l.left+1+o-this.bk,l.top+1-(r?this.jk:0),{row:n.start.row,column:n.start.column}],this.xl=jeeplus.html.offset(this.Vf),this.Al(e),this.vl=[a.left+1+h-this.bk,a.top+1-(r?this.jk:0)],this.jz(!1,!1),jeeplus.html.preventEvent(e)}},getSelectArea:function(e){return this.kB[e||this.qB]},getAllSelectAreas:function(){return this.kB},oB:function(e,t){var i,s,n,l,a,r,o,h,u,c,d,p,f,g=!1,v=e.start,m=e.end;for(c=a=this.getIndexById(v.row),d=n=this.getColumnIndex(v.column),p=r=this.getIndexById(m.row),f=l=this.getColumnIndex(m.column),i=a;i<=r;i++){if(this.getItem(this.getIdByIndex(i)).$row&&!t)g=!0,f=this.fj.length-1;else if(this.config.spans)for(s=n;s<=l;s++)(o=this.getSpan(this.getIdByIndex(i),this.columnId(s)))&&((h=this.getIndexById(o[0]))<c&&(c=h,g=!0),(u=this.getColumnIndex(o[1]))<d&&(g=!0,d=u),h+o[3]-1>p&&(g=!0,p=h+o[3]-1),u+o[2]-1>f&&(g=!0,f=u+o[2]-1))}g&&(e.start={row:this.getIdByIndex(c),column:this.columnId(d)},e.end={row:this.getIdByIndex(p),column:this.columnId(f)},this.oB(e,!0))},qH:function(e,t){if(e){var i=this.getIndexById(e.end.row)-this.getIndexById(e.start.row)+1,s=this.getColumnIndex(e.end.column)-this.getColumnIndex(e.start.column)+1;this.mapCells(e.start.row,e.start.column,i,s,jeeplus.bind(function(e,t,i){var s=this.getItemNode({row:t,column:i});s&&s.removeAttribute("tabindex")},this),!0)}!t&&this.el.length&&this.mapSelection(jeeplus.bind(function(e,t,i){var s=this.getItemNode({row:t,column:i});return s&&s.setAttribute("tabindex","1"),e},this))}}),jeeplus.protoUI({name:"rangechart",$init:function(){this.attachEvent("onAfterRender",this.AB),this.BB()},AB:function(){return!this.eo.sA.length||this.CB?void this.pF(!0):(this.TE(),this.EB=(this.eo.sA[0].points[2]-this.eo.sA[0].points[0])/2,this.FB=jeeplus.html.create("div",{class:"jeeplus_chart_resizer right",tabindex:"0",role:"button","aria-label":jeeplus.i18n.aria.resizeChart}),this.GB=jeeplus.html.create("div",{class:"jeeplus_chart_resizer left",tabindex:"0",role:"button","aria-label":jeeplus.i18n.aria.resizeChart}),this.CB=jeeplus.html.create("div",{class:"jeeplus_chart_frame"}),this.x.appendChild(this.GB),this.x.appendChild(this.CB),this.x.appendChild(this.FB),this.pF(),jeeplus.UE(this.FB,jeeplus.env.mouse.down,this.IB,{bind:this}),jeeplus.UE(this.GB,jeeplus.env.mouse.down,this.IB,{bind:this}),jeeplus.UE(this.CB,jeeplus.env.mouse.down,this.IB,{bind:this}),jeeplus.UE(jeeplus.toNode(this.FB),"keydown",this.zE,{bind:this}),jeeplus.UE(jeeplus.toNode(this.GB),"keydown",this.zE,{bind:this}),this.JB&&(this.s.range=this.BB(this.JB)),this.KB(),this.callEvent("onAfterRangeChange",[this.JB]),void this.data.attachEvent("onStoreUpdated",jeeplus.bind(this.KB,this)))},$setSize:function(e,t){jeeplus.ui.chart.prototype.$setSize.call(this,e,t)&&(this.TE(),this.KB())},pF:function(e){this.FB&&!this.HB&&(this.HB=this.FB.clientWidth/2,e&&this.KB())},TE:function(){var e=this.no(this.bc,this.dc);this.kp=e.start,this.DB=e.end},removeAllSeries:function(){this.CB=this.FB=this.GB=null,jeeplus.ui.chart.prototype.removeAllSeries.apply(this,arguments)},zE:function(e){var t=e.which||e.keyCode;if(37===t||39===t){jeeplus.html.preventEvent(e);var i=-1!==e.target.className.indexOf("right")?"eindex":"sindex",s=-1!==e.target.className.indexOf("right")?"end":"start",n=this.JB;n[i]=n[i]+(37===t?-1:1),this.eo.sA[n[i]]&&(n[s]=this.SB(n[i]),this.setFrameRange(n))}},IB:function(e){if(-1!==e.target.className.indexOf("jeeplus_chart_resizer"))this.LB=e.target;else if(this.eo.sA.length){var t=this.eo.sA[this.JB.sindex].points[2]-this.EB,i=this.eo.sA[this.JB.eindex].points[2]-this.EB;this.MB={ex:jeeplus.html.pos(e).x,fx:t+this.kp.x,fw:i-t}}jeeplus.html.addCss(this.x,"jeeplus_noselect jeeplus_wresize_cursor"),this.GE(),this.NB=jeeplus.event(document.body,jeeplus.env.mouse.move,this.OB,{bind:this}),this.PB=jeeplus.event(document.body,jeeplus.env.mouse.up,this.QB,{bind:this})},GE:function(){jeeplus.h[this.NB]&&(jeeplus.eventRemove(this.NB),jeeplus.eventRemove(this.PB))},OB:function(e){if(this.LB){var t=jeeplus.html.pos(e).x-jeeplus.html.offset(this.$view).x;t>=this.kp.x&&t<=this.DB.x&&(-1!==this.LB.className.indexOf("left")?t<this.FB.offsetLeft&&(this.LB.style.left=t-this.HB+"px",this.CB.style.left=t+"px",this.CB.style.width=this.FB.offsetLeft-this.GB.offsetLeft-1+"px"):t>this.GB.offsetLeft+this.HB&&(this.LB.style.left=t-this.HB+"px",this.CB.style.width=this.FB.offsetLeft-this.GB.offsetLeft-1+"px"))}else if(this.MB){var i=jeeplus.html.pos(e).x-this.MB.ex,s=this.MB.fx+i,n=s+this.MB.fw;this.kp.x<=s&&this.DB.x>=n&&(jeeplus.extend(this.MB,{lx:s,rx:n},!0),this.GB.style.left=s-this.HB+"px",this.FB.style.left=n-this.HB+"px",this.CB.style.left=s+"px")}},QB:function(e){if(this.GE(),jeeplus.html.removeCss(this.x,"jeeplus_noselect"),jeeplus.html.removeCss(this.x,"jeeplus_wresize_cursor"),this.count()){if(this.LB){var t=jeeplus.env.touch?e.changedTouches[0].pageX:jeeplus.html.pos(e).x;t-=jeeplus.html.offset(this.$view).x+this.kp.x;var i=this.RB(t),s=this.SB(i);this.LB===this.GB?(i>=this.JB.eindex&&(i=this.JB.eindex,s=this.SB(i)),this.JB.start=s,this.JB.sindex=i):(i<=this.JB.sindex&&(i=this.JB.sindex,s=this.SB(i)),this.JB.end=s,this.JB.eindex=i),this.LB=null}else if(this.MB&&this.MB.lx){var n=this.JB.sindex=this.RB(this.MB.lx-this.kp.x),l=this.JB.eindex=this.RB(this.MB.rx-this.kp.x);this.JB.start=this.SB(n),this.JB.end=this.SB(l),this.MB=null}this.KB(),this.callEvent("onAfterRangeChange",[this.JB.start,this.JB.end])}},SB:function(e){return e>=this.data.order.length&&(e=this.data.order.length-1),this.getItem(this.data.order[e])[this.s.frameId||"id"]},RB:function(e){for(var t=this.eo.sA,i=0;i<t.length;i++)if(e<=t[i].points[2]-this.EB)return i;return t.length-1},TB:function(e){for(var t=this.s.frameId||"id",i=0;i<this.data.order.length;i++)if(this.getItem(this.data.order[i])[t]==e)return i;return-1},BB:function(e){e?(e.start&&(e.sindex=this.TB(e.start)),e.end&&(e.eindex=this.TB(e.end)),e.start=e.start||this.SB(e.sindex),e.end=e.end||this.SB(e.eindex)):e={start:0,end:0,sindex:0,eindex:0},this.JB=e},range_setter:function(e){return this.BB(e),this.JB},getFrameData:function(){for(var e=[],t=this.JB.sindex;t<=this.JB.eindex;t++){var i=this.getItem(this.data.order[t]);i&&e.push(i)}return e},setFrameRange:function(e){this.BB(e),this.KB(),this.callEvent("onAfterRangeChange",[e])},KB:function(){if(this.eo){var e=this.eo.sA;if(e.length){var t=e[this.JB.sindex].points[0]+this.kp.x+this.EB-1,i=e[this.JB.eindex].points[0]+this.kp.x+this.EB-1;this.GB.style.left=t-this.HB+"px",this.FB.style.left=i-this.HB+"px",this.CB.style.left=t+"px",this.CB.style.width=i-t+"px",this.s.range=this.JB}}},getFrameRange:function(){return this.s.range}},jeeplus.ui.chart),jeeplus.protoUI({name:"richtext",defaults:{label:"",labelWidth:80,labelPosition:"left"},$init:function(e){this.$ready.unshift(this.HE)},getInputNode:function(){return this.$view.querySelector(".jeeplus_richtext_editor")},IE:function(e){return{view:"toggle",type:"iconButton",icon:e,name:e,id:e,label:jeeplus.i18n.richtext[e],autowidth:!0,action:e,click:this.JE}},HE:function(){var e=this,t={view:"template",css:"jeeplus_richtext_container",borderless:!0,template:"<div class='jeeplus_richtext_editor' contenteditable='true'>"+this.getValue()+"</div>",on:{onAfterRender:function(){jeeplus.UE(e.getInputNode(),"blur",function(){e.CG(this.innerHTML)}),jeeplus.UE(e.getInputNode(),"keyup",function(){e.KE()})}},onClick:{jeeplus_richtext_editor:function(){e.KE()}}},i={view:"toolbar",id:"toolbar",elements:[this.IE("underline"),this.IE("bold"),this.IE("italic"),{}]},s=[i,t];"top"!==this.config.labelPosition&&this.config.labelWidth?(this.config.borderless=!0,this.cols_setter([{template:this.config.label||" ",width:this.config.labelWidth},{rows:s}])):(i.elements.push({view:"label",label:this.config.label,align:"right"}),this.rows_setter(s))},KE:function(){var e;this.$$("toolbar").setValues({italic:!1,underline:!1,bold:!1}),e=window.getSelection?window.getSelection():document.selection.createRange();for(var t=0;t<e.rangeCount;++t)e.getRangeAt(t),this.$view.contains(this.getInputNode())&&(document.queryCommandState("bold")&&this.$$("bold").setValue(!0),document.queryCommandState("underline")&&this.$$("underline").setValue(!0),document.queryCommandState("italic")&&this.$$("italic").setValue(!0))},refresh:function(){this.getInputNode().innerHTML=this.config.value},LE:function(e,t){var i;if(0<(window.getSelection()?(i=window.getSelection()).toString().length:(i=document.selection.createRange()).text.length))for(var s=0;s<i.rangeCount;++s){var n=i.getRangeAt(s);if(i.isCollapsed){var l=i.focusNode.textContent,a=i.focusNode,r=i.anchorOffset,o=l.substring(0,r).match(/[A-Za-z]*$/)[0],h=l.substring(r).match(/^[A-Za-z]*/)[0],u=r-o.length,c=r+h.length;n.setStart(a,u),n.setEnd(a,c),i.removeAllRanges(),window.getSelection().addRange(n),document.execCommand(t,!1,"")}else document.execCommand(t,!1,"")}},JE:function(){var e=(this.config.action,this.getTopParentView()),t=e.getInputNode();this.$view.contains(this.getInputNode())&&e.LE(t,this.config.action)},focus:function(){this.$view.querySelector(".jeeplus_richtext_editor").focus()},CG:function(e){var t=this.config.value;this.config.value=e||"",t!==e&&this.callEvent("onChange",[e,t])},setValue:function(e){this.CG(e),this.refresh()},getValue:function(){this.getInputNode()&&(this.config.value=this.getInputNode().innerHTML);var e=this.config.value;return e||(0===e?"0":"")}},jeeplus.IdSpace,jeeplus.ui.layout),jeeplus.protoUI({name:"gage",defaults:{value:0,minRange:0,maxRange:100,minWidth:250,minHeight:200,smoothFlow:!0,scale:3,stroke:7},$init:function(){this.$ready.push(jeeplus.bind(this.ME,this)),this.attachEvent("onDestruct",function(){this.NE=this.OE=this.PE=null})},$setSize:function(e,t){jeeplus.ui.view.prototype.$setSize.call(this,e,t)&&(this.QE(this.config.value),this.Qf(this.config.value))},QE:function(){var e=this.$view.querySelector(".jeeplus_gage_curves"),t=this.$view.querySelector(".jeeplus_gage_info"),i=this.config.scale,s=this.$width;e.setAttribute("r",s/i),e.setAttribute("strokeDasharray",Math.round(Math.PI*s/i)),e.style.r=s/i,e.style.strokeDasharray=Math.round(Math.PI*s/i),t.setAttribute("style","width: "+Math.round(s/i*2)+"px;"),this.PE.setAttribute("style","height: "+(s/i+20)+"px;"),this.NE.setAttribute("r",s/i),this.NE.setAttribute("style","stroke-dasharray: "+Math.round(this.gradientLength*Math.PI*s/i)+", 1900;"),this.RE(e.style.r)},sF:function(e){return Math.min(Math.max(e,this.s.minRange),this.s.maxRange)},RE:function(e){var t=this.$width,i=this.config.value,s=(i=this.sF(i))-this.config.minRange,n=Math.round(180*s/(this.config.maxRange-this.config.minRange));(0===n||180===n)&&(this.PE.style.paddingTop="3px"),this.OE.style.transformOrigin=t/2-.55+"px 0 0",this.OE.setAttribute("y1","0"),this.OE.setAttribute("x1",Math.round(.55*t)),this.OE.setAttribute("y2",0),this.OE.setAttribute("x2",Math.round(.525*t+parseInt(e)))},Qf:function(e){var t=this.$view.querySelector(".jeeplus_gage-value"),i=this.sF(e)-this.config.minRange,s=Math.round(180*i/(this.config.maxRange-this.config.minRange)),n=this.$width;n=Math.floor(n/10),this.$view.style.fontSize=n+"px",t.innerHTML=e,this.NE.style.stroke=this.color,this.NE.setAttribute("stroke",this.color),this.OE.setAttribute("transform","rotate("+s+" "+this.$width/2+" 0)"),this.OE.style.transform="rotate("+s+"deg)"},SE:function(){this.gradientLength=(this.sF(this.config.value)-this.config.minRange)/(this.config.maxRange-this.config.minRange);var e=this.config.color;this.color=e?"function"==typeof e?e.call(this,this.config.value):e:"hsl("+(120-Math.round(120*this.gradientLength))+", 100%, 50%)",!0===this.config.animation?this.defaultColor="hsl(125, 100%, 50%)":this.defaultColor="hsl("+(120-Math.round(120*this.gradientLength))+", 100%, 50%)"},ME:function(){this.gradientLength=0,this.SE(),this.$view.innerHTML='<div class="jeeplus_gage_label"><span>'+(this.config.label||"")+'</span></div><svg class="jeeplus_gage" style="height:300px; position: relative;"><circle class="jeeplus_gage_curves" r="0" cx="50%" cy="0" stroke="#EEEEEE" stroke-width="'+this.config.stroke+'%" fill="none"></circle><circle class="jeeplus_gage_gradient" r="0" stroke="'+this.defaultColor+'" cx="50%" cy="0" stroke-width="'+this.config.stroke+'%" fill="none" style="stroke-dasharray: 0, 1900;"></circle><line class="jeeplus_gage_gradient_point" x1="0" x2="0" y1="0" y2="0" style="stroke:#B0B0B0; stroke-width:4;"></line></svg><div class="jeeplus_gage_info"><div class="jeeplus_gage_min_range">'+this.config.minRange+'</div><div class="jeeplus_gage_max_range">'+this.config.maxRange+'</div><div class="jeeplus_gage_placeholder"><div class="jeeplus_gage-value">'+this.config.value+'</div><div class="jeeplus_gage_range_info">'+(this.config.placeholder||"")+"</div></div></div>",this.NE=this.$view.querySelector(".jeeplus_gage_gradient"),this.OE=this.$view.querySelector(".jeeplus_gage_gradient_point"),this.PE=this.$view.querySelector(".jeeplus_gage"),!0===this.isVisible()&&!0===this.config.smoothFlow&&jeeplus.env.svganimation&&!jeeplus.env.isEdge&&(this.NE.setAttribute("class","jeeplus_gage_gradient jeeplus_gage_animated"),this.OE.setAttribute("class","jeeplus_gage_gradient_point jeeplus_gage_gradient_point_animated"))},setValue:function(e){this.config.value=e,this.SE(),this.QE(),this.Qf(e)},getValue:function(){return this.config.value}},jeeplus.EventSystem,jeeplus.ui.view),jeeplus.protoUI({name:"bullet",defaults:{color:"#394646",marker:!1,layout:"x",barWidth:40,flowTime:500,labelWidth:150,stroke:8,bands:[{value:100,color:"#5be5d6"},{value:80,color:"#fff07e"},{value:60,color:"#fd8b8c"}],scale:{step:10}},label_setter:jeeplus.template,placeholder_setter:jeeplus.template,$init:function(e){e&&(e.layout&&"x"!==e.layout||e.height||(e.height=!1===e.scale?60:90),"y"!==e.layout||e.width||(e.width=!1===e.scale?60:97))},scale_setter:function(e){return e.step=e.step||10,e.template=jeeplus.template(e.template||"#value#"),e},$setSize:function(e,t){jeeplus.ui.view.prototype.$setSize.call(this,e,t)&&(this.ME("y"===this.s.layout?t:e),(this.s.value||0===this.s.value)&&this.Qf(0,this.s.value))},sF:function(e){return Math.min(Math.max(e,this.s.minRange),this.s.maxRange)},CF:function(e){var t;this.DF=e-(this.um||e),this.um=e,(1e3<(t=this.s.flowTime>this.DF?this.s.flowTime/this.DF:this.s.flowTime)||t<5)&&(t=30);var i=(this.s.value-this.EF)/t;this.FF+=i,Math.abs(this.FF-this.s.value)<Math.abs(i)&&(this.FF=this.s.value),this.FF!=this.s.value?this.GF=requestAnimationFrame(this.CF.bind(this)):(cancelAnimationFrame(this.GF),this.GF=null),this.HF.setAttribute("width",Math.floor(this.FF*this.JF))},Qf:function(e,t){this.EF=this.FF=e,this.s.value=t;var i=this.s.label;i&&(this.$view.querySelector(".jeeplus_bullet_header").textContent=i(this.s));var s=this.s.placeholder;"function"==typeof s&&(this.$view.querySelector(".jeeplus_bullet_subheader").textContent=s(this.s)),!0===this.isVisible()&&!0===this.s.smoothFlow&&window.requestAnimationFrame?this.GF||(this.GF=requestAnimationFrame(this.CF.bind(this))):this.HF.setAttribute("width",Math.floor(t*this.JF))},KF:function(e,t,i){for(var s=0;s<t.length;s++)e.setAttribute(t[s],i[s])},LF:function(e,t,i){var s=document.createElementNS("http://www.w3.org/2000/svg",e);return t&&this.KF(s,t,i),s},SF:function(e){var t=this.LF(e[0],e[1],e[2]),i=e[3];if(i)for(var s=0;s<i.length;s++)t.appendChild(this.SF(i[s]));return t},MF:function(){var e="d"+jeeplus.uid(),t=this.LF("svg",["class"],["jeeplus_bullet_graph_svg"]),i=this.LF("g"),s=this.LF("g"),n=this.LF("rect",["x","y","width","height","class","style"],[this.IF,this.TF,100,this.s.stroke,"jeeplus_bullet_value","filter:url(#"+e+");fill:"+this.s.color]),l=this.LF("rect",["x","y","width","height","fill"],[0,5,3,this.s.barWidth-10,"rgba(0,0,0,0.5)"]),a=this.LF("g",["stroke","stroke-width","fill"],["#8b94ac","2","none"]),r=this.LF("text",["text-anchor","stroke","fill"],["end","none","#8b94ac"]),o="y"==this.s.layout?"50%":this.IF-10,h="y"==this.s.layout?11:17,u=this.LF("tspan",["x","y","class"],[o,h,"jeeplus_bullet_header"]),c=this.LF("tspan",["x","y","class"],[o,17+h,"jeeplus_bullet_subheader"]),d=this.LF("text",["text-anchor","stroke","class","fill"],["middle","none","jeeplus_bullet_scale","#8b94ac"]),p=this.SF(["filter",["id","x","y","width","height"],[e,"0","-150%","110%","400%"],[["feOffset",["in","dx","dy"],["SourceAlpha",0,0]],["feGaussianBlur",["stdDeviation"],["2"]],["feComponentTransfer",0,0,[["feFuncA",["type","slope"],["linear","0.5"]]]],["feMerge",0,0,[["feMergeNode"],["feMergeNode",["in"],["SourceGraphic"]]]]]]);t.appendChild(p);var f=document.createElement("div");i.appendChild(s),!1!==this.s.marker&&(l.setAttribute("x",this.IF+this.sF(this.s.marker)*this.JF-2),i.appendChild(l)),i.appendChild(n),r.appendChild(u),r.appendChild(c),t.appendChild(r);var g="y"===this.s.layout;if(this.s.scale){for(var v=this.s.minRange;v<=this.s.maxRange;v+=this.s.scale.step){var m=this.s.labelHeight||this.s.labelWidth,j=(o=Math.floor(m+v*this.JF-(v?.1:-1)),g?(this.$width-this.s.barWidth)/2-10:o),y=g?this.NF-o+m+44:this.s.barWidth+28,b=g?-13:this.s.barWidth+3,x=g?"end":"middle",w=this.LF("tspan",["x","y","text-anchor"],[j,y,x]),_=this.LF("line",["x1","y1","x2","y2","stroke-width"],[o,b,o,b+10,1]);f.innerHTML=this.s.scale.template({value:v}),w.appendChild(f.childNodes[0]),d.appendChild(w),a.appendChild(_)}i.appendChild(a),t.appendChild(d)}for(v=0;v<this.s.bands.length;v++){var $=this.s.bands[v],C=this.LF("path");n=this.sF($.value)*this.JF;C.setAttribute("d","M "+this.IF+",0 l "+n+",0 l 0,"+this.s.barWidth+" l -"+n+",0 z"),C.setAttribute("fill",$.color),s.appendChild(C)}if(t.appendChild(i),"y"===this.s.layout){var S=this.s.scale?this.$width/2-10:0,I=this.$height+this.IF-28;i.setAttribute("transform","translate("+S+", "+I+") rotate(270)"),r.setAttribute("text-anchor","middle"),r.childNodes[0].setAttribute("x","55%"),r.childNodes[1].setAttribute("x","55%"),d.setAttribute("text-anchor","right")}return t.setAttribute("viewBox","0 0 "+this.$width+" "+this.$height),t},ME:function(e){if(e){var t=this.$view;t.innerHTML="";var i=this.s.labelHeight||this.s.labelWidth;this.IF=this.s.label?i:7,this.TF=Math.floor((this.s.barWidth-this.s.stroke)/2),this.NF=e-this.IF-30,this.JF=this.NF/(this.s.maxRange-this.s.minRange);var s=this.MF();s.setAttribute("height",this.$height),s.setAttribute("width",this.$width),t.appendChild(s),this.HF=t.querySelector(".jeeplus_bullet_value")}},setValue:function(e){this.s.value!=e&&this.Qf(this.s.value,e)},getValue:function(){return this.s.value}},jeeplus.ui.gage,jeeplus.ui.view),jeeplus.protoUI({name:"switch",defaults:{template:function(e,t){t.HH();var i=e.name||"x"+jeeplus.uid(),s="";e.labelRight&&(s="<label class='jeeplus_label_right'>"+e.labelRight+"</label>",e.labelWidth&&(e.label=e.label||"&nbsp;"));var n=e.checkValue==e.value,l='<label class="jeeplus_switch_box '+(n?" jeeplus_switch_on":"")+'" style="width:'+t.IH+'px" for="'+i+'"><span class="jeeplus_switch_text">'+((n?e.onLabel:e.offLabel)||"")+'</span><span class="jeeplus_switch_handle" style="left:'+(n?t.IH-t.JH:0)+'px;"><input  id="'+i+'" class="jeeplus_switch_toggle" type="checkbox" '+(n?"checked":"")+"></span></label>"+s;return t.$renderInput(e,l)}},$skin:function(){this.JH=jeeplus.skin.$active.switchHeight,this.IH=jeeplus.skin.$active.switchWidth},$setValue:function(e){var t=this.s,i=e==t.checkValue,s=this.$view.querySelector(".jeeplus_switch_box");if(s){var n=s.childNodes[1],l=(i?t.onLabel:t.offLabel)||"";i?jeeplus.html.addCss(s,"jeeplus_switch_on"):jeeplus.html.removeCss(s,"jeeplus_switch_on"),n.style.left=(i?this.IH-this.JH:0)+"px",n.firstChild.checked=i,l&&(s.childNodes[0].innerHTML=l)}},HH:function(){var e=this.s;if(e.onLabel||e.offLabel){var t=e.onLabel?jeeplus.html.getTextSize(e.onLabel,"jeeplus_switch_text").width:0,i=e.onLabel?jeeplus.html.getTextSize(e.offLabel,"jeeplus_switch_text").width:0;this.IH=Math.max(t,i)+this.JH}},on_click:{jeeplus_switch_toggle:function(e,t,i){this.toggle()}}},jeeplus.ui.checkbox),eval(function(e,t,i,s,n,l){if(n=function(e){return(e<9?"":n(parseInt(e/9)))+(35<(e%=9)?String.fromCharCode(e+29):e.toString(36))},!"".replace(/^/,String)){for(;i--;)l[n(i)]=s[i]||n(i);s=[function(e){return l[e]}],n=function(){return"\\w+"},i=1}for(;i--;)s[i]&&(e=e.replace(new RegExp("\\b"+n(i)+"\\b","g"),s[i]));return e}('5 2="4==";3 8(){0[1("7=")](6(0.1(2)))}',0,9,"window|atob|c|function|JUU3JTg5JTg4JUU2JTlEJTgzJUU2JUIwJUI0JUU1JThEJUIwJTNBJUU4JUJGJTk5JUU2JTk4JUFGamVlcGx1cyVFNiU5NiU4NyVFNCVCQiVCNiVFNyVBRSVBMSVFNyU5MCU4NiVFNyVCMyVCQiVFNyVCQiU5RiVFRiVCQyU4QyVFNCVCOCU4RCVFNSVCRSU5NyVFNyU5NCVBOCVFNCVCQSU4RSVFNCVCQiVCQiVFNCVCRCU5NSVFNSU4NSU4RCVFOCVCNCVCOSVFNSVCQyU4MCVFNiVCQSU5MCVFOSVBMSVCOSVFNyU5QiVBRSVFNiU4OCU5NiVFOCU4MCU4NSVFNSU5NSU4NiVFNCVCOCU5QSVFNSVCQyU4MCVFNiVCQSU5MCVFOSVBMSVCOSVFNyU5QiVBRSVFNCVCOSU4QiVFNCVCOCU4QSVFRiVCQyU4QyVFNCVCRSVCNSVFNiU5RCU4MyVFNSVCRiU4NSVFNyVBOSVCNiVFMyU4MCU4MiVFNSVBRSU5OCVFNyVCRCU5MSVFNSU5QyVCMCVFNSU5RCU4MCUzQXd3dy5qZWVwbHVzLm9yZyVFMyU4MCU4MiVFNCVCRCU5QyVFOCU4MCU4NSVFRiVCQyU5QSVFNSU4OCU5OCVFOSVBQiU5OCVFNSVCMyVCMA|var|decodeURIComponent|YWxlcnQ|file_reg".split("|"),0,{})),function(i){function s(e){if(n[e])return n[e].exports;var t=n[e]={exports:{},id:e,loaded:!1};return i[e].call(t.exports,t,t.exports,s),t.loaded=!0,t.exports}var n={};s.m=i,s.c=n,s.p="",s(0)}([function(e,t,i){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}i(3),i(9),i(10),i(11);var n=s(i(18)),l=s(i(19)),a=s(i(20)),r=s(i(21)),o=s(i(23)),h=s(i(24)),u=s(i(25)),c=s(i(26)),d=s(i(48));jeeplus.protoUI({name:"filemanager",$init:function(e){var t=this;this.$view.className+=" jeeplus_fmanager",jeeplus.extend(this.data,jeeplus.TreeStore,!0),this.data.provideApi(this,!0),jeeplus.extend(e,this.defaults),c.init(this,e),a.init(this),r.init(this),e.legacyUploader=e.legacyUploader||jeeplus.isUndefined(XMLHttpRequest)||jeeplus.isUndefined((new XMLHttpRequest).upload),this.$ready.push(function(){t._beforeInit(),t.callEvent("onComponentInit",[])}),jeeplus.UIManager.tabControl=!0,jeeplus.extend(e,c.getUI(this,e)),this.attachEvent("onAfterLoad",function(){var e=this;if(!this.getCursor||!this.getCursor()){var t=this.config.defaultSelection;t=t?t.call(this):this.getFirstChildId(0),this.setCursor?this.setCursor(t):this.attachEvent("onComponentInit",function(){e.setCursor(t)})}})},handlers_setter:function(e){for(var t in e){var i=e[t];if("string"==typeof i)if(-1!=i.indexOf("->")){var s=i.split("->");i=jeeplus.proxy(s[0],s[1])}else"upload"!=t&&"download"!=t&&(i=jeeplus.proxy("post",i));e[t]=i}return e},_beforeInit:function(){n.init(this),d.init(this),this.config.scheme||this.define("scheme",{init:function(e){var t=this.getItem(e.id);t&&t.$count&&(e.type="folder")}}),this.attachEvent("onFolderSelect",function(e){this.setCursor(e)}),this.attachEvent("onBeforeDragIn",function(e){var t=e.target;if(t)for(var i=e.source,s=0;s<i.length;s++)for(;t;){if(t==i[s])return!1;t=this._getParentId(t)}return!0})},_getParentId:function(e){if(this.getItem(e))return jeeplus.TreeStore.getParentId.apply(this,arguments);var t=this.$$(this.config.mode).getItem(e);return t&&t.parent&&this.getItem(t.parent)?t.parent:null},getMenu:function(){return this._contextMenu},getPath:function(e){return o.getPath(this,e)},getPathNames:function(e){return o.getPathNames(this,e)},setPath:function(e){return o.setPath(this,e)},_getLocation:function(e){var t,i="";if(this.getItem(e.id)||e.parent&&this.getItem(e.parent)){e.parent?(t=this.getPathNames(e.parent)).shift():((t=this.getPathNames(e.id)).shift(),t.pop());for(var s=[],n=0;n<t.length;n++)s.push(t[n].value);i="/"+s.join("/")}else if(e.location)i=e.location;else if("string"==typeof e.id){var l=e.id.split("/");l.pop(),i="/"+l.join("/")}return i},getSearchData:function(e,t){var i=[];return this.data.each(function(e){0<=this.config.templateName(e).toLowerCase().indexOf(t.toLowerCase())&&i.push(jeeplus.copy(e))},this,!0,e),i},showSearchResults:function(e){var t=this.getCursor();if(this.config.handlers.search)r.loadSearchData(this,this.config.handlers.search,t,e);else{var i=this.getSearchData(t,e);r.parseSearchData(this,i)}},hideSearchResults:function(e){if(this.$searchResults&&(this.callEvent("onHideSearchResults",[]),this.$searchResults=!1,!e)){var t=this.getCursor();this.blockEvent(),this.setCursor(null),this.unblockEvent(),this.setCursor(t)}},goBack:function(e){return e=e?-1*Math.abs(e):-1,a.changeCursor(this,e)},goForward:function(e){return a.changeCursor(this,e||1)},levelUp:function(e){(e=e||this.getCursor())&&(e=this.getParentId(e),this.setCursor(e))},markCopy:function(e){e&&(jeeplus.isArray(e)||(e=[e]),this._moveData=e,this._copyFiles=!0)},markCut:function(e){e&&(jeeplus.isArray(e)||(e=[e]),this._moveData=e,this._copyFiles=!1)},pasteFile:function(e){if(jeeplus.isArray(e)&&(e=e[0]),e){e=e.toString();var t=this.getActiveView().getItem(e);(this.data.branch[e]&&"folder"==this.getItem(e).type||t&&"folder"==t.type)&&this._moveData&&(this._copyFiles?this.copyFile(this._moveData,e):this.moveFile(this._moveData,e))}},download:function(e){var t=this.config.handlers.download;t&&jeeplus.send(t,{action:"download",source:e})},fileExists:function(t,e,i){var s=!1;return this.data.eachChild(e,jeeplus.bind(function(e){t!=e.value||i&&e.id==i||(s=e.id)},this)),s},_refreshActiveFolder:function(){this.$skipDynLoading=!0,this.$$(this.config.mode).$skipBinding=!1,this.refreshCursor()},_setFSId:function(e){var t=this.getParentId(e.id)+"/"+e.value;e.id!=t&&this.data.changeId(e.id,t)},_changeChildIds:function(e){this.data.eachSubItem(e,jeeplus.bind(function(e){e.value&&this._setFSId(e)},this))},_callbackRename:function(e,t){var i=this.getItem(e);i.value!=t&&(i.value=t,this._refreshActiveFolder(),this.callEvent("onItemRename",[e]))},_moveFile:function(e,t,i){var s=i?"copy":"move",n=[];e.reverse();for(var l=0;l<e.length;l++)if(this.getItem(e[l])){var a=this.move(e[l],0,this,{parent:t,copy:!!i});n.push(a)}this._refreshActiveFolder();var r=this.config.handlers[s];r&&h.makeSaveRequest(this,r,{action:s,source:e.join(","),temp:n.join(","),target:t.toString()},function(e,t){if(t&&jeeplus.isArray(t))for(var i=e.temp.split(","),s=0;s<t.length;s++)t[s].id&&t[s].id!=i[s]&&this.data.pull[i[s]]&&(this.data.changeId(i[s],t[s].id),this.config.fsIds&&this._changeChildIds(t[s].id),t[s].value&&this._callbackRename(t[s].id,t[s].value));this._updateDynSearch()})},_updateDynSearch:function(){this.$searchResults&&this.$searchValue&&this.showSearchResults(this.$searchValue)},copyFile:function(e,t){this.moveFile(e,t,!0)},moveFile:function(e,t,i){var s,n,l;for("string"==typeof e&&(e=e.split(",")),jeeplus.isArray(e)||(e=[e]),t?this.data.branch[t]||"folder"==this.getItem(t.toString()).type||(t=this.getParentId(t)):t=this.getCursor(),l=!0,t=t.toString(),s=0;s<e.length;s++)n=e[s].toString(),l=l&&this._isMovingAllowed(n,t);l?this._moveFile(e,t,!!i):this.callEvent(i?"onCopyError":"onMoveError",[])},deleteFile:function(e,t){"string"==typeof e&&(e=e.split(",")),jeeplus.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var s=e[i];this.$$(this.config.mode).isSelected(s)&&this.$$(this.config.mode).unselect(s),s==this.getCursor()&&this.setCursor(this.getFirstId()),s&&this.remove(s)}this._refreshActiveFolder();var n=this.config.handlers.remove;n?(t&&(t=jeeplus.bind(t,this)),h.makeSaveRequest(this,n,{action:"remove",source:e.join(",")},t)):t&&t.call(this)},_createFolder:function(e,t){this.add(e,0,t),e.source=e.value,e.target=t,this._refreshActiveFolder();var i=this.config.handlers.create;i&&(e.action="create",h.makeSaveRequest(this,i,e,function(e,t){t.id&&(e.id!=t.id&&this.data.changeId(e.id,t.id),this.config.fsIds&&this._changeChildIds(t.id),t.value&&this._callbackRename(t.id,t.value))}))},createFolder:function(e){if("string"==typeof e&&(e=e.split(",")),jeeplus.isArray(e)&&(e=e[0]),e){e=""+e;var t=this.getItem(e);this.data.branch[e]||"folder"==t.type||(e=this.getParentId(e));var i=this.config.templateCreate(t);e=""+e,this._createFolder(i,e)}},editFile:function(e){jeeplus.isArray(e)&&(e=e[0]),this.getActiveView()&&this.getActiveView().edit&&this.getActiveView().edit(e)},renameFile:function(e,t,i){var s=this.getItem(e);i=i||"value",s&&(s[i]=t),this.refresh(s?e:""),this._refreshActiveFolder(),this.callEvent("onFolderSelect",[this.getCursor()]);var n=this.config.handlers.rename;if(n){var l={source:e,action:"rename",target:t};h.makeSaveRequest(this,n,l,function(e,t){t.id&&this.getItem(e.source)&&(e.source!=t.id&&this.data.changeId(e.source,t.id),this.config.fsIds&&this._changeChildIds(t.id),t.value&&this._callbackRename(t.id,t.value)),this._updateDynSearch()})}},_isMovingAllowed:function(e,t){for(;t;){if(t==e||!this.data.branch[t]&&"folder"!=this.getItem(t.toString()).type)return!1;t=this.getParentId(t)}return!0},getActiveView:function(){return this._activeView||this.$$("tree")||null},getActive:function(){var e=this.getSelectedFile();return e||this.getCursor()},getCurrentFolder:function(){return this.$$("tree").getSelectedId()},getSelectedFile:function(){var e=null,t=this.$$(this.config.mode).getSelectedId();if(t)if(jeeplus.isArray(t)){e=[];for(var i=0;i<t.length;i++)e.push(t[i].toString())}else e=t.toString();return e},_openFolder:function(e){this.callEvent("onBeforeLevelDown",[e])&&(this.setCursor(e),this.callEvent("onAfterLevelDown",[e]))},_runFile:function(e){this.callEvent("onBeforeRun",[e])&&(this.download(e),this.callEvent("onAfterRun",[e]))},_onFileDblClick:function(e){e=e.toString();var t=this.getItem(e);if(t)this.data.branch[e]||"folder"==t.type?this._openFolder(e):this._runFile(e);else if(this.$$(this.config.mode).filter)if("folder"!=(t=this.$$(this.config.mode).getItem(e)).type)this._runFile(e);else{var i=t&&t.parents?t.parents:o.getParentFolders(e);i.length&&this.openFolders(i).then(jeeplus.bind(function(){this._openFolder(e)},this))}},openFolders:function(e){return r.openFolders(this,e)},_addElementHotKey:function(e,t,i){var s=jeeplus.UIManager.addHotKey(e,t,i);(i||this).attachEvent("onDestruct",function(){jeeplus.UIManager.removeHotKey(s,t,i)})},clearBranch:function(e){r.clearBranch(this,e)},parseData:function(e){r.parseData(this,e)},_getDynMode:function(){return r.getDynMode(this)},loadDynData:function(e,t,i,s){r.loadDynData(this,e,t,i,s)},getUploader:function(){return d.getUploader(this)},uploadFile:function(e,t){return d.uploadFile(this,e,t)},hideTree:function(){this.callEvent("onBeforeHideTree",[])&&(u.hideTree(this),this.callEvent("onAfterHideTree",[]))},showTree:function(){this.callEvent("onBeforeShowTree",[])&&(u.showTree(this),this.callEvent("onAfterShowTree",[]))},defaults:l.values},jeeplus.ProgressBar,jeeplus.IdSpace,jeeplus.ui.layout,jeeplus.TreeDataMove,jeeplus.TreeDataLoader,jeeplus.DataLoader,jeeplus.EventSystem,jeeplus.Settings)},,,function(e,t){},,,,,,function(e,t){"use strict";jeeplus.type(jeeplus.ui.tree,{name:"FileTree",css:"jeeplus_fmanager_tree",dragTemplate:jeeplus.template("#value#"),icon:function(e){for(var t="",i=1;i<e.$level;i++)t+="<div class='jeeplus_tree_none'></div>";return t+(e.jeeplus_child_branch&&!e.$count?"<div class='jeeplus_tree_child_branch jeeplus_fmanager_icon jeeplus_tree_close'></div>":0<e.$count?e.open?"<div class='jeeplus_fmanager_icon jeeplus_tree_open'></div>":"<div class='jeeplus_fmanager_icon jeeplus_tree_close'></div>":"<div class='jeeplus_tree_none'></div>")},folder:function(e){return e.$count&&e.open?' <svg class="icon" aria-hidden="true">\n                        <use xlink:href="#icon-open"></use>\n                    </svg>':' <svg class="icon" aria-hidden="true">\n                        <use xlink:href="#icon-wenjianjiaweigongxiang"></use>\n                    </svg>'}}),jeeplus.type(jeeplus.ui.dataview,{name:"FileView",css:"jeeplus_fmanager_files",height:110,margin:10,width:150,template:function(e,t){var i=t.templateName(e,t),s=i;if(16<i.replace(/[^\x00-\xff]/g,"aa").length)for(var n=0,l=0;l<i.length;l++){if(255<i.charCodeAt(l)?n+=2:n++,16==n){s=i.substring(0,l+1)+"...";break}if(16<n){s=i.substring(0,l)+"...";break}}return'<div class=\'jeeplus_fmanager_file\'><svg class="icon" style=\'width: 5em;height: 5em;\' aria-hidden="true">\n                <use xlink:href="#'+t.templateAliIcon(e,t)+'"></use>\n                </svg><div class="name" title=\''+i+"'>"+s+"</div></div>"}})},function(e,t){"use strict";jeeplus.i18n.filemanager={actions:"快捷",back:"返回",forward:"前进",levelUp:"向上一层",name:"文件名",size:"大小",type:"类型",date:"上传日期",copy:"复制",cut:"剪切",paste:"粘贴",upload:"上传",download:"下载",remove:"删除",create:"创建目录",rename:"重命名",location:"位置",select:"选择文件",sizeLabels:["B","KB","MB","GB"],iconsView:"图标",tableView:"列表",hideTree:"隐藏",showTree:"展开",collapseTree:"全部关闭",expandTree:"全部展开",saving:"保存中...",errorResponse:"错误: 保存失败!",replaceConfirmation:"文件夹中存在同名的文件你想替换已经存在的文件吗?",createConfirmation:"同名文件夹已经存在，你想替换它吗 ?",renameConfirmation:"同名文件已经存在，你想替换它吗?",yes:"是",no:"否",types:{folder:"Folder",doc:"Document",excel:"Excel",pdf:"PDF",pp:"PowerPoint",text:"Text File",video:"Video File",image:"Image",code:"Code",audio:"Audio",archive:"Archive",file:"File"}}},function(e,t,i){"use strict";i(12),i(13),i(14),i(15),i(16),i(17)},function(e,t){"use strict";jeeplus.protoUI({name:"filelist"},jeeplus.EditAbility,jeeplus.ui.list)},function(e,t){"use strict";jeeplus.protoUI({name:"filemenu"},jeeplus.ContextHelper,jeeplus.ui.submenu)},function(e,t){"use strict";jeeplus.protoUI({name:"filetree",$dragHTML:function(e,t){var i=jeeplus.DragControl.getContext(),s=this.type,n=s.dragTemplate(e,s),l=jeeplus.html.getTextSize(n),a=jeeplus.html.offset(this.$view),r=t.x-a.x;return i.x_offset=r>l.width?-l.width/4:-r,i.y_offset=-l.height/2,"<div class='jeeplus_tree_item jeeplus_fmanager_drag' style='width:auto'>"+n+"</div>"}},jeeplus.EditAbility,jeeplus.ui.tree)},function(e,t){"use strict";jeeplus.protoUI({name:"filetable",$dragHTML:function(e,t){var i=jeeplus.DragControl.getContext(),s=this.getColumnIndex("value"),n=this.config.columns[s].template(e,this.type),l=jeeplus.html.getTextSize(n),a=jeeplus.html.offset(this.$view),r=t.x-a.x;i.x_offset=r>l.width?-l.width/4:-r,i.y_offset=-l.height/2;var o="<div class='jeeplus_dd_drag jeeplus_fmanager_drag' >";return(o+="<div style='width:"+(l.width+40)+"px'>"+n+"</div>")+"</div>"}},jeeplus.ui.datatable)},function(e,t){"use strict";jeeplus.protoUI({name:"fileview"},jeeplus.EditAbility,jeeplus.ui.dataview)},function(e,t){"use strict";jeeplus.protoUI({name:"path",defaults:{layout:"x",separator:",",scroll:!1},$skin:function(){this.type.height=jeeplus.skin.$active.buttonHeight||jeeplus.skin.$active.inputHeight},$init:function(){this.$view.className+=" jeeplus_path"},value_setter:function(e){return this.setValue(),e},setValue:function(e){this.clearAll(),e&&("string"==typeof e&&(e=e.split(this.config.separator)),this.parse(jeeplus.copy(e)))},getValue:function(){return this.serialize()}},jeeplus.ui.list)},function(e,t){"use strict";t.__esModule=!0,t.init=function(e){e.attachEvent("onComponentInit",function(){return function(a){var r=a.getMenu();r&&(r.attachEvent("onItemClick",function(e,t){var i=this.getItem(e),s=a[i.method]||a[e];if(s){var n=a.getActive();if(a.callEvent("onbefore"+(i.event||i.method||e),[n])){"upload"==e&&a.config.legacyUploader||(a._uploadPopup&&a._uploadPopup.hide(),r.hide());var l=[n];"upload"==e&&(t=jeeplus.html.pos(t),l.push(t)),jeeplus.delay(function(){s.apply(a,l),a.callEvent("onafter"+(i.event||i.method||e),[])})}}}),r.attachEvent("onBeforeShow",function(e){r.filter(""),r.hide();var t=r.getContext();return t&&t.obj&&!t.id&&t.obj.unselectAll(),!t||!t.obj||t.obj.callEvent("onBeforeMenuShow",[t.id,e])}))}(e)});var n=e.config.templateName,t={view:"filemenu",id:"actions",width:200,padding:0,autofocus:!1,css:"jeeplus_fmanager_actions",template:function(e,t){var i=n(e,t),s=-1==e.icon.indexOf("fm-")?""+e.icon:e.icon;return e.icon.indexOf("fm-"),"<span class='jeeplus_fmanager_icon "+s+"'></span> "+i},data:[{id:"view",batch:"file",icon:"fa fa-search-plus",value:"预览"},{id:"copy",batch:"file",method:"markCopy",icon:"fm-copy",value:jeeplus.i18n.filemanager.copy},{id:"cut",batch:"item",method:"markCut",icon:"fm-cut",value:jeeplus.i18n.filemanager.cut},{id:"paste",method:"pasteFile",icon:"fm-paste",value:jeeplus.i18n.filemanager.paste},{$template:"Separator"},{id:"create",method:"createFolder",icon:"fm-folder",value:jeeplus.i18n.filemanager.create},{id:"remove",batch:"item",method:"deleteFile",icon:"fm-delete",value:jeeplus.i18n.filemanager.remove},{id:"edit",batch:"item",method:"editFile",icon:"fm-edit",value:jeeplus.i18n.filemanager.rename},{id:"upload",method:"uploadFile",event:"UploadDialog",icon:"fm-upload",value:jeeplus.i18n.filemanager.upload},{id:"download",batch:"file",method:"download",icon:"fa fa-download",value:jeeplus.i18n.filemanager.download}]};e.callEvent("onViewInit",["actions",t]),e._contextMenu=e.ui(t),e.attachEvent("onDestruct",function(){e._contextMenu.destructor()})}},function(e,t){"use strict";t.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.values={modes:["files","table"],mode:"files",handlers:{},structure:{},fsIds:!0,templateName:jeeplus.template("#value#"),templateSize:function(e){for(var t=e.size,i=jeeplus.i18n.filemanager.sizeLabels,s=0;1<t/1024;)t/=1024,s++;var n=parseInt(t,10)==t;return jeeplus.Number.numToStr({decimalDelimiter:jeeplus.i18n.decimalDelimiter,groupDelimiter:jeeplus.i18n.groupDelimiter,decimalSize:n?0:jeeplus.i18n.groupSize})(t)+""+i[s]},templateType:function(e){var t=jeeplus.i18n.filemanager.types;return t&&t[e.type]?t[e.type]:e.type},templateDate:function(e){var t=e.date;return"object"!=(void 0===t?"undefined":i(t))&&(t=new Date(1e3*parseInt(e.date,10))),jeeplus.i18n.fullDateFormatStr(t)},templateCreate:function(){return{value:"newFolder",type:"folder",date:new Date}},templateIcon:function(e,t){return"<div class='jeeplus_fmanager_icon fm-"+(t.icons[e.type]||t.icons.file)+"'></div>"},templateListIcon:function(e,t){return'<svg class="icon" aria-hidden="true">\n                <use xlink:href="#'+(t.icons[e.type]||t.icons.file)+'"></use>\n                </svg> '},templateAliIcon:function(e,t){return t.icons[e.type]||t.icons.file},uploadProgress:{type:"icon",hide:!1},icons:{folder:"icon-wenjian",excel:"icon-ELX",pdf:"icon-PDF",pp:"icon-PPT",text:"icon-TXT",video:"icon-video1",image:"icon-img",code:"icon-code1",audio:"icon-file-audio",archive:"icon-zip",doc:"icon-DOCs",file:"icon-file"}}},function(e,t){"use strict";t.__esModule=!0,t.init=function(e){e._cursorHistory=jeeplus.extend([],jeeplus.PowerArray,!0),e.$ready.push(function(){return function(t){t.attachEvent("onAfterLoad",function(){if(!t.config.disabledHistory){var e=window.location.hash;e&&0===e.indexOf("#!/")&&t.setPath(e.replace("#!/",""))}}),t.attachEvent("onAfterCursorChange",function(e){t._historyIgnore||(t._historyCursor||t._cursorHistory.splice(1),t._cursorHistory[this._historyCursor]!=e&&(20==t._cursorHistory.length&&t._cursorHistory.splice(0,1),t._cursorHistory.push(e),t._historyCursor=this._cursorHistory.length-1)),t._historyIgnore=!1,t.config.disabledHistory||function(e,t){t=t||e.getCursor(),window.history&&window.history.replaceState?window.history.replaceState({jeeplus:!0,id:e.config.id,value:t},"","#!/"+t):window.location.hash="#!/"+t}(t,e),t.callEvent("onHistoryChange",[e,t._cursorHistory,t._historyCursor])})}(e)})},t.changeCursor=function(e,t){if(1<e._cursorHistory.length){var i=e._historyCursor+t;-1<i&&i<e._cursorHistory.length&&(e._historyIgnore=!0,e._historyCursor=i,e.setCursor(e._cursorHistory[i]))}return e.getCursor()}},function(e,t,i){"use strict";function s(t,e){var i=[];t.data.eachChild(e,function(e){t.data.branch[e.id]||"folder"==e.type||i.push(e.id)},t,!0);for(var s=0;s<i.length;s++)t.remove(i[s])}function n(e,t){e.parse(t),e.$skipDynLoading=!0,e._refreshActiveFolder(),e.$skipDynLoading=!1}function h(n,l,a,r){var o=n.getItem(l[0]);n.showProgress();var e=n.config.handlers[a],t={success:function(e,t){n.hideProgress();var i=n.data.driver.toObject(e,t);if(n.callEvent("onBeforeDynParse",[o,i,a])){o.open=!0,n.dataParser[a].call(n,o,i);var s=l.shift();l.length&&"folder"==n.getItem(l[0]).type?h(n,l,a,r):(n.refreshCursor(),r.resolve(s)),n.callEvent("onAfterDynParse",[o,i,a])}}};if(e.load)return e.load(null,t,{action:a,source:l[0]})}function a(e){for(var t in e.dataParser)if(e.config.handlers[t])return t;return null}function r(e,t){e.callEvent("onShowSearchResults",[]),e.$searchResults=!0;var i=e.$$(e.config.mode);i&&i.filter&&(i.clearAll(),e.sortState&&e.sortState.view==i.config.id&&(t=l.sortData(e.sortState.sort,t)),i.parse(t))}t.__esModule=!0,t.init=function(e){e.attachEvent("onBeforeCursorChange",function(){return!(e.$skipDynLoading=!1)}),function(e){e.dataParser={files:function(e,t){this.config.noFileCache?s(this,e.id):e.jeeplus_files=0,n(this,t)},branch:function(e,t){this.config.noFileCache?s(this,e.id):(e.jeeplus_branch=0,e.jeeplus_child_branch=0),n(this,t)}}}(e)},t.loadDynData=function(s,e,n,l,a){if(s.showProgress(),s.callEvent("onBeforeDynLoad",[e,n,l,a])){var t={success:function(e,t){s.hideProgress();var i=s.data.driver.toObject(e,t);a&&(n.open=!0),s.callEvent("onBeforeDynParse",[n,i,l])&&(s.dataParser[l].call(s,n,i),s.callEvent("onAfterDynParse",[n,i,l]))},error:function(){s.hideProgress(),s.callEvent("onDynLoadError",[])}};if(e.load)return e.load(null,t,{action:l,source:n.id})}},t.clearBranch=s,t.parseData=n,t.openFolders=function(e,t){var i,s,n,l=jeeplus.promise.defer();if((i=a(e))&&t.length){for(s=0;s<t.length;s++){if(!(n=e.getItem(t[s]))||n["jeeplus_"+i])return h(e,t.slice(s),i,l),l;n.open=!0,e.$$("tree")&&e.$$("tree").refresh(t[s])}l.resolve(t[s])}else l.reject();return l},t.getDynMode=a,t.loadSearchData=function(s,e,t,n){var i={action:"search",source:t,text:n};if(s.callEvent("onBeforeSearchRequest",[t,i])){var l={success:function(e,t){s.hideProgress();var i=s.data.driver.toObject(e,t);r(s,i),s.$searchValue=n},error:function(){s.hideProgress()}};if(e.load)return e.load(null,l,i)}},t.parseSearchData=r;var l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(22))},function(e,t){"use strict";t.__esModule=!0,t.sortData=function(e,t){for(var i=jeeplus.DataStore.prototype.sorting.create(e),s=[],n=[],l=0;l<t.length;l++)"folder"==t[l].type?s.push(t[l]):n.push(t[l]);return s.sort(i),n.sort(i),s.concat(n)}},function(e,t){"use strict";function n(e){var t,i,s=[];if("string"==typeof e)for(i=e.replace(/^\//,"").split("/"),t=0;t<i.length;t++)s.push(i.slice(0,t+1).join("/"));return s}t.__esModule=!0,t.getPath=function(e,t){t=t||e.getCursor();for(var i=[];t&&e.getItem(t);)i.push(t),t=e.getParentId(t);return i.reverse()},t.getPathNames=function(e,t){t=t||e.getCursor();for(var i=null,s=[];t&&e.getItem(t);)i=e.getItem(t),s.push({id:t,value:e.config.templateName(i)}),t=e.getParentId(t);return s.reverse()},t.setPath=function(e,t){for(var i=t;i&&e.getItem(i);)e.callEvent("onPathLevel",[i]),i=e.getParentId(i);if(e.getItem(t))t!=e.getCursor()&&(e.setCursor(t),e.callEvent("onPathComplete",[t]));else{var s=n(t);e.openFolders(s).then(function(){e.setCursor(t),e.callEvent("onPathComplete",[t])})}},t.getParentFolders=n},function(e,t){"use strict";function i(e,t){e._saveMessageDate=new Date,e._saveMessage||(e._saveMessage=jeeplus.html.create("DIV",{class:"jeeplus_fmanager_save_message"},""),e.$view.style.position="relative",jeeplus.html.insertBefore(e._saveMessage,e.$view));var i;i=t?jeeplus.i18n.filemanager.errorResponse:jeeplus.i18n.filemanager.saving,e._saveMessage.innerHTML=i}function a(s){var n=s.data.url;if(n){var l=s.data.driver;i(s,!0),jeeplus.ajax().get(n,{success:function(e,t){var i=l.toObject(e,t);i&&(i=l.getDetails(l.getRecords(i)),s.clearAll(),s.parse(i),s.data.url=n)},error:function(){}})}}t.__esModule=!0,t.makeSaveRequest=function(s,e,n,l){if(s.callEvent("onBeforeRequest",[e,n])&&(i(s),e.load)){var t={success:function(e,t){var i=s.data.driver.toObject(e,t);(function(e){e._saveMessage&&(jeeplus.html.remove(e._saveMessage),e._saveMessage=null)})(s),s.callEvent("onSuccessResponse",[n,i])&&l&&l.call(s,n,i)},error:function(e){s.callEvent("onErrorResponse",[n,e])&&a(s)}};e.load(null,t,jeeplus.copy(n))}},t.errorHandler=a},function(e,t){"use strict";t.__esModule=!0,t.hideTree=function(e){e.$$("treeLayout")&&(e.$$("treeLayout").hide(),e.$$("resizer")&&e.$$("resizer").hide(),e.$$("sidePanel")&&e.$$("sidePanel").show())},t.showTree=function(e){e.$$("treeLayout")&&(e.$$("treeLayout").show(),e.$$("resizer")&&e.$$("resizer").show(),e.$$("sidePanel")&&e.$$("sidePanel").hide())}},function(e,t,i){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function h(e,t,i){var s,n,l,a,r="",o=["rows","cols","elements","cells","columns","options","data"];for(l=0;l<o.length;l++)t[o[l]]&&(s=t[r=o[l]]);if(s)for("string"==typeof s&&e.structure[s]&&(t[r]=u(e,e.structure[s],i),s=t[r]),l=0;l<s.length;l++)n=null,"string"==typeof s[l]&&(n=a=s[l],e.structure[a]?(s[l]=u(e,jeeplus.extend({},e.structure[a]),i),s[l].id=a):s[l]={}),h(e,s[l],i),n&&(i.on&&i.on.onViewInit&&i.on.onViewInit.apply(this,[n,s[l]]),jeeplus.callEvent("onViewInit",[n,s[l],this]))}function u(e,t,i){var s=t.config||t;return"function"==typeof s?s.call(e,i):jeeplus.copy(s)}t.__esModule=!0,t.init=function(t,e){t.structure={mainLayout:p.init(t),toolbar:$.init(t),menu:f.init(t),back:n.init(t),forward:d.init(t),up:S.init(t),path:m.init(t),search:j.init(t),bodyLayout:l.init(t),treeLayout:x.init(t),sidePanel:y.init(t),treeToolbar:w.init(t),showTree:_.init(t),hideTree:_.init(t),expandAll:o.init(t),collapseAll:a.init(t),tree:C.init(t),modeViews:{config:function(e){return v.init(t,e)}},modes:{config:function(e){return g.init(t,e)}},files:{config:c.init(t)},table:{config:b.init(t)},columns:{config:r.init(t)}},function(e,t){var i,s,n=t.structure;if(n)for(s in n)n.hasOwnProperty(s)&&(i=jeeplus.copy(n[s]),e.structure[s]&&e.structure[s].config?e.structure[s].config=i.config||i:e.structure[s]=i.config||i)}(t,e)},t.getViews=h,t.getCellConfig=u,t.getUI=function(e,t){var i=e.structure.mainLayout,s=jeeplus.extend({},i.config||i);return h(e,s,t),t.on&&t.on.onViewInit&&t.on.onViewInit.apply(e,[t.id||"mainLayout",s]),jeeplus.callEvent("onViewInit",[t.id||"mainLayout",s,e]),"undefined"!=typeof SVGRect||(t.css=t.css?t.css+" jeeplus_nosvg":"jeeplus_nosvg"),s};var n=s(i(27)),l=s(i(28)),a=s(i(29)),r=s(i(30)),o=s(i(31)),c=s(i(32)),d=s(i(33)),p=s(i(34)),f=s(i(35)),g=s(i(36)),v=s(i(37)),m=s(i(38)),j=s(i(39)),y=s(i(40)),b=s(i(41)),x=s(i(42)),w=s(i(43)),_=s(i(44)),$=s(i(45)),C=s(i(46)),S=s(i(47))},function(e,t){"use strict";t.__esModule=!0,t.init=function(e){return e.attachEvent("onComponentInit",function(){return function(s){s.$$("back")&&(s.$$("back").attachEvent("onItemClick",function(){s.callEvent("onBeforeBack",[])&&(s.goBack(),s.callEvent("onAfterBack",[]))}),s.attachEvent("onHistoryChange",function(e,t,i){i?s.$$("back").enable():s.$$("back").disable()}))}(e)}),{view:"button",type:"htmlbutton",css:"jeeplus_fmanager_back",label:'<div class="fa fa-long-arrow-left "></div>',width:37,tooltip:jeeplus.i18n.filemanager.back}}},function(e,t){"use strict";t.__esModule=!0,t.init=function(){return{css:"jeeplus_fmanager_body",cols:["sidePanel","treeLayout",{view:"resizer",id:"resizer",width:3},"modeViews"]}}},function(e,t){"use strict";t.__esModule=!0,t.init=function(e){return e.attachEvent("onComponentInit",function(){return function(e){e._getDynMode()&&e.$$("collapseAll")&&e.$$("collapseAll").hide(),e.$$("collapseAll")&&e.$$("tree")&&e.$$("collapseAll").attachEvent("onItemClick",function(){e.$$("tree").closeAll()})}(e)}),{view:"button",type:"htmlbutton",css:"jeeplus_fmanager_collapse",label:'<div class="fa fa-compress "></div>',width:30,tooltip:jeeplus.i18n.filemanager.collapseTree}}},function(e,t){"use strict";t.__esModule=!0,t.init=function(t){var e=jeeplus.i18n.filemanager;return[{id:"value",header:e.name,fillspace:3,sort:"string",template:function(e,t){var i=t.templateName(e,t);return t.templateListIcon(e,t)+i},editor:"text"},{id:"date",header:e.date,fillspace:2,sort:"int",template:function(e,t){return t.templateDate(e,t)}},{id:"type",header:e.type,fillspace:1,sort:"string",template:function(e,t){return t.templateType(e)}},{id:"size",header:e.size,fillspace:1,sort:"int",css:{"text-align":"right"},template:function(e,t){return"folder"==e.type?"":t.templateSize(e)}},{id:"location",header:e.location,fillspace:2,sort:"string",template:function(e){return t._getLocation(e)},hidden:!0}]}},function(e,t){"use strict";t.__esModule=!0,t.init=function(e){return e.attachEvent("onComponentInit",function(){return function(e){e._getDynMode()&&e.$$("expandAll")&&e.$$("expandAll").hide(),e.$$("expandAll")&&e.$$("tree")&&e.$$("expandAll").attachEvent("onItemClick",function(){e.$$("tree").openAll()})}(e)}),{view:"button",type:"htmlbutton",css:"jeeplus_fmanager_expand",label:'<div class="fa fa-expand "></div>',width:30,tooltip:jeeplus.i18n.filemanager.expandTree}}},function(e,t){"use strict";t.__esModule=!0,t.init=function(){return{view:"fileview",type:"FileView",select:"multiselect",editable:!0,editaction:!1,editor:"text",editValue:"value",drag:!0,navigation:!0,tabFocus:!0,onContext:{}}}},function(e,t){"use strict";t.__esModule=!0,t.init=function(e){return e.attachEvent("onComponentInit",function(){return function(s){s.$$("forward")&&(s.$$("forward").attachEvent("onItemClick",function(){s.callEvent("onBeforeForward",[])&&(s.goForward(),s.callEvent("onAfterForward",[]))}),s.attachEvent("onHistoryChange",function(e,t,i){1==t.length||i==t.length-1?s.$$("forward").disable():s.$$("forward").enable()}))}(e)}),{view:"button",type:"htmlbutton",css:"jeeplus_fmanager_forward",label:'<div class="fa fa-long-arrow-right "></div>',width:37,tooltip:jeeplus.i18n.filemanager.forward}}},function(e,t){"use strict";t.__esModule=!0,t.init=function(){var e={type:"clean",rows:["toolbar","bodyLayout"]};return"undefined"==typeof SVGRect&&(e.css="jeeplus_nosvg"),e}},function(e,t){"use strict";t.__esModule=!0,t.init=function(e){return e.attachEvent("onComponentInit",function(){return function(e){var t=e.$$("menu");t&&(t.attachEvent("onItemClick",function(){e.callEvent("onBeforeMenu",[])&&(e.getMenu().setContext({obj:e.getActiveView(),id:e.getActive()}),e.getMenu().show(t.$view),e.callEvent("onAfterMenu",[]))}),e.config.readonly&&(t.hide(),e.$$("menuSpacer")&&e.$$("menuSpacer").hide()))}(e)}),{view:"button",type:"htmlbutton",label:'<div class="jeeplus_fmanager_bar_icon "></div>',css:"jeeplus_fmanager_menu",icon:"bars",width:37,tooltip:jeeplus.i18n.filemanager.actions}}},function(e,t){"use strict";t.__esModule=!0,t.init=function(e,t){return e.attachEvent("onComponentInit",function(){return function(i){i.$$("modes")&&i.$$("modes").attachEvent("onBeforeTabClick",function(e){var t=i.$$("modes").getValue();return!(!i.callEvent("onBeforeModeChange",[t,e])||!i.$$(e)||(i.config.mode=e,i.$$(e).show(),i.callEvent("onAfterModeChange",[t,e]),0))})}(e)}),{view:"segmented",width:70,options:[{id:"files",width:32,value:'<div class="jeeplus_fmanager_bar_icon jeeplus_fmanager_files_mode "></div>',tooltip:jeeplus.i18n.filemanager.iconsView},{id:"table",width:32,value:'<div class="jeeplus_fmanager_bar_icon jeeplus_fmanager_table_mode "></div>',tooltip:jeeplus.i18n.filemanager.tableView}],css:"jeeplus_fmanager_modes",value:t.mode}}},function(e,t,i){"use strict";function l(e,t){(function(n,l){n.data.attachEvent("onClearAll",function(){return l.clearAll()}),n.data.attachEvent("onIdChange",function(e,t){l.data.pull[e]&&l.data.changeId(e,t)}),l.attachEvent("onBeforeSelect",function(){l.$skipBinding=!0}),n.attachEvent("onBeforeCursorChange",function(){l.$skipBinding=!1}),n.attachEvent("onAfterCursorChange",function(){l.$skipBinding=!1}),l.bind(n,"$data",function(e,t){var i;if(l.$skipBinding)return!1;if(!e)return l.clearAll();if(!n.$searchResults){if(!n.$skipDynLoading)for(var s in n.dataParser)!i&&e["jeeplus_"+s]&&((i=n.config.handlers[s])&&(n.$skipDynLoading=!0,n.loadDynData(i,e,s)));!function(e,t,i,s){var n=[].concat(jeeplus.copy(i.data.getBranch(s.id))).concat(s.files||[]);e.sortState&&e.sortState.view==t.config.id&&(n=a.sortData(e.sortState.sort,n)),t.data.importData(n,!0)}(n,l,t,e)}})})(e,t),function(e,t){t.type.icons=e.config.icons,t.type.templateIcon=e.config.templateIcon,t.type.templateListIcon=e.config.templateListIcon,t.type.templateAliIcon=e.config.templateAliIcon,t.type.templateName=e.config.templateName,t.type.templateSize=e.config.templateSize,t.type.templateDate=e.config.templateDate,t.type.templateType=e.config.templateType}(e,t),function(n,e){e.attachEvent("onAfterSelect",function(e){n.getItem(e)&&n.callEvent("onItemSelect",[e])}),e.attachEvent("onItemDblClick",function(e){n._onFileDblClick(e)}),n._addElementHotKey("tab",function(e){if(!e.getSelectedId()){var t=e.getFirstId();t&&e.select(t)}},e),e.attachEvent("onFocus",function(){n._activeView=this,jeeplus.html.removeCss(this.$view,"jeeplus_blur")}),e.attachEvent("onBlur",function(){n.getMenu()&&n.getMenu().isVisible()||jeeplus.html.addCss(e.$view,"jeeplus_blur")}),e.attachEvent("onBeforeEditStop",function(e,t){return this.getTopParentView().callEvent("onBeforeEditStop",[t.id||t.row,e,t,this])}),e.attachEvent("onAfterEditStop",function(e,t){var i=this.getTopParentView();i.callEvent("onAfterEditStop",[t.id||t.row,e,t,this])&&(t.column&&"value"!=t.column?t.column&&(i.getItem(t.id||t.row)[t.column]=e.value):i.renameFile(t.id||t.row,e.value))}),e.attachEvent("onBeforeDrop",function(e){return n.callEvent("onBeforeDrop",[e])&&e.from&&n.moveFile(e.source,e.target),!1}),e.attachEvent("onBeforeDrag",function(e,t){return!n.config.readonly&&n.callEvent("onBeforeDrag",[e,t])}),e.attachEvent("onBeforeDragIn",function(e,t){return!n.config.readonly&&n.callEvent("onBeforeDragIn",[e,t])}),n._addElementHotKey("enter",function(e){for(var t=e.getSelectedId(!0),i=0;i<t.length;i++)n._onFileDblClick(t[i]);if(jeeplus.UIManager.setFocus(e),!(t=e.getSelectedId(!0)).length){var s=e.getFirstId();s&&e.select(s)}},e)}(e,t);var i=e.getMenu();i&&!e.config.readonly&&function(l,e,a){e.on_context.jeeplus_view=function(e,t){this.locate(e.target||e.srcElement)||(a.setContext&&a.setContext({obj:jeeplus.$$(e)}),a.show(e),jeeplus.html.preventEvent(e))},a.attachTo(e),e.attachEvent("onBeforeMenuShow",function(){var e=a.getContext(),i="";if(e.id&&(i="folder"===l.getItem(e.id).type?"folder":"file"),a.filter(function(e){var t=!0;return e.batch&&(t=i?e.batch==i||"item"==e.batch:"empty"==e.batch),l.config.menuFilter&&(t=t&&l.config.menuFilter(e)),t}),a.count()&&e.id){jeeplus.UIManager.setFocus(this);var t=this.getSelectedId(),s=!1;if(jeeplus.isArray(t))for(var n=0;!s&&n<t.length;n++)""+t[n]==""+e.id&&(s=!0);!s&&this.exists(e.id)&&this.select(e.id)}return 0<a.count()}),e.attachEvent("onAfterMenuShow",function(e){if(e){for(var t=this.getSelectedId(!0),i=!1,s=0;s<t.length&&!i;s++)t[s].toString()==e.toString()&&(i=!0);i||this.select(e.toString()),jeeplus.UIManager.setFocus(this)}else this.unselect()})}(e,t,i),e.config.readonly&&(t.define("drag",!1),t.define("editable",!1))}t.__esModule=!0,t.init=function(e,t){return e.attachEvent("onComponentInit",function(){return function(t){var e,i,s=t.$$(t.config.mode),n=t.config.modes;if(s&&(s.show(),t.attachEvent("onBeforeCursorChange",function(){var e=t.$$(t.config.mode);return e&&e.unselect(),!0}),t.attachEvent("onAfterCursorChange",function(){var e=t.$$(t.config.mode);e&&e.editStop()})),n)for(e=0;e<n.length;e++)(i=t.$$(n[e]))&&i.filter&&l(t,i)}(e)}),{animate:!1,cells:t.modes?jeeplus.copy(t.modes):[]}};var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(22))},function(e,t){"use strict";t.__esModule=!0,t.init=function(e){return e.attachEvent("onComponentInit",function(){return function(s){s.$$("path")&&(s.attachEvent("onFolderSelect",function(e){s.$$("path").setValue(s.getPathNames(e))}),s.$$("path").attachEvent("onItemClick",function(e){var t=s.$$("path").getIndexById(e),i=s.$$("path").count()-t-1;if(s.$searchResults&&s.hideSearchResults(),i){for(e=s.getCursor();i;)e=s.getParentId(e),i--;s.setCursor(e)}s.callEvent("onAfterPathClick",[e])}),s.data.attachEvent("onClearAll",function(){s.$$("path").clearAll()}))}(e)}),{view:"path",borderless:!0}}},function(e,t){"use strict";t.__esModule=!0,t.init=function(e){return e.attachEvent("onComponentInit",function(){return function(t){var i=t.$$("search");i&&(t.attachEvent("onHideSearchResults",function(){i.setValue("")}),t.attachEvent("onBeforeCursorChange",function(){t.$searchResults&&t.hideSearchResults(!0)}),i.attachEvent("onTimedKeyPress",function(){if(9!=this._code){var e=i.getValue();e?t.callEvent("onBeforeSearch",[e])&&(t.showSearchResults(e),t.callEvent("onAfterSearch",[e])):t.$searchResults&&t.hideSearchResults()}}),i.attachEvent("onKeyPress",function(e){this._code=e}),t.attachEvent("onAfterModeChange",function(){t.$searchResults&&t.showSearchResults(i.getValue())}))}(e)}),{view:"search",gravity:.3,minWidth:80,css:"jeeplus_fmanager_search",icon:" jeeplus_fmanager_icon"}}},function(e,t){"use strict";t.__esModule=!0,t.init=function(e){return e.attachEvent("onComponentInit",function(){return function(e){e.$$("showTree")&&e.$$("showTree").attachEvent("onItemClick",function(){e.showTree()})}(e)}),{hidden:!0,css:"jeeplus_fmanager_panel",type:"clean",rows:[{height:34,paddingY:1,paddingX:0,view:"form",cols:[{view:"button",id:"showTree",type:"htmlbutton",css:"jeeplus_fmanager_toggle",label:'<div class="jeeplus_fmanager_bar_icon "></div>',width:30,tooltip:jeeplus.i18n.filemanager.showTree}]},{template:" "}]}}},function(e,t){"use strict";t.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.init=function(e){return e.attachEvent("onComponentInit",function(){return function(n){n.$$("table")&&(n.attachEvent("onHideSearchResults",function(){n.$$("table").isColumnVisible("location")&&n.$$("table").hideColumn("location")}),n.attachEvent("onShowSearchResults",function(){n.$$("table").isColumnVisible("location")||n.$$("table").showColumn("location")}),n.$$("table").attachEvent("onBeforeEditStart",function(e){return"object"==(void 0===e?"undefined":i(e))||(this.edit({row:e,column:"value"}),!1)}),n.$$("table").data.attachEvent("onBeforeSort",function(e,t,i,s){if(n.sortState={view:n.$$("table").config.id,sort:s},n.$searchResults&&n.$$("search"))return n.showSearchResults(n.$$("search").getValue()),!1}),n.data.attachEvent("onClearAll",function(){n.sortState=null}))}(e)}),{view:"filetable",css:"jeeplus_fmanager_table",columns:"columns",headerRowHeight:34,editable:!0,editaction:!1,select:"multiselect",drag:!0,navigation:!0,resizeColumn:!0,tabFocus:!0,onContext:{}}}},function(e,t){"use strict";t.__esModule=!0,t.init=function(){return{rows:["treeToolbar","tree"]}}},function(e,t){"use strict";t.__esModule=!0,t.init=function(){return{css:"jeeplus_fmanager_tree_toolbar",height:34,paddingX:8,paddingY:1,margin:7,cols:["hideTree",{id:"treeSpacer"},"expandAll","collapseAll"]}}},function(e,t){"use strict";t.__esModule=!0,t.init=function(e){return e.attachEvent("onComponentInit",function(){return function(e){e.$$("hideTree")&&e.$$("hideTree").attachEvent("onItemClick",function(){e.hideTree()})}(e)}),{view:"button",type:"htmlbutton",css:"jeeplus_fmanager_toggle",label:'<div class="jeeplus_fmanager_bar_icon "></div>',width:30,tooltip:jeeplus.i18n.filemanager.hideTree}}},function(e,t){"use strict";t.__esModule=!0,t.init=function(){return{css:"jeeplus_fmanager_toolbar",paddingX:10,paddingY:5,margin:7,cols:["menu",{id:"menuSpacer",width:75},{margin:0,cols:["back","forward"]},"up","path","search","modes"]}}},function(e,t){"use strict";t.__esModule=!0,t.init=function(e){return e.attachEvent("onComponentInit",function(){return function(n){var s,l=n.$$("tree");if(l){l.type.icons=n.config.icons,l.sync(n,function(){this.filter(function(e){return e.$count||"folder"==e.type})}),l.on_click.jeeplus_tree_child_branch=function(e,t){var i=n.config.handlers.branch;i&&n.loadDynData(i,this.getItem(t),"branch",!0)},n.attachEvent("onBeforeDynParse",function(){s=l.getState()}),n.attachEvent("onAfterDynParse",function(e,t,i){s&&(l.setState(s),s=null),"branch"==i&&e.open&&l.open(e.id)}),l.attachEvent("onAfterSelect",function(e){n.callEvent("onFolderSelect",[e])}),n.attachEvent("onAfterCursorChange",function(e){e&&(l.select(e),l.showItem(e))}),l.attachEvent("onItemClick",function(){n.$searchResults&&n.hideSearchResults()}),n.attachEvent("onItemRename",function(e){l.refresh(e)}),l.attachEvent("onItemDblClick",function(e){this.isBranchOpen(e)?this.close(e):this.open(e)}),l.attachEvent("onBlur",function(){n.getMenu()&&n.getMenu().isVisible()||jeeplus.html.addCss(this.$view,"jeeplus_blur")}),l.attachEvent("onFocus",function(){n._activeView=l,jeeplus.html.removeCss(l.$view,"jeeplus_blur"),n.$$(n.config.mode).unselect()}),n.attachEvent("onPathComplete",function(e){l.showItem(e)}),n.config.readonly||(n.getMenu()&&n.getMenu().attachTo(l),l.attachEvent("onBeforeMenuShow",function(e){var t=n.getMenu(),i=t.getContext(),s="";return i.id&&this.getParentId(i.id)&&(s="folder"===n.getItem(i.id).type?"folder":"file"),t.filter(function(e){var t=!0;return e.batch&&(t=s?e.batch==s||"item"==e.batch:"empty"==e.batch),n.config.menuFilter&&(t=t&&n.config.menuFilter(e)),t}),this.select(e),jeeplus.UIManager.setFocus(this),0<t.count()})),l.attachEvent("onBeforeEditStop",function(e,t){return n.callEvent("onBeforeEditStop",[t.id,e,t,l])}),l.attachEvent("onAfterEditStop",function(e,t){n.callEvent("onAfterEditStop",[t.id,e,t,l])&&n.renameFile(t.id,e.value)}),l.attachEvent("onBeforeDrag",function(e,t){return!n.config.readonly&&n.callEvent("onBeforeDrag",[e,t])}),l.attachEvent("onBeforeDragIn",function(e,t){return!n.config.readonly&&n.callEvent("onBeforeDragIn",[e,t])}),l.attachEvent("onBeforeDrop",function(e,t){return n.callEvent("onBeforeDrop",[e,t])&&e.from&&(n.moveFile(e.source,e.target),n.callEvent("onAfterDrop",[e,t])),!1});var e=function(){l&&jeeplus.UIManager.setFocus(l)};n.attachEvent("onAfterBack",e),n.attachEvent("onAfterForward",e),n.attachEvent("onAfterLevelUp",e),n.attachEvent("onAfterPathClick",e),n.config.readonly&&(l.define("drag",!1),l.define("editable",!1))}}(e)}),{width:251,view:"filetree",id:"tree",select:!0,filterMode:{showSubItems:!1,openParents:!1},type:"FileTree",navigation:!0,editor:"text",editable:!0,editaction:!1,drag:!0,tabFocus:!0,onContext:{}}}},function(e,t){"use strict";t.__esModule=!0,t.init=function(e){return e.attachEvent("onComponentInit",function(){return function(e){e.$$("up")&&e.$$("up").attachEvent("onItemClick",function(){e.callEvent("onBeforeLevelUp",[])&&(e.levelUp(),e.callEvent("onAfterLevelUp",[]))})}(e)}),{view:"button",type:"htmlbutton",css:"jeeplus_fmanager_up",label:'<div class="jeeplus_fmanager_bar_icon "></div>',width:37,tooltip:jeeplus.i18n.filemanager.levelUp}}},function(e,t,i){"use strict";function s(e){return e?{view:"uploader",css:"jeeplus_upload_select_ie",type:"iconButton",icon:"check",label:jeeplus.i18n.filemanager.select,formData:{action:"upload"},urlData:{}}:{view:"uploader",apiOnly:!0,formData:{action:"upload"},urlData:{}}}function n(i){var s=a(i);if(s){s.config.upload=i.config.handlers.upload;var e=i.config.modes;if(e&&!i.config.readonly)for(var t=0;t<e.length;t++)i.$$(e[t])&&s.addDropZone(i.$$(e[t]).$view);s.attachEvent("onBeforeFileAdd",function(e){var t=""+function(e){return e._uploaderFolder||e.getCursor()}(i);return s.config.formData.target=t,s.config.urlData.target=t,s.config.upload=i.config.handlers.upload,i.callEvent("onBeforeFileUpload",[e])}),s.attachEvent("onAfterFileAdd",function(e){i._uploaderFolder=null,e.oldId=e.id,i.add({id:e.id,value:e.name,type:e.type,size:e.size,date:Math.round((new Date).valueOf()/1e3)},-1,s.config.formData.target),i.config.uploadProgress&&i.showProgress(i.config.uploadProgress),i._refreshActiveFolder()}),s.attachEvent("onUploadComplete",function(e){i._uploadPopup&&(i.getMenu().hide(),i._uploadPopup.hide()),i.hideProgress(),i.callEvent("onAfterFileUpload",[e])}),s.attachEvent("onFileUpload",function(e){e.oldId&&i.data.changeId(e.oldId,e.id),e.value&&(i.getItem(e.id).value=e.value),i.getItem(e.id).type=e.type,i._refreshActiveFolder()}),s.attachEvent("onFileUploadError",function(e,t){r.errorHandler(i,t),i.hideProgress()})}}function l(e,t){t||(t=s(e.config.legacyUploader)),e._uploadPopup=jeeplus.ui({view:"popup",padding:0,width:250,body:t}),e._uploader=e._uploadPopup.getBody(),e.attachEvent("onDestruct",function(){e._uploadPopup.destructor()})}function a(e){return e._uploader}t.__esModule=!0,t.init=function(e){var t=e.config.legacyUploader,i=s(t);i&&(t?l(e,jeeplus.copy(i)):(e._uploader=jeeplus.ui(i),e.attachEvent("onDestruct",function(){e._uploader.destructor()}))),n(e)},t.getUploader=a,t.uploadFile=function(e,t,i){e.data.branch[t]||"folder"==e.getItem(t).type||(t=e.getParentId(t)),e._uploaderFolder=t,e._uploadPopup?(e._uploadPopup.destructor(),l(e),n(e),e._uploadPopup.show(i,{x:20,y:5})):e._uploader&&e._uploader.fileDialog()};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(24))}]);